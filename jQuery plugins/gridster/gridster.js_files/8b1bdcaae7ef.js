/*

 jQuery Tools @VERSION Tooltip - UI essentials

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tooltip/

 Since: November 2008
 Date: @DATE

 jQuery Tools @VERSION / Tooltip Dynamic Positioning

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tooltip/dynamic.html

 Since: July 2009
 Date: @DATE

 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE
 MIT License - http://www.opensource.org/licenses/mit-license.php

 For usage and examples, visit:
 http://timeago.yarp.com/

 Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
*/
var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(e){"string"==typeof e&&(e=document.getElementById(e));e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e);this.className+=" "+e},e.removeClass=function(e){for(var h=this.className.split(/\s+/),f=-1,b=0;b<h.length;b++)h[b]==e&&(f=b,b=h.length);-1<f&&(h.splice(f,1),this.className=h.join(" "));return this},e.hasClass=
function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))});return e},setMoviePath:function(e){this.moviePath=e},dispatch:function(e,k,h){(e=this.clients[e])&&e.receiveEvent(k,h)},register:function(e,k){this.clients[e]=k},getDOMObjectPosition:function(e,k){for(var h={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};e&&e!=k;)h.left+=e.offsetLeft,h.top+=e.offsetTop,e=e.offsetParent;return h},Client:function(e){this.handlers={};this.id=ZeroClipboard.nextId++;
this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);e&&this.glue(e)}};
ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(e,k,h){this.domElement=ZeroClipboard.$(e);e=99;this.domElement.style.zIndex&&(e=parseInt(this.domElement.style.zIndex,10)+1);"string"==typeof k?k=ZeroClipboard.$(k):"undefined"==typeof k&&(k=document.getElementsByTagName("body")[0]);var f=ZeroClipboard.getDOMObjectPosition(this.domElement,k);f.width=h.width||f.width;f.height=h.height||f.height;this.div=document.createElement("div");
var b=this.div.style;b.position="absolute";b.left=""+f.left+"px";b.top=""+f.top+"px";b.width=""+f.width+"px";b.height=""+f.height+"px";b.zIndex=e;if("object"==typeof h)for(addedStyle in h)b[addedStyle]=h[addedStyle];k.appendChild(this.div);this.div.innerHTML=this.getHTML(f.width,f.height)},getHTML:function(e,k){var h="",f="id="+this.id+"&width="+e+"&height="+k;if(navigator.userAgent.match(/MSIE/))var b=location.href.match(/^https/i)?"https://":"http://",h=h+('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+
b+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+k+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+f+'"/><param name="wmode" value="transparent"/></object>');
else h+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+k+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+f+'" wmode="transparent" />';return h},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&
this.div){this.hide();this.div.innerHTML="";var e=document.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(k){}this.div=this.domElement=null}},reposition:function(e){e&&((this.domElement=ZeroClipboard.$(e))||this.hide());if(this.domElement&&this.div){e=ZeroClipboard.getDOMObjectPosition(this.domElement);var k=this.div.style;k.left=""+e.left+"px";k.top=""+e.top+"px"}},setText:function(e){this.clipText=e;this.ready&&this.movie.setText(e)},addEventListener:function(e,k){e=e.toString().toLowerCase().replace(/^on/,
"");this.handlers[e]||(this.handlers[e]=[]);this.handlers[e].push(k)},setHandCursor:function(e){this.handCursorEnabled=e;this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,k){e=e.toString().toLowerCase().replace(/^on/,"");switch(e){case "load":this.movie=document.getElementById(this.movieId);if(!this.movie){var h=this;setTimeout(function(){h.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){h=
this;setTimeout(function(){h.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.setText(this.clipText);this.movie.setHandCursor(this.handCursorEnabled);break;case "mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),
this.domElement.removeClass("hover"));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var f=0,b=this.handlers[e].length;f<b;f++){var g=this.handlers[e][f];if("function"==typeof g)g(this,k);else if("object"==typeof g&&2==g.length)g[0][g[1]](this,k);else if("string"==typeof g)window[g](this,k)}}};
(function(e){var k=/[\.\/]/,h=function(){},f=function(a,d){return a-d},b,g,a={n:{}},d=function(a,e){a=String(a);var h=g,k=Array.prototype.slice.call(arguments,2),m=d.listeners(a),t=0,u,x=[],y={},B=[],F=b;b=a;for(var C=g=0,K=m.length;C<K;C++)"zIndex"in m[C]&&(x.push(m[C].zIndex),0>m[C].zIndex&&(y[m[C].zIndex]=m[C]));for(x.sort(f);0>x[t];)if(u=y[x[t++]],B.push(u.apply(e,k)),g)return g=h,B;for(C=0;C<K;C++)if(u=m[C],"zIndex"in u)if(u.zIndex==x[t]){B.push(u.apply(e,k));if(g)break;do if(t++,(u=y[x[t]])&&
B.push(u.apply(e,k)),g)break;while(u)}else y[u.zIndex]=u;else if(B.push(u.apply(e,k)),g)break;g=h;b=F;return B.length?B:null};d._events=a;d.listeners=function(d){d=d.split(k);var b=a,e,f,g,h,u,x,y,B=[b],F=[];g=0;for(h=d.length;g<h;g++){y=[];u=0;for(x=B.length;u<x;u++)for(b=B[u].n,e=[b[d[g]],b["*"]],f=2;f--;)if(b=e[f])y.push(b),F=F.concat(b.f||[]);B=y}return F};d.on=function(d,b){d=String(d);if("function"!=typeof b)return function(){};for(var e=d.split(k),f=a,g=0,t=e.length;g<t;g++)f=f.n,f=f.hasOwnProperty(e[g])&&
f[e[g]]||(f[e[g]]={n:{}});f.f=f.f||[];g=0;for(t=f.f.length;g<t;g++)if(f.f[g]==b)return h;f.f.push(b);return function(a){+a==+a&&(b.zIndex=+a)}};d.f=function(a){var b=[].slice.call(arguments,1);return function(){d.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}};d.stop=function(){g=1};d.nt=function(a){return a?(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(b):b};d.nts=function(){return b.split(k)};d.off=d.unbind=function(b,e){if(b){var f=b.split(k),g,h,t,u,x,y,B=[a];u=0;for(x=
f.length;u<x;u++)for(y=0;y<B.length;y+=t.length-2){t=[y,1];g=B[y].n;if("*"!=f[u])g[f[u]]&&t.push(g[f[u]]);else for(h in g)g.hasOwnProperty(h)&&t.push(g[h]);B.splice.apply(B,t)}u=0;for(x=B.length;u<x;u++)for(g=B[u];g.n;){if(e){if(g.f){y=0;for(f=g.f.length;y<f;y++)if(g.f[y]==e){g.f.splice(y,1);break}!g.f.length&&delete g.f}for(h in g.n)if(g.n.hasOwnProperty(h)&&g.n[h].f){t=g.n[h].f;y=0;for(f=t.length;y<f;y++)if(t[y]==e){t.splice(y,1);break}!t.length&&delete g.n[h].f}}else for(h in delete g.f,g.n)g.n.hasOwnProperty(h)&&
g.n[h].f&&delete g.n[h].f;g=g.n}}else d._events=a={n:{}}};d.once=function(a,b){var e=function(){d.unbind(a,e);return b.apply(this,arguments)};return d.on(a,e)};d.version="0.4.2";d.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=d:"undefined"!=typeof define?define("eve",[],function(){return d}):e.eve=d})(this);
(function(e,k){"function"===typeof define&&define.amd?define("raphael",["eve"],k):e.Raphael=k(e.eve)})(this,function(e){function k(a){if(k.is(a,"function"))return x?a():e.on("raphael.DOMload",a);if(k.is(a,R))return k._engine.create[A](k,a.splice(0,3+k.is(a[0],S))).add(a);var d=Array.prototype.slice.call(arguments,0);if(k.is(d[d.length-1],"function")){var b=d.pop();return x?b.call(k._engine.create[A](k,d)):e.on("raphael.DOMload",function(){b.call(k._engine.create[A](k,d))})}return k._engine.create[A](k,
arguments)}function h(a){if(Object(a)!==a)return a;var d=new a.constructor,b;for(b in a)a.hasOwnProperty(b)&&(d[b]=h(a[b]));return d}function f(a,d,b){function e(){var l=Array.prototype.slice.call(arguments,0),f=l.join("\u2400"),g=e.cache=e.cache||{},h=e.count=e.count||[];if(g.hasOwnProperty(f)){a:for(var l=h,h=f,k=0,q=l.length;k<q;k++)if(l[k]===h){l.push(l.splice(k,1)[0]);break a}return b?b(g[f]):g[f]}1E3<=h.length&&delete g[h.shift()];h.push(f);g[f]=a[A](d,l);return b?b(g[f]):g[f]}return e}function b(){return this.hex}
function g(a,d){for(var b=[],e=0,l=a.length;l-2*!d>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];d?e?l-4==e?f[3]={x:+a[0],y:+a[1]}:l-2==e&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[l-2],y:+a[l-1]}:l-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});b.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return b}function a(a,d,b,e,l,f,g,h,k){null==k&&
(k=1);k=(1<k?1:0>k?0:k)/2;for(var q=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],v=0,t=0;12>t;t++)var w=k*q[t]+k,u=w*(w*(-3*a+9*b-9*l+3*g)+6*a-12*b+6*l)-3*a+3*b,w=w*(w*(-3*d+9*e-9*f+3*h)+6*d-12*e+6*f)-3*d+3*e,v=v+m[t]*N.sqrt(u*u+w*w);return k*v}function d(d,b,e,l,f,g,h,k,q){if(!(0>q||a(d,b,e,l,f,g,h,k)<q)){var m=.5,v=1-m,t;for(t=a(d,b,e,l,f,g,h,k,v);.01<U(t-q);)m/=2,v+=(t<q?1:-1)*m,t=a(d,
b,e,l,f,g,h,k,v);return v}}function l(d,b,e){d=k._path2curve(d);b=k._path2curve(b);for(var l,f,g,h,q,m,v,t,w,u,x=e?0:[],A=0,y=d.length;A<y;A++)if(w=d[A],"M"==w[0])l=q=w[1],f=m=w[2];else{"C"==w[0]?(w=[l,f].concat(w.slice(1)),l=w[6],f=w[7]):(w=[l,f,l,f,q,m,q,m],l=q,f=m);for(var aa=0,T=b.length;aa<T;aa++)if(u=b[aa],"M"==u[0])g=v=u[1],h=t=u[2];else{"C"==u[0]?(u=[g,h].concat(u.slice(1)),g=u[6],h=u[7]):(u=[g,h,g,h,v,t,v,t],g=v,h=t);var Q;var H=w,I=u;Q=e;var S=k.bezierBBox(H),E=k.bezierBBox(I);if(k.isBBoxIntersect(S,
E)){for(var S=a.apply(0,H),E=a.apply(0,I),S=~~(S/5),E=~~(E/5),P=[],O=[],B={},R=Q?0:[],z=0;z<S+1;z++){var C=k.findDotsAtSegment.apply(k,H.concat(z/S));P.push({x:C.x,y:C.y,t:z/S})}for(z=0;z<E+1;z++)C=k.findDotsAtSegment.apply(k,I.concat(z/E)),O.push({x:C.x,y:C.y,t:z/E});for(z=0;z<S;z++)for(H=0;H<E;H++){var N=P[z],Y=P[z+1],I=O[H],C=O[H+1],W=.001>U(Y.x-N.x)?"y":"x",F=.001>U(C.x-I.x)?"y":"x",X;X=N.x;var Z=N.y,G=Y.x,K=Y.y,ea=I.x,Ia=I.y,Ja=C.x,ha=C.y;if(n(X,G)<M(ea,Ja)||M(X,G)>n(ea,Ja)||n(Z,K)<M(Ia,ha)||
M(Z,K)>n(Ia,ha))X=void 0;else{var V=(X*K-Z*G)*(ea-Ja)-(X-G)*(ea*ha-Ia*Ja),J=(X*K-Z*G)*(Ia-ha)-(Z-K)*(ea*ha-Ia*Ja),fa=(X-G)*(Ia-ha)-(Z-K)*(ea-Ja);if(fa){var V=V/fa,J=J/fa,fa=+V.toFixed(2),ca=+J.toFixed(2);X=fa<+M(X,G).toFixed(2)||fa>+n(X,G).toFixed(2)||fa<+M(ea,Ja).toFixed(2)||fa>+n(ea,Ja).toFixed(2)||ca<+M(Z,K).toFixed(2)||ca>+n(Z,K).toFixed(2)||ca<+M(Ia,ha).toFixed(2)||ca>+n(Ia,ha).toFixed(2)?void 0:{x:V,y:J}}else X=void 0}X&&B[X.x.toFixed(4)]!=X.y.toFixed(4)&&(B[X.x.toFixed(4)]=X.y.toFixed(4),N=
N.t+U((X[W]-N[W])/(Y[W]-N[W]))*(Y.t-N.t),I=I.t+U((X[F]-I[F])/(C[F]-I[F]))*(C.t-I.t),0<=N&&1>=N&&0<=I&&1>=I&&(Q?R++:R.push({x:X.x,y:X.y,t1:N,t2:I})))}Q=R}else Q=Q?0:[];if(e)x+=Q;else{S=0;for(E=Q.length;S<E;S++)Q[S].segment1=A,Q[S].segment2=aa,Q[S].bez1=w,Q[S].bez2=u;x=x.concat(Q)}}}return x}function q(a,d,b,e,l,f){null!=a?(this.a=+a,this.b=+d,this.c=+b,this.d=+e,this.e=+l,this.f=+f):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}function v(){return this.x+" "+this.y+" "+this.width+" \u00d7 "+
this.height}function w(a,d,b,e,l,f){function g(a,d){var b,e,l,f;l=a;for(e=0;8>e;e++){f=((q*l+k)*l+h)*l-a;if(U(f)<d)return l;b=(3*q*l+2*k)*l+h;if(1E-6>U(b))break;l-=f/b}b=0;e=1;l=a;if(l<b)return b;if(l>e)return e;for(;b<e;){f=((q*l+k)*l+h)*l;if(U(f-a)<d)break;a>f?b=l:e=l;l=(e-b)/2+b}return l}var h=3*d,k=3*(e-d)-h,q=1-h-k,m=3*b,v=3*(l-b)-m,t=1-m-v;return function(a,d){var b=g(a,d);return((t*b+v)*b+m)*b}(a,1/(200*f))}function m(a,d){var b=[],e={};this.ms=d;this.times=1;if(a){for(var l in a)a.hasOwnProperty(l)&&
(e[V(l)]=a[l],b.push(V(l)));b.sort(Ka)}this.anim=e;this.top=b[b.length-1];this.percents=b}function t(a,d,b,l,f,g){b=V(b);var h,m,v,t,u,n,x=a.ms,A={},H={},I={};if(l)for(n=0,T=ba.length;n<T;n++){var aa=ba[n];if(aa.el.id==d.id&&aa.anim==a){aa.percent!=b?(ba.splice(n,1),v=1):m=aa;d.attr(aa.totalOrigin);break}}else l=+H;n=0;for(var T=a.percents.length;n<T;n++)if(a.percents[n]==b||a.percents[n]>l*a.top){b=a.percents[n];u=a.percents[n-1]||0;x=x/a.top*(b-u);t=a.percents[n+1];h=a.anim[b];break}else l&&d.attr(a.anim[a.percents[n]]);
if(h){if(m)m.initstatus=l,m.start=new Date-m.ms*l;else{for(var Q in h)if(h.hasOwnProperty(Q)&&(la.hasOwnProperty(Q)||d.paper.customAttributes.hasOwnProperty(Q)))switch(A[Q]=d.attr(Q),null==A[Q]&&(A[Q]=sa[Q]),H[Q]=h[Q],la[Q]){case S:I[Q]=(H[Q]-A[Q])/x;break;case "colour":A[Q]=k.getRGB(A[Q]);n=k.getRGB(H[Q]);I[Q]={r:(n.r-A[Q].r)/x,g:(n.g-A[Q].g)/x,b:(n.b-A[Q].b)/x};break;case "path":n=Sa(A[Q],H[Q]);aa=n[1];A[Q]=n[0];I[Q]=[];n=0;for(T=A[Q].length;n<T;n++){I[Q][n]=[0];for(var E=1,P=A[Q][n].length;E<P;E++)I[Q][n][E]=
(aa[n][E]-A[Q][n][E])/x}break;case "transform":n=d._;if(T=Ab(n[Q],H[Q]))for(A[Q]=T.from,H[Q]=T.to,I[Q]=[],I[Q].real=!0,n=0,T=A[Q].length;n<T;n++)for(I[Q][n]=[A[Q][n][0]],E=1,P=A[Q][n].length;E<P;E++)I[Q][n][E]=(H[Q][n][E]-A[Q][n][E])/x;else T=d.matrix||new q,n={_:{transform:n.transform},getBBox:function(){return d.getBBox(1)}},A[Q]=[T.a,T.b,T.c,T.d,T.e,T.f],pb(n,H[Q]),H[Q]=n._.transform,I[Q]=[(n.matrix.a-T.a)/x,(n.matrix.b-T.b)/x,(n.matrix.c-T.c)/x,(n.matrix.d-T.d)/x,(n.matrix.e-T.e)/x,(n.matrix.f-
T.f)/x];break;case "csv":T=O(h[Q]).split(y);aa=O(A[Q]).split(y);if("clip-rect"==Q)for(A[Q]=aa,I[Q]=[],n=aa.length;n--;)I[Q][n]=(T[n]-A[Q][n])/x;H[Q]=T;break;default:for(T=[].concat(h[Q]),aa=[].concat(A[Q]),I[Q]=[],n=d.paper.customAttributes[Q].length;n--;)I[Q][n]=((T[n]||0)-(aa[n]||0))/x}n=h.easing;Q=k.easing_formulas[n];if(!Q)if((Q=O(n).match(ja))&&5==Q.length){var M=Q;Q=function(a){return w(a,+M[1],+M[2],+M[3],+M[4],x)}}else Q=Ta;n=h.start||a.start||+new Date;aa={anim:a,percent:b,timestamp:n,start:n+
(a.del||0),status:0,initstatus:l||0,stop:!1,ms:x,easing:Q,from:A,diff:I,to:H,el:d,callback:h.callback,prev:u,next:t,repeat:g||a.times,origin:d.attr(),totalOrigin:f};ba.push(aa);if(l&&!m&&!v&&(aa.stop=!0,aa.start=new Date-x*l,1==ba.length))return Xa();v&&(aa.start=new Date-aa.ms*l);1==ba.length&&Ya(Xa)}e("raphael.anim.start."+d.id,d,a)}}function u(a){for(var d=0;d<ba.length;d++)ba[d].el.paper==a&&ba.splice(d--,1)}k.version="2.1.0";k.eve=e;var x,y=/[, ]+/,B={circle:1,rect:1,path:1,ellipse:1,text:1,
image:1},F=/\{(\d+)\}/g,C={doc:document,win:window},K=Object.prototype.hasOwnProperty.call(C.win,"Raphael"),z=C.win.Raphael,J=function(){this.ca=this.customAttributes={}},G,A="apply",I="createTouch"in C.doc,O=String,P="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "),E={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},Y=O.prototype.toLowerCase,N=Math,n=N.max,M=N.min,U=N.abs,W=N.pow,H=N.PI,S="number",R="array",X=Object.prototype.toString;
k._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var ea=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,fa={NaN:1,Infinity:1,"-Infinity":1},ja=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ga=N.round,V=parseFloat,ca=parseInt,pa=O.prototype.toUpperCase,
sa=k._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,
target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},la=k._availableAnimAttrs={blur:S,"clip-rect":"csv",cx:S,cy:S,fill:"colour","fill-opacity":S,"font-size":S,height:S,opacity:S,path:"path",r:S,rx:S,ry:S,stroke:"colour","stroke-opacity":S,"stroke-width":S,transform:"transform",width:S,x:S,y:S},qa=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
ia={hs:1,rg:1},Z=/,?([achlmqrstvxz]),?/gi,ha=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
La=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Ma=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig;
k._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/;var xa={},Ka=function(a,d){return V(a)-V(d)},Ua=function(){},Ta=function(a){return a},ma=k._rectPath=function(a,d,b,e,l){return l?[["M",a+l,d],["l",b-2*l,0],["a",l,l,0,0,1,
l,l],["l",0,e-2*l],["a",l,l,0,0,1,-l,l],["l",2*l-b,0],["a",l,l,0,0,1,-l,-l],["l",0,2*l-e],["a",l,l,0,0,1,l,-l],["z"]]:[["M",a,d],["l",b,0],["l",0,e],["l",-b,0],["z"]]},Na=function(a,d,b,e){null==e&&(e=b);return[["M",a,d],["m",0,-e],["a",b,e,0,1,1,0,2*e],["a",b,e,0,1,1,0,-2*e],["z"]]},ua=k._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return Na(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return Na(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return ma(a.x,a.y,
a.width,a.height,a.r)},image:function(a){a=a.attrs;return ma(a.x,a.y,a.width,a.height)},text:function(a){a=a._getBBox();return ma(a.x,a.y,a.width,a.height)},set:function(a){a=a._getBBox();return ma(a.x,a.y,a.width,a.height)}},Ea=k.mapPath=function(a,d){if(!d)return a;var b,e,l,f,g,h,k;a=Sa(a);l=0;for(g=a.length;l<g;l++)for(k=a[l],f=1,h=k.length;f<h;f+=2)b=d.x(k[f],k[f+1]),e=d.y(k[f],k[f+1]),k[f]=b,k[f+1]=e;return a};k._g=C;k.type=C.win.SVGAngle||C.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")?"SVG":"VML";if("VML"==k.type){var za=C.doc.createElement("div"),ra;za.innerHTML='<v:shape adj="1"/>';ra=za.firstChild;ra.style.behavior="url(#default#VML)";if(!ra||"object"!=typeof ra.adj)return k.type="";za=null}k.svg=!(k.vml="VML"==k.type);k._Paper=J;k.fn=G=J.prototype=k.prototype;k._id=0;k._oid=0;k.is=function(a,d){d=Y.call(d);return"finite"==d?!fa.hasOwnProperty(+a):"array"==d?a instanceof Array:"null"==d&&null===a||d==typeof a&&null!==a||"object"==d&&a===Object(a)||"array"==d&&Array.isArray&&
Array.isArray(a)||X.call(a).slice(8,-1).toLowerCase()==d};k.angle=function(a,d,b,e,l,f){return null==l?(a-=b,d-=e,a||d?(180*N.atan2(-d,-a)/H+540)%360:0):k.angle(a,d,l,f)-k.angle(b,e,l,f)};k.rad=function(a){return a%360*H/180};k.deg=function(a){return 180*a/H%360};k.snapTo=function(a,d,b){b=k.is(b,"finite")?b:10;if(k.is(a,R))for(var e=a.length;e--;){if(U(a[e]-d)<=b)return a[e]}else{a=+a;e=d%a;if(e<b)return d-e;if(e>a-b)return d-e+a}return d};k.createUUID=function(a,d){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,
d).toUpperCase()}}(/[xy]/g,function(a){var d=16*N.random()|0;return("x"==a?d:d&3|8).toString(16)});k.setWindow=function(a){e("raphael.setWindow",k,C.win,a);C.win=a;C.doc=C.win.document;k._engine.initWin&&k._engine.initWin(C.win)};var va=function(a){if(k.vml){var d=/^\s+|\s+$/g,b;try{var e=new ActiveXObject("htmlfile");e.write("<body>");e.close();b=e.body}catch(l){b=createPopup().document.body}var g=b.createTextRange();va=f(function(a){try{b.style.color=O(a).replace(d,"");var e=g.queryCommandValue("ForeColor");
return"#"+("000000"+((e&255)<<16|e&65280|(e&16711680)>>>16).toString(16)).slice(-6)}catch(l){return"none"}})}else{var h=C.doc.createElement("i");h.title="Rapha\u00ebl Colour Picker";h.style.display="none";C.doc.body.appendChild(h);va=f(function(a){h.style.color=a;return C.doc.defaultView.getComputedStyle(h,"").getPropertyValue("color")})}return va(a)},Ga=function(){return"hsb("+[this.h,this.s,this.b]+")"},Oa=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ha=function(){return this.hex},Za=function(a,
d,b){null==d&&k.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(b=a.b,d=a.g,a=a.r);null==d&&k.is(a,"string")&&(b=k.getRGB(a),a=b.r,d=b.g,b=b.b);if(1<a||1<d||1<b)a/=255,d/=255,b/=255;return[a,d,b]},Fa=function(a,d,b,e){a*=255;d*=255;b*=255;a={r:a,g:d,b:b,hex:k.rgb(a,d,b),toString:Ha};k.is(e,"finite")&&(a.opacity=e);return a};k.color=function(a){var d;k.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(d=k.hsb2rgb(a),a.r=d.r,a.g=d.g,a.b=d.b,a.hex=d.hex):k.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(d=k.hsl2rgb(a),
a.r=d.r,a.g=d.g,a.b=d.b,a.hex=d.hex):(k.is(a,"string")&&(a=k.getRGB(a)),k.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(d=k.rgb2hsl(a),a.h=d.h,a.s=d.s,a.l=d.l,d=k.rgb2hsb(a),a.v=d.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=Ha;return a};k.hsb2rgb=function(a,d,b,e){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(b=a.b,d=a.s,a=a.h,e=a.o);var l,f,g;a=360*a%360/60;g=b*d;d=g*(1-U(a%2-1));b=l=f=b-g;a=~~a;b+=[g,d,0,0,d,g][a];l+=[d,g,g,d,0,0][a];f+=[0,0,d,g,g,d][a];return Fa(b,l,f,e)};k.hsl2rgb=
function(a,d,b,e){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(b=a.l,d=a.s,a=a.h);if(1<a||1<d||1<b)a/=360,d/=100,b/=100;var l,f,g;a=360*a%360/60;g=2*d*(.5>b?b:1-b);d=g*(1-U(a%2-1));b=l=f=b-g/2;a=~~a;b+=[g,d,0,0,d,g][a];l+=[d,g,g,d,0,0][a];f+=[0,0,d,g,g,d][a];return Fa(b,l,f,e)};k.rgb2hsb=function(a,d,b){b=Za(a,d,b);a=b[0];d=b[1];b=b[2];var e,l;e=n(a,d,b);l=e-M(a,d,b);a=((0==l?null:e==a?(d-b)/l:e==d?(b-a)/l+2:(a-d)/l+4)+360)%6*60/360;return{h:a,s:0==l?0:l/e,b:e,toString:Ga}};k.rgb2hsl=function(a,
d,b){b=Za(a,d,b);a=b[0];d=b[1];b=b[2];var e,l,f;e=n(a,d,b);l=M(a,d,b);f=e-l;a=((0==f?null:e==a?(d-b)/f:e==d?(b-a)/f+2:(a-d)/f+4)+360)%6*60/360;e=(e+l)/2;return{h:a,s:0==f?0:.5>e?f/(2*e):f/(2-2*e),l:e,toString:Oa}};k._path2string=function(){return this.join(",").replace(Z,"$1")};k._preload=function(a,d){var b=C.doc.createElement("img");b.style.cssText="position:absolute;left:-9999em;top:-9999em";b.onload=function(){d.call(this);this.onload=null;C.doc.body.removeChild(this)};b.onerror=function(){C.doc.body.removeChild(this)};
C.doc.body.appendChild(b);b.src=a};k.getRGB=f(function(a){if(!a||(a=O(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:b};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:b};!ia.hasOwnProperty(a.toLowerCase().substring(0,2))&&"#"!=a.charAt()&&(a=va(a));var d,e,l,f,g;if(a=a.match(ea)){a[2]&&(l=ca(a[2].substring(5),16),e=ca(a[2].substring(3,5),16),d=ca(a[2].substring(1,3),16));a[3]&&(l=ca((g=a[3].charAt(3))+g,16),e=ca((g=a[3].charAt(2))+g,16),d=ca((g=a[3].charAt(1))+g,16));
a[4]&&(g=a[4].split(qa),d=V(g[0]),"%"==g[0].slice(-1)&&(d*=2.55),e=V(g[1]),"%"==g[1].slice(-1)&&(e*=2.55),l=V(g[2]),"%"==g[2].slice(-1)&&(l*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(f=V(g[3])),g[3]&&"%"==g[3].slice(-1)&&(f/=100));if(a[5])return g=a[5].split(qa),d=V(g[0]),"%"==g[0].slice(-1)&&(d*=2.55),e=V(g[1]),"%"==g[1].slice(-1)&&(e*=2.55),l=V(g[2]),"%"==g[2].slice(-1)&&(l*=2.55),"deg"!=g[0].slice(-3)&&"\u00b0"!=g[0].slice(-1)||(d/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(f=V(g[3])),g[3]&&
"%"==g[3].slice(-1)&&(f/=100),k.hsb2rgb(d,e,l,f);if(a[6])return g=a[6].split(qa),d=V(g[0]),"%"==g[0].slice(-1)&&(d*=2.55),e=V(g[1]),"%"==g[1].slice(-1)&&(e*=2.55),l=V(g[2]),"%"==g[2].slice(-1)&&(l*=2.55),"deg"!=g[0].slice(-3)&&"\u00b0"!=g[0].slice(-1)||(d/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(f=V(g[3])),g[3]&&"%"==g[3].slice(-1)&&(f/=100),k.hsl2rgb(d,e,l,f);a={r:d,g:e,b:l,toString:b};a.hex="#"+(16777216|l|e<<8|d<<16).toString(16).slice(1);k.is(f,"finite")&&(a.opacity=f);return a}return{r:-1,
g:-1,b:-1,hex:"none",error:1,toString:b}},k);k.hsb=f(function(a,d,b){return k.hsb2rgb(a,d,b).hex});k.hsl=f(function(a,d,b){return k.hsl2rgb(a,d,b).hex});k.rgb=f(function(a,d,b){return"#"+(16777216|b|d<<8|a<<16).toString(16).slice(1)});k.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75};var d=this.hsb2rgb(a.h,a.s,a.b);a.h+=.075;1<a.h&&(a.h=0,a.s-=.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return d.hex};k.getColor.reset=function(){delete this.start};k.parsePathString=
function(a){if(!a)return null;var d=Aa(a);if(d.arr)return ta(d.arr);var b={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];k.is(a,R)&&k.is(a[0],R)&&(e=ta(a));e.length||O(a).replace(ha,function(a,d,l){var f=[];a=d.toLowerCase();l.replace(Ma,function(a,d){d&&f.push(+d)});"m"==a&&2<f.length&&(e.push([d].concat(f.splice(0,2))),a="l",d="m"==d?"l":"L");if("r"==a)e.push([d].concat(f));else for(;f.length>=b[a]&&(e.push([d].concat(f.splice(0,b[a]))),b[a]););});e.toString=k._path2string;d.arr=ta(e);return e};
k.parseTransformString=f(function(a){if(!a)return null;var d=[];k.is(a,R)&&k.is(a[0],R)&&(d=ta(a));d.length||O(a).replace(La,function(a,b,e){var l=[];Y.call(b);e.replace(Ma,function(a,d){d&&l.push(+d)});d.push([b].concat(l))});d.toString=k._path2string;return d});var Aa=function(a){var d=Aa.ps=Aa.ps||{};d[a]?d[a].sleep=100:d[a]={sleep:100};setTimeout(function(){for(var b in d)d.hasOwnProperty(b)&&b!=a&&(d[b].sleep--,!d[b].sleep&&delete d[b])});return d[a]};k.findDotsAtSegment=function(a,d,b,e,l,f,
g,h,k){var q=1-k,m=W(q,3),v=W(q,2),t=k*k,w=t*k,u=m*a+3*v*k*b+3*q*k*k*l+w*g,m=m*d+3*v*k*e+3*q*k*k*f+w*h,v=a+2*k*(b-a)+t*(l-2*b+a),w=d+2*k*(e-d)+t*(f-2*e+d),n=b+2*k*(l-b)+t*(g-2*l+b),t=e+2*k*(f-e)+t*(h-2*f+e);a=q*a+k*b;d=q*d+k*e;l=q*l+k*g;f=q*f+k*h;h=90-180*N.atan2(v-n,w-t)/H;(v>n||w<t)&&(h+=180);return{x:u,y:m,m:{x:v,y:w},n:{x:n,y:t},start:{x:a,y:d},end:{x:l,y:f},alpha:h}};k.bezierBBox=function(a,d,b,e,l,f,g,h){k.is(a,"array")||(a=[a,d,b,e,l,f,g,h]);a=qb.apply(null,a);return{x:a.min.x,y:a.min.y,x2:a.max.x,
y2:a.max.y,width:a.max.x-a.min.x,height:a.max.y-a.min.y}};k.isPointInsideBBox=function(a,d,b){return d>=a.x&&d<=a.x2&&b>=a.y&&b<=a.y2};k.isBBoxIntersect=function(a,d){var b=k.isPointInsideBBox;return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&&(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)};k.pathIntersection=function(a,d){return l(a,d)};k.pathIntersectionNumber=function(a,d){return l(a,d,1)};
k.isPointInsidePath=function(a,d,b){var e=k.pathBBox(a);return k.isPointInsideBBox(e,d,b)&&1==l(a,[["M",d,b],["H",e.x2+10]],1)%2};k._removedFactory=function(a){return function(){e("raphael.log",null,"Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object",a)}};var db=k.pathBBox=function(a){var d=Aa(a);if(d.bbox)return h(d.bbox);if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=Sa(a);for(var b=0,e=0,l=[],f=[],g,k=0,q=a.length;k<q;k++)g=a[k],"M"==g[0]?(b=g[1],e=g[2],l.push(b),
f.push(e)):(b=qb(b,e,g[1],g[2],g[3],g[4],g[5],g[6]),l=l.concat(b.min.x,b.max.x),f=f.concat(b.min.y,b.max.y),b=g[5],e=g[6]);a=M[A](0,l);g=M[A](0,f);l=n[A](0,l);f=n[A](0,f);k=l-a;q=f-g;f={x:a,y:g,x2:l,y2:f,width:k,height:q,cx:a+k/2,cy:g+q/2};d.bbox=h(f);return f},ta=function(a){a=h(a);a.toString=k._path2string;return a},rb=k._pathToRelative=function(a){var d=Aa(a);if(d.rel)return ta(d.rel);k.is(a,R)&&k.is(a&&a[0],R)||(a=k.parsePathString(a));var b=[],e=0,l=0,f=0,g=0,h=0;"M"==a[0][0]&&(e=a[0][1],l=a[0][2],
f=e,g=l,h++,b.push(["M",e,l]));for(var q=a.length;h<q;h++){var m=b[h]=[],v=a[h];if(v[0]!=Y.call(v[0]))switch(m[0]=Y.call(v[0]),m[0]){case "a":m[1]=v[1];m[2]=v[2];m[3]=v[3];m[4]=v[4];m[5]=v[5];m[6]=+(v[6]-e).toFixed(3);m[7]=+(v[7]-l).toFixed(3);break;case "v":m[1]=+(v[1]-l).toFixed(3);break;case "m":f=v[1],g=v[2];default:for(var t=1,w=v.length;t<w;t++)m[t]=+(v[t]-(t%2?e:l)).toFixed(3)}else for(b[h]=[],"m"==v[0]&&(f=v[1]+e,g=v[2]+l),m=0,t=v.length;m<t;m++)b[h][m]=v[m];v=b[h].length;switch(b[h][0]){case "z":e=
f;l=g;break;case "h":e+=+b[h][v-1];break;case "v":l+=+b[h][v-1];break;default:e+=+b[h][v-2],l+=+b[h][v-1]}}b.toString=k._path2string;d.rel=ta(b);return b},eb=k._pathToAbsolute=function(a){var d=Aa(a);if(d.abs)return ta(d.abs);k.is(a,R)&&k.is(a&&a[0],R)||(a=k.parsePathString(a));if(!a||!a.length)return[["M",0,0]];var b=[],e=0,l=0,f=0,h=0,q=0;"M"==a[0][0]&&(e=+a[0][1],l=+a[0][2],f=e,h=l,q++,b[0]=["M",e,l]);for(var m=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),v,
t=q,w=a.length;t<w;t++){b.push(q=[]);v=a[t];if(v[0]!=pa.call(v[0]))switch(q[0]=pa.call(v[0]),q[0]){case "A":q[1]=v[1];q[2]=v[2];q[3]=v[3];q[4]=v[4];q[5]=v[5];q[6]=+(v[6]+e);q[7]=+(v[7]+l);break;case "V":q[1]=+v[1]+l;break;case "H":q[1]=+v[1]+e;break;case "R":for(var u=[e,l].concat(v.slice(1)),n=2,x=u.length;n<x;n++)u[n]=+u[n]+e,u[++n]=+u[n]+l;b.pop();b=b.concat(g(u,m));break;case "M":f=+v[1]+e,h=+v[2]+l;default:for(n=1,x=v.length;n<x;n++)q[n]=+v[n]+(n%2?e:l)}else if("R"==v[0])u=[e,l].concat(v.slice(1)),
b.pop(),b=b.concat(g(u,m)),q=["R"].concat(v.slice(-2));else for(u=0,n=v.length;u<n;u++)q[u]=v[u];switch(q[0]){case "Z":e=f;l=h;break;case "H":e=q[1];break;case "V":l=q[1];break;case "M":f=q[q.length-2],h=q[q.length-1];default:e=q[q.length-2],l=q[q.length-1]}}b.toString=k._path2string;d.abs=ta(b);return b},$a=function(a,d,b,e){return[a,d,b,e,b,e]},na=function(a,d,b,e,l,f){var g=1/3,h=2/3;return[g*a+h*b,g*d+h*e,g*l+h*b,g*f+h*e,l,f]},ab=function(a,d,b,e,l,g,h,q,k,m){var v=120*H/180,t=H/180*(+l||0),w=
[],u,n=f(function(a,d,b){var e=a*N.cos(b)-d*N.sin(b);a=a*N.sin(b)+d*N.cos(b);return{x:e,y:a}});if(m)T=m[0],u=m[1],g=m[2],x=m[3];else{u=n(a,d,-t);a=u.x;d=u.y;u=n(q,k,-t);q=u.x;k=u.y;N.cos(H/180*l);N.sin(H/180*l);u=(a-q)/2;T=(d-k)/2;x=u*u/(b*b)+T*T/(e*e);1<x&&(x=N.sqrt(x),b*=x,e*=x);var x=b*b,aa=e*e,x=(g==h?-1:1)*N.sqrt(U((x*aa-x*T*T-aa*u*u)/(x*T*T+aa*u*u)));g=x*b*T/e+(a+q)/2;var x=x*-e*u/b+(d+k)/2,T=N.asin(((d-x)/e).toFixed(9));u=N.asin(((k-x)/e).toFixed(9));T=a<g?H-T:T;u=q<g?H-u:u;0>T&&(T=2*H+T);
0>u&&(u=2*H+u);h&&T>u&&(T-=2*H);!h&&u>T&&(u-=2*H)}if(U(u-T)>v){var w=u,aa=q,A=k;u=T+v*(h&&u>T?1:-1);q=g+b*N.cos(u);k=x+e*N.sin(u);w=ab(q,k,b,e,l,0,h,aa,A,[u,w,g,x])}g=u-T;l=N.cos(T);v=N.sin(T);h=N.cos(u);u=N.sin(u);g=N.tan(g/4);b=4/3*b*g;g*=4/3*e;e=[a,d];a=[a+b*v,d-g*l];d=[q+b*u,k-g*h];q=[q,k];a[0]=2*e[0]-a[0];a[1]=2*e[1]-a[1];if(m)return[a,d,q].concat(w);w=[a,d,q].concat(w).join().split(",");m=[];q=0;for(k=w.length;q<k;q++)m[q]=q%2?n(w[q-1],w[q],t).y:n(w[q],w[q+1],t).x;return m},Pa=function(a,d,
b,e,l,f,g,h,q){var k=1-q;return{x:W(k,3)*a+3*W(k,2)*q*b+3*k*q*q*l+W(q,3)*g,y:W(k,3)*d+3*W(k,2)*q*e+3*k*q*q*f+W(q,3)*h}},qb=f(function(a,d,b,e,l,f,g,h){var q=l-2*b+a-(g-2*l+b),k=2*(b-a)-2*(l-b),m=a-b,v=(-k+N.sqrt(k*k-4*q*m))/2/q,q=(-k-N.sqrt(k*k-4*q*m))/2/q,t=[d,h],w=[a,g];"1e12"<U(v)&&(v=.5);"1e12"<U(q)&&(q=.5);0<v&&1>v&&(v=Pa(a,d,b,e,l,f,g,h,v),w.push(v.x),t.push(v.y));0<q&&1>q&&(v=Pa(a,d,b,e,l,f,g,h,q),w.push(v.x),t.push(v.y));q=f-2*e+d-(h-2*f+e);k=2*(e-d)-2*(f-e);m=d-e;v=(-k+N.sqrt(k*k-4*q*m))/
2/q;q=(-k-N.sqrt(k*k-4*q*m))/2/q;"1e12"<U(v)&&(v=.5);"1e12"<U(q)&&(q=.5);0<v&&1>v&&(v=Pa(a,d,b,e,l,f,g,h,v),w.push(v.x),t.push(v.y));0<q&&1>q&&(v=Pa(a,d,b,e,l,f,g,h,q),w.push(v.x),t.push(v.y));return{min:{x:M[A](0,w),y:M[A](0,t)},max:{x:n[A](0,w),y:n[A](0,t)}}}),Sa=k._path2curve=f(function(a,d){var b=!d&&Aa(a);if(!d&&b.curve)return ta(b.curve);var e=eb(a),l=d&&eb(d),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(a,d){var b,e;if(!a)return["C",
d.x,d.y,d.x,d.y,d.x,d.y];a[0]in{T:1,Q:1}||(d.qx=d.qy=null);switch(a[0]){case "M":d.X=a[1];d.Y=a[2];break;case "A":a=["C"].concat(ab[A](0,[d.x,d.y].concat(a.slice(1))));break;case "S":b=d.x+(d.x-(d.bx||d.x));e=d.y+(d.y-(d.by||d.y));a=["C",b,e].concat(a.slice(1));break;case "T":d.qx=d.x+(d.x-(d.qx||d.x));d.qy=d.y+(d.y-(d.qy||d.y));a=["C"].concat(na(d.x,d.y,d.qx,d.qy,a[1],a[2]));break;case "Q":d.qx=a[1];d.qy=a[2];a=["C"].concat(na(d.x,d.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat($a(d.x,d.y,
a[1],a[2]));break;case "H":a=["C"].concat($a(d.x,d.y,a[1],d.y));break;case "V":a=["C"].concat($a(d.x,d.y,d.x,a[1]));break;case "Z":a=["C"].concat($a(d.x,d.y,d.X,d.Y))}return a},q=function(a,d){if(7<a[d].length){a[d].shift();for(var b=a[d];b.length;)a.splice(d++,0,["C"].concat(b.splice(0,6)));a.splice(d,1);v=n(e.length,l&&l.length||0)}},k=function(a,d,b,f,g){a&&d&&"M"==a[g][0]&&"M"!=d[g][0]&&(d.splice(g,0,["M",f.x,f.y]),b.bx=0,b.by=0,b.x=a[g][1],b.y=a[g][2],v=n(e.length,l&&l.length||0))},m=0,v=n(e.length,
l&&l.length||0);for(;m<v;m++){e[m]=h(e[m],f);q(e,m);l&&(l[m]=h(l[m],g));l&&q(l,m);k(e,l,f,g,m);k(l,e,g,f,m);var t=e[m],w=l&&l[m],u=t.length,x=l&&w.length;f.x=t[u-2];f.y=t[u-1];f.bx=V(t[u-4])||f.x;f.by=V(t[u-3])||f.y;g.bx=l&&(V(w[x-4])||g.x);g.by=l&&(V(w[x-3])||g.y);g.x=l&&w[x-2];g.y=l&&w[x-1]}l||(b.curve=ta(e));return l?[e,l]:e},null,ta);k._parseDots=f(function(a){for(var d=[],b=0,e=a.length;b<e;b++){var l={},f=a[b].match(/^([^:]*):?([\d\.]*)/);l.color=k.getRGB(f[1]);if(l.color.error)return null;
l.color=l.color.hex;f[2]&&(l.offset=f[2]+"%");d.push(l)}b=1;for(e=d.length-1;b<e;b++)if(!d[b].offset){a=V(d[b-1].offset||0);f=0;for(l=b+1;l<e;l++)if(d[l].offset){f=d[l].offset;break}f||(f=100,l=e);f=V(f);for(f=(f-a)/(l-b+1);b<l;b++)a+=f,d[b].offset=a+"%"}return d});var bb=k._tear=function(a,d){a==d.top&&(d.top=a.prev);a==d.bottom&&(d.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};k._tofront=function(a,d){d.top!==a&&(bb(a,d),a.next=null,a.prev=d.top,d.top.next=a,d.top=a)};
k._toback=function(a,d){d.bottom!==a&&(bb(a,d),a.next=d.bottom,a.prev=null,d.bottom.prev=a,d.bottom=a)};k._insertafter=function(a,d,b){bb(a,b);d==b.top&&(b.top=a);d.next&&(d.next.prev=a);a.next=d.next;a.prev=d;d.next=a};k._insertbefore=function(a,d,b){bb(a,b);d==b.bottom&&(b.bottom=a);d.prev&&(d.prev.next=a);a.prev=d.prev;d.prev=a;a.next=d};var fb=k.toMatrix=function(a,d){var b=db(a),e={_:{transform:""},getBBox:function(){return b}};pb(e,d);return e.matrix};k.transformPath=function(a,d){return Ea(a,
fb(a,d))};var pb=k._extractTransform=function(a,d){if(null==d)return a._.transform;d=O(d).replace(/\.{3}|\u2026/g,a._.transform||"");var b=k.parseTransformString(d),e=0,l=0,f=0,g=1,h=1,m=a._,f=new q;m.transform=b||[];if(b)for(var l=0,v=b.length;l<v;l++){var t=b[l],w=t.length,u=O(t[0]).toLowerCase(),n=t[0]!=u,x=n?f.invert():0,A;"t"==u&&3==w?n?(w=x.x(0,0),u=x.y(0,0),n=x.x(t[1],t[2]),x=x.y(t[1],t[2]),f.translate(n-w,x-u)):f.translate(t[1],t[2]):"r"==u?2==w?(A=A||a.getBBox(1),f.rotate(t[1],A.x+A.width/
2,A.y+A.height/2),e+=t[1]):4==w&&(n?(n=x.x(t[2],t[3]),x=x.y(t[2],t[3]),f.rotate(t[1],n,x)):f.rotate(t[1],t[2],t[3]),e+=t[1]):"s"==u?2==w||3==w?(A=A||a.getBBox(1),f.scale(t[1],t[w-1],A.x+A.width/2,A.y+A.height/2),g*=t[1],h*=t[w-1]):5==w&&(n?(n=x.x(t[3],t[4]),x=x.y(t[3],t[4]),f.scale(t[1],t[2],n,x)):f.scale(t[1],t[2],t[3],t[4]),g*=t[1],h*=t[2]):"m"==u&&7==w&&f.add(t[1],t[2],t[3],t[4],t[5],t[6]);m.dirtyT=1;a.matrix=f}a.matrix=f;m.sx=g;m.sy=h;m.deg=e;m.dx=l=f.e;m.dy=f=f.f;1==g&&1==h&&!e&&m.bbox?(m.bbox.x+=
+l,m.bbox.y+=+f):m.dirtyT=1},sb=function(a){var d=a[0];switch(d.toLowerCase()){case "t":return[d,0,0];case "m":return[d,1,0,0,1,0,0];case "r":return 4==a.length?[d,0,a[2],a[3]]:[d,0];case "s":return 5==a.length?[d,1,1,a[3],a[4]]:3==a.length?[d,1,1]:[d,1]}},Ab=k._equaliseTransform=function(a,d){d=O(d).replace(/\.{3}|\u2026/g,a);a=k.parseTransformString(a)||[];d=k.parseTransformString(d)||[];for(var b=n(a.length,d.length),e=[],l=[],f=0,g,h,q,m;f<b;f++){q=a[f]||sb(d[f]);m=d[f]||sb(q);if(q[0]!=m[0]||
"r"==q[0].toLowerCase()&&(q[2]!=m[2]||q[3]!=m[3])||"s"==q[0].toLowerCase()&&(q[3]!=m[3]||q[4]!=m[4]))return;e[f]=[];l[f]=[];g=0;for(h=n(q.length,m.length);g<h;g++)g in q&&(e[f][g]=q[g]),g in m&&(l[f][g]=m[g])}return{from:e,to:l}};k._getContainer=function(a,d,b,e){var l;l=null!=e||k.is(a,"object")?a:C.doc.getElementById(a);if(null!=l)return l.tagName?null==d?{container:l,width:l.style.pixelWidth||l.offsetWidth,height:l.style.pixelHeight||l.offsetHeight}:{container:l,width:d,height:b}:{container:1,
x:a,y:d,width:b,height:e}};k.pathToRelative=rb;k._engine={};k.path2curve=Sa;k.matrix=function(a,d,b,e,l,f){return new q(a,d,b,e,l,f)};(function(a){function d(a){return a[0]*a[0]+a[1]*a[1]}function b(a){var e=N.sqrt(d(a));a[0]&&(a[0]/=e);a[1]&&(a[1]/=e)}a.add=function(a,d,b,e,l,f){var g=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]];d=[[a,b,l],[d,e,f],[0,0,1]];a&&a instanceof q&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(b=0;3>b;b++){for(e=l=0;3>e;e++)l+=h[a][e]*
d[e][b];g[a][b]=l}this.a=g[0][0];this.b=g[1][0];this.c=g[0][1];this.d=g[1][1];this.e=g[0][2];this.f=g[1][2]};a.invert=function(){var a=this.a*this.d-this.b*this.c;return new q(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};a.clone=function(){return new q(this.a,this.b,this.c,this.d,this.e,this.f)};a.translate=function(a,d){this.add(1,0,0,1,a,d)};a.scale=function(a,d,b,e){null==d&&(d=a);(b||e)&&this.add(1,0,0,1,b,e);this.add(a,0,0,d,0,0);(b||
e)&&this.add(1,0,0,1,-b,-e)};a.rotate=function(a,d,b){a=k.rad(a);d=d||0;b=b||0;var e=+N.cos(a).toFixed(9);a=+N.sin(a).toFixed(9);this.add(e,a,-a,e,d,b);this.add(1,0,0,1,-d,-b)};a.x=function(a,d){return a*this.a+d*this.c+this.e};a.y=function(a,d){return a*this.b+d*this.d+this.f};a.get=function(a){return+this[O.fromCharCode(97+a)].toFixed(4)};a.toString=function(){return k.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),
this.get(3),0,0].join()};a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};a.split=function(){var a={};a.dx=this.e;a.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];a.scalex=N.sqrt(d(e[0]));b(e[0]);a.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1];e[1]=[e[1][0]-e[0][0]*
a.shear,e[1][1]-e[0][1]*a.shear];a.scaley=N.sqrt(d(e[1]));b(e[1]);a.shear/=a.scaley;var l=-e[0][1],e=e[1][1];0>e?(a.rotate=k.deg(N.acos(e)),0>l&&(a.rotate=360-a.rotate)):a.rotate=k.deg(N.asin(l));a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};a.toTransformString=function(a){a=a||this.split();return a.isSimple?(a.scalex=
+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx||a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(q.prototype);var ya=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(ya&&4>ya[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==
navigator.vendor&&ya&&8>ya[1]?G.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:G.safari=Ua;for(var Qa=function(){this.returnValue=!1},tb=function(){return this.originalEvent.preventDefault()},ub=function(){this.cancelBubble=!0},Bb=function(){return this.originalEvent.stopPropagation()},Cb=function(){if(C.doc.addEventListener)return function(a,d,b,e){var l=I&&E[d]?E[d]:d,f=function(l){var f=l.clientX+(C.doc.documentElement.scrollLeft||
C.doc.body.scrollLeft),g=l.clientY+(C.doc.documentElement.scrollTop||C.doc.body.scrollTop);if(I&&E.hasOwnProperty(d))for(var h=0,q=l.targetTouches&&l.targetTouches.length;h<q;h++)if(l.targetTouches[h].target==a){q=l;l=l.targetTouches[h];l.originalEvent=q;l.preventDefault=tb;l.stopPropagation=Bb;break}return b.call(e,l,f,g)};a.addEventListener(l,f,!1);return function(){a.removeEventListener(l,f,!1);return!0}};if(C.doc.attachEvent)return function(a,d,b,e){var l=function(a){a=a||C.win.event;var d=a.clientX+
(C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft),l=a.clientY+(C.doc.documentElement.scrollTop||C.doc.body.scrollTop);a.preventDefault=a.preventDefault||Qa;a.stopPropagation=a.stopPropagation||ub;return b.call(e,a,d,l)};a.attachEvent("on"+d,l);return function(){a.detachEvent("on"+d,l);return!0}}}(),Ba=[],gb=function(a){for(var d=a.clientX,b=a.clientY,l=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,f=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,g,h=Ba.length;h--;){g=Ba[h];
if(I)for(var q=a.touches.length,k;q--;){if(k=a.touches[q],k.identifier==g.el._drag.id){d=k.clientX;b=k.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var q=g.el.node,m=q.nextSibling,v=q.parentNode,t=q.style.display;C.win.opera&&v.removeChild(q);q.style.display="none";k=g.el.paper.getElementByPoint(d,b);q.style.display=t;C.win.opera&&(m?v.insertBefore(q,m):v.appendChild(q));k&&e("raphael.drag.over."+g.el.id,g.el,k);d+=f;b+=l;e("raphael.drag.move."+g.el.id,
g.move_scope||g.el,d-g.el._drag.x,b-g.el._drag.y,d,b,a)}},hb=function(a){k.unmousemove(gb).unmouseup(hb);for(var d=Ba.length,b;d--;)b=Ba[d],b.el._drag={},e("raphael.drag.end."+b.el.id,b.end_scope||b.start_scope||b.move_scope||b.el,a);Ba=[]},da=k.el={},vb=P.length;vb--;)(function(a){k[a]=da[a]=function(d,b){k.is(d,"function")&&(this.events=this.events||[],this.events.push({name:a,f:d,unbind:Cb(this.shape||this.node||C.doc,a,d,b||this)}));return this};k["un"+a]=da["un"+a]=function(d){for(var b=this.events||
[],e=b.length;e--;)if(b[e].name==a&&b[e].f==d){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(P[vb]);da.data=function(a,d){var b=xa[this.id]=xa[this.id]||{};if(1==arguments.length){if(k.is(a,"object")){for(var l in a)a.hasOwnProperty(l)&&this.data(l,a[l]);return this}e("raphael.data.get."+this.id,this,b[a],a);return b[a]}b[a]=d;e("raphael.data.set."+this.id,this,d,a);return this};da.removeData=function(a){null==a?xa[this.id]={}:xa[this.id]&&delete xa[this.id][a];return this};
da.getData=function(){return h(xa[this.id]||{})};da.hover=function(a,d,b,e){return this.mouseover(a,b).mouseout(d,e||b)};da.unhover=function(a,d){return this.unmouseover(a).unmouseout(d)};var Ra=[];da.drag=function(a,d,b,l,f,g){function h(q){(q.originalEvent||q).preventDefault();var m=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,v=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;this._drag.x=q.clientX+v;this._drag.y=q.clientY+m;this._drag.id=q.identifier;!Ba.length&&k.mousemove(gb).mouseup(hb);
Ba.push({el:this,move_scope:l,start_scope:f,end_scope:g});d&&e.on("raphael.drag.start."+this.id,d);a&&e.on("raphael.drag.move."+this.id,a);b&&e.on("raphael.drag.end."+this.id,b);e("raphael.drag.start."+this.id,f||l||this,q.clientX+v,q.clientY+m,q)}this._drag={};Ra.push({el:this,start:h});this.mousedown(h);return this};da.onDragOver=function(a){a?e.on("raphael.drag.over."+this.id,a):e.unbind("raphael.drag.over."+this.id)};da.undrag=function(){for(var a=Ra.length;a--;)Ra[a].el==this&&(this.unmousedown(Ra[a].start),
Ra.splice(a,1),e.unbind("raphael.drag.*."+this.id));!Ra.length&&k.unmousemove(gb).unmouseup(hb);Ba=[]};G.circle=function(a,d,b){a=k._engine.circle(this,a||0,d||0,b||0);this.__set__&&this.__set__.push(a);return a};G.rect=function(a,d,b,e,l){a=k._engine.rect(this,a||0,d||0,b||0,e||0,l||0);this.__set__&&this.__set__.push(a);return a};G.ellipse=function(a,d,b,e){a=k._engine.ellipse(this,a||0,d||0,b||0,e||0);this.__set__&&this.__set__.push(a);return a};G.path=function(a){a&&!k.is(a,"string")&&!k.is(a[0],
R)&&(a+="");var d=k._engine.path(k.format[A](k,arguments),this);this.__set__&&this.__set__.push(d);return d};G.image=function(a,d,b,e,l){a=k._engine.image(this,a||"about:blank",d||0,b||0,e||0,l||0);this.__set__&&this.__set__.push(a);return a};G.text=function(a,d,b){a=k._engine.text(this,a||0,d||0,O(b));this.__set__&&this.__set__.push(a);return a};G.set=function(a){!k.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var d=new wa(a);this.__set__&&this.__set__.push(d);d.paper=
this;d.type="set";return d};G.setStart=function(a){this.__set__=a||this.set()};G.setFinish=function(a){a=this.__set__;delete this.__set__;return a};G.setSize=function(a,d){return k._engine.setSize.call(this,a,d)};G.setViewBox=function(a,d,b,e,l){return k._engine.setViewBox.call(this,a,d,b,e,l)};G.top=G.bottom=null;G.raphael=k;G.getElementByPoint=function(a,d){var b,e,l=this.canvas,f=C.doc.elementFromPoint(a,d);if(C.win.opera&&"svg"==f.tagName){e=l.getBoundingClientRect();b=l.ownerDocument;var g=b.body,
h=b.documentElement;b=e.top+(C.win.pageYOffset||h.scrollTop||g.scrollTop)-(h.clientTop||g.clientTop||0);e=e.left+(C.win.pageXOffset||h.scrollLeft||g.scrollLeft)-(h.clientLeft||g.clientLeft||0);g=l.createSVGRect();g.x=a-e;g.y=d-b;g.width=g.height=1;b=l.getIntersectionList(g,null);b.length&&(f=b[b.length-1])}if(!f)return null;for(;f.parentNode&&f!=l.parentNode&&!f.raphael;)f=f.parentNode;f==this.canvas.parentNode&&(f=l);return f=f&&f.raphael?this.getById(f.raphaelid):null};G.getElementsByBBox=function(a){var d=
this.set();this.forEach(function(b){k.isBBoxIntersect(b.getBBox(),a)&&d.push(b)});return d};G.getById=function(a){for(var d=this.bottom;d;){if(d.id==a)return d;d=d.next}return null};G.forEach=function(a,d){for(var b=this.bottom;b&&!1!==a.call(d,b);)b=b.next;return this};G.getElementsByPoint=function(a,d){var b=this.set();this.forEach(function(e){e.isPointInside(a,d)&&b.push(e)});return b};da.isPointInside=function(a,d){var b=this.realPath=this.realPath||ua[this.type](this);return k.isPointInsidePath(b,
a,d)};da.getBBox=function(a){if(this.removed)return{};var d=this._;if(a){if(d.dirty||!d.bboxwt)this.realPath=ua[this.type](this),d.bboxwt=db(this.realPath),d.bboxwt.toString=v,d.dirty=0;return d.bboxwt}if(d.dirty||d.dirtyT||!d.bbox){if(d.dirty||!this.realPath)d.bboxwt=0,this.realPath=ua[this.type](this);d.bbox=db(Ea(this.realPath,this.matrix));d.bbox.toString=v;d.dirty=d.dirtyT=0}return d.bbox};da.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&
this.__set__.push(a);return a};da.glow=function(a){if("text"==this.type)return null;a=a||{};var d=(a.width||10)+(+this.attr("stroke-width")||1),b=a.fill||!1,e=a.opacity||.5,l=a.offsetx||0,f=a.offsety||0;a=a.color||"#000";for(var g=d/2,h=this.paper,q=h.set(),k=this.realPath||ua[this.type](this),k=this.matrix?Ea(k,this.matrix):k,m=1;m<g+1;m++)q.push(h.path(k).attr({stroke:a,fill:b?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(d/g*m).toFixed(3),opacity:+(e/g).toFixed(3)}));
return q.insertBefore(this).translate(l,f)};var cb=function(b,e,l,f,g,h,q,m,v){return null==v?a(b,e,l,f,g,h,q,m):k.findDotsAtSegment(b,e,l,f,g,h,q,m,d(b,e,l,f,g,h,q,m,v))},ib=function(a,d){return function(b,e,l){b=Sa(b);for(var f,g,h,q,m="",v={},t=0,w=0,u=b.length;w<u;w++){h=b[w];if("M"==h[0])f=+h[1],g=+h[2];else{q=cb(f,g,h[1],h[2],h[3],h[4],h[5],h[6]);if(t+q>e){if(d&&!v.start){f=cb(f,g,h[1],h[2],h[3],h[4],h[5],h[6],e-t);m+=["C"+f.start.x,f.start.y,f.m.x,f.m.y,f.x,f.y];if(l)return m;v.start=m;m=["M"+
f.x,f.y+"C"+f.n.x,f.n.y,f.end.x,f.end.y,h[5],h[6]].join();t+=q;f=+h[5];g=+h[6];continue}if(!a&&!d)return f=cb(f,g,h[1],h[2],h[3],h[4],h[5],h[6],e-t),{x:f.x,y:f.y,alpha:f.alpha}}t+=q;f=+h[5];g=+h[6]}m+=h.shift()+h}v.end=m;f=a?t:d?v:k.findDotsAtSegment(f,g,h[0],h[1],h[2],h[3],h[4],h[5],1);f.alpha&&(f={x:f.x,y:f.y,alpha:f.alpha});return f}},wb=ib(1),jb=ib(),kb=ib(0,1);k.getTotalLength=wb;k.getPointAtLength=jb;k.getSubpath=function(a,d,b){if(1E-6>this.getTotalLength(a)-b)return kb(a,d).end;a=kb(a,b,1);
return d?kb(a,d).end:a};da.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():wb(this.attrs.path)};da.getPointAtLength=function(a){if("path"==this.type)return jb(this.attrs.path,a)};da.getSubpath=function(a,d){if("path"==this.type)return k.getSubpath(this.attrs.path,a,d)};var oa=k.easing_formulas={linear:function(a){return a},"<":function(a){return W(a,1.7)},">":function(a){return W(a,.48)},"<>":function(a){var d=.48-a/1.04,b=N.sqrt(.1734+d*d);
a=b-d;a=W(U(a),1/3)*(0>a?-1:1);d=-b-d;d=W(U(d),1/3)*(0>d?-1:1);a=a+d+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==!!a?a:W(2,-10*a)*N.sin(2*(a-.075)*H/.3)+1},bounce:function(a){a<1/2.75?a*=7.5625*a:a<2/2.75?(a-=1.5/2.75,a=7.5625*a*a+.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+.9375):(a-=2.625/2.75,a=7.5625*a*a+.984375);return a}};oa.easeIn=oa["ease-in"]=oa["<"];oa.easeOut=oa["ease-out"]=
oa[">"];oa.easeInOut=oa["ease-in-out"]=oa["<>"];oa["back-in"]=oa.backIn;oa["back-out"]=oa.backOut;var ba=[],Ya=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},Xa=function(){for(var a=+new Date,d=0;d<ba.length;d++){var b=ba[d];if(!b.el.removed&&!b.paused){var l=a-b.start,f=b.ms,g=b.easing,h=b.from,q=b.diff,m=b.to,v=b.el,w={},u,n={},x;b.initstatus?(l=(b.initstatus*
b.anim.top-b.prev)/(b.percent-b.prev)*f,b.status=b.initstatus,delete b.initstatus,b.stop&&ba.splice(d--,1)):b.status=(b.prev+l/f*(b.percent-b.prev))/b.anim.top;if(!(0>l))if(l<f){var A=g(l/f),y;for(y in h)if(h.hasOwnProperty(y)){switch(la[y]){case S:u=+h[y]+A*f*q[y];break;case "colour":u="rgb("+[Ca(ga(h[y].r+A*f*q[y].r)),Ca(ga(h[y].g+A*f*q[y].g)),Ca(ga(h[y].b+A*f*q[y].b))].join()+")";break;case "path":u=[];l=0;for(g=h[y].length;l<g;l++){u[l]=[h[y][l][0]];m=1;for(n=h[y][l].length;m<n;m++)u[l][m]=+h[y][l][m]+
A*f*q[y][l][m];u[l]=u[l].join(" ")}u=u.join(" ");break;case "transform":if(q[y].real)for(u=[],l=0,g=h[y].length;l<g;l++)for(u[l]=[h[y][l][0]],m=1,n=h[y][l].length;m<n;m++)u[l][m]=h[y][l][m]+A*f*q[y][l][m];else u=function(a){return+h[y][a]+A*f*q[y][a]},u=[["m",u(0),u(1),u(2),u(3),u(4),u(5)]];break;case "csv":if("clip-rect"==y)for(u=[],l=4;l--;)u[l]=+h[y][l]+A*f*q[y][l];break;default:for(g=[].concat(h[y]),u=[],l=v.paper.customAttributes[y].length;l--;)u[l]=+g[l]+A*f*q[y][l]}w[y]=u}v.attr(w);(function(a,
d,b){setTimeout(function(){e("raphael.anim.frame."+a,d,b)})})(v.id,v,b.anim)}else{(function(a,d,b){setTimeout(function(){e("raphael.anim.frame."+d.id,d,b);e("raphael.anim.finish."+d.id,d,b);k.is(a,"function")&&a.call(d)})})(b.callback,v,b.anim);v.attr(m);ba.splice(d--,1);if(1<b.repeat&&!b.next){for(x in m)m.hasOwnProperty(x)&&(n[x]=b.totalOrigin[x]);b.el.attr(n);t(b.anim,b.el,b.anim.percents[0],null,b.totalOrigin,b.repeat-1)}b.next&&!b.stop&&t(b.anim,b.el,b.next,null,b.totalOrigin,b.repeat)}}}k.svg&&
v&&v.paper&&v.paper.safari();ba.length&&Ya(Xa)},Ca=function(a){return 255<a?255:0>a?0:a};da.animateWith=function(a,d,b,e,l,f){if(this.removed)return f&&f.call(this),this;b=b instanceof m?b:k.animation(b,e,l,f);t(b,this,b.percents[0],null,this.attr());b=0;for(e=ba.length;b<e;b++)if(ba[b].anim==d&&ba[b].el==a){ba[e-1].start=ba[b].start;break}return this};da.onAnimation=function(a){a?e.on("raphael.anim.frame."+this.id,a):e.unbind("raphael.anim.frame."+this.id);return this};m.prototype.delay=function(a){var d=
new m(this.anim,this.ms);d.times=this.times;d.del=+a||0;return d};m.prototype.repeat=function(a){var d=new m(this.anim,this.ms);d.del=this.del;d.times=N.floor(n(a,0))||1;return d};k.animation=function(a,d,b,e){if(a instanceof m)return a;if(k.is(b,"function")||!b)e=e||b||null,b=null;a=Object(a);d=+d||0;var l={},f,g;for(g in a)a.hasOwnProperty(g)&&V(g)!=g&&V(g)+"%"!=g&&(f=!0,l[g]=a[g]);return f?(b&&(l.easing=b),e&&(l.callback=e),new m({100:l},d)):new m(a,d)};da.animate=function(a,d,b,e){if(this.removed)return e&&
e.call(this),this;a=a instanceof m?a:k.animation(a,d,b,e);t(a,this,a.percents[0],null,this.attr());return this};da.setTime=function(a,d){a&&null!=d&&this.status(a,M(d,a.ms)/a.ms);return this};da.status=function(a,d){var b=[],e=0,l,f;if(null!=d)return t(a,this,-1,M(d,1)),this;for(l=ba.length;e<l;e++)if(f=ba[e],f.el.id==this.id&&(!a||f.anim==a)){if(a)return f.status;b.push({anim:f.anim,status:f.status})}return a?0:b};da.pause=function(a){for(var d=0;d<ba.length;d++)ba[d].el.id!=this.id||a&&ba[d].anim!=
a||!1===e("raphael.anim.pause."+this.id,this,ba[d].anim)||(ba[d].paused=!0);return this};da.resume=function(a){for(var d=0;d<ba.length;d++)if(ba[d].el.id==this.id&&(!a||ba[d].anim==a)){var b=ba[d];!1!==e("raphael.anim.resume."+this.id,this,b.anim)&&(delete b.paused,this.status(b.anim,b.status))}return this};da.stop=function(a){for(var d=0;d<ba.length;d++)ba[d].el.id!=this.id||a&&ba[d].anim!=a||!1!==e("raphael.anim.stop."+this.id,this,ba[d].anim)&&ba.splice(d--,1);return this};e.on("raphael.remove",
u);e.on("raphael.clear",u);da.toString=function(){return"Rapha\u00ebl\u2019s object"};var wa=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var d=0,b=a.length;d<b;d++)!a[d]||a[d].constructor!=da.constructor&&a[d].constructor!=wa||(this[this.items.length]=this.items[this.items.length]=a[d],this.length++)},ka=wa.prototype;ka.push=function(){for(var a,d,b=0,e=arguments.length;b<e;b++)!(a=arguments[b])||a.constructor!=da.constructor&&a.constructor!=wa||(d=this.items.length,this[d]=this.items[d]=
a,this.length++);return this};ka.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};ka.forEach=function(a,d){for(var b=0,e=this.items.length;b<e&&!1!==a.call(d,this.items[b],b);b++);return this};for(var xb in da)da.hasOwnProperty(xb)&&(ka[xb]=function(a){return function(){var d=arguments;return this.forEach(function(b){b[a][A](b,d)})}}(xb));ka.attr=function(a,d){if(a&&k.is(a,R)&&k.is(a[0],"object"))for(var b=0,e=a.length;b<e;b++)this.items[b].attr(a[b]);else for(b=0,e=
this.items.length;b<e;b++)this.items[b].attr(a,d);return this};ka.clear=function(){for(;this.length;)this.pop()};ka.splice=function(a,d,b){a=0>a?n(this.length+a,0):a;d=n(0,M(this.length-a,d));var e=[],l=[],f=[],g;for(g=2;g<arguments.length;g++)f.push(arguments[g]);for(g=0;g<d;g++)l.push(this[a+g]);for(;g<this.length-a;g++)e.push(this[a+g]);var h=f.length;for(g=0;g<h+e.length;g++)this.items[a+g]=this[a+g]=g<h?f[g]:e[g-h];for(g=this.items.length=this.length-=d-h;this[g];)delete this[g++];return new wa(l)};
ka.exclude=function(a){for(var d=0,b=this.length;d<b;d++)if(this[d]==a)return this.splice(d,1),!0};ka.animate=function(a,d,b,e){!k.is(b,"function")&&b||(e=b||null);var l=this.items.length,f=l,g=this,h;if(!l)return this;e&&(h=function(){!--l&&e.call(g)});b=k.is(b,"string")?b:h;d=k.animation(a,d,b,h);for(a=this.items[--f].animate(d);f--;)this.items[f]&&!this.items[f].removed&&this.items[f].animateWith(a,d,d);return this};ka.insertAfter=function(a){for(var d=this.items.length;d--;)this.items[d].insertAfter(a);
return this};ka.getBBox=function(){for(var a=[],d=[],b=[],e=[],l=this.items.length;l--;)if(!this.items[l].removed){var f=this.items[l].getBBox();a.push(f.x);d.push(f.y);b.push(f.x+f.width);e.push(f.y+f.height)}a=M[A](0,a);d=M[A](0,d);b=n[A](0,b);e=n[A](0,e);return{x:a,y:d,x2:b,y2:e,width:b-a,height:e-d}};ka.clone=function(a){a=this.paper.set();for(var d=0,b=this.items.length;d<b;d++)a.push(this.items[d].clone());return a};ka.toString=function(){return"Rapha\u00ebl\u2018s set"};ka.glow=function(a){var d=
this.paper.set();this.forEach(function(b,e){var l=b.glow(a);null!=l&&l.forEach(function(a,b){d.push(a)})});return d};k.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var d={w:a.w,face:{},glyphs:{}},b=a.face["font-family"],e;for(e in a.face)a.face.hasOwnProperty(e)&&(d.face[e]=a.face[e]);this.fonts[b]?this.fonts[b].push(d):this.fonts[b]=[d];if(!a.svg){d.face["units-per-em"]=ca(a.face["units-per-em"],10);for(var l in a.glyphs)if(a.glyphs.hasOwnProperty(l)&&(b=a.glyphs[l],d.glyphs[l]=
{w:b.w,k:{},d:b.d&&"M"+b.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},b.k))for(var f in b.k)b.hasOwnProperty(f)&&(d.glyphs[l].k[f]=b.k[f])}return a};G.getFont=function(a,d,b,e){e=e||"normal";b=b||"normal";d=+d||{normal:400,bold:700,lighter:300,bolder:800}[d]||400;if(k.fonts){var l=k.fonts[a];if(!l){a=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var f in k.fonts)if(k.fonts.hasOwnProperty(f)&&a.test(f)){l=k.fonts[f];break}}var g;
if(l)for(f=0,a=l.length;f<a&&(g=l[f],g.face["font-weight"]!=d||g.face["font-style"]!=b&&g.face["font-style"]||g.face["font-stretch"]!=e);f++);return g}};G.print=function(a,d,b,e,l,f,g){f=f||"middle";g=n(M(g||0,1),-1);b=O(b).split("");var h=0,q=0,m="";k.is(e,"string")&&(e=this.getFont(e));if(e){l=(l||16)/e.face["units-per-em"];var v=e.face.bbox.split(y),t=+v[0],w=v[3]-v[1],u=0;f=+v[1]+("baseline"==f?w+ +e.face.descent:w/2);for(var v=0,x=b.length;v<x;v++){if("\n"==b[v])q=aa=h=0,u+=w;else var A=q&&e.glyphs[b[v-
1]]||{},aa=e.glyphs[b[v]],h=h+(q?(A.w||e.w)+(A.k&&A.k[b[v]]||0)+e.w*g:0),q=1;aa&&aa.d&&(m+=k.transformPath(aa.d,["t",h*l,u*l,"s",l,l,t,f,"t",(a-t)/l,(d-f)/l]))}}return this.path(m).attr({fill:"#000",stroke:"none"})};G.add=function(a){if(k.is(a,"array"))for(var d=this.set(),b=0,e=a.length,l;b<e;b++)l=a[b]||{},B.hasOwnProperty(l.type)&&d.push(this[l.type]().attr(l));return d};k.format=function(a,d){var b=k.is(d,R)?[0].concat(d):arguments;a&&k.is(a,"string")&&b.length-1&&(a=a.replace(F,function(a,d){return null==
b[++d]?"":b[d]}));return a||""};k.fullfill=function(){var a=/\{([^\}]+)\}/g,d=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,b=function(a,b,e){var l=e;b.replace(d,function(a,d,b,e,f){d=d||e;l&&(d in l&&(l=l[d]),"function"==typeof l&&f&&(l=l()))});return l=(null==l||l==e?a:l)+""};return function(d,e){return String(d).replace(a,function(a,d){return b(a,d,e)})}}();k.ninja=function(){K?C.win.Raphael=z:delete Raphael;return k};k.st=ka;(function(a,d,b){function e(){/in/.test(a.readyState)?setTimeout(e,
9):k.eve("raphael.DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(d,b=function(){a.removeEventListener(d,b,!1);a.readyState="complete"},!1),a.readyState="loading");e()})(document,"DOMContentLoaded");K?C.win.Raphael=k:Raphael=k;e.on("raphael.DOMload",function(){x=!0});return k});
(function(e,k){"function"===typeof define&&define.amd?require(["raphael"],k):e.Raphael&&k(e.Raphael)})(this,function(e){if(e.svg){var k=String,h=parseFloat,f=parseInt,b=Math,g=b.max,a=b.abs,d=b.pow,l=/[, ]+/,q=e.eve,v={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},w={};e.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};
var m=function(a,d){if(d){"string"==typeof a&&(a=m(a));for(var b in d)d.hasOwnProperty(b)&&("xlink:"==b.substring(0,6)?a.setAttributeNS("http://www.w3.org/1999/xlink",b.substring(6),k(d[b])):a.setAttribute(b,k(d[b])))}else a=e._g.doc.createElementNS("http://www.w3.org/2000/svg",a),a.style&&(a.style.webkitTapHighlightColor="rgba(0,0,0,0)");return a},t=function(l,f){var q="linear",v=l.id+f,t=.5,w=.5,u=l.node,n=l.paper,x=u.style,y=e._g.doc.getElementById(v);if(!y){f=k(f).replace(e._radial_gradient,function(a,
e,l){q="radial";e&&l&&(t=h(e),w=h(l),a=2*(.5<w)-1,.25<d(t-.5,2)+d(w-.5,2)&&(w=b.sqrt(.25-d(t-.5,2))*a+.5)&&.5!=w&&(w=w.toFixed(5)-1E-5*a));return""});f=f.split(/\s*\-\s*/);if("linear"==q){y=f.shift();y=-h(y);if(isNaN(y))return null;var B=[0,0,b.cos(e.rad(y)),b.sin(e.rad(y))],y=1/(g(a(B[2]),a(B[3]))||1);B[2]*=y;B[3]*=y;0>B[2]&&(B[0]=-B[2],B[2]=0);0>B[3]&&(B[1]=-B[3],B[3]=0)}var H=e._parseDots(f);if(!H)return null;v=v.replace(/[\(\)\s,\xb0#]/g,"_");l.gradient&&v!=l.gradient.id&&(n.defs.removeChild(l.gradient),
delete l.gradient);if(!l.gradient)for(y=m(q+"Gradient",{id:v}),l.gradient=y,m(y,"radial"==q?{fx:t,fy:w}:{x1:B[0],y1:B[1],x2:B[2],y2:B[3],gradientTransform:l.matrix.invert()}),n.defs.appendChild(y),n=0,B=H.length;n<B;n++)y.appendChild(m("stop",{offset:H[n].offset?H[n].offset:n?"100%":"0%","stop-color":H[n].color||"#fff"}))}m(u,{fill:"url(#"+v+")",opacity:1,"fill-opacity":1});x.fill="";x.opacity=1;return x.fillOpacity=1},u=function(a){var d=a.getBBox(1);m(a.pattern,{patternTransform:a.matrix.invert()+
" translate("+d.x+","+d.y+")"})},x=function(a,d,b){if("path"==a.type){for(var l=k(d).toLowerCase().split("-"),f=a.paper,g=b?"end":"start",h=a.node,q=a.attrs,t=q["stroke-width"],u=l.length,x="classic",y,S,B=3,z=3,C=5;u--;)switch(l[u]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":x=l[u];break;case "wide":z=5;break;case "narrow":z=2;break;case "long":B=5;break;case "short":B=2}"open"==x?(B+=2,z+=2,C+=2,y=1,S=b?4:1,l={fill:"none",stroke:q.stroke}):(S=y=B/2,l={fill:q.stroke,
stroke:"none"});a._.arrows?b?(a._.arrows.endPath&&w[a._.arrows.endPath]--,a._.arrows.endMarker&&w[a._.arrows.endMarker]--):(a._.arrows.startPath&&w[a._.arrows.startPath]--,a._.arrows.startMarker&&w[a._.arrows.startMarker]--):a._.arrows={};if("none"!=x){var u="raphael-marker-"+x,F="raphael-marker-"+g+x+B+z;e._g.doc.getElementById(u)?w[u]++:(f.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:v[x],id:u})),w[u]=1);var G=e._g.doc.getElementById(F);G?(w[F]++,B=G.getElementsByTagName("use")[0]):
(G=m(m("marker"),{id:F,markerHeight:z,markerWidth:B,orient:"auto",refX:S,refY:z/2}),B=m(m("use"),{"xlink:href":"#"+u,transform:(b?"rotate(180 "+B/2+" "+z/2+") ":"")+"scale("+B/C+","+z/C+")","stroke-width":(1/((B/C+z/C)/2)).toFixed(4)}),G.appendChild(B),f.defs.appendChild(G),w[F]=1);m(B,l);f=y*("diamond"!=x&&"oval"!=x);b?(b=a._.arrows.startdx*t||0,t=e.getTotalLength(q.path)-f*t):(b=f*t,t=e.getTotalLength(q.path)-(a._.arrows.enddx*t||0));l={};l["marker-"+g]="url(#"+F+")";if(t||b)l.d=Raphael.getSubpath(q.path,
b,t);m(h,l);a._.arrows[g+"Path"]=u;a._.arrows[g+"Marker"]=F;a._.arrows[g+"dx"]=f;a._.arrows[g+"Type"]=x;a._.arrows[g+"String"]=d}else b?(b=a._.arrows.startdx*t||0,t=e.getTotalLength(q.path)-b):(b=0,t=e.getTotalLength(q.path)-(a._.arrows.enddx*t||0)),a._.arrows[g+"Path"]&&m(h,{d:Raphael.getSubpath(q.path,b,t)}),delete a._.arrows[g+"Path"],delete a._.arrows[g+"Marker"],delete a._.arrows[g+"dx"],delete a._.arrows[g+"Type"],delete a._.arrows[g+"String"];for(l in w)w.hasOwnProperty(l)&&!w[l]&&(a=e._g.doc.getElementById(l))&&
a.parentNode.removeChild(a)}},y={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},B=function(a,d,b){if(d=y[k(d).toLowerCase()]){var e=a.attrs["stroke-width"]||"1";b={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||b["stroke-linecap"]]||0;for(var l=[],f=d.length;f--;)l[f]=d[f]*e+(f%2?1:-1)*b;m(a.node,{"stroke-dasharray":l.join(",")})}},F=function(d,b){var h=d.node,q=d.attrs,v=h.style.visibility;
h.style.visibility="hidden";for(var w in b)if(b.hasOwnProperty(w)&&e._availableAttrs.hasOwnProperty(w)){var y=b[w];q[w]=y;switch(w){case "blur":d.blur(y);break;case "href":case "title":case "target":var n=h.parentNode;if("a"!=n.tagName.toLowerCase()){var M=m("a");n.insertBefore(M,h);M.appendChild(h);n=M}"target"==w?n.setAttributeNS("http://www.w3.org/1999/xlink","show","blank"==y?"new":y):n.setAttributeNS("http://www.w3.org/1999/xlink",w,y);break;case "cursor":h.style.cursor=y;break;case "transform":d.transform(y);
break;case "arrow-start":x(d,y);break;case "arrow-end":x(d,y,1);break;case "clip-rect":n=k(y).split(l);if(4==n.length){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var M=m("clipPath"),z=m("rect");M.id=e.createUUID();m(z,{x:n[0],y:n[1],width:n[2],height:n[3]});M.appendChild(z);d.paper.defs.appendChild(M);m(h,{"clip-path":"url(#"+M.id+")"});d.clip=z}!y&&(y=h.getAttribute("clip-path"))&&((y=e._g.doc.getElementById(y.replace(/(^url\(#|\)$)/g,"")))&&y.parentNode.removeChild(y),m(h,
{"clip-path":""}),delete d.clip);break;case "path":"path"==d.type&&(m(h,{d:y?q.path=e._pathToAbsolute(y):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&x(d,d._.arrows.startString),"endString"in d._.arrows&&x(d,d._.arrows.endString,1)));break;case "width":if(h.setAttribute(w,y),d._.dirty=1,q.fx)w="x",y=q.x;else break;case "x":q.fx&&(y=-q.x-(q.width||0));case "rx":if("rx"==w&&"rect"==d.type)break;case "cx":h.setAttribute(w,y);d.pattern&&u(d);d._.dirty=1;break;case "height":if(h.setAttribute(w,
y),d._.dirty=1,q.fy)w="y",y=q.y;else break;case "y":q.fy&&(y=-q.y-(q.height||0));case "ry":if("ry"==w&&"rect"==d.type)break;case "cy":h.setAttribute(w,y);d.pattern&&u(d);d._.dirty=1;break;case "r":"rect"==d.type?m(h,{rx:y,ry:y}):h.setAttribute(w,y);d._.dirty=1;break;case "src":"image"==d.type&&h.setAttributeNS("http://www.w3.org/1999/xlink","href",y);break;case "stroke-width":if(1!=d._.sx||1!=d._.sy)y/=g(a(d._.sx),a(d._.sy))||1;d.paper._vbSize&&(y*=d.paper._vbSize);h.setAttribute(w,y);q["stroke-dasharray"]&&
B(d,q["stroke-dasharray"],b);d._.arrows&&("startString"in d._.arrows&&x(d,d._.arrows.startString),"endString"in d._.arrows&&x(d,d._.arrows.endString,1));break;case "stroke-dasharray":B(d,y,b);break;case "fill":var F=k(y).match(e._ISURL);if(F){var M=m("pattern"),H=m("image");M.id=e.createUUID();m(M,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});m(H,{x:0,y:0,"xlink:href":F[1]});M.appendChild(H);(function(a){e._preload(F[1],function(){var b=this.offsetWidth,e=this.offsetHeight;m(a,{width:b,
height:e});m(H,{width:b,height:e});d.paper.safari()})})(M);d.paper.defs.appendChild(M);m(h,{fill:"url(#"+M.id+")"});d.pattern=M;d.pattern&&u(d);break}n=e.getRGB(y);if(!n.error)delete b.gradient,delete q.gradient,!e.is(q.opacity,"undefined")&&e.is(b.opacity,"undefined")&&m(h,{opacity:q.opacity}),!e.is(q["fill-opacity"],"undefined")&&e.is(b["fill-opacity"],"undefined")&&m(h,{"fill-opacity":q["fill-opacity"]});else if(("circle"==d.type||"ellipse"==d.type||"r"!=k(y).charAt())&&t(d,y)){if("opacity"in q||
"fill-opacity"in q)if(n=e._g.doc.getElementById(h.getAttribute("fill").replace(/^url\(#|\)$/g,"")))n=n.getElementsByTagName("stop"),m(n[n.length-1],{"stop-opacity":("opacity"in q?q.opacity:1)*("fill-opacity"in q?q["fill-opacity"]:1)});q.gradient=y;q.fill="none";break}n.hasOwnProperty("opacity")&&m(h,{"fill-opacity":1<n.opacity?n.opacity/100:n.opacity});case "stroke":n=e.getRGB(y);h.setAttribute(w,n.hex);"stroke"==w&&n.hasOwnProperty("opacity")&&m(h,{"stroke-opacity":1<n.opacity?n.opacity/100:n.opacity});
"stroke"==w&&d._.arrows&&("startString"in d._.arrows&&x(d,d._.arrows.startString),"endString"in d._.arrows&&x(d,d._.arrows.endString,1));break;case "gradient":"circle"!=d.type&&"ellipse"!=d.type&&"r"==k(y).charAt()||t(d,y);break;case "opacity":q.gradient&&!q.hasOwnProperty("stroke-opacity")&&m(h,{"stroke-opacity":1<y?y/100:y});case "fill-opacity":if(q.gradient){if(n=e._g.doc.getElementById(h.getAttribute("fill").replace(/^url\(#|\)$/g,"")))n=n.getElementsByTagName("stop"),m(n[n.length-1],{"stop-opacity":y});
break}default:"font-size"==w&&(y=f(y,10)+"px"),n=w.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()}),h.style[n]=y,d._.dirty=1,h.setAttribute(w,y)}}C(d,b);h.style.visibility=v},C=function(a,d){if("text"==a.type&&(d.hasOwnProperty("text")||d.hasOwnProperty("font")||d.hasOwnProperty("font-size")||d.hasOwnProperty("x")||d.hasOwnProperty("y"))){var b=a.attrs,l=a.node,g=l.firstChild?f(e._g.doc.defaultView.getComputedStyle(l.firstChild,"").getPropertyValue("font-size"),10):10;if(d.hasOwnProperty("text")){for(b.text=
d.text;l.firstChild;)l.removeChild(l.firstChild);for(var h=k(d.text).split("\n"),q=[],v,t=0,w=h.length;t<w;t++)v=m("tspan"),t&&m(v,{dy:1.2*g,x:b.x}),v.appendChild(e._g.doc.createTextNode(h[t])),l.appendChild(v),q[t]=v}else for(q=l.getElementsByTagName("tspan"),t=0,w=q.length;t<w;t++)t?m(q[t],{dy:1.2*g,x:b.x}):m(q[0],{dy:0});m(l,{x:b.x,y:b.y});a._.dirty=1;l=a._getBBox();(b=b.y-(l.y+l.height/2))&&e.is(b,"finite")&&m(q[0],{dy:b})}},K=function(a,d){this[0]=this.node=a;a.raphael=!0;this.id=e._oid++;a.raphaelid=
this.id;this.matrix=e.matrix();this.realPath=null;this.paper=d;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!d.bottom&&(d.bottom=this);(this.prev=d.top)&&(d.top.next=this);d.top=this;this.next=null},z=e.el;K.prototype=z;z.constructor=K;e._engine.path=function(a,d){var b=m("path");d.canvas&&d.canvas.appendChild(b);b=new K(b,d);b.type="path";F(b,{fill:"none",stroke:"#000",path:a});return b};z.rotate=function(a,d,b){if(this.removed)return this;a=k(a).split(l);a.length-
1&&(d=h(a[1]),b=h(a[2]));a=h(a[0]);null==b&&(d=b);if(null==d||null==b)b=this.getBBox(1),d=b.x+b.width/2,b=b.y+b.height/2;this.transform(this._.transform.concat([["r",a,d,b]]));return this};z.scale=function(a,d,b,e){if(this.removed)return this;a=k(a).split(l);a.length-1&&(d=h(a[1]),b=h(a[2]),e=h(a[3]));a=h(a[0]);null==d&&(d=a);null==e&&(b=e);if(null==b||null==e)var f=this.getBBox(1);b=null==b?f.x+f.width/2:b;e=null==e?f.y+f.height/2:e;this.transform(this._.transform.concat([["s",a,d,b,e]]));return this};
z.translate=function(a,d){if(this.removed)return this;a=k(a).split(l);a.length-1&&(d=h(a[1]));a=h(a[0])||0;this.transform(this._.transform.concat([["t",a,+d||0]]));return this};z.transform=function(a){var d=this._;if(null==a)return d.transform;e._extractTransform(this,a);this.clip&&m(this.clip,{transform:this.matrix.invert()});this.pattern&&u(this);this.node&&m(this.node,{transform:this.matrix});if(1!=d.sx||1!=d.sy)a=this.attrs.hasOwnProperty("stroke-width")?this.attrs["stroke-width"]:1,this.attr({"stroke-width":a});
return this};z.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};z.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};z.remove=function(){if(!this.removed&&this.node.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this);q.unbind("raphael.*.*."+this.id);this.gradient&&a.defs.removeChild(this.gradient);e._tear(this,a);"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):
this.node.parentNode.removeChild(this.node);for(var d in this)this[d]="function"==typeof this[d]?e._removedFactory(d):null;this.removed=!0}};z._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var d={};try{d=this.node.getBBox()}catch(b){}finally{d=d||{}}a&&this.hide();return d};z.attr=function(a,d){if(this.removed)return this;if(null==a){var b={},f;for(f in this.attrs)this.attrs.hasOwnProperty(f)&&(b[f]=this.attrs[f]);b.gradient&&"none"==b.fill&&(b.fill=b.gradient)&&delete b.gradient;
b.transform=this._.transform;return b}if(null==d&&e.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==a)return this._.transform;f=a.split(l);for(var b={},g=0,h=f.length;g<h;g++)a=f[g],a in this.attrs?b[a]=this.attrs[a]:e.is(this.paper.customAttributes[a],"function")?b[a]=this.paper.customAttributes[a].def:b[a]=e._availableAttrs[a];return h-1?b:b[f[0]]}if(null==d&&e.is(a,"array")){b={};g=0;for(h=a.length;g<h;g++)b[a[g]]=this.attr(a[g]);
return b}null!=d?(b={},b[a]=d):null!=a&&e.is(a,"object")&&(b=a);for(g in b)q("raphael.attr."+g+"."+this.id,this,b[g]);for(g in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(g)&&b.hasOwnProperty(g)&&e.is(this.paper.customAttributes[g],"function"))for(h in f=this.paper.customAttributes[g].apply(this,[].concat(b[g])),this.attrs[g]=b[g],f)f.hasOwnProperty(h)&&(b[h]=f[h]);F(this,b);return this};z.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?
this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&e._tofront(this,a);return this};z.toBack=function(){if(this.removed)return this;var a=this.node.parentNode;"a"==a.tagName.toLowerCase()?a.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):a.firstChild!=this.node&&a.insertBefore(this.node,this.node.parentNode.firstChild);e._toback(this,this.paper);return this};z.insertAfter=
function(a){if(this.removed)return this;var d=a.node||a[a.length-1].node;d.nextSibling?d.parentNode.insertBefore(this.node,d.nextSibling):d.parentNode.appendChild(this.node);e._insertafter(this,a,this.paper);return this};z.insertBefore=function(a){if(this.removed)return this;var d=a.node||a[0].node;d.parentNode.insertBefore(this.node,d);e._insertbefore(this,a,this.paper);return this};z.blur=function(a){if(0!==+a){var d=m("filter"),b=m("feGaussianBlur");this.attrs.blur=a;d.id=e.createUUID();m(b,{stdDeviation:+a||
1.5});d.appendChild(b);this.paper.defs.appendChild(d);this._blur=d;m(this.node,{filter:"url(#"+d.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};e._engine.circle=function(a,d,b,e){var l=m("circle");a.canvas&&a.canvas.appendChild(l);a=new K(l,a);a.attrs={cx:d,cy:b,r:e,fill:"none",stroke:"#000"};a.type="circle";m(l,a.attrs);return a};e._engine.rect=function(a,d,b,e,l,f){var g=m("rect");a.canvas&&
a.canvas.appendChild(g);a=new K(g,a);a.attrs={x:d,y:b,width:e,height:l,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"};a.type="rect";m(g,a.attrs);return a};e._engine.ellipse=function(a,d,b,e,l){var f=m("ellipse");a.canvas&&a.canvas.appendChild(f);a=new K(f,a);a.attrs={cx:d,cy:b,rx:e,ry:l,fill:"none",stroke:"#000"};a.type="ellipse";m(f,a.attrs);return a};e._engine.image=function(a,d,b,e,l,f){var g=m("image");m(g,{x:b,y:e,width:l,height:f,preserveAspectRatio:"none"});g.setAttributeNS("http://www.w3.org/1999/xlink",
"href",d);a.canvas&&a.canvas.appendChild(g);a=new K(g,a);a.attrs={x:b,y:e,width:l,height:f,src:d};a.type="image";return a};e._engine.text=function(a,d,b,l){var f=m("text");a.canvas&&a.canvas.appendChild(f);a=new K(f,a);a.attrs={x:d,y:b,"text-anchor":"middle",text:l,font:e._availableAttrs.font,stroke:"none",fill:"#000"};a.type="text";F(a,a.attrs);return a};e._engine.setSize=function(a,d){this.width=a||this.width;this.height=d||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",
this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};e._engine.create=function(){var a=e._getContainer.apply(0,arguments),d=a&&a.container,b=a.x,l=a.y,f=a.width,a=a.height;if(!d)throw Error("SVG container not found.");var g=m("svg"),h,b=b||0,l=l||0,f=f||512,a=a||342;m(g,{height:a,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"});1==d?(g.style.cssText="overflow:hidden;position:absolute;left:"+b+"px;top:"+l+"px",e._g.doc.body.appendChild(g),h=1):(g.style.cssText=
"overflow:hidden;position:relative",d.firstChild?d.insertBefore(g,d.firstChild):d.appendChild(g));d=new e._Paper;d.width=f;d.height=a;d.canvas=g;d.clear();d._left=d._top=0;h&&(d.renderfix=function(){});d.renderfix();return d};e._engine.setViewBox=function(a,d,b,e,l){q("raphael.setViewBox",this,this._viewBox,[a,d,b,e,l]);var f=g(b/this.width,e/this.height),h=this.top,k=l?"meet":"xMinYMin",v;null==a?(this._vbSize&&(f=1),delete this._vbSize,v="0 0 "+this.width+" "+this.height):(this._vbSize=f,v=a+" "+
d+" "+b+" "+e);for(m(this.canvas,{viewBox:v,preserveAspectRatio:k});f&&h;)k="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":k}),h._.dirty=1,h._.dirtyT=1,h=h.prev;this._viewBox=[a,d,b,e,!!l];return this};e.prototype.renderfix=function(){var a=this.canvas,d=a.style,b;try{b=a.getScreenCTM()||a.createSVGMatrix()}catch(e){b=a.createSVGMatrix()}a=-b.e%1;b=-b.f%1;if(a||b)a&&(this._left=(this._left+a)%1,d.left=this._left+"px"),b&&(this._top=(this._top+b)%1,d.top=this._top+"px")};
e.prototype.clear=function(){e.eve("raphael.clear",this);for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Rapha\u00ebl "+e.version));a.appendChild(this.desc);a.appendChild(this.defs=m("defs"))};e.prototype.remove=function(){q("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?e._removedFactory(a):
null};var J=e.st,G;for(G in z)z.hasOwnProperty(G)&&!J.hasOwnProperty(G)&&(J[G]=function(a){return function(){var d=arguments;return this.forEach(function(b){b[a].apply(b,d)})}}(G))}});
(function(e,k){"function"===typeof define&&define.amd?require(["raphael"],k):e.Raphael&&k(e.Raphael)})(this,function(e){if(e.vml){var k=String,h=parseFloat,f=Math,b=f.round,g=f.max,a=f.min,d=f.abs,l=/[, ]+/,q=e.eve,v={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},w=/([clmz]),?([^clmz]*)/gi,m=/ progid:\S+Blur\([^\)]+\)/g,t=/-?[^,\s-]+/g,u={path:1,rect:1,image:1},x={circle:1,ellipse:1},y=function(a){var d=/[ahqstv]/ig,l=e._pathToAbsolute;k(a).match(d)&&(l=e._path2curve);d=/[clmz]/g;if(l==e._pathToAbsolute&&
!k(a).match(d))return a=k(a).replace(w,function(a,d,e){var l=[],f="m"==d.toLowerCase(),g=v[d];e.replace(t,function(a){f&&2==l.length&&(g+=l+v["m"==d?"l":"L"],l=[]);l.push(b(21600*a))});return g+l});var d=l(a),f;a=[];for(var g=0,h=d.length;g<h;g++){l=d[g];f=d[g][0].toLowerCase();"z"==f&&(f="x");for(var q=1,m=l.length;q<m;q++)f+=b(21600*l[q])+(q!=m-1?",":"");a.push(f)}return a.join(" ")},B=function(a,d,b){var l=e.matrix();l.rotate(-a,.5,.5);return{dx:l.x(d,b),dy:l.y(d,b)}},F=function(a,b,l,e,f,g){var h=
a._,q=a.matrix,k=h.fillpos;a=a.node;var m=a.style,v=1,t="",w=21600/b,u=21600/l;m.visibility="hidden";if(b&&l){a.coordsize=d(w)+" "+d(u);m.rotation=g*(0>b*l?-1:1);g&&(f=B(g,e,f),e=f.dx,f=f.dy);0>b&&(t+="x");0>l&&(t+=" y")&&(v=-1);m.flip=t;a.coordorigin=e*-w+" "+f*-u;if(k||h.fillsize)e=(e=a.getElementsByTagName("fill"))&&e[0],a.removeChild(e),k&&(f=B(g,q.x(k[0],k[1]),q.y(k[0],k[1])),e.position=f.dx*v+" "+f.dy*v),h.fillsize&&(e.size=h.fillsize[0]*d(b)+" "+h.fillsize[1]*d(l)),a.appendChild(e);m.visibility=
"visible"}};e.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};var C=function(a,d,b){d=k(d).toLowerCase().split("-");b=b?"end":"start";for(var l=d.length,e="classic",f="medium",g="medium";l--;)switch(d[l]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":e=d[l];break;case "wide":case "narrow":g=d[l];break;case "long":case "short":f=d[l]}a=a.node.getElementsByTagName("stroke")[0];a[b+"arrow"]=
e;a[b+"arrowlength"]=f;a[b+"arrowwidth"]=g},K=function(d,f){d.attrs=d.attrs||{};var q=d.node,m=d.attrs,v=q.style,t=u[d.type]&&(f.x!=m.x||f.y!=m.y||f.width!=m.width||f.height!=m.height||f.cx!=m.cx||f.cy!=m.cy||f.rx!=m.rx||f.ry!=m.ry||f.r!=m.r),w=x[d.type]&&(m.cx!=f.cx||m.cy!=f.cy||m.r!=f.r||m.rx!=f.rx||m.ry!=f.ry),I;for(I in f)f.hasOwnProperty(I)&&(m[I]=f[I]);t&&(m.path=e._getPath[d.type](d),d._.dirty=1);f.href&&(q.href=f.href);f.title&&(q.title=f.title);f.target&&(q.target=f.target);f.cursor&&(v.cursor=
f.cursor);"blur"in f&&d.blur(f.blur);if(f.path&&"path"==d.type||t)q.path=y(~k(m.path).toLowerCase().indexOf("r")?e._pathToAbsolute(m.path):m.path),"image"==d.type&&(d._.fillpos=[m.x,m.y],d._.fillsize=[m.width,m.height],F(d,1,1,0,0,0));"transform"in f&&d.transform(f.transform);w&&(v=+m.cx,t=+m.cy,w=+m.rx||+m.r||0,I=+m.ry||+m.r||0,q.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",b(21600*(v-w)),b(21600*(t-I)),b(21600*(v+w)),b(21600*(t+I)),b(21600*v)));"clip-rect"in f&&(v=k(f["clip-rect"]).split(l),
4==v.length&&(v[2]=+v[2]+ +v[0],v[3]=+v[3]+ +v[1],t=q.clipRect||e._g.doc.createElement("div"),w=t.style,w.clip=e.format("rect({1}px {2}px {3}px {0}px)",v),q.clipRect||(w.position="absolute",w.top=0,w.left=0,w.width=d.paper.width+"px",w.height=d.paper.height+"px",q.parentNode.insertBefore(t,q),t.appendChild(q),q.clipRect=t)),f["clip-rect"]||q.clipRect&&(q.clipRect.style.clip="auto"));d.textpath&&(v=d.textpath.style,f.font&&(v.font=f.font),f["font-family"]&&(v.fontFamily='"'+f["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,
"")+'"'),f["font-size"]&&(v.fontSize=f["font-size"]),f["font-weight"]&&(v.fontWeight=f["font-weight"]),f["font-style"]&&(v.fontStyle=f["font-style"]));"arrow-start"in f&&C(d,f["arrow-start"]);"arrow-end"in f&&C(d,f["arrow-end"],1);if(null!=f.opacity||null!=f["stroke-width"]||null!=f.fill||null!=f.src||null!=f.stroke||null!=f["stroke-width"]||null!=f["stroke-opacity"]||null!=f["fill-opacity"]||null!=f["stroke-dasharray"]||null!=f["stroke-miterlimit"]||null!=f["stroke-linejoin"]||null!=f["stroke-linecap"]){v=
(v=q.getElementsByTagName("fill"))&&v[0];!v&&(v=A("fill"));"image"==d.type&&f.src&&(v.src=f.src);f.fill&&(v.on=!0);if(null==v.on||"none"==f.fill||null===f.fill)v.on=!1;v.on&&f.fill&&((t=k(f.fill).match(e._ISURL))?(v.parentNode==q&&q.removeChild(v),v.rotate=!0,v.src=t[1],v.type="tile",w=d.getBBox(1),v.position=w.x+" "+w.y,d._.fillpos=[w.x,w.y],e._preload(t[1],function(){d._.fillsize=[this.offsetWidth,this.offsetHeight]})):(v.color=e.getRGB(f.fill).hex,v.src="",v.type="solid",e.getRGB(f.fill).error&&
(d.type in{circle:1,ellipse:1}||"r"!=k(f.fill).charAt())&&z(d,f.fill,v)&&(m.fill="none",m.gradient=f.fill,v.rotate=!1)));if("fill-opacity"in f||"opacity"in f)w=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+e.getRGB(f.fill).o+1||2)-1),w=a(g(w,0),1),v.opacity=w,v.src&&(v.color="none");q.appendChild(v);v=q.getElementsByTagName("stroke")&&q.getElementsByTagName("stroke")[0];t=!1;!v&&(t=v=A("stroke"));if(f.stroke&&"none"!=f.stroke||f["stroke-width"]||null!=f["stroke-opacity"]||f["stroke-dasharray"]||
f["stroke-miterlimit"]||f["stroke-linejoin"]||f["stroke-linecap"])v.on=!0;"none"!=f.stroke&&null!==f.stroke&&null!=v.on&&0!=f.stroke&&0!=f["stroke-width"]||(v.on=!1);w=e.getRGB(f.stroke);v.on&&f.stroke&&(v.color=w.hex);w=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+w.o+1||2)-1);I=.75*(h(f["stroke-width"])||1);w=a(g(w,0),1);null==f["stroke-width"]&&(I=m["stroke-width"]);f["stroke-width"]&&(v.weight=I);I&&1>I&&(w*=I)&&(v.weight=1);v.opacity=w;f["stroke-linejoin"]&&(v.joinstyle=f["stroke-linejoin"]||
"miter");v.miterlimit=f["stroke-miterlimit"]||8;f["stroke-linecap"]&&(v.endcap="butt"==f["stroke-linecap"]?"flat":"square"==f["stroke-linecap"]?"square":"round");f["stroke-dasharray"]&&(w={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},v.dashstyle=w.hasOwnProperty(f["stroke-dasharray"])?w[f["stroke-dasharray"]]:"");t&&q.appendChild(v)}if("text"==d.type){d.paper.canvas.style.display=
"";q=d.paper.span;t=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);v=q.style;m.font&&(v.font=m.font);m["font-family"]&&(v.fontFamily=m["font-family"]);m["font-weight"]&&(v.fontWeight=m["font-weight"]);m["font-style"]&&(v.fontStyle=m["font-style"]);t=h(m["font-size"]||t&&t[0])||10;v.fontSize=100*t+"px";d.textpath.string&&(q.innerHTML=k(d.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));q=q.getBoundingClientRect();d.W=m.w=(q.right-q.left)/100;d.H=m.h=(q.bottom-q.top)/
100;d.X=m.x;d.Y=m.y+d.H/2;("x"in f||"y"in f)&&(d.path.v=e.format("m{0},{1}l{2},{1}",b(21600*m.x),b(21600*m.y),b(21600*m.x)+1));q="x y text font font-family font-weight font-style font-size".split(" ");v=0;for(t=q.length;v<t;v++)if(q[v]in f){d._.dirty=1;break}switch(m["text-anchor"]){case "start":d.textpath.style["v-text-align"]="left";d.bbx=d.W/2;break;case "end":d.textpath.style["v-text-align"]="right";d.bbx=-d.W/2;break;default:d.textpath.style["v-text-align"]="center",d.bbx=0}d.textpath.style["v-text-kern"]=
!0}},z=function(a,d,b){a.attrs=a.attrs||{};var l=Math.pow,g="linear",q=".5 .5";a.attrs.gradient=d;d=k(d).replace(e._radial_gradient,function(a,d,b){g="radial";d&&b&&(d=h(d),b=h(b),.25<l(d-.5,2)+l(b-.5,2)&&(b=f.sqrt(.25-l(d-.5,2))*(2*(.5<b)-1)+.5),q=d+" "+b);return""});d=d.split(/\s*\-\s*/);if("linear"==g){var m=d.shift(),m=-h(m);if(isNaN(m))return null}d=e._parseDots(d);if(!d)return null;a=a.shape||a.node;if(d.length){a.removeChild(b);b.on=!0;b.method="none";b.color=d[0].color;b.color2=d[d.length-
1].color;for(var v=[],t=0,w=d.length;t<w;t++)d[t].offset&&v.push(d[t].offset+" "+d[t].color);b.colors=v.length?v.join():"0% "+b.color;"radial"==g?(b.type="gradientTitle",b.focus="100%",b.focussize="0 0",b.focusposition=q,b.angle=0):(b.type="gradient",b.angle=(270-m)%360);a.appendChild(b)}return 1},J=function(a,d){this[0]=this.node=a;a.raphael=!0;this.id=e._oid++;a.raphaelid=this.id;this.Y=this.X=0;this.attrs={};this.paper=d;this.matrix=e.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,
dirtyT:1};!d.bottom&&(d.bottom=this);(this.prev=d.top)&&(d.top.next=this);d.top=this;this.next=null},G=e.el;J.prototype=G;G.constructor=J;G.transform=function(a){if(null==a)return this._.transform;var d=this.paper._viewBoxShift,b=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:"",l;d&&(l=a=k(a).replace(/\.{3}|\u2026/g,this._.transform||""));e._extractTransform(this,b+a);var d=this.matrix.clone(),f=this.skew;a=this.node;var b=~k(this.attrs.fill).indexOf("-"),g=!k(this.attrs.fill).indexOf("url(");d.translate(-.5,
-.5);g||b||"image"==this.type?(f.matrix="1 0 0 1",f.offset="0 0",f=d.split(),b&&f.noRotation||!f.isSimple?(a.style.filter=d.toFilter(),b=this.getBBox(),f=this.getBBox(1),d=b.x-f.x,b=b.y-f.y,a.coordorigin=-21600*d+" "+-21600*b,F(this,1,1,d,b,0)):(a.style.filter="",F(this,f.scalex,f.scaley,f.dx,f.dy,f.rotate))):(a.style.filter="",f.matrix=k(d),f.offset=d.offset());l&&(this._.transform=l);return this};G.rotate=function(a,d,b){if(this.removed)return this;if(null!=a){a=k(a).split(l);a.length-1&&(d=h(a[1]),
b=h(a[2]));a=h(a[0]);null==b&&(d=b);if(null==d||null==b)b=this.getBBox(1),d=b.x+b.width/2,b=b.y+b.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",a,d,b]]));return this}};G.translate=function(a,d){if(this.removed)return this;a=k(a).split(l);a.length-1&&(d=h(a[1]));a=h(a[0])||0;d=+d||0;this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=d);this.transform(this._.transform.concat([["t",a,d]]));return this};G.scale=function(a,d,b,e){if(this.removed)return this;a=k(a).split(l);a.length-
1&&(d=h(a[1]),b=h(a[2]),e=h(a[3]),isNaN(b)&&(b=null),isNaN(e)&&(e=null));a=h(a[0]);null==d&&(d=a);null==e&&(b=e);if(null==b||null==e)var f=this.getBBox(1);b=null==b?f.x+f.width/2:b;e=null==e?f.y+f.height/2:e;this.transform(this._.transform.concat([["s",a,d,b,e]]));this._.dirtyT=1;return this};G.hide=function(){!this.removed&&(this.node.style.display="none");return this};G.show=function(){!this.removed&&(this.node.style.display="");return this};G._getBBox=function(){return this.removed?{}:{x:this.X+
(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};G.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this);e.eve.unbind("raphael.*.*."+this.id);e._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)this[a]="function"==typeof this[a]?e._removedFactory(a):null;this.removed=!0}};G.attr=function(a,d){if(this.removed)return this;if(null==a){var b=
{},f;for(f in this.attrs)this.attrs.hasOwnProperty(f)&&(b[f]=this.attrs[f]);b.gradient&&"none"==b.fill&&(b.fill=b.gradient)&&delete b.gradient;b.transform=this._.transform;return b}if(null==d&&e.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;f=a.split(l);for(var b={},g=0,h=f.length;g<h;g++)a=f[g],a in this.attrs?b[a]=this.attrs[a]:e.is(this.paper.customAttributes[a],"function")?b[a]=this.paper.customAttributes[a].def:b[a]=e._availableAttrs[a];
return h-1?b:b[f[0]]}if(this.attrs&&null==d&&e.is(a,"array")){b={};g=0;for(h=a.length;g<h;g++)b[a[g]]=this.attr(a[g]);return b}null!=d&&(b={},b[a]=d);null==d&&e.is(a,"object")&&(b=a);for(g in b)q("raphael.attr."+g+"."+this.id,this,b[g]);if(b){for(g in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(g)&&b.hasOwnProperty(g)&&e.is(this.paper.customAttributes[g],"function"))for(h in f=this.paper.customAttributes[g].apply(this,[].concat(b[g])),this.attrs[g]=b[g],f)f.hasOwnProperty(h)&&
(b[h]=f[h]);b.text&&"text"==this.type&&(this.textpath.string=b.text);K(this,b)}return this};G.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&e._tofront(this,this.paper);return this};G.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper));return this};G.insertAfter=function(a){if(this.removed)return this;
a.constructor==e.st.constructor&&(a=a[a.length-1]);a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node);e._insertafter(this,a,this.paper);return this};G.insertBefore=function(a){if(this.removed)return this;a.constructor==e.st.constructor&&(a=a[0]);a.node.parentNode.insertBefore(this.node,a.node);e._insertbefore(this,a,this.paper);return this};G.blur=function(a){var d=this.node.runtimeStyle,l=d.filter,l=l.replace(m,"");0!==+a?(this.attrs.blur=
a,d.filter=l+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")",d.margin=e.format("-{0}px 0 0 -{0}px",b(+a||1.5))):(d.filter=l,d.margin=0,delete this.attrs.blur)};e._engine.path=function(a,d){var b=A("shape");b.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";b.coordsize="21600 21600";b.coordorigin=d.coordorigin;var l=new J(b,d),e={fill:"none",stroke:"#000"};a&&(e.path=a);l.type="path";l.path=[];l.Path="";K(l,e);d.canvas.appendChild(b);e=A("skew");e.on=!0;b.appendChild(e);
l.skew=e;l.transform("");return l};e._engine.rect=function(a,d,b,l,f,g){var h=e._rectPath(d,b,l,f,g);a=a.path(h);var q=a.attrs;a.X=q.x=d;a.Y=q.y=b;a.W=q.width=l;a.H=q.height=f;q.r=g;q.path=h;a.type="rect";return a};e._engine.ellipse=function(a,d,b,l,e){a=a.path();a.X=d-l;a.Y=b-e;a.W=2*l;a.H=2*e;a.type="ellipse";K(a,{cx:d,cy:b,rx:l,ry:e});return a};e._engine.circle=function(a,d,b,l){a=a.path();a.X=d-l;a.Y=b-l;a.W=a.H=2*l;a.type="circle";K(a,{cx:d,cy:b,r:l});return a};e._engine.image=function(a,d,b,
l,f,g){var h=e._rectPath(b,l,f,g);a=a.path(h).attr({stroke:"none"});var q=a.attrs,k=a.node,m=k.getElementsByTagName("fill")[0];q.src=d;a.X=q.x=b;a.Y=q.y=l;a.W=q.width=f;a.H=q.height=g;q.path=h;a.type="image";m.parentNode==k&&k.removeChild(m);m.rotate=!0;m.src=d;m.type="tile";a._.fillpos=[b,l];a._.fillsize=[f,g];k.appendChild(m);F(a,1,1,0,0,0);return a};e._engine.text=function(a,d,l,f){var g=A("shape"),h=A("path"),q=A("textpath");d=d||0;l=l||0;f=f||"";h.v=e.format("m{0},{1}l{2},{1}",b(21600*d),b(21600*
l),b(21600*d)+1);h.textpathok=!0;q.string=k(f);q.on=!0;g.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";g.coordsize="21600 21600";g.coordorigin="0 0";var m=new J(g,a),v={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:f};m.shape=g;m.path=h;m.textpath=q;m.type="text";m.attrs.text=k(f);m.attrs.x=d;m.attrs.y=l;m.attrs.w=1;m.attrs.h=1;K(m,v);g.appendChild(q);g.appendChild(h);a.canvas.appendChild(g);a=A("skew");a.on=!0;g.appendChild(a);m.skew=a;m.transform("");return m};
e._engine.setSize=function(a,d){var b=this.canvas.style;this.width=a;this.height=d;a==+a&&(a+="px");d==+d&&(d+="px");b.width=a;b.height=d;b.clip="rect(0 "+a+" "+d+" 0)";this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox);return this};e._engine.setViewBox=function(a,d,b,l,f){e.eve("raphael.setViewBox",this,this._viewBox,[a,d,b,l,f]);var h=this.width,q=this.height,k=1/g(b/h,l/q),m,v;f&&(m=q/l,v=h/b,b*m<h&&(a-=(h-b*m)/2/m),l*v<q&&(d-=(q-l*v)/2/v));this._viewBox=[a,d,b,l,!!f];this._viewBoxShift=
{dx:-a,dy:-d,scale:k};this.forEach(function(a){a.transform("...")});return this};var A;e._engine.initWin=function(a){var d=a.document;d.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!d.namespaces.rvml&&d.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),A=function(a){return d.createElement("<rvml:"+a+' class="rvml">')}}catch(b){A=function(a){return d.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};e._engine.initWin(e._g.win);e._engine.create=
function(){var a=e._getContainer.apply(0,arguments),d=a.container,b=a.height,l=a.width,f=a.x,a=a.y;if(!d)throw Error("VML container not found.");var g=new e._Paper,h=g.canvas=e._g.doc.createElement("div"),q=h.style,f=f||0,a=a||0,l=l||512,b=b||342;g.width=l;g.height=b;l==+l&&(l+="px");b==+b&&(b+="px");g.coordsize="21600000 21600000";g.coordorigin="0 0";g.span=e._g.doc.createElement("span");g.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";h.appendChild(g.span);
q.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",l,b);1==d?(e._g.doc.body.appendChild(h),q.left=f+"px",q.top=a+"px",q.position="absolute"):d.firstChild?d.insertBefore(h,d.firstChild):d.appendChild(h);g.renderfix=function(){};return g};e.prototype.clear=function(){e.eve("raphael.clear",this);this.canvas.innerHTML="";this.span=e._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";
this.canvas.appendChild(this.span);this.bottom=this.top=null};e.prototype.remove=function(){e.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?e._removedFactory(a):null;return!0};var I=e.st,O;for(O in G)G.hasOwnProperty(O)&&!I.hasOwnProperty(O)&&(I[O]=function(a){return function(){var d=arguments;return this.forEach(function(b){b[a].apply(b,d)})}}(O))}});
(function(e,k,h){var f=e.L,b={version:"0.7.2"};"object"===typeof module&&"object"===typeof module.exports?module.exports=b:"function"===typeof define&&define.amd&&define(b);b.noConflict=function(){e.L=f;return this};e.L=b;b.Util={extend:function(a){var d=Array.prototype.slice.call(arguments,1),b,e,f,g;e=0;for(f=d.length;e<f;e++)for(b in g=d[e]||{},g)g.hasOwnProperty(b)&&(a[b]=g[b]);return a},bind:function(a,d){var b=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(d,
b||arguments)}},stamp:function(){var a=0;return function(d){d._leaflet_id=d._leaflet_id||++a;return d._leaflet_id}}(),invokeEach:function(a,d,b){var e,f;if("object"===typeof a){f=Array.prototype.slice.call(arguments,3);for(e in a)d.apply(b,[e,a[e]].concat(f));return!0}return!1},limitExecByInterval:function(a,d,b){var e,f;return function m(){var g=arguments;e?f=!0:(e=!0,setTimeout(function(){e=!1;f&&(m.apply(b,g),f=!1)},d),a.apply(b,g))}},falseFn:function(){return!1},formatNum:function(a,d){var b=
Math.pow(10,d||5);return Math.round(a*b)/b},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return b.Util.trim(a).split(/\s+/)},setOptions:function(a,d){a.options=b.extend({},a.options,d);return a.options},getParamString:function(a,d,b){var e=[],f;for(f in a)e.push(encodeURIComponent(b?f.toUpperCase():f)+"="+encodeURIComponent(a[f]));return(d&&-1!==d.indexOf("?")?"&":"?")+e.join("&")},template:function(a,d){return a.replace(/\{ *([\w_]+) *\}/g,function(a,
b){var e=d[b];if(e===h)throw Error("No value provided for variable "+a);"function"===typeof e&&(e=e(d));return e})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function a(a){var d,b,l=["webkit","moz","o","ms"];for(d=0;d<l.length&&!b;d++)b=e[l[d]+a];return b}function d(a){var d=+new Date,b=Math.max(0,16-(d-l));l=d+b;return e.setTimeout(a,b)}var l=0,f=e.requestAnimationFrame||
a("RequestAnimationFrame")||d,g=e.cancelAnimationFrame||a("CancelAnimationFrame")||a("CancelRequestAnimationFrame")||function(a){e.clearTimeout(a)};b.Util.requestAnimFrame=function(a,l,g,h){a=b.bind(a,l);if(g&&f===d)a();else return f.call(e,a,h)};b.Util.cancelAnimFrame=function(a){a&&g.call(e,a)}})();b.extend=b.Util.extend;b.bind=b.Util.bind;b.stamp=b.Util.stamp;b.setOptions=b.Util.setOptions;b.Class=function(){};b.Class.extend=function(a){var d=function(){this.initialize&&this.initialize.apply(this,
arguments);this._initHooks&&this.callInitHooks()},l=function(){};l.prototype=this.prototype;var e=new l;e.constructor=d;d.prototype=e;for(var f in this)this.hasOwnProperty(f)&&"prototype"!==f&&(d[f]=this[f]);a.statics&&(b.extend(d,a.statics),delete a.statics);a.includes&&(b.Util.extend.apply(null,[e].concat(a.includes)),delete a.includes);a.options&&e.options&&(a.options=b.extend({},e.options,a.options));b.extend(e,a);e._initHooks=[];var g=this;d.__super__=g.prototype;e.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&
g.prototype.callInitHooks.call(this);this._initHooksCalled=!0;for(var a=0,d=e._initHooks.length;a<d;a++)e._initHooks[a].call(this)}};return d};b.Class.include=function(a){b.extend(this.prototype,a)};b.Class.mergeOptions=function(a){b.extend(this.prototype.options,a)};b.Class.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1);this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push("function"===typeof a?a:function(){this[a].apply(this,d)})};b.Mixin=
{};b.Mixin.Events={addEventListener:function(a,d,e){if(b.Util.invokeEach(a,this.addEventListener,this,d,e))return this;var f=this._leaflet_events=this._leaflet_events||{},g=e&&e!==this&&b.stamp(e),h,k,t,u,x;a=b.Util.splitWords(a);h=0;for(k=a.length;h<k;h++)t={action:d,context:e||this},u=a[h],g?(x=u+"_idx",u=x+"_len",x=f[x]=f[x]||{},x[g]||(x[g]=[],f[u]=(f[u]||0)+1),x[g].push(t)):(f[u]=f[u]||[],f[u].push(t));return this},hasEventListeners:function(a){var d=this._leaflet_events;return!!d&&(a in d&&0<
d[a].length||a+"_idx"in d&&0<d[a+"_idx_len"])},removeEventListener:function(a,d,e){if(!this._leaflet_events)return this;if(!a)return this.clearAllEventListeners();if(b.Util.invokeEach(a,this.removeEventListener,this,d,e))return this;var f=this._leaflet_events,g=e&&e!==this&&b.stamp(e),h,k,t,u,x,y,B;a=b.Util.splitWords(a);h=0;for(k=a.length;h<k;h++)if(t=a[h],u=t+"_idx",x=u+"_len",y=f[u],d){if(t=g&&y?y[g]:f[t]){for(u=t.length-1;0<=u;u--)t[u].action!==d||e&&t[u].context!==e||(B=t.splice(u,1),B[0].action=
b.Util.falseFn);e&&y&&0===t.length&&(delete y[g],f[x]--)}}else delete f[t],delete f[u],delete f[x];return this},clearAllEventListeners:function(){delete this._leaflet_events;return this},fireEvent:function(a,d){if(!this.hasEventListeners(a))return this;var e=b.Util.extend({},d,{type:a,target:this}),f=this._leaflet_events,g,h,k,t;if(f[a])for(g=f[a].slice(),h=0,k=g.length;h<k;h++)g[h].action.call(g[h].context,e);f=f[a+"_idx"];for(t in f)if(g=f[t].slice())for(h=0,k=g.length;h<k;h++)g[h].action.call(g[h].context,
e);return this},addOneTimeEventListener:function(a,d,e){if(b.Util.invokeEach(a,this.addOneTimeEventListener,this,d,e))return this;var f=b.bind(function(){this.removeEventListener(a,d,e).removeEventListener(a,f,e)},this);return this.addEventListener(a,d,e).addEventListener(a,f,e)}};b.Mixin.Events.on=b.Mixin.Events.addEventListener;b.Mixin.Events.off=b.Mixin.Events.removeEventListener;b.Mixin.Events.once=b.Mixin.Events.addOneTimeEventListener;b.Mixin.Events.fire=b.Mixin.Events.fireEvent;(function(){var a=
"ActiveXObject"in e,d=a&&!k.addEventListener,l=navigator.userAgent.toLowerCase(),f=-1!==l.indexOf("webkit"),g=-1!==l.indexOf("chrome"),w=-1!==l.indexOf("phantom"),m=-1!==l.indexOf("android"),t=-1!==l.search("android [23]"),l=-1!==l.indexOf("gecko"),u=typeof orientation!==h+"",x=e.navigator&&e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints&&!e.PointerEvent,y=e.PointerEvent&&e.navigator.pointerEnabled&&e.navigator.maxTouchPoints||x,B="devicePixelRatio"in e&&1<e.devicePixelRatio||"matchMedia"in
e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,F=k.documentElement,C=a&&"transition"in F.style,K="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!t,z="MozPerspective"in F.style,J="OTransition"in F.style,G=!e.L_DISABLE_3D&&(C||K||z||J)&&!w,w=!e.L_NO_TOUCH&&!w&&function(){if(y||"ontouchstart"in F)return!0;var a=k.createElement("div"),d=!1;if(!a.setAttribute)return!1;a.setAttribute("ontouchstart","return;");"function"===typeof a.ontouchstart&&(d=!0);
a.removeAttribute("ontouchstart");return d}();b.Browser={ie:a,ielt9:d,webkit:f,gecko:l&&!f&&!e.opera&&!a,android:m,android23:t,chrome:g,ie3d:C,webkit3d:K,gecko3d:z,opera3d:J,any3d:G,mobile:u,mobileWebkit:u&&f,mobileWebkit3d:u&&K,mobileOpera:u&&e.opera,touch:w,msPointer:x,pointer:y,retina:B}})();b.Point=function(a,d,b){this.x=b?Math.round(a):a;this.y=b?Math.round(d):d};b.Point.prototype={clone:function(){return new b.Point(this.x,this.y)},add:function(a){return this.clone()._add(b.point(a))},_add:function(a){this.x+=
a.x;this.y+=a.y;return this},subtract:function(a){return this.clone()._subtract(b.point(a))},_subtract:function(a){this.x-=a.x;this.y-=a.y;return this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){this.x/=a;this.y/=a;return this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){this.x*=a;this.y*=a;return this},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},
floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},distanceTo:function(a){a=b.point(a);var d=a.x-this.x;a=a.y-this.y;return Math.sqrt(d*d+a*a)},equals:function(a){a=b.point(a);return a.x===this.x&&a.y===this.y},contains:function(a){a=b.point(a);return Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+b.Util.formatNum(this.x)+", "+b.Util.formatNum(this.y)+")"}};b.point=
function(a,d,e){return a instanceof b.Point?a:b.Util.isArray(a)?new b.Point(a[0],a[1]):a===h||null===a?a:new b.Point(a,d,e)};b.Bounds=function(a,d){if(a)for(var b=d?[a,d]:a,e=0,f=b.length;e<f;e++)this.extend(b[e])};b.Bounds.prototype={extend:function(a){a=b.point(a);this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone());return this},getCenter:function(a){return new b.Point((this.min.x+
this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new b.Point(this.min.x,this.max.y)},getTopRight:function(){return new b.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d;a="number"===typeof a[0]||a instanceof b.Point?b.point(a):b.bounds(a);a instanceof b.Bounds?(d=a.min,a=a.max):d=a;return d.x>=this.min.x&&a.x<=this.max.x&&d.y>=this.min.y&&a.y<=this.max.y},intersects:function(a){a=b.bounds(a);var d=this.min,
e=this.max,f=a.min;a=a.max;var g=a.y>=d.y&&f.y<=e.y;return a.x>=d.x&&f.x<=e.x&&g},isValid:function(){return!(!this.min||!this.max)}};b.bounds=function(a,d){return!a||a instanceof b.Bounds?a:new b.Bounds(a,d)};b.Transformation=function(a,d,b,e){this._a=a;this._b=d;this._c=b;this._d=e};b.Transformation.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){d=d||1;a.x=d*(this._a*a.x+this._b);a.y=d*(this._c*a.y+this._d);return a},untransform:function(a,d){d=d||
1;return new b.Point((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};b.DomUtil={get:function(a){return"string"===typeof a?k.getElementById(a):a},getStyle:function(a,d){var b=a.style[d];!b&&a.currentStyle&&(b=a.currentStyle[d]);b&&"auto"!==b||!k.defaultView||(b=(b=k.defaultView.getComputedStyle(a,null))?b[d]:null);return"auto"===b?null:b},getViewportOffset:function(a){var d=0,e=0,f=a,g=k.body,h=k.documentElement,m;do{d+=f.offsetTop||0;e+=f.offsetLeft||0;d+=parseInt(b.DomUtil.getStyle(f,"borderTopWidth"),
10)||0;e+=parseInt(b.DomUtil.getStyle(f,"borderLeftWidth"),10)||0;m=b.DomUtil.getStyle(f,"position");if(f.offsetParent===g&&"absolute"===m)break;if("fixed"===m){d+=g.scrollTop||h.scrollTop||0;e+=g.scrollLeft||h.scrollLeft||0;break}if("relative"===m&&!f.offsetLeft){m=b.DomUtil.getStyle(f,"width");var t=b.DomUtil.getStyle(f,"max-width"),u=f.getBoundingClientRect();if("none"!==m||"none"!==t)e+=u.left+f.clientLeft;d+=u.top+(g.scrollTop||h.scrollTop||0);break}f=f.offsetParent}while(f);f=a;do{if(f===g)break;
d-=f.scrollTop||0;e-=f.scrollLeft||0;f=f.parentNode}while(f);return new b.Point(e,d)},documentIsLtr:function(){b.DomUtil._docIsLtrCached||(b.DomUtil._docIsLtrCached=!0,b.DomUtil._docIsLtr="ltr"===b.DomUtil.getStyle(k.body,"direction"));return b.DomUtil._docIsLtr},create:function(a,d,b){a=k.createElement(a);a.className=d;b&&b.appendChild(a);return a},hasClass:function(a,d){if(a.classList!==h)return a.classList.contains(d);var e=b.DomUtil._getClass(a);return 0<e.length&&(new RegExp("(^|\\s)"+d+"(\\s|$)")).test(e)},
addClass:function(a,d){if(a.classList!==h)for(var e=b.Util.splitWords(d),f=0,g=e.length;f<g;f++)a.classList.add(e[f]);else b.DomUtil.hasClass(a,d)||(e=b.DomUtil._getClass(a),b.DomUtil._setClass(a,(e?e+" ":"")+d))},removeClass:function(a,d){a.classList!==h?a.classList.remove(d):b.DomUtil._setClass(a,b.Util.trim((" "+b.DomUtil._getClass(a)+" ").replace(" "+d+" "," ")))},_setClass:function(a,d){a.className.baseVal===h?a.className=d:a.className.baseVal=d},_getClass:function(a){return a.className.baseVal===
h?a.className:a.className.baseVal},setOpacity:function(a,d){if("opacity"in a.style)a.style.opacity=d;else if("filter"in a.style){var b=!1;try{b=a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){if(1===d)return}d=Math.round(100*d);b?(b.Enabled=100!==d,b.Opacity=d):a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+d+")"}},testProp:function(a){for(var d=k.documentElement.style,b=0;b<a.length;b++)if(a[b]in d)return a[b];return!1},getTranslateString:function(a){var d=b.Browser.webkit3d;
return"translate"+(d?"3d":"")+"("+a.x+"px,"+a.y+"px"+((d?",0":"")+")")},getScaleString:function(a,d){return b.DomUtil.getTranslateString(d.add(d.multiplyBy(-1*a)))+(" scale("+a+") ")},setPosition:function(a,d,e){a._leaflet_pos=d;!e&&b.Browser.any3d?a.style[b.DomUtil.TRANSFORM]=b.DomUtil.getTranslateString(d):(a.style.left=d.x+"px",a.style.top=d.y+"px")},getPosition:function(a){return a._leaflet_pos}};b.DomUtil.TRANSFORM=b.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform",
"msTransform"]);b.DomUtil.TRANSITION=b.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);b.DomUtil.TRANSITION_END="webkitTransition"===b.DomUtil.TRANSITION||"OTransition"===b.DomUtil.TRANSITION?b.DomUtil.TRANSITION+"End":"transitionend";(function(){if("onselectstart"in k)b.extend(b.DomUtil,{disableTextSelection:function(){b.DomEvent.on(e,"selectstart",b.DomEvent.preventDefault)},enableTextSelection:function(){b.DomEvent.off(e,"selectstart",b.DomEvent.preventDefault)}});
else{var a=b.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);b.extend(b.DomUtil,{disableTextSelection:function(){if(a){var d=k.documentElement.style;this._userSelect=d[a];d[a]="none"}},enableTextSelection:function(){a&&(k.documentElement.style[a]=this._userSelect,delete this._userSelect)}})}b.extend(b.DomUtil,{disableImageDrag:function(){b.DomEvent.on(e,"dragstart",b.DomEvent.preventDefault)},enableImageDrag:function(){b.DomEvent.off(e,"dragstart",
b.DomEvent.preventDefault)}})})();b.LatLng=function(a,d,b){a=parseFloat(a);d=parseFloat(d);if(isNaN(a)||isNaN(d))throw Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=a;this.lng=d;b!==h&&(this.alt=parseFloat(b))};b.extend(b.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1E-9});b.LatLng.prototype={equals:function(a){if(!a)return!1;a=b.latLng(a);return Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=b.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+b.Util.formatNum(this.lat,
a)+", "+b.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=b.latLng(a);var d=b.LatLng.DEG_TO_RAD,e=(a.lng-this.lng)*d,f=this.lat*d,g=a.lat*d;a=Math.sin((a.lat-this.lat)*d/2);e=Math.sin(e/2);f=a*a+e*e*Math.cos(f)*Math.cos(g);return 12756274*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))},wrap:function(a,d){var e=this.lng;a=a||-180;d=d||180;return new b.LatLng(this.lat,(e+d)%(d-a)+(e<a||e===d?d:a))}};b.latLng=function(a,d){return a instanceof b.LatLng?a:b.Util.isArray(a)?"number"===typeof a[0]||"string"===
typeof a[0]?new b.LatLng(a[0],a[1],a[2]):null:a===h||null===a?a:"object"===typeof a&&"lat"in a?new b.LatLng(a.lat,"lng"in a?a.lng:a.lon):d===h?null:new b.LatLng(a,d)};b.LatLngBounds=function(a,d){if(a)for(var b=d?[a,d]:a,e=0,f=b.length;e<f;e++)this.extend(b[e])};b.LatLngBounds.prototype={extend:function(a){if(!a)return this;var d=b.latLng(a);a=null!==d?d:b.latLngBounds(a);a instanceof b.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=
Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new b.LatLng(a.lat,a.lng),this._northEast=new b.LatLng(a.lat,a.lng)):a instanceof b.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast));return this},pad:function(a){var d=this._southWest,e=this._northEast,f=Math.abs(d.lat-e.lat)*a;a*=Math.abs(d.lng-e.lng);return new b.LatLngBounds(new b.LatLng(d.lat-f,d.lng-a),new b.LatLng(e.lat+
f,e.lng+a))},getCenter:function(){return new b.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new b.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new b.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},
getNorth:function(){return this._northEast.lat},contains:function(a){a="number"===typeof a[0]||a instanceof b.LatLng?b.latLng(a):b.latLngBounds(a);var d=this._southWest,e=this._northEast,f;a instanceof b.LatLngBounds?(f=a.getSouthWest(),a=a.getNorthEast()):f=a;return f.lat>=d.lat&&a.lat<=e.lat&&f.lng>=d.lng&&a.lng<=e.lng},intersects:function(a){a=b.latLngBounds(a);var d=this._southWest,e=this._northEast,f=a.getSouthWest();a=a.getNorthEast();var g=a.lng>=d.lng&&f.lng<=e.lng;return a.lat>=d.lat&&f.lat<=
e.lat&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join()},equals:function(a){if(!a)return!1;a=b.latLngBounds(a);return this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())},isValid:function(){return!(!this._southWest||!this._northEast)}};b.latLngBounds=function(a,d){return!a||a instanceof b.LatLngBounds?a:new b.LatLngBounds(a,d)};b.Projection={};b.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var d=
b.LatLng.DEG_TO_RAD,e=this.MAX_LATITUDE,e=Math.max(Math.min(e,a.lat),-e);a=a.lng*d;d=Math.log(Math.tan(Math.PI/4+e*d/2));return new b.Point(a,d)},unproject:function(a){var d=b.LatLng.RAD_TO_DEG,e=a.x*d;a=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*d;return new b.LatLng(a,e)}};b.Projection.LonLat={project:function(a){return new b.Point(a.lng,a.lat)},unproject:function(a){return new b.LatLng(a.y,a.x)}};b.CRS={latLngToPoint:function(a,d){var b=this.projection.project(a),e=this.scale(d);return this.transformation._transform(b,
e)},pointToLatLng:function(a,d){var b=this.scale(d),b=this.transformation.untransform(a,b);return this.projection.unproject(b)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){a=this.scale(a);return b.point(a,a)}};b.CRS.Simple=b.extend({},b.CRS,{projection:b.Projection.LonLat,transformation:new b.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}});b.CRS.EPSG3857=b.extend({},b.CRS,{code:"EPSG:3857",projection:b.Projection.SphericalMercator,
transformation:new b.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){return this.projection.project(a).multiplyBy(6378137)}});b.CRS.EPSG900913=b.extend({},b.CRS.EPSG3857,{code:"EPSG:900913"});b.CRS.EPSG4326=b.extend({},b.CRS,{code:"EPSG:4326",projection:b.Projection.LonLat,transformation:new b.Transformation(1/360,.5,-1/360,.5)});b.Map=b.Class.extend({includes:b.Mixin.Events,options:{crs:b.CRS.EPSG3857,fadeAnimation:b.DomUtil.TRANSITION&&!b.Browser.android23,trackResize:!0,markerZoomAnimation:b.DomUtil.TRANSITION&&
b.Browser.any3d},initialize:function(a,d){d=b.setOptions(this,d);this._initContainer(a);this._initLayout();this._onResize=b.bind(this._onResize,this);this._initEvents();d.maxBounds&&this.setMaxBounds(d.maxBounds);d.center&&d.zoom!==h&&this.setView(b.latLng(d.center),d.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(d.layers)},setView:function(a,d){d=d===h?this.getZoom():d;this._resetView(b.latLng(a),this._limitZoom(d));
return this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=this._limitZoom(a),this)},zoomIn:function(a,d){return this.setZoom(this._zoom+(a||1),d)},zoomOut:function(a,d){return this.setZoom(this._zoom-(a||1),d)},setZoomAround:function(a,d,e){var f=this.getZoomScale(d),g=this.getSize().divideBy(2);a=(a instanceof b.Point?a:this.latLngToContainerPoint(a)).subtract(g).multiplyBy(1-1/f);g=this.containerPointToLatLng(g.add(a));return this.setView(g,d,{zoom:e})},
fitBounds:function(a,d){d=d||{};a=a.getBounds?a.getBounds():b.latLngBounds(a);var e=b.point(d.paddingTopLeft||d.padding||[0,0]),f=b.point(d.paddingBottomRight||d.padding||[0,0]),g=this.getBoundsZoom(a,!1,e.add(f)),e=f.subtract(e).divideBy(2),f=this.project(a.getSouthWest(),g),h=this.project(a.getNorthEast(),g),e=this.unproject(f.add(h).divideBy(2).add(e),g),g=d&&d.maxZoom?Math.min(d.maxZoom,g):g;return this.setView(e,g,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,
d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a){this.fire("movestart");this._rawPanBy(b.point(a));this.fire("move");return this.fire("moveend")},setMaxBounds:function(a){a=b.latLngBounds(a);this.options.maxBounds=a;if(!a)return this.off("moveend",this._panInsideMaxBounds,this);this._loaded&&this._panInsideMaxBounds();return this.on("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,d){var b=this.getCenter(),e=this._limitCenter(b,this._zoom,a);return b.equals(e)?this:
this.panTo(e,d)},addLayer:function(a){var d=b.stamp(a);if(this._layers[d])return this;this._layers[d]=a;!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[d]=a,this._updateZoomLevels());this.options.zoomAnimation&&b.TileLayer&&a instanceof b.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this));this._loaded&&this._layerAdd(a);return this},removeLayer:function(a){var d=b.stamp(a);if(!this._layers[d])return this;if(this._loaded)a.onRemove(this);
delete this._layers[d];this._loaded&&this.fire("layerremove",{layer:a});this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels());this.options.zoomAnimation&&b.TileLayer&&a instanceof b.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this));return this},hasLayer:function(a){return a?b.stamp(a)in this._layers:!1},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},invalidateSize:function(a){if(!this._loaded)return this;
a=b.extend({animate:!1,pan:!0},!0===a?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0;this._initialCenter=null;var e=this.getSize(),f=d.divideBy(2).round(),g=e.divideBy(2).round(),f=f.subtract(g);if(!f.x&&!f.y)return this;a.animate&&a.pan?this.panBy(f):(a.pan&&this._rawPanBy(f),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(b.bind(this.fire,this,"moveend"),200)):this.fire("moveend"));return this.fire("resize",{oldSize:d,newSize:e})},addHandler:function(a,
d){if(!d)return this;var b=this[a]=new d(this);this._handlers.push(b);this.options[a]&&b.enable();return this},remove:function(){this._loaded&&this.fire("unload");this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=h}this._clearPanes();this._clearControlPos&&this._clearControlPos();this._clearHandlers();return this},getCenter:function(){this._checkIfLoaded();return this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},
getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),a=this.unproject(a.getTopRight());return new b.LatLngBounds(d,a)},getMinZoom:function(){return this.options.minZoom===h?this._layersMinZoom===h?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===h?this._layersMaxZoom===h?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,e){a=b.latLngBounds(a);var f=this.getMinZoom()-
(d?1:0),g=this.getMaxZoom(),h=this.getSize(),k=a.getNorthWest();a=a.getSouthEast();var t=!0;e=b.point(e||[0,0]);do f++,t=this.project(a,f).subtract(this.project(k,f)).add(e),t=d?t.x<h.x||t.y<h.y:h.contains(t);while(t&&f<=g);return t&&d?null:d?f:f-1},getSize:function(){if(!this._size||this._sizeChanged)this._size=new b.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1;return this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new b.Bounds(a,
a.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var d=this.options.crs;return d.scale(a)/d.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,d){d=d===h?this._zoom:d;return this.options.crs.latLngToPoint(b.latLng(a),d)},unproject:function(a,d){d=d===h?this._zoom:d;return this.options.crs.pointToLatLng(b.point(a),
d)},layerPointToLatLng:function(a){a=b.point(a).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(a){return this.project(b.latLng(a))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return b.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return b.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){a=this.containerPointToLayerPoint(b.point(a));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(b.latLng(a)))},
mouseEventToContainerPoint:function(a){return b.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){a=this._container=b.DomUtil.get(a);if(!a)throw Error("Map container not found.");if(a._leaflet)throw Error("Map container is already initialized.");a._leaflet=!0},_initLayout:function(){var a=
this._container;b.DomUtil.addClass(a,"leaflet-container"+(b.Browser.touch?" leaflet-touch":"")+(b.Browser.retina?" leaflet-retina":"")+(b.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var d=b.DomUtil.getStyle(a,"position");"absolute"!==d&&"relative"!==d&&"fixed"!==d&&(a.style.position="relative");this._initPanes();this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",
this._container);this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);a.shadowPane=this._createPane("leaflet-shadow-pane");a.overlayPane=this._createPane("leaflet-overlay-pane");a.markerPane=this._createPane("leaflet-marker-pane");a.popupPane=this._createPane("leaflet-popup-pane");this.options.markerZoomAnimation||(b.DomUtil.addClass(a.markerPane," leaflet-zoom-hide"),b.DomUtil.addClass(a.shadowPane," leaflet-zoom-hide"),
b.DomUtil.addClass(a.popupPane," leaflet-zoom-hide"))},_createPane:function(a,d){return b.DomUtil.create("div",a,d||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?b.Util.isArray(a)?a:[a]:[];for(var d=0,e=a.length;d<e;d++)this.addLayer(a[d])},_resetView:function(a,d,e,f){var g=this._zoom!==d;f||(this.fire("movestart"),g&&this.fire("zoomstart"));this._zoom=d;this._initialCenter=a;this._initialTopLeftPoint=this._getNewTopLeftPoint(a);
e?this._initialTopLeftPoint._add(this._getMapPanePos()):b.DomUtil.setPosition(this._mapPane,new b.Point(0,0));this._tileLayersToLoad=this._tileLayersNum;a=!this._loaded;this._loaded=!0;a&&(this.fire("load"),this.eachLayer(this._layerAdd,this));this.fire("viewreset",{hard:!e});this.fire("move");(g||f)&&this.fire("zoomend");this.fire("moveend",{hard:!e})},_rawPanBy:function(a){b.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},
_updateZoomLevels:function(){var a,d=Infinity,b=-Infinity,e=this._getZoomSpan();for(a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a];isNaN(f.options.minZoom)||(d=Math.min(d,f.options.minZoom));isNaN(f.options.maxZoom)||(b=Math.max(b,f.options.maxZoom))}a===h?this._layersMaxZoom=this._layersMinZoom=h:(this._layersMaxZoom=b,this._layersMinZoom=d);e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.");
},_initEvents:function(a){if(b.DomEvent){a=a||"on";b.DomEvent[a](this._container,"click",this._onMouseClick,this);var d="dblclick mousedown mouseup mouseenter mouseleave mousemove contextmenu".split(" "),f,g;f=0;for(g=d.length;f<g;f++)b.DomEvent[a](this._container,d[f],this._fireMouseEvent,this);if(this.options.trackResize)b.DomEvent[a](e,"resize",this._onResize,this)}},_onResize:function(){b.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=b.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},
this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||b.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!b.DomEvent._skipped(a)){var d=a.type,d="mouseenter"===d?"mouseover":"mouseleave"===d?"mouseout":d;if(this.hasEventListeners(d)){"contextmenu"===d&&b.DomEvent.preventDefault(a);var e=this.mouseEventToContainerPoint(a),f=this.containerPointToLayerPoint(e),
g=this.layerPointToLatLng(f);this.fire(d,{latlng:g,layerPoint:f,containerPoint:e,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--;this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){if(this._loaded)a.call(d||this,this);else this.on("load",a,d);return this},_layerAdd:function(a){a.onAdd(this);this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return b.DomUtil.getPosition(this._mapPane)},
_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,d){var b=this.getSize()._divideBy(2);return this.project(a,d)._subtract(b)._round()},_latLngToNewLayerPoint:function(a,d,b){b=this._getNewTopLeftPoint(b,d).add(this._getMapPanePos());return this.project(a,d)._subtract(b)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},
_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,e){if(!e)return a;a=this.project(a,d);var f=this.getSize().divideBy(2),f=new b.Bounds(a.subtract(f),a.add(f));e=this._getBoundsOffset(f,e,d);return this.unproject(a.add(e),d)},_limitOffset:function(a,d){if(!d)return a;var e=this.getPixelBounds(),e=new b.Bounds(e.min.add(a),e.max.add(a));return a.add(this._getBoundsOffset(e,d))},_getBoundsOffset:function(a,d,e){var f=this.project(d.getNorthWest(),
e).subtract(a.min);d=this.project(d.getSouthEast(),e).subtract(a.max);a=this._rebound(f.x,-d.x);f=this._rebound(f.y,-d.y);return new b.Point(a,f)},_rebound:function(a,d){return 0<a+d?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),b=this.getMaxZoom();return Math.max(d,Math.min(b,a))}});b.map=function(a,d){return new b.Map(a,d)};b.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var d=
b.LatLng.DEG_TO_RAD,e=this.MAX_LATITUDE,f=Math.max(Math.min(e,a.lat),-e),e=this.R_MAJOR;a=a.lng*d*e;var d=f*d,f=this.R_MINOR/e,f=Math.sqrt(1-f*f),g=f*Math.sin(d),g=Math.pow((1-g)/(1+g),.5*f),d=Math.tan(.5*(.5*Math.PI-d))/g,d=-e*Math.log(d);return new b.Point(a,d)},unproject:function(a){var d=b.LatLng.RAD_TO_DEG,e=this.R_MAJOR,f=a.x*d/e,g=this.R_MINOR/e,g=Math.sqrt(1-g*g);a=Math.exp(-a.y/e);for(var e=Math.PI/2-2*Math.atan(a),h=15,k=.1;1E-7<Math.abs(k)&&0<--h;)k=g*Math.sin(e),k=Math.PI/2-2*Math.atan(a*
Math.pow((1-k)/(1+k),.5*g))-e,e+=k;return new b.LatLng(e*d,f)}};b.CRS.EPSG3395=b.extend({},b.CRS,{code:"EPSG:3395",projection:b.Projection.Mercator,transformation:function(){var a=.5/(Math.PI*b.Projection.Mercator.R_MAJOR);return new b.Transformation(a,.5,-a,.5)}()});b.TileLayer=b.Class.extend({includes:b.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:b.Browser.mobile,updateWhenIdle:b.Browser.mobile},
initialize:function(a,d){d=b.setOptions(this,d);d.detectRetina&&b.Browser.retina&&0<d.maxZoom&&(d.tileSize=Math.floor(d.tileSize/2),d.zoomOffset++,0<d.minZoom&&d.minZoom--,this.options.maxZoom--);d.bounds&&(d.bounds=b.latLngBounds(d.bounds));this._url=a;var e=this.options.subdomains;"string"===typeof e&&(this.options.subdomains=e.split(""))},onAdd:function(a){this._map=a;this._animated=a._zoomAnimated;this._initContainer();a.on({viewreset:this._reset,moveend:this._update},this);if(this._animated)a.on({zoomanim:this._animateZoom,
zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||(this._limitedUpdate=b.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this));this._reset();this._update()},addTo:function(a){a.addLayer(this);return this},onRemove:function(a){this._container.parentNode.removeChild(this._container);a.off({viewreset:this._reset,moveend:this._update},this);this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||a.off("move",
this._limitedUpdate,this);this._map=this._container=null},bringToFront:function(){var a=this._map._panes.tilePane;this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max));return this},bringToBack:function(){var a=this._map._panes.tilePane;this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min));return this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){this.options.opacity=
a;this._map&&this._updateOpacity();return this},setZIndex:function(a){this.options.zIndex=a;this._updateZIndex();return this},setUrl:function(a,d){this._url=a;d||this.redraw();return this},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());return this},_updateZIndex:function(){this._container&&this.options.zIndex!==h&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,d){var b=a.children,e=-d(Infinity,-Infinity),f,g,h;g=0;for(h=b.length;g<h;g++)b[g]!==
this._container&&(f=parseInt(b[g].style.zIndex,10),isNaN(f)||(e=d(e,f)));this.options.zIndex=this._container.style.zIndex=(isFinite(e)?e:0)+d(1,-1)},_updateOpacity:function(){var a,d=this._tiles;if(b.Browser.ielt9)for(a in d)b.DomUtil.setOpacity(d[a],this.options.opacity);else b.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;this._container||(this._container=b.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated?
(this._bgBuffer=b.DomUtil.create("div","leaflet-tile-container",this._container),this._tileContainer=b.DomUtil.create("div","leaflet-tile-container",this._container)):this._tileContainer=this._container,a.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_reset:function(a){for(var d in this._tiles)this.fire("tileunload",{tile:this._tiles[d]});this._tiles={};this._tilesToLoad=0;this.options.reuseTiles&&(this._unusedTiles=[]);this._tileContainer.innerHTML="";this._animated&&
a&&a.hard&&this._clearBgBuffer();this._initContainer()},_getTileSize:function(){var a=this._map,d=a.getZoom()+this.options.zoomOffset,b=this.options.maxNativeZoom,e=this.options.tileSize;b&&d>b&&(e=Math.round(a.getZoomScale(d)/a.getZoomScale(b)*e));return e},_update:function(){if(this._map){var a=this._map,d=a.getPixelBounds(),a=a.getZoom(),e=this._getTileSize();a>this.options.maxZoom||a<this.options.minZoom||(d=b.bounds(d.min.divideBy(e)._floor(),d.max.divideBy(e)._floor()),this._addTilesFromCenterOut(d),
(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(d))}},_addTilesFromCenterOut:function(a){var d=[],e=a.getCenter(),f,g,h;for(f=a.min.y;f<=a.max.y;f++)for(g=a.min.x;g<=a.max.x;g++)h=new b.Point(g,f),this._tileShouldBeLoaded(h)&&d.push(h);a=d.length;if(0!==a){d.sort(function(a,d){return a.distanceTo(e)-d.distanceTo(e)});f=k.createDocumentFragment();this._tilesToLoad||this.fire("loading");this._tilesToLoad+=a;for(g=0;g<a;g++)this._addTile(d[g],f);this._tileContainer.appendChild(f)}},
_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var d=this.options;if(!d.continuousWorld){var b=this._getWrapTileNum();if(d.noWrap&&(0>a.x||a.x>=b.x)||0>a.y||a.y>=b.y)return!1}return d.bounds&&(b=d.tileSize,a=a.multiplyBy(b),b=a.add([b,b]),a=this._map.unproject(a),b=this._map.unproject(b),d.continuousWorld||d.noWrap||(a=a.wrap(),b=b.wrap()),!d.bounds.intersects([a,b]))?!1:!0},_removeOtherTiles:function(a){var d,b,e;for(e in this._tiles)d=e.split(":"),b=parseInt(d[0],10),d=parseInt(d[1],
10),(b<a.min.x||b>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e)},_removeTile:function(a){var d=this._tiles[a];this.fire("tileunload",{tile:d,url:d.src});this.options.reuseTiles?(b.DomUtil.removeClass(d,"leaflet-tile-loaded"),this._unusedTiles.push(d)):d.parentNode===this._tileContainer&&this._tileContainer.removeChild(d);b.Browser.android||(d.onload=null,d.src=b.Util.emptyImageUrl);delete this._tiles[a]},_addTile:function(a,d){var e=this._getTilePos(a),f=this._getTile();b.DomUtil.setPosition(f,
e,b.Browser.chrome);this._tiles[a.x+":"+a.y]=f;this._loadTile(f,a);f.parentNode!==this._tileContainer&&d.appendChild(f)},_getZoomForUrl:function(){var a=this.options,d=this._map.getZoom();a.zoomReverse&&(d=a.maxZoom-d);d+=a.zoomOffset;return a.maxNativeZoom?Math.min(d,a.maxNativeZoom):d},_getTilePos:function(a){var d=this._map.getPixelOrigin(),b=this._getTileSize();return a.multiplyBy(b).subtract(d)},getTileUrl:function(a){return b.Util.template(this._url,b.extend({s:this._getSubdomain(a),z:a.z,x:a.x,
y:a.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(a){var d=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%d.x+d.x)%d.x);this.options.tms&&(a.y=d.y-a.y-1);a.z=this._getZoomForUrl()},_getSubdomain:function(a){a=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[a]},_getTile:function(){if(this.options.reuseTiles&&
0<this._unusedTiles.length){var a=this._unusedTiles.pop();this._resetTile(a);return a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=b.DomUtil.create("img","leaflet-tile");a.style.width=a.style.height=this._getTileSize()+"px";a.galleryimg="no";a.onselectstart=a.onmousemove=b.Util.falseFn;b.Browser.ielt9&&this.options.opacity!==h&&b.DomUtil.setOpacity(a,this.options.opacity);b.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden");return a},_loadTile:function(a,
d){a._layer=this;a.onload=this._tileOnLoad;a.onerror=this._tileOnError;this._adjustTilePoint(d);a.src=this.getTileUrl(d);this.fire("tileloadstart",{tile:a,url:a.src})},_tileLoaded:function(){this._tilesToLoad--;this._animated&&b.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated");this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(b.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;
this.src!==b.Util.emptyImageUrl&&(b.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src}));a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var d=a.options.errorTileUrl;d&&(this.src=d);a._tileLoaded()}});b.tileLayer=function(a,d){return new b.TileLayer(a,d)};b.TileLayer.WMS=b.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},
initialize:function(a,d){this._url=a;var e=b.extend({},this.defaultWmsParams),f=d.tileSize||this.options.tileSize;e.width=d.detectRetina&&b.Browser.retina?e.height=2*f:e.height=f;for(var g in d)this.options.hasOwnProperty(g)||"crs"===g||(e[g]=d[g]);this.wmsParams=e;b.setOptions(this,d)},onAdd:function(a){this._crs=this.options.crs||a.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code;b.TileLayer.prototype.onAdd.call(this,
a)},getTileUrl:function(a){var d=this._map,e=this.options.tileSize,f=a.multiplyBy(e),e=f.add([e,e]),f=this._crs.project(d.unproject(f,a.z)),d=this._crs.project(d.unproject(e,a.z)),d=1.3<=this._wmsVersion&&this._crs===b.CRS.EPSG4326?[d.y,f.x,f.y,d.x].join():[f.x,d.y,d.x,f.y].join();a=b.Util.template(this._url,{s:this._getSubdomain(a)});return a+b.Util.getParamString(this.wmsParams,a,!0)+"&BBOX="+d},setParams:function(a,d){b.extend(this.wmsParams,a);d||this.redraw();return this}});b.tileLayer.wms=function(a,
d){return new b.TileLayer.WMS(a,d)};b.TileLayer.Canvas=b.TileLayer.extend({options:{async:!1},initialize:function(a){b.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=b.DomUtil.create("canvas","leaflet-tile");a.width=a.height=this.options.tileSize;a.onselectstart=a.onmousemove=b.Util.falseFn;
return a},_loadTile:function(a,d){a._layer=this;a._tilePoint=d;this._redrawTile(a);this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}});b.tileLayer.canvas=function(a){return new b.TileLayer.Canvas(a)};b.ImageOverlay=b.Class.extend({includes:b.Mixin.Events,options:{opacity:1},initialize:function(a,d,e){this._url=a;this._bounds=b.latLngBounds(d);b.setOptions(this,e)},onAdd:function(a){this._map=a;this._image||this._initImage();a._panes.overlayPane.appendChild(this._image);
a.on("viewreset",this._reset,this);if(a.options.zoomAnimation&&b.Browser.any3d)a.on("zoomanim",this._animateZoom,this);this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image);a.off("viewreset",this._reset,this);a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){a.addLayer(this);return this},setOpacity:function(a){this.options.opacity=a;this._updateOpacity();return this},bringToFront:function(){this._image&&this._map._panes.overlayPane.appendChild(this._image);
return this},bringToBack:function(){var a=this._map._panes.overlayPane;this._image&&a.insertBefore(this._image,a.firstChild);return this},setUrl:function(a){this._url=a;this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=b.DomUtil.create("img","leaflet-image-layer");this._map.options.zoomAnimation&&b.Browser.any3d?b.DomUtil.addClass(this._image,"leaflet-zoom-animated"):b.DomUtil.addClass(this._image,"leaflet-zoom-hide");this._updateOpacity();
b.extend(this._image,{galleryimg:"no",onselectstart:b.Util.falseFn,onmousemove:b.Util.falseFn,onload:b.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var d=this._map,e=this._image,f=d.getZoomScale(a.zoom),g=this._bounds.getNorthWest(),h=this._bounds.getSouthEast(),g=d._latLngToNewLayerPoint(g,a.zoom,a.center);a=d._latLngToNewLayerPoint(h,a.zoom,a.center)._subtract(g);a=g._add(a._multiplyBy(.5*(1-1/f)));e.style[b.DomUtil.TRANSFORM]=b.DomUtil.getTranslateString(a)+" scale("+
f+") "},_reset:function(){var a=this._image,d=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),e=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(d);b.DomUtil.setPosition(a,d);a.style.width=e.x+"px";a.style.height=e.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){b.DomUtil.setOpacity(this._image,this.options.opacity)}});b.imageOverlay=function(a,d,e){return new b.ImageOverlay(a,d,e)};b.Icon=b.Class.extend({options:{className:""},initialize:function(a){b.setOptions(this,
a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var b=this._getIconUrl(a);if(!b){if("icon"===a)throw Error("iconUrl not set in Icon options (see the docs).");return null}b=d&&"IMG"===d.tagName?this._createImg(b,d):this._createImg(b);this._setIconStyles(b,a);return b},_setIconStyles:function(a,d){var e=this.options,f=b.point(e[d+"Size"]),g;g="shadow"===d?b.point(e.shadowAnchor||e.iconAnchor):b.point(e.iconAnchor);
!g&&f&&(g=f.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+e.className;g&&(a.style.marginLeft=-g.x+"px",a.style.marginTop=-g.y+"px");f&&(a.style.width=f.x+"px",a.style.height=f.y+"px")},_createImg:function(a,d){d=d||k.createElement("img");d.src=a;return d},_getIconUrl:function(a){return b.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}});b.icon=function(a){return new b.Icon(a)};b.Icon.Default=b.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,
41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var d=a+"Url";if(this.options[d])return this.options[d];b.Browser.retina&&"icon"===a&&(a+="-2x");d=b.Icon.Default.imagePath;if(!d)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return d+"/marker-"+a+".png"}});b.Icon.Default.imagePath=function(){var a=k.getElementsByTagName("script"),d=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/,b,e,f,g;b=0;for(e=a.length;b<e;b++)if(f=a[b].src,g=f.match(d))return a=f.split(d)[0],
(a?a+"/":"")+"images"}();b.Marker=b.Class.extend({includes:b.Mixin.Events,options:{icon:new b.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,d){b.setOptions(this,d);this._latlng=b.latLng(a)},onAdd:function(a){this._map=a;a.on("viewreset",this.update,this);this._initIcon();this.update();this.fire("add");if(a.options.zoomAnimation&&a.options.markerZoomAnimation)a.on("zoomanim",this._animateZoom,this)},
addTo:function(a){a.addLayer(this);return this},onRemove:function(a){this.dragging&&this.dragging.disable();this._removeIcon();this._removeShadow();this.fire("remove");a.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){this._latlng=b.latLng(a);this.update();return this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){this.options.zIndexOffset=a;this.update();return this},setIcon:function(a){this.options.icon=
a;this._map&&(this._initIcon(),this.update());this._popup&&this.bindPopup(this._popup);return this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d=this._map,e=d.options.zoomAnimation&&d.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",f=a.icon.createIcon(this._icon),d=!1;f!==this._icon&&(this._icon&&this._removeIcon(),d=!0,a.title&&(f.title=a.title),a.alt&&(f.alt=
a.alt));b.DomUtil.addClass(f,e);a.keyboard&&(f.tabIndex="0");this._icon=f;this._initInteraction();if(a.riseOnHover)b.DomEvent.on(f,"mouseover",this._bringToFront,this).on(f,"mouseout",this._resetZIndex,this);var f=a.icon.createShadow(this._shadow),g=!1;f!==this._shadow&&(this._removeShadow(),g=!0);f&&b.DomUtil.addClass(f,e);this._shadow=f;1>a.opacity&&this._updateOpacity();a=this._map._panes;d&&a.markerPane.appendChild(this._icon);f&&g&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&
b.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex);this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow);this._shadow=null},_setPos:function(a){b.DomUtil.setPosition(this._icon,a);this._shadow&&b.DomUtil.setPosition(this._shadow,a);this._zIndex=a.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=
this._zIndex+a},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,d=["dblclick","mousedown","mouseover","mouseout","contextmenu"];b.DomUtil.addClass(a,"leaflet-clickable");b.DomEvent.on(a,"click",this._onMouseClick,this);b.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var e=0;e<d.length;e++)b.DomEvent.on(a,d[e],this._fireMouseEvent,this);b.Handler.MarkerDrag&&
(this.dragging=new b.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var d=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||d)&&b.DomEvent.stopPropagation(a);d||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,
{originalEvent:a,latlng:this._latlng});"contextmenu"===a.type&&this.hasEventListeners(a.type)&&b.DomEvent.preventDefault(a);"mousedown"!==a.type?b.DomEvent.stopPropagation(a):b.DomEvent.preventDefault(a)},setOpacity:function(a){this.options.opacity=a;this._map&&this._updateOpacity();return this},_updateOpacity:function(){b.DomUtil.setOpacity(this._icon,this.options.opacity);this._shadow&&b.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},
_resetZIndex:function(){this._updateZIndex(0)}});b.marker=function(a,d){return new b.Marker(a,d)};b.DivIcon=b.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){a=a&&"DIV"===a.tagName?a:k.createElement("div");var d=this.options;a.innerHTML=!1!==d.html?d.html:"";d.bgPos&&(a.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px");this._setIconStyles(a,"icon");return a},createShadow:function(){return null}});b.divIcon=function(a){return new b.DivIcon(a)};
b.Map.mergeOptions({closePopupOnClick:!0});b.Popup=b.Class.extend({includes:b.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,d){b.setOptions(this,a);this._source=d;this._animated=b.Browser.any3d&&this.options.zoomAnimation;this._isOpen=!1},onAdd:function(a){this._map=a;this._container||this._initLayout();var d=a.options.fadeAnimation;d&&b.DomUtil.setOpacity(this._container,
0);a._panes.popupPane.appendChild(this._container);a.on(this._getEvents(),this);this.update();d&&b.DomUtil.setOpacity(this._container,1);this.fire("open");a.fire("popupopen",{popup:this});this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){a.addLayer(this);return this},openOn:function(a){a.openPopup(this);return this},onRemove:function(a){a._panes.popupPane.removeChild(this._container);b.Util.falseFn(this._container.offsetWidth);a.off(this._getEvents(),this);a.options.fadeAnimation&&
b.DomUtil.setOpacity(this._container,0);this._map=null;this.fire("close");a.fire("popupclose",{popup:this});this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){this._latlng=b.latLng(a);this._map&&(this._updatePosition(),this._adjustPan());return this},getContent:function(){return this._content},setContent:function(a){this._content=a;this.update();return this},update:function(){this._map&&(this._container.style.visibility="hidden",
this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};this._animated&&(a.zoomanim=this._zoomAnimation);if("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)a.preclick=this._close;this.options.keepInView&&(a.moveend=this._adjustPan);return a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a=this._container=
b.DomUtil.create("div","leaflet-popup "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide")),d;this.options.closeButton&&(d=this._closeButton=b.DomUtil.create("a","leaflet-popup-close-button",a),d.href="#close",d.innerHTML="&#215;",b.DomEvent.disableClickPropagation(d),b.DomEvent.on(d,"click",this._onCloseButtonClick,this));d=this._wrapper=b.DomUtil.create("div","leaflet-popup-content-wrapper",a);b.DomEvent.disableClickPropagation(d);this._contentNode=b.DomUtil.create("div",
"leaflet-popup-content",d);b.DomEvent.disableScrollPropagation(this._contentNode);b.DomEvent.on(d,"contextmenu",b.DomEvent.stopPropagation);this._tipContainer=b.DomUtil.create("div","leaflet-popup-tip-container",a);this._tip=b.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"===typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);
this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="";d.whiteSpace="nowrap";var e=a.offsetWidth,e=Math.min(e,this.options.maxWidth),e=Math.max(e,this.options.minWidth);d.width=e+1+"px";d.whiteSpace="";d.height="";var e=a.offsetHeight,f=this.options.maxHeight;f&&e>f?(d.height=f+"px",b.DomUtil.addClass(a,"leaflet-popup-scrolled")):b.DomUtil.removeClass(a,"leaflet-popup-scrolled");this._containerWidth=this._container.offsetWidth},
_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=this._animated,e=b.point(this.options.offset);d&&b.DomUtil.setPosition(this._container,a);this._containerBottom=-e.y-(d?0:a.y);this._containerLeft=-Math.round(this._containerWidth/2)+e.x+(d?0:a.x);this._container.style.bottom=this._containerBottom+"px";this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);b.DomUtil.setPosition(this._container,
a)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,d=this._container.offsetHeight,e=this._containerWidth,f=new b.Point(this._containerLeft,-d-this._containerBottom);this._animated&&f._add(b.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(f),g=b.point(this.options.autoPanPadding),h=b.point(this.options.autoPanPaddingTopLeft||g),g=b.point(this.options.autoPanPaddingBottomRight||g),k=a.getSize(),t=0,u=0;f.x+e+g.x>k.x&&(t=f.x+e-k.x+g.x);0>f.x-t-h.x&&(t=f.x-h.x);
f.y+d+g.y>k.y&&(u=f.y+d-k.y+g.y);0>f.y-u-h.y&&(u=f.y-h.y);(t||u)&&a.fire("autopanstart").panBy([t,u])}},_onCloseButtonClick:function(a){this._close();b.DomEvent.stop(a)}});b.popup=function(a,d){return new b.Popup(a,d)};b.Map.include({openPopup:function(a,d,e){this.closePopup();a instanceof b.Popup||(a=(new b.Popup(e)).setLatLng(d).setContent(a));a._isOpen=!0;this._popup=a;return this.addLayer(a)},closePopup:function(a){a&&a!==this._popup||(a=this._popup,this._popup=null);a&&(this.removeLayer(a),a._isOpen=
!1);return this}});b.Marker.include({openPopup:function(){this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup));return this},closePopup:function(){this._popup&&this._popup._close();return this},togglePopup:function(){this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup());return this},bindPopup:function(a,d){var e=b.point(this.options.icon.options.popupAnchor||[0,0]),e=e.add(b.Popup.prototype.options.offset);
d&&d.offset&&(e=e.add(d.offset));d=b.extend({offset:e},d);this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0);a instanceof b.Popup?(b.setOptions(a,d),this._popup=a):this._popup=(new b.Popup(d,this)).setContent(a);return this},setPopupContent:function(a){this._popup&&this._popup.setContent(a);return this},unbindPopup:function(){this._popup&&(this._popup=null,this.off("click",this.togglePopup,
this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1);return this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}});b.LayerGroup=b.Class.extend({initialize:function(a){this._layers={};var d,b;if(a)for(d=0,b=a.length;d<b;d++)this.addLayer(a[d])},addLayer:function(a){var d=this.getLayerId(a);this._layers[d]=a;this._map&&this._map.addLayer(a);return this},removeLayer:function(a){a=a in this._layers?a:this.getLayerId(a);
this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]);delete this._layers[a];return this},hasLayer:function(a){return a?a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){this.eachLayer(this.removeLayer,this);return this},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),b,e;for(b in this._layers)e=this._layers[b],e[a]&&e[a].apply(e,d);return this},onAdd:function(a){this._map=a;this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,
a);this._map=null},addTo:function(a){a.addLayer(this);return this},eachLayer:function(a,d){for(var b in this._layers)a.call(d,this._layers[b]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[],d;for(d in this._layers)a.push(this._layers[d]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return b.stamp(a)}});b.layerGroup=function(a){return new b.LayerGroup(a)};b.FeatureGroup=b.LayerGroup.extend({includes:b.Mixin.Events,
statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){if(this.hasLayer(a))return this;if("on"in a)a.on(b.FeatureGroup.EVENTS,this._propagateEvent,this);b.LayerGroup.prototype.addLayer.call(this,a);this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions);return this.fire("layeradd",{layer:a})},removeLayer:function(a){if(!this.hasLayer(a))return this;a in this._layers&&(a=this._layers[a]);a.off(b.FeatureGroup.EVENTS,
this._propagateEvent,this);b.LayerGroup.prototype.removeLayer.call(this,a);this._popupContent&&this.invoke("unbindPopup");return this.fire("layerremove",{layer:a})},bindPopup:function(a,d){this._popupContent=a;this._popupOptions=d;return this.invoke("bindPopup",a,d)},openPopup:function(a){for(var d in this._layers){this._layers[d].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},
getBounds:function(){var a=new b.LatLngBounds;this.eachLayer(function(d){a.extend(d instanceof b.Marker?d.getLatLng():d.getBounds())});return a},_propagateEvent:function(a){a=b.extend({layer:a.target,target:this},a);this.fire(a.type,a)}});b.featureGroup=function(a){return new b.FeatureGroup(a)};b.Path=b.Class.extend({includes:[b.Mixin.Events],statics:{CLIP_PADDING:function(){var a=((b.Browser.mobile?1280:2E3)/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(.5,a))}()},options:{stroke:!0,
color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){b.setOptions(this,a)},onAdd:function(a){this._map=a;this._container||(this._initElements(),this._initEvents());this.projectLatlngs();this._updatePath();this._container&&this._map._pathRoot.appendChild(this._container);this.fire("add");a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){a.addLayer(this);return this},
onRemove:function(a){a._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;b.Browser.vml&&(this._fill=this._stroke=this._container=null);a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){b.setOptions(this,a);this._container&&this._updateStyle();return this},redraw:function(){this._map&&(this.projectLatlngs(),this._updatePath());return this}});b.Map.include({_updatePathViewport:function(){var a=b.Path.CLIP_PADDING,
d=this.getSize(),e=b.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(d.multiplyBy(a)._round()),a=e.add(d.multiplyBy(1+2*a)._round());this._pathViewport=new b.Bounds(e,a)}});b.Path.SVG_NS="http://www.w3.org/2000/svg";b.Browser.svg=!(!k.createElementNS||!k.createElementNS(b.Path.SVG_NS,"svg").createSVGRect);b.Path=b.Path.extend({statics:{SVG:b.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,d=this._container;d&&a.lastChild!==d&&a.appendChild(d);return this},bringToBack:function(){var a=
this._map._pathRoot,d=this._container,b=a.firstChild;d&&b!==d&&a.insertBefore(d,b);return this},getPathString:function(){},_createElement:function(a){return k.createElementNS(b.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement("g");this._path=this._createElement("path");this.options.className&&b.DomUtil.addClass(this._path,this.options.className);this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&
(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round"));this.options.fill&&this._path.setAttribute("fill-rule","evenodd");this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents);this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none");this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",
this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none");this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||
this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0");this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){!b.Browser.svg&&b.Browser.vml||b.DomUtil.addClass(this._path,"leaflet-clickable");b.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a="dblclick mousedown mouseover mouseout mousemove contextmenu".split(" "),d=
0;d<a.length;d++)b.DomEvent.on(this._container,a[d],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var d=this._map,e=d.mouseEventToContainerPoint(a),f=d.containerPointToLayerPoint(e),d=d.layerPointToLatLng(f);this.fire(a.type,{latlng:d,layerPoint:f,containerPoint:e,originalEvent:a});"contextmenu"===a.type&&b.DomEvent.preventDefault(a);"mousemove"!==a.type&&
b.DomEvent.stopPropagation(a)}}});b.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=b.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&b.Browser.any3d?(b.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):b.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var d=
this.getZoomScale(a.zoom);a=this._getCenterOffset(a.center)._multiplyBy(-d)._add(this._pathViewport.min);this._pathRoot.style[b.DomUtil.TRANSFORM]=b.DomUtil.getTranslateString(a)+" scale("+d+") ";this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,d=a.min,e=a.max,a=e.x-d.x,e=e.y-d.y,f=this._pathRoot,g=this._panes.overlayPane;b.Browser.mobileWebkit&&g.removeChild(f);b.DomUtil.setPosition(f,
d);f.setAttribute("width",a);f.setAttribute("height",e);f.setAttribute("viewBox",[d.x,d.y,a,e].join(" "));b.Browser.mobileWebkit&&g.appendChild(f)}}});b.Path.include({bindPopup:function(a,d){if(a instanceof b.Popup)this._popup=a;else{if(!this._popup||d)this._popup=new b.Popup(d,this);this._popup.setContent(a)}this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0);return this},unbindPopup:function(){this._popup&&(this._popup=
null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1);return this},openPopup:function(a){this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a}));return this},closePopup:function(){this._popup&&this._popup._close();return this},_openPopup:function(a){this._popup.setLatLng(a.latlng);this._map.openPopup(this._popup)}});b.Browser.vml=!b.Browser.svg&&function(){try{var a=k.createElement("div");a.innerHTML=
'<v:shape adj="1"/>';var d=a.firstChild;d.style.behavior="url(#default#VML)";return d&&"object"===typeof d.adj}catch(b){return!1}}();b.Path=b.Browser.svg||!b.Browser.vml?b.Path:b.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return k.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return k.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return k.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),
_initPath:function(){var a=this._container=this._createElement("shape");b.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:""));this.options.clickable&&b.DomUtil.addClass(a,"leaflet-clickable");a.coordsize="1 1";this._path=this._createElement("path");a.appendChild(this._path);this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,d=this._fill,e=this.options,f=this._container;f.stroked=e.stroke;
f.filled=e.fill;e.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",f.appendChild(a)),a.weight=e.weight+"px",a.color=e.color,a.opacity=e.opacity,a.dashStyle=e.dashArray?b.Util.isArray(e.dashArray)?e.dashArray.join(" "):e.dashArray.replace(/( *, *)/g," "):"",e.lineCap&&(a.endcap=e.lineCap.replace("butt","flat")),e.lineJoin&&(a.joinstyle=e.lineJoin)):a&&(f.removeChild(a),this._stroke=null);e.fill?(d||(d=this._fill=this._createElement("fill"),f.appendChild(d)),d.color=e.fillColor||
e.color,d.opacity=e.fillOpacity):d&&(f.removeChild(d),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none";this._path.v=this.getPathString()+" ";a.display=""}});b.Map.include(b.Browser.svg||!b.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=k.createElement("div");a.className="leaflet-vml-container";this._panes.overlayPane.appendChild(a);this.on("moveend",this._updatePathViewport);this._updatePathViewport()}}});b.Browser.canvas=!!k.createElement("canvas").getContext;
b.Path=b.Path.SVG&&!e.L_PREFER_CANVAS||!b.Browser.canvas?b.Path:b.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){this._map&&(this.projectLatlngs(),this._requestUpdate());return this},setStyle:function(a){b.setOptions(this,a);this._map&&(this._updateStyle(),this._requestUpdate());return this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,
this));this._requestUpdate();this._map=null},_requestUpdate:function(){this._map&&!b.Path._updateRequest&&(b.Path._updateRequest=b.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){b.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color);a.fill&&(this._ctx.fillStyle=a.fillColor||
a.color)},_drawPath:function(){var a,d,e,f,g,h;this._ctx.beginPath();a=0;for(e=this._parts.length;a<e;a++){d=0;for(f=this._parts[a].length;d<f;d++)g=this._parts[a][d],h=(0===d?"move":"line")+"To",this._ctx[h](g.x,g.y);this instanceof b.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,d=this.options;this._drawPath();a.save();this._updateStyle();d.fill&&(a.globalAlpha=d.fillOpacity,a.fill());d.stroke&&
(a.globalAlpha=d.opacity,a.stroke());a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor=
"",this._mouseInside=!1,this.fire("mouseout",a)))}});b.Map.include(b.Path.SVG&&!e.L_PREFER_CANVAS||!b.Browser.canvas?{}:{_initPathRoot:function(){var a=this._pathRoot,d;a||(a=this._pathRoot=k.createElement("canvas"),a.style.position="absolute",d=this._canvasCtx=a.getContext("2d"),d.lineCap="round",d.lineJoin="round",this._panes.overlayPane.appendChild(a),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),
this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,d=a.min,a=a.max.subtract(d),e=this._pathRoot;b.DomUtil.setPosition(e,d);e.width=a.x;e.height=a.y;e.getContext("2d").translate(-d.x,-d.y)}}});b.LineUtil={simplify:function(a,d){if(!d||!a.length)return a.slice();var b=d*d;a=this._reducePoints(a,b);return a=this._simplifyDP(a,b)},pointToSegmentDistance:function(a,d,b){return Math.sqrt(this._sqClosestPointOnSegment(a,
d,b,!0))},closestPointOnSegment:function(a,d,b){return this._sqClosestPointOnSegment(a,d,b)},_simplifyDP:function(a,d){var b=a.length,e=new (typeof Uint8Array!==h+""?Uint8Array:Array)(b);e[0]=e[b-1]=1;this._simplifyDPStep(a,e,d,0,b-1);var f,g=[];for(f=0;f<b;f++)e[f]&&g.push(a[f]);return g},_simplifyDPStep:function(a,d,b,e,f){var g=0,h,k,u;for(k=e+1;k<=f-1;k++)u=this._sqClosestPointOnSegment(a[k],a[e],a[f],!0),u>g&&(h=k,g=u);g>b&&(d[h]=1,this._simplifyDPStep(a,d,b,e,h),this._simplifyDPStep(a,d,b,h,
f))},_reducePoints:function(a,d){for(var b=[a[0]],e=1,f=0,g=a.length;e<g;e++)this._sqDist(a[e],a[f])>d&&(b.push(a[e]),f=e);f<g-1&&b.push(a[g-1]);return b},clipSegment:function(a,d,b,e){e=e?this._lastCode:this._getBitCode(a,b);var f=this._getBitCode(d,b),g,h,k;for(this._lastCode=f;;)if(e|f){if(e&f)return!1;g=e||f;h=this._getEdgeIntersection(a,d,g,b);k=this._getBitCode(h,b);g===e?(a=h,e=k):(d=h,f=k)}else return[a,d]},_getEdgeIntersection:function(a,d,e,f){var g=d.x-a.x;d=d.y-a.y;var h=f.min;f=f.max;
if(e&8)return new b.Point(a.x+g*(f.y-a.y)/d,f.y);if(e&4)return new b.Point(a.x+g*(h.y-a.y)/d,h.y);if(e&2)return new b.Point(f.x,a.y+d*(f.x-a.x)/g);if(e&1)return new b.Point(h.x,a.y+d*(h.x-a.x)/g)},_getBitCode:function(a,d){var b=0;a.x<d.min.x?b|=1:a.x>d.max.x&&(b|=2);a.y<d.min.y?b|=4:a.y>d.max.y&&(b|=8);return b},_sqDist:function(a,d){var b=d.x-a.x,e=d.y-a.y;return b*b+e*e},_sqClosestPointOnSegment:function(a,d,e,f){var g=d.x;d=d.y;var h=e.x-g,k=e.y-d,t=h*h+k*k;0<t&&(t=((a.x-g)*h+(a.y-d)*k)/t,1<t?
(g=e.x,d=e.y):0<t&&(g+=h*t,d+=k*t));h=a.x-g;k=a.y-d;return f?h*h+k*k:new b.Point(g,d)}};b.Polyline=b.Path.extend({initialize:function(a,d){b.Path.prototype.initialize.call(this,d);this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,d=this._latlngs.length;a<d;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,d=this._parts.length,b="";a<d;a++)b+=this._getPathPartStr(this._parts[a]);
return b},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){this._latlngs=this._convertLatLngs(a);return this.redraw()},addLatLng:function(a){this._latlngs.push(b.latLng(a));return this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);this._convertLatLngs(this._latlngs,!0);this.redraw();return a},closestLayerPoint:function(a){for(var d=Infinity,e=this._parts,f,g,h=null,k=0,t=e.length;k<t;k++)for(var u=e[k],x=1,y=u.length;x<y;x++){f=u[x-1];g=u[x];var B=
b.LineUtil._sqClosestPointOnSegment(a,f,g,!0);B<d&&(d=B,h=b.LineUtil._sqClosestPointOnSegment(a,f,g))}h&&(h.distance=Math.sqrt(d));return h},getBounds:function(){return new b.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,d){var e,f,g=d?a:[];e=0;for(f=a.length;e<f;e++){if(b.Util.isArray(a[e])&&"number"!==typeof a[e][0])return;g[e]=b.latLng(a[e])}return g},_initEvents:function(){b.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var d=b.Path.VML,e=0,f=a.length,g=
"",h;e<f;e++)h=a[e],d&&h._round(),g+=(e?"L":"M")+h.x+" "+h.y;return g},_clipPoints:function(){var a=this._originalPoints,d=a.length,e,f,g;if(this.options.noClip)this._parts=[a];else{var h=this._parts=[],k=this._map._pathViewport,t=b.LineUtil;for(f=e=0;e<d-1;e++)if(g=t.clipSegment(a[e],a[e+1],k,e))if(h[f]=h[f]||[],h[f].push(g[0]),g[1]!==a[e+1]||e===d-2)h[f].push(g[1]),f++}},_simplifyPoints:function(){for(var a=this._parts,d=b.LineUtil,e=0,f=a.length;e<f;e++)a[e]=d.simplify(a[e],this.options.smoothFactor)},
_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),b.Path.prototype._updatePath.call(this))}});b.polyline=function(a,d){return new b.Polyline(a,d)};b.PolyUtil={};b.PolyUtil.clipPolygon=function(a,d){var e,f=[1,4,2,8],g,h,k,t,u,x,y=b.LineUtil;g=0;for(u=a.length;g<u;g++)a[g]._code=y._getBitCode(a[g],d);for(k=0;4>k;k++){x=f[k];e=[];g=0;u=a.length;for(h=u-1;g<u;h=g++)(t=a[g],h=a[h],t._code&x)?h._code&x||(h=y._getEdgeIntersection(h,t,x,d),h._code=y._getBitCode(h,d),e.push(h)):
(h._code&x&&(h=y._getEdgeIntersection(h,t,x,d),h._code=y._getBitCode(h,d),e.push(h)),e.push(t));a=e}return a};b.Polygon=b.Polyline.extend({options:{fill:!0},initialize:function(a,d){b.Polyline.prototype.initialize.call(this,a,d);this._initWithHoles(a)},_initWithHoles:function(a){var d,e;if(a&&b.Util.isArray(a[0])&&"number"!==typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),a=0,d=this._holes.length;a<d;a++)e=this._holes[a]=this._convertLatLngs(this._holes[a]),e[0].equals(e[e.length-
1])&&e.pop();a=this._latlngs;2<=a.length&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){b.Polyline.prototype.projectLatlngs.call(this);this._holePoints=[];if(this._holes){var a,d,e,f;a=0;for(e=this._holes.length;a<e;a++)for(this._holePoints[a]=[],d=0,f=this._holes[a].length;d<f;d++)this._holePoints[a][d]=this._map.latLngToLayerPoint(this._holes[a][d])}},setLatLngs:function(a){return a&&b.Util.isArray(a[0])&&"number"!==typeof a[0][0]?(this._initWithHoles(a),this.redraw()):b.Polyline.prototype.setLatLngs.call(this,
a)},_clipPoints:function(){var a=[];this._parts=[this._originalPoints].concat(this._holePoints);if(!this.options.noClip){for(var d=0,e=this._parts.length;d<e;d++){var f=b.PolyUtil.clipPolygon(this._parts[d],this._map._pathViewport);f.length&&a.push(f)}this._parts=a}},_getPathPartStr:function(a){return b.Polyline.prototype._getPathPartStr.call(this,a)+(b.Browser.svg?"z":"x")}});b.polygon=function(a,d){return new b.Polygon(a,d)};(function(){function a(a){return b.FeatureGroup.extend({initialize:function(a,
d){this._layers={};this._options=d;this.setLatLngs(a)},setLatLngs:function(b){var e=0,f=b.length;for(this.eachLayer(function(a){e<f?a.setLatLngs(b[e++]):this.removeLayer(a)},this);e<f;)this.addLayer(new a(b[e++],this._options));return this},getLatLngs:function(){var a=[];this.eachLayer(function(d){a.push(d.getLatLngs())});return a}})}b.MultiPolyline=a(b.Polyline);b.MultiPolygon=a(b.Polygon);b.multiPolyline=function(a,e){return new b.MultiPolyline(a,e)};b.multiPolygon=function(a,e){return new b.MultiPolygon(a,
e)}})();b.Rectangle=b.Polygon.extend({initialize:function(a,d){b.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){a=b.latLngBounds(a);return[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});b.rectangle=function(a,d){return new b.Rectangle(a,d)};b.Circle=b.Path.extend({initialize:function(a,d,e){b.Path.prototype.initialize.call(this,e);this._latlng=b.latLng(a);this._mRadius=
d},options:{fill:!0},setLatLng:function(a){this._latlng=b.latLng(a);return this.redraw()},setRadius:function(a){this._mRadius=a;return this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),d=this._latlng,a=this._map.latLngToLayerPoint([d.lat,d.lng-a]);this._point=this._map.latLngToLayerPoint(d);this._radius=Math.max(this._point.x-a.x,1)},getBounds:function(){var a=this._getLngRadius(),d=this._mRadius/40075017*360,e=this._latlng;return new b.LatLngBounds([e.lat-d,e.lng-a],[e.lat+d,e.lng+
a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,d=this._radius;if(this._checkIfEmpty())return"";if(b.Browser.svg)return"M"+a.x+","+(a.y-d)+"A"+d+","+d+",0,1,1,"+(a.x-.1)+","+(a.y-d)+" z";a._round();d=Math.round(d);return"AL "+a.x+","+a.y+" "+d+","+d+" 0,23592600"},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(b.LatLng.DEG_TO_RAD*this._latlng.lat)},
_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,d=this._radius,b=this._point;return b.x-d>a.max.x||b.y-d>a.max.y||b.x+d<a.min.x||b.y+d<a.min.y}});b.circle=function(a,d,e){return new b.Circle(a,d,e)};b.CircleMarker=b.Circle.extend({options:{radius:10,weight:2},initialize:function(a,d){b.Circle.prototype.initialize.call(this,a,null,d);this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){b.Circle.prototype._updateStyle.call(this);
this.setRadius(this.options.radius)},setLatLng:function(a){b.Circle.prototype.setLatLng.call(this,a);this._popup&&this._popup._isOpen&&this._popup.setLatLng(a);return this},setRadius:function(a){this.options.radius=this._radius=a;return this.redraw()},getRadius:function(){return this._radius}});b.circleMarker=function(a,d){return new b.CircleMarker(a,d)};b.Polyline.include(b.Path.CANVAS?{_containsPoint:function(a,d){var e,f,g,h,k,t,u=this.options.weight/2;b.Browser.touch&&(u+=10);e=0;for(h=this._parts.length;e<
h;e++)for(t=this._parts[e],f=0,k=t.length,g=k-1;f<k;g=f++)if(d||0!==f)if(g=b.LineUtil.pointToSegmentDistance(a,t[g],t[f]),g<=u)return!0;return!1}}:{});b.Polygon.include(b.Path.CANVAS?{_containsPoint:function(a){var d=!1,e,f,g,h,k,t,u;if(b.Polyline.prototype._containsPoint.call(this,a,!0))return!0;h=0;for(t=this._parts.length;h<t;h++)for(e=this._parts[h],k=0,u=e.length,g=u-1;k<u;g=k++)f=e[k],g=e[g],f.y>a.y!==g.y>a.y&&a.x<(g.x-f.x)*(a.y-f.y)/(g.y-f.y)+f.x&&(d=!d);return d}}:{});b.Circle.include(b.Path.CANVAS?
{_drawPath:function(){var a=this._point;this._ctx.beginPath();this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var d=this.options.stroke?this.options.weight/2:0;return a.distanceTo(this._point)<=this._radius+d}}:{});b.CircleMarker.include(b.Path.CANVAS?{_updateStyle:function(){b.Path.prototype._updateStyle.call(this)}}:{});b.GeoJSON=b.FeatureGroup.extend({initialize:function(a,d){b.setOptions(this,d);this._layers={};a&&this.addData(a)},addData:function(a){var d=b.Util.isArray(a)?
a:a.features,e,f;if(d){a=0;for(e=d.length;a<e;a++)f=d[a],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(d[a]);return this}d=this.options;if(!d.filter||d.filter(a)){e=b.GeoJSON.geometryToLayer(a,d.pointToLayer,d.coordsToLatLng,d);e.feature=b.GeoJSON.asFeature(a);e.defaultOptions=e.options;this.resetStyle(e);if(d.onEachFeature)d.onEachFeature(a,e);return this.addLayer(e)}},resetStyle:function(a){var d=this.options.style;d&&(b.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,
d))},setStyle:function(a){this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){"function"===typeof d&&(d=d(a.feature));a.setStyle&&a.setStyle(d)}});b.extend(b.GeoJSON,{geometryToLayer:function(a,d,e,f){var g="Feature"===a.type?a.geometry:a,h=g.coordinates,k=[],t,u;e=e||this.coordsToLatLng;switch(g.type){case "Point":return f=e(h),d?d(a,f):new b.Marker(f);case "MultiPoint":t=0;for(u=h.length;t<u;t++)f=e(h[t]),k.push(d?d(a,f):new b.Marker(f));return new b.FeatureGroup(k);
case "LineString":return a=this.coordsToLatLngs(h,0,e),new b.Polyline(a,f);case "Polygon":if(2===h.length&&!h[1].length)throw Error("Invalid GeoJSON object.");a=this.coordsToLatLngs(h,1,e);return new b.Polygon(a,f);case "MultiLineString":return a=this.coordsToLatLngs(h,1,e),new b.MultiPolyline(a,f);case "MultiPolygon":return a=this.coordsToLatLngs(h,2,e),new b.MultiPolygon(a,f);case "GeometryCollection":t=0;for(u=g.geometries.length;t<u;t++)k.push(this.geometryToLayer({geometry:g.geometries[t],type:"Feature",
properties:a.properties},d,e,f));return new b.FeatureGroup(k);default:throw Error("Invalid GeoJSON object.");}},coordsToLatLng:function(a){return new b.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,d,b){var e,f,g,h=[];f=0;for(g=a.length;f<g;f++)e=d?this.coordsToLatLngs(a[f],d-1,b):(b||this.coordsToLatLng)(a[f]),h.push(e);return h},latLngToCoords:function(a){var d=[a.lng,a.lat];a.alt!==h&&d.push(a.alt);return d},latLngsToCoords:function(a){for(var d=[],e=0,f=a.length;e<f;e++)d.push(b.GeoJSON.latLngToCoords(a[e]));
return d},getFeature:function(a,d){return a.feature?b.extend({},a.feature,{geometry:d}):b.GeoJSON.asFeature(d)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var g={toGeoJSON:function(){return b.GeoJSON.getFeature(this,{type:"Point",coordinates:b.GeoJSON.latLngToCoords(this.getLatLng())})}};b.Marker.include(g);b.Circle.include(g);b.CircleMarker.include(g);b.Polyline.include({toGeoJSON:function(){return b.GeoJSON.getFeature(this,{type:"LineString",coordinates:b.GeoJSON.latLngsToCoords(this.getLatLngs())})}});
b.Polygon.include({toGeoJSON:function(){var a=[b.GeoJSON.latLngsToCoords(this.getLatLngs())],d,e,f;a[0].push(a[0][0]);if(this._holes)for(d=0,e=this._holes.length;d<e;d++)f=b.GeoJSON.latLngsToCoords(this._holes[d]),f.push(f[0]),a.push(f);return b.GeoJSON.getFeature(this,{type:"Polygon",coordinates:a})}});(function(){function a(a){return function(){var e=[];this.eachLayer(function(a){e.push(a.toGeoJSON().geometry.coordinates)});return b.GeoJSON.getFeature(this,{type:a,coordinates:e})}}b.MultiPolyline.include({toGeoJSON:a("MultiLineString")});
b.MultiPolygon.include({toGeoJSON:a("MultiPolygon")});b.LayerGroup.include({toGeoJSON:function(){var d=this.feature&&this.feature.geometry,e=[],f;if(d&&"MultiPoint"===d.type)return a("MultiPoint").call(this);var g=d&&"GeometryCollection"===d.type;this.eachLayer(function(a){a.toGeoJSON&&(f=a.toGeoJSON(),e.push(g?f.geometry:b.GeoJSON.asFeature(f)))});return g?b.GeoJSON.getFeature(this,{geometries:e,type:"GeometryCollection"}):{type:"FeatureCollection",features:e}}})})();b.geoJson=function(a,d){return new b.GeoJSON(a,
d)};b.DomEvent={addListener:function(a,d,e,f){var g=b.stamp(e),h="_leaflet_"+d+g,k,t;if(a[h])return this;k=function(d){return e.call(f||a,d||b.DomEvent._getEvent())};if(b.Browser.pointer&&0===d.indexOf("touch"))return this.addPointerListener(a,d,k,g);b.Browser.touch&&"dblclick"===d&&this.addDoubleTapListener&&this.addDoubleTapListener(a,k,g);"addEventListener"in a?"mousewheel"===d?(a.addEventListener("DOMMouseScroll",k,!1),a.addEventListener(d,k,!1)):"mouseenter"===d||"mouseleave"===d?(t=k,k=function(d){if(b.DomEvent._checkMouse(a,
d))return t(d)},a.addEventListener("mouseenter"===d?"mouseover":"mouseout",k,!1)):("click"===d&&b.Browser.android&&(t=k,k=function(a){return b.DomEvent._filterClick(a,t)}),a.addEventListener(d,k,!1)):"attachEvent"in a&&a.attachEvent("on"+d,k);a[h]=k;return this},removeListener:function(a,d,e){e=b.stamp(e);var f="_leaflet_"+d+e,g=a[f];if(!g)return this;b.Browser.pointer&&0===d.indexOf("touch")?this.removePointerListener(a,d,e):b.Browser.touch&&"dblclick"===d&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,
e):"removeEventListener"in a?"mousewheel"===d?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(d,g,!1)):"mouseenter"===d||"mouseleave"===d?a.removeEventListener("mouseenter"===d?"mouseover":"mouseout",g,!1):a.removeEventListener(d,g,!1):"detachEvent"in a&&a.detachEvent("on"+d,g);a[f]=null;return this},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;b.DomEvent._skipped(a);return this},disableScrollPropagation:function(a){var d=b.DomEvent.stopPropagation;
return b.DomEvent.on(a,"mousewheel",d).on(a,"MozMousePixelScroll",d)},disableClickPropagation:function(a){for(var d=b.DomEvent.stopPropagation,e=b.Draggable.START.length-1;0<=e;e--)b.DomEvent.on(a,b.Draggable.START[e],d);return b.DomEvent.on(a,"click",b.DomEvent._fakeStop).on(a,"dblclick",d)},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return this},stop:function(a){return b.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,d){if(!d)return new b.Point(a.clientX,
a.clientY);var e=d.getBoundingClientRect();return new b.Point(a.clientX-e.left-d.clientLeft,a.clientY-e.top-d.clientTop)},getWheelDelta:function(a){var d=0;a.wheelDelta&&(d=a.wheelDelta/120);a.detail&&(d=-a.detail/3);return d},_skipEvents:{},_fakeStop:function(a){b.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var d=this._skipEvents[a.type];this._skipEvents[a.type]=!1;return d},_checkMouse:function(a,d){var b=d.relatedTarget;if(!b)return!0;try{for(;b&&b!==a;)b=b.parentNode}catch(e){return!1}return b!==
a},_getEvent:function(){var a=e.event;if(!a)for(var d=arguments.callee.caller;d&&(!(a=d.arguments[0])||e.Event!==a.constructor);)d=d.caller;return a},_filterClick:function(a,d){var e=a.timeStamp||a.originalEvent.timeStamp,f=b.DomEvent._lastClick&&e-b.DomEvent._lastClick;if(f&&100<f&&1E3>f||a.target._simulatedClick&&!a._simulated)b.DomEvent.stop(a);else return b.DomEvent._lastClick=e,d(a)}};b.DomEvent.on=b.DomEvent.addListener;b.DomEvent.off=b.DomEvent.removeListener;b.Draggable=b.Class.extend({includes:b.Mixin.Events,
statics:{START:b.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,d){this._element=a;this._dragStartTarget=d||a},enable:function(){if(!this._enabled){for(var a=b.Draggable.START.length-1;0<=a;a--)b.DomEvent.on(this._dragStartTarget,b.Draggable.START[a],this._onDown,this);this._enabled=
!0}},disable:function(){if(this._enabled){for(var a=b.Draggable.START.length-1;0<=a;a--)b.DomEvent.off(this._dragStartTarget,b.Draggable.START[a],this._onDown,this);this._moved=this._enabled=!1}},_onDown:function(a){this._moved=!1;if(!(a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(b.DomEvent.stopPropagation(a),b.Draggable._disabled||(b.DomUtil.disableImageDrag(),b.DomUtil.disableTextSelection(),this._moving)))){var d=a.touches?a.touches[0]:a;this._startPoint=new b.Point(d.clientX,d.clientY);
this._startPos=this._newPos=b.DomUtil.getPosition(this._element);b.DomEvent.on(k,b.Draggable.MOVE[a.type],this._onMove,this).on(k,b.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&1<a.touches.length)this._moved=!0;else{var d=a.touches&&1===a.touches.length?a.touches[0]:a,d=(new b.Point(d.clientX,d.clientY)).subtract(this._startPoint);if(d.x||d.y)b.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=b.DomUtil.getPosition(this._element).subtract(d),
b.DomUtil.addClass(k.body,"leaflet-dragging"),b.DomUtil.addClass(a.target||a.srcElement,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,b.Util.cancelAnimFrame(this._animRequest),this._animRequest=b.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)}},_updatePosition:function(){this.fire("predrag");b.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(a){b.DomUtil.removeClass(k.body,"leaflet-dragging");b.DomUtil.removeClass(a.target||
a.srcElement,"leaflet-drag-target");for(var d in b.Draggable.MOVE)b.DomEvent.off(k,b.Draggable.MOVE[d],this._onMove).off(k,b.Draggable.END[d],this._onUp);b.DomUtil.enableImageDrag();b.DomUtil.enableTextSelection();this._moved&&this._moving&&(b.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)}));this._moving=!1}});b.Handler=b.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},
disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}});b.Map.mergeOptions({dragging:!0,inertia:!b.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:b.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1});b.Map.Drag=b.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new b.Draggable(a._mapPane,a._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,
dragend:this._onDragEnd},this);a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop();a.fire("movestart").fire("dragstart");a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=
this._lastTime=+new Date,d=this._lastPos=this._draggable._newPos;this._positions.push(d);this._times.push(a);200<a-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(a).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,d=Math.round(a/2),b=this._initialWorldOffset,e=this._draggable._newPos.x,
f=(e-d+b)%a+d-b,a=(e+d+b)%a-d-b,b=Math.abs(f+b)<Math.abs(a+b)?f:a;this._draggable._newPos.x=b},_onDragEnd:function(a){var d=this._map,e=d.options,f=+new Date-this._lastTime,g=!e.inertia||f>e.inertiaThreshold||!this._positions[0];d.fire("dragend",a);if(g)d.fire("moveend");else{a=this._lastPos.subtract(this._positions[0]);var h=e.easeLinearity;a=a.multiplyBy(h/((this._lastTime+f-this._times[0])/1E3));g=a.distanceTo([0,0]);f=Math.min(e.inertiaMaxSpeed,g);a=a.multiplyBy(f/g);var k=f/(e.inertiaDeceleration*
h),t=a.multiplyBy(-k/2).round();t.x&&t.y?(t=d._limitOffset(t,d.options.maxBounds),b.Util.requestAnimFrame(function(){d.panBy(t,{duration:k,easeLinearity:h,noMoveStart:!0})})):d.fire("moveend")}}});b.Map.addInitHook("addHandler","dragging",b.Map.Drag);b.Map.mergeOptions({doubleClickZoom:!0});b.Map.DoubleClickZoom=b.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=
this._map,b=d.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===d.options.doubleClickZoom?d.setZoom(b):d.setZoomAround(a.containerPoint,b)}});b.Map.addInitHook("addHandler","doubleClickZoom",b.Map.DoubleClickZoom);b.Map.mergeOptions({scrollWheelZoom:!0});b.Map.ScrollWheelZoom=b.Handler.extend({addHooks:function(){b.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);b.DomEvent.on(this._map._container,"MozMousePixelScroll",b.DomEvent.preventDefault);this._delta=0},removeHooks:function(){b.DomEvent.off(this._map._container,
"mousewheel",this._onWheelScroll);b.DomEvent.off(this._map._container,"MozMousePixelScroll",b.DomEvent.preventDefault)},_onWheelScroll:function(a){var d=b.DomEvent.getWheelDelta(a);this._delta+=d;this._lastMousePos=this._map.mouseEventToContainerPoint(a);this._startTime||(this._startTime=+new Date);d=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(b.bind(this._performZoom,this),d);b.DomEvent.preventDefault(a);b.DomEvent.stopPropagation(a)},_performZoom:function(){var a=
this._map,d=this._delta,b=a.getZoom(),d=0<d?Math.ceil(d):Math.floor(d),d=Math.max(Math.min(d,4),-4),d=a._limitZoom(b+d)-b;this._delta=0;this._startTime=null;d&&("center"===a.options.scrollWheelZoom?a.setZoom(b+d):a.setZoomAround(this._lastMousePos,b+d))}});b.Map.addInitHook("addHandler","scrollWheelZoom",b.Map.ScrollWheelZoom);b.extend(b.DomEvent,{_touchstart:b.Browser.msPointer?"MSPointerDown":b.Browser.pointer?"pointerdown":"touchstart",_touchend:b.Browser.msPointer?"MSPointerUp":b.Browser.pointer?
"pointerup":"touchend",addDoubleTapListener:function(a,d,e){function f(a){var d;b.Browser.pointer?(y.push(a.pointerId),d=y.length):d=a.touches.length;if(!(1<d)){d=Date.now();var e=d-(h||d);t=a.touches?a.touches[0]:a;m=0<e&&250>=e;h=d}}function g(a){if(b.Browser.pointer){a=y.indexOf(a.pointerId);if(-1===a)return;y.splice(a,1)}if(m){if(b.Browser.pointer){a={};var e,f;for(f in t)e=t[f],a[f]="function"===typeof e?e.bind(t):e;t=a}t.type="dblclick";d(t);h=null}}var h,m=!1,t,u=this._touchstart,x=this._touchend,
y=[];a["_leaflet_"+u+e]=f;a["_leaflet_"+x+e]=g;e=b.Browser.pointer?k.documentElement:a;a.addEventListener(u,f,!1);e.addEventListener(x,g,!1);b.Browser.pointer&&e.addEventListener(b.DomEvent.POINTER_CANCEL,g,!1);return this},removeDoubleTapListener:function(a,d){a.removeEventListener(this._touchstart,a["_leaflet_"+this._touchstart+d],!1);(b.Browser.pointer?k.documentElement:a).removeEventListener(this._touchend,a["_leaflet_"+this._touchend+d],!1);b.Browser.pointer&&k.documentElement.removeEventListener(b.DomEvent.POINTER_CANCEL,
a["_leaflet_"+this._touchend+d],!1);return this}});b.extend(b.DomEvent,{POINTER_DOWN:b.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:b.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:b.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:b.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,d,b,e){switch(d){case "touchstart":return this.addPointerListenerStart(a,d,b,e);case "touchend":return this.addPointerListenerEnd(a,
d,b,e);case "touchmove":return this.addPointerListenerMove(a,d,b,e);default:throw"Unknown touch event type";}},addPointerListenerStart:function(a,d,e,f){var g=this._pointers;d=function(a){b.DomEvent.preventDefault(a);for(var d=!1,f=0;f<g.length;f++)if(g[f].pointerId===a.pointerId){d=!0;break}d||g.push(a);a.touches=g.slice();a.changedTouches=[a];e(a)};a["_leaflet_touchstart"+f]=d;a.addEventListener(this.POINTER_DOWN,d,!1);this._pointerDocumentListener||(a=function(a){for(var d=0;d<g.length;d++)if(g[d].pointerId===
a.pointerId){g.splice(d,1);break}},k.documentElement.addEventListener(this.POINTER_UP,a,!1),k.documentElement.addEventListener(this.POINTER_CANCEL,a,!1),this._pointerDocumentListener=!0);return this},addPointerListenerMove:function(a,d,b,e){function f(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var d=0;d<g.length;d++)if(g[d].pointerId===a.pointerId){g[d]=a;break}a.touches=g.slice();a.changedTouches=[a];b(a)}}var g=this._pointers;a["_leaflet_touchmove"+
e]=f;a.addEventListener(this.POINTER_MOVE,f,!1);return this},addPointerListenerEnd:function(a,d,b,e){var f=this._pointers;d=function(a){for(var d=0;d<f.length;d++)if(f[d].pointerId===a.pointerId){f.splice(d,1);break}a.touches=f.slice();a.changedTouches=[a];b(a)};a["_leaflet_touchend"+e]=d;a.addEventListener(this.POINTER_UP,d,!1);a.addEventListener(this.POINTER_CANCEL,d,!1);return this},removePointerListener:function(a,d,b){b=a["_leaflet_"+d+b];switch(d){case "touchstart":a.removeEventListener(this.POINTER_DOWN,
b,!1);break;case "touchmove":a.removeEventListener(this.POINTER_MOVE,b,!1);break;case "touchend":a.removeEventListener(this.POINTER_UP,b,!1),a.removeEventListener(this.POINTER_CANCEL,b,!1)}return this}});b.Map.mergeOptions({touchZoom:b.Browser.touch&&!b.Browser.android23,bounceAtZoomLimits:!0});b.Map.TouchZoom=b.Handler.extend({addHooks:function(){b.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){b.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,
this)},_onTouchStart:function(a){var d=this._map;if(a.touches&&2===a.touches.length&&!d._animatingZoom&&!this._zooming){var e=d.mouseEventToLayerPoint(a.touches[0]),f=d.mouseEventToLayerPoint(a.touches[1]),g=d._getCenterLayerPoint();this._startCenter=e.add(f)._divideBy(2);this._startDist=e.distanceTo(f);this._moved=!1;this._zooming=!0;this._centerOffset=g.subtract(this._startCenter);d._panAnim&&d._panAnim.stop();b.DomEvent.on(k,"touchmove",this._onTouchMove,this).on(k,"touchend",this._onTouchEnd,
this);b.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var d=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var e=d.mouseEventToLayerPoint(a.touches[0]),f=d.mouseEventToLayerPoint(a.touches[1]);this._scale=e.distanceTo(f)/this._startDist;this._delta=e._add(f)._divideBy(2)._subtract(this._startCenter);1===this._scale||!d.options.bounceAtZoomLimits&&(d.getZoom()===d.getMinZoom()&&1>this._scale||d.getZoom()===d.getMaxZoom()&&1<this._scale)||(this._moved||(b.DomUtil.addClass(d._mapPane,
"leaflet-touching"),d.fire("movestart").fire("zoomstart"),this._moved=!0),b.Util.cancelAnimFrame(this._animRequest),this._animRequest=b.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),b.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,d=this._getScaleOrigin(),d=a.layerPointToLatLng(d),b=a.getScaleZoom(this._scale);a._animateZoom(d,b,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(this._moved&&this._zooming){var a=this._map;this._zooming=
!1;b.DomUtil.removeClass(a._mapPane,"leaflet-touching");b.Util.cancelAnimFrame(this._animRequest);b.DomEvent.off(k,"touchmove",this._onTouchMove).off(k,"touchend",this._onTouchEnd);var d=this._getScaleOrigin(),e=a.layerPointToLatLng(d),f=a.getZoom(),g=a.getScaleZoom(this._scale)-f,g=0<g?Math.ceil(g):Math.floor(g),f=a._limitZoom(f+g),g=a.getZoomScale(f)/this._scale;a._animateZoom(e,f,d,g)}else this._zooming=!1},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);
return this._startCenter.add(a)}});b.Map.addInitHook("addHandler","touchZoom",b.Map.TouchZoom);b.Map.mergeOptions({tap:!0,tapTolerance:15});b.Map.Tap=b.Handler.extend({addHooks:function(){b.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){b.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches)if(b.DomEvent.preventDefault(a),this._fireClick=!0,1<a.touches.length)this._fireClick=!1,clearTimeout(this._holdTimeout);
else{var d=a.touches[0];a=d.target;this._startPos=this._newPos=new b.Point(d.clientX,d.clientY);a.tagName&&"a"===a.tagName.toLowerCase()&&b.DomUtil.addClass(a,"leaflet-active");this._holdTimeout=setTimeout(b.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",d))},this),1E3);b.DomEvent.on(k,"touchmove",this._onMove,this).on(k,"touchend",this._onUp,this)}},_onUp:function(a){clearTimeout(this._holdTimeout);b.DomEvent.off(k,"touchmove",this._onMove,
this).off(k,"touchend",this._onUp,this);if(this._fireClick&&a&&a.changedTouches){a=a.changedTouches[0];var d=a.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&b.DomUtil.removeClass(d,"leaflet-active");this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){a=a.touches[0];this._newPos=new b.Point(a.clientX,a.clientY)},_simulateEvent:function(a,d){var b=k.createEvent("MouseEvents");
b._simulated=!0;d.target._simulatedClick=!0;b.initMouseEvent(a,!0,!0,e,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);d.target.dispatchEvent(b)}});b.Browser.touch&&!b.Browser.pointer&&b.Map.addInitHook("addHandler","tap",b.Map.Tap);b.Map.mergeOptions({boxZoom:!0});b.Map.BoxZoom=b.Handler.extend({initialize:function(a){this._map=a;this._container=a._container;this._pane=a._panes.overlayPane;this._moved=!1},addHooks:function(){b.DomEvent.on(this._container,"mousedown",this._onMouseDown,
this)},removeHooks:function(){b.DomEvent.off(this._container,"mousedown",this._onMouseDown);this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){this._moved=!1;if(!a.shiftKey||1!==a.which&&1!==a.button)return!1;b.DomUtil.disableTextSelection();b.DomUtil.disableImageDrag();this._startLayerPoint=this._map.mouseEventToLayerPoint(a);b.DomEvent.on(k,"mousemove",this._onMouseMove,this).on(k,"mouseup",this._onMouseUp,this).on(k,"keydown",this._onKeyDown,this)},_onMouseMove:function(a){this._moved||
(this._box=b.DomUtil.create("div","leaflet-zoom-box",this._pane),b.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var d=this._startLayerPoint,e=this._box,f=this._map.mouseEventToLayerPoint(a);a=f.subtract(d);d=new b.Point(Math.min(f.x,d.x),Math.min(f.y,d.y));b.DomUtil.setPosition(e,d);this._moved=!0;e.style.width=Math.max(0,Math.abs(a.x)-4)+"px";e.style.height=Math.max(0,Math.abs(a.y)-4)+"px"},_finish:function(){this._moved&&
(this._pane.removeChild(this._box),this._container.style.cursor="");b.DomUtil.enableTextSelection();b.DomUtil.enableImageDrag();b.DomEvent.off(k,"mousemove",this._onMouseMove).off(k,"mouseup",this._onMouseUp).off(k,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var d=this._map;a=d.mouseEventToLayerPoint(a);this._startLayerPoint.equals(a)||(a=new b.LatLngBounds(d.layerPointToLatLng(this._startLayerPoint),d.layerPointToLatLng(a)),d.fitBounds(a),d.fire("boxzoomend",{boxZoomBounds:a}))},
_onKeyDown:function(a){27===a.keyCode&&this._finish()}});b.Map.addInitHook("addHandler","boxZoom",b.Map.BoxZoom);b.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1});b.Map.Keyboard=b.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a;this._setPanOffset(a.options.keyboardPanOffset);this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===
a.tabIndex&&(a.tabIndex="0");b.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;b.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var a=
k.body,d=k.documentElement,b=a.scrollTop||d.scrollTop,a=a.scrollLeft||d.scrollLeft;this._map._container.focus();e.scrollTo(a,b)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanOffset:function(a){var d=this._panKeys={},b=this.keyCodes,e,f;e=0;for(f=b.left.length;e<f;e++)d[b.left[e]]=[-1*a,0];e=0;for(f=b.right.length;e<f;e++)d[b.right[e]]=[a,0];e=0;for(f=b.down.length;e<f;e++)d[b.down[e]]=[0,a];e=0;for(f=b.up.length;e<
f;e++)d[b.up[e]]=[0,-1*a]},_setZoomOffset:function(a){var d=this._zoomKeys={},b=this.keyCodes,e,f;e=0;for(f=b.zoomIn.length;e<f;e++)d[b.zoomIn[e]]=a;e=0;for(f=b.zoomOut.length;e<f;e++)d[b.zoomOut[e]]=-a},_addHooks:function(){b.DomEvent.on(k,"keydown",this._onKeyDown,this)},_removeHooks:function(){b.DomEvent.off(k,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var d=a.keyCode,e=this._map;if(d in this._panKeys){if(e._panAnim&&e._panAnim._inProgress)return;e.panBy(this._panKeys[d]);e.options.maxBounds&&
e.panInsideBounds(e.options.maxBounds)}else if(d in this._zoomKeys)e.setZoom(e.getZoom()+this._zoomKeys[d]);else return;b.DomEvent.stop(a)}});b.Map.addInitHook("addHandler","keyboard",b.Map.Keyboard);b.Handler.MarkerDrag=b.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new b.Draggable(a,a));this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);this._draggable.enable();
b.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);this._draggable.disable();b.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,d=a._shadow,
e=b.DomUtil.getPosition(a._icon),f=a._map.layerPointToLatLng(e);d&&b.DomUtil.setPosition(d,e);a._latlng=f;a.fire("move",{latlng:f}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}});b.Control=b.Class.extend({options:{position:"topright"},initialize:function(a){b.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;d&&d.removeControl(this);this.options.position=a;d&&d.addControl(this);return this},getContainer:function(){return this._container},
addTo:function(a){this._map=a;var d=this._container=this.onAdd(a),e=this.getPosition();a=a._controlCorners[e];b.DomUtil.addClass(d,"leaflet-control");-1!==e.indexOf("bottom")?a.insertBefore(d,a.firstChild):a.appendChild(d);return this},removeFrom:function(a){var d=this.getPosition();a._controlCorners[d].removeChild(this._container);this._map=null;if(this.onRemove)this.onRemove(a);return this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}});b.control=function(a){return new b.Control(a)};
b.Map.include({addControl:function(a){a.addTo(this);return this},removeControl:function(a){a.removeFrom(this);return this},_initControlPos:function(){function a(a,f){d[a+f]=b.DomUtil.create("div","leaflet-"+a+" leaflet-"+f,e)}var d=this._controlCorners={},e=this._controlContainer=b.DomUtil.create("div","leaflet-control-container",this._container);a("top","left");a("top","right");a("bottom","left");a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});
b.Control.Zoom=b.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var d=b.DomUtil.create("div","leaflet-control-zoom leaflet-bar");this._map=a;this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,"leaflet-control-zoom-in",d,this._zoomIn,this);this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,"leaflet-control-zoom-out",d,this._zoomOut,
this);this._updateDisabled();a.on("zoomend zoomlevelschange",this._updateDisabled,this);return d},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,d,e,f,g,h){e=b.DomUtil.create("a",e,f);e.innerHTML=a;e.href="#";e.title=d;a=b.DomEvent.stopPropagation;b.DomEvent.on(e,"click",a).on(e,"mousedown",a).on(e,"dblclick",a).on(e,"click",b.DomEvent.preventDefault).on(e,
"click",g,h).on(e,"click",this._refocusOnMap,h);return e},_updateDisabled:function(){var a=this._map;b.DomUtil.removeClass(this._zoomInButton,"leaflet-disabled");b.DomUtil.removeClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMinZoom()&&b.DomUtil.addClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMaxZoom()&&b.DomUtil.addClass(this._zoomInButton,"leaflet-disabled")}});b.Map.mergeOptions({zoomControl:!0});b.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=
new b.Control.Zoom,this.addControl(this.zoomControl))});b.control.zoom=function(a){return new b.Control.Zoom(a)};b.Control.Attribution=b.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){b.setOptions(this,a);this._attributions={}},onAdd:function(a){this._container=b.DomUtil.create("div","leaflet-control-attribution");b.DomEvent.disableClickPropagation(this._container);for(var d in a._layers)a._layers[d].getAttribution&&
this.addAttribution(a._layers[d].getAttribution());a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this);this._update();return this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){this.options.prefix=a;this._update();return this},addAttribution:function(a){if(a)return this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this},removeAttribution:function(a){if(a)return this._attributions[a]&&
(this._attributions[a]--,this._update()),this},_update:function(){if(this._map){var a=[],d;for(d in this._attributions)this._attributions[d]&&a.push(d);d=[];this.options.prefix&&d.push(this.options.prefix);a.length&&d.push(a.join(", "));this._container.innerHTML=d.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}});b.Map.mergeOptions({attributionControl:!0});
b.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new b.Control.Attribution).addTo(this))});b.control.attribution=function(a){return new b.Control.Attribution(a)};b.Control.Scale=b.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var d=b.DomUtil.create("div","leaflet-control-scale"),e=this.options;this._addScales(e,"leaflet-control-scale",d);a.on(e.updateWhenIdle?"moveend":"move",
this._update,this);a.whenReady(this._update,this);return d},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,e){a.metric&&(this._mScale=b.DomUtil.create("div",d+"-line",e));a.imperial&&(this._iScale=b.DomUtil.create("div",d+"-line",e))},_update:function(){var a=this._map.getBounds(),d=a.getCenter().lat,a=6378137*Math.PI*Math.cos(d*Math.PI/180)*(a.getNorthEast().lng-a.getSouthWest().lng)/180,d=this._map.getSize(),b=this.options,e=0;
0<d.x&&(e=b.maxWidth/d.x*a);this._updateScales(b,e)},_updateScales:function(a,d){a.metric&&d&&this._updateMetric(d);a.imperial&&d&&this._updateImperial(d)},_updateMetric:function(a){var d=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(d/a)+"px";this._mScale.innerHTML=1E3>d?d+" m":d/1E3+" km"},_updateImperial:function(a){var d=3.2808399*a;a=this._iScale;var b;5280<d?(d/=5280,b=this._getRoundNum(d),a.style.width=this._getScaleWidth(b/d)+"px",a.innerHTML=b+" mi"):(b=this._getRoundNum(d),
a.style.width=this._getScaleWidth(b/d)+"px",a.innerHTML=b+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1);a/=d;return d*(10<=a?10:5<=a?5:3<=a?3:2<=a?2:1)}});b.control.scale=function(a){return new b.Control.Scale(a)};b.Control.Layers=b.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,d,e){b.setOptions(this,e);this._layers={};this._lastZIndex=0;this._handlingClick=
!1;for(var f in a)this._addLayer(a[f],f);for(f in d)this._addLayer(d[f],f,!0)},onAdd:function(a){this._initLayout();this._update();a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this);return this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,d){this._addLayer(a,d);this._update();return this},addOverlay:function(a,d){this._addLayer(a,d,!0);this._update();return this},removeLayer:function(a){a=
b.stamp(a);delete this._layers[a];this._update();return this},_initLayout:function(){var a=this._container=b.DomUtil.create("div","leaflet-control-layers");a.setAttribute("aria-haspopup",!0);if(b.Browser.touch)b.DomEvent.on(a,"click",b.DomEvent.stopPropagation);else b.DomEvent.disableClickPropagation(a).disableScrollPropagation(a);var d=this._form=b.DomUtil.create("form","leaflet-control-layers-list");if(this.options.collapsed){if(!b.Browser.android)b.DomEvent.on(a,"mouseover",this._expand,this).on(a,
"mouseout",this._collapse,this);var e=this._layersLink=b.DomUtil.create("a","leaflet-control-layers-toggle",a);e.href="#";e.title="Layers";if(b.Browser.touch)b.DomEvent.on(e,"click",b.DomEvent.stop).on(e,"click",this._expand,this);else b.DomEvent.on(e,"focus",this._expand,this);b.DomEvent.on(d,"click",function(){setTimeout(b.bind(this._onInputClick,this),0)},this);this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=b.DomUtil.create("div","leaflet-control-layers-base",
d);this._separator=b.DomUtil.create("div","leaflet-control-layers-separator",d);this._overlaysList=b.DomUtil.create("div","leaflet-control-layers-overlays",d);a.appendChild(d)},_addLayer:function(a,d,e){var f=b.stamp(a);this._layers[f]={layer:a,name:d,overlay:e};this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var a=!1,d=!1,b,e;for(b in this._layers)e=this._layers[b],
this._addItem(e),d=d||e.overlay,a=a||!e.overlay;this._separator.style.display=d&&a?"":"none"}},_onLayerChange:function(a){var d=this._layers[b.stamp(a.layer)];d&&(this._handlingClick||this._update(),(a=d.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null)&&this._map.fire(a,d))},_createRadioElement:function(a,d){var b='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';d&&(b+=' checked="checked"');var b=b+"/>",e=k.createElement("div");
e.innerHTML=b;return e.firstChild},_addItem:function(a){var d=k.createElement("label"),e,f=this._map.hasLayer(a.layer);a.overlay?(e=k.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=f):e=this._createRadioElement("leaflet-base-layers",f);e.layerId=b.stamp(a.layer);b.DomEvent.on(e,"click",this._onInputClick,this);f=k.createElement("span");f.innerHTML=" "+a.name;d.appendChild(e);d.appendChild(f);(a.overlay?this._overlaysList:this._baseLayersList).appendChild(d);
return d},_onInputClick:function(){var a,d,b,e=this._form.getElementsByTagName("input"),f=e.length;this._handlingClick=!0;for(a=0;a<f;a++)d=e[a],b=this._layers[d.layerId],d.checked&&!this._map.hasLayer(b.layer)?this._map.addLayer(b.layer):!d.checked&&this._map.hasLayer(b.layer)&&this._map.removeLayer(b.layer);this._handlingClick=!1;this._refocusOnMap()},_expand:function(){b.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded",
"")}});b.control.layers=function(a,d,e){return new b.Control.Layers(a,d,e)};b.PosAnimation=b.Class.extend({includes:b.Mixin.Events,run:function(a,d,e,f){this.stop();this._el=a;this._inProgress=!0;this._newPos=d;this.fire("start");a.style[b.DomUtil.TRANSITION]="all "+(e||.25)+"s cubic-bezier(0,0,"+(f||.5)+",1)";b.DomEvent.on(a,b.DomUtil.TRANSITION_END,this._onTransitionEnd,this);b.DomUtil.setPosition(a,d);b.Util.falseFn(a.offsetWidth);this._stepTimer=setInterval(b.bind(this._onStep,this),50)},stop:function(){this._inProgress&&
(b.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),b.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();a?(this._el._leaflet_pos=a,this.fire("step")):this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var a,d;d=e.getComputedStyle(this._el);if(b.Browser.any3d){d=d[b.DomUtil.TRANSFORM].match(this._transformRe);if(!d)return;a=parseFloat(d[1]);d=parseFloat(d[2])}else a=parseFloat(d.left),d=parseFloat(d.top);
return new b.Point(a,d,!0)},_onTransitionEnd:function(){b.DomEvent.off(this._el,b.DomUtil.TRANSITION_END,this._onTransitionEnd,this);this._inProgress&&(this._inProgress=!1,this._el.style[b.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}});b.Map.include({setView:function(a,d,e){d=d===h?this._zoom:this._limitZoom(d);a=this._limitCenter(b.latLng(a),d,this.options.maxBounds);e=e||{};this._panAnim&&this._panAnim.stop();if(this._loaded&&
!e.reset&&!0!==e&&(e.animate!==h&&(e.zoom=b.extend({animate:e.animate},e.zoom),e.pan=b.extend({animate:e.animate},e.pan)),this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,e.zoom):this._tryAnimatedPan(a,e.pan)))return clearTimeout(this._sizeTimer),this;this._resetView(a,d);return this},panBy:function(a,d){a=b.point(a).round();d=d||{};if(!a.x&&!a.y)return this;this._panAnim||(this._panAnim=new b.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},
this));d.noMoveStart||this.fire("movestart");if(!1!==d.animate){b.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var e=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,e,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){b.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(a,d){var b=this._getCenterOffset(a)._floor();
if(!0!==(d&&d.animate)&&!this.getSize().contains(b))return!1;this.panBy(b,d);return!0}});b.PosAnimation=b.DomUtil.TRANSITION?b.PosAnimation:b.PosAnimation.extend({run:function(a,d,e,f){this.stop();this._el=a;this._inProgress=!0;this._duration=e||.25;this._easeOutPower=1/Math.max(f||.5,.2);this._startPos=b.DomUtil.getPosition(a);this._offset=d.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=
b.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var a=+new Date-this._startTime,d=1E3*this._duration;a<d?this._runFrame(this._easeOut(a/d)):(this._runFrame(1),this._complete())},_runFrame:function(a){a=this._startPos.add(this._offset.multiplyBy(a));b.DomUtil.setPosition(this._el,a);this.fire("step")},_complete:function(){b.Util.cancelAnimFrame(this._animId);this._inProgress=!1;this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}});b.Map.mergeOptions({zoomAnimation:!0,
zoomAnimationThreshold:4});b.DomUtil.TRANSITION&&b.Map.addInitHook(function(){if(this._zoomAnimated=this.options.zoomAnimation&&b.DomUtil.TRANSITION&&b.Browser.any3d&&!b.Browser.android23&&!b.Browser.mobileOpera)b.DomEvent.on(this._mapPane,b.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)});b.Map.include(b.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&0<=a.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},
_tryAnimatedZoom:function(a,d,b){if(this._animatingZoom)return!0;b=b||{};if(!this._zoomAnimated||!1===b.animate||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var e=this.getZoomScale(d),f=this._getCenterOffset(a)._divideBy(1-1/e),g=this._getCenterLayerPoint()._add(f);if(!0!==b.animate&&!this.getSize().contains(f))return!1;this.fire("movestart").fire("zoomstart");this._animateZoom(a,d,g,e,null,!0);return!0},_animateZoom:function(a,d,e,f,g,h){this._animatingZoom=
!0;b.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this._animateToCenter=a;this._animateToZoom=d;b.Draggable&&(b.Draggable._disabled=!0);this.fire("zoomanim",{center:a,zoom:d,origin:e,scale:f,delta:g,backwards:h})},_onZoomTransitionEnd:function(){this._animatingZoom=!1;b.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._resetView(this._animateToCenter,this._animateToZoom,!0,!0);b.Draggable&&(b.Draggable._disabled=!1)}}:{});b.TileLayer.include({_animateZoom:function(a){this._animating||
(this._animating=!0,this._prepareBgBuffer());var d=this._bgBuffer,e=b.DomUtil.TRANSFORM,f=a.delta?b.DomUtil.getTranslateString(a.delta):d.style[e],g=b.DomUtil.getScaleString(a.scale,a.origin);d.style[e]=a.backwards?g+" "+f:f+" "+g},_endZoomAnim:function(){var a=this._tileContainer,d=this._bgBuffer;a.style.visibility="";a.parentNode.appendChild(a);b.Util.falseFn(d.offsetWidth);this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML=
"",this._bgBuffer.style[b.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,d=this._bgBuffer,e=this._getLoadedTilesPercentage(d),f=this._getLoadedTilesPercentage(a);d&&.5<e&&.5>f?(a.style.visibility="hidden",this._stopLoadingImages(a)):(d.style.visibility="hidden",d.style[b.DomUtil.TRANSFORM]="",this._tileContainer=d,d=this._bgBuffer=a,this._stopLoadingImages(d),clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){a=a.getElementsByTagName("img");
var d,b,e=0;d=0;for(b=a.length;d<b;d++)a[d].complete&&e++;return e/b},_stopLoadingImages:function(a){a=Array.prototype.slice.call(a.getElementsByTagName("img"));var d,e,f;d=0;for(e=a.length;d<e;d++)f=a[d],f.complete||(f.onload=b.Util.falseFn,f.onerror=b.Util.falseFn,f.src=b.Util.emptyImageUrl,f.parentNode.removeChild(f))}});b.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:Infinity,timeout:1E4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){a=this._locateOptions=b.extend(this._defaultLocateOptions,
a);if(!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=b.bind(this._handleGeolocationResponse,this),e=b.bind(this._handleGeolocationError,this);a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,e,a):navigator.geolocation.getCurrentPosition(d,e,a);return this},stopLocate:function(){navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId);this._locateOptions&&(this._locateOptions.setView=!1);
return this},_handleGeolocationError:function(a){var d=a.code;a=a.message||(1===d?"permission denied":2===d?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:d,message:"Geolocation error: "+a+"."})},_handleGeolocationResponse:function(a){var d=a.coords.latitude,e=a.coords.longitude,f=new b.LatLng(d,e),g=180*a.coords.accuracy/40075017,h=g/Math.cos(b.LatLng.DEG_TO_RAD*d),d=b.latLngBounds([d-g,e-h],[d+g,e+h]),e=this._locateOptions;
e.setView&&(e=Math.min(this.getBoundsZoom(d),e.maxZoom),this.setView(f,e));var f={latlng:f,bounds:d,timestamp:a.timestamp},k;for(k in a.coords)"number"===typeof a.coords[k]&&(f[k]=a.coords[k]);this.fire("locationfound",f)}})})(window,document);
(function(e,k){var h="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,f=function(){var b,a,d=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" ")],e=0;a=d.length;for(var f={};a>e;e++)if(b=d[e],b&&b[1]in k){e=0;for(a=b.length;a>e;e++)f[d[0][e]]=b[e];return f}return!1}(),b={request:function(b){var a=f.requestFullscreen;b=b||k.documentElement;/5\.1[\.\d]* Safari/.test(navigator.userAgent)?b[a]():b[a](h&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){k[f.exitFullscreen]()},toggle:function(b){this.isFullscreen?this.exit():
this.request(b)},onchange:function(){},onerror:function(){},raw:f};return f?(Object.defineProperties(b,{isFullscreen:{get:function(){return!!k[f.fullscreenElement]}},element:{enumerable:!0,get:function(){return k[f.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!k[f.fullscreenEnabled]}}}),k.addEventListener(f.fullscreenchange,function(e){b.onchange.call(b,e)}),k.addEventListener(f.fullscreenerror,function(e){b.onerror.call(b,e)}),e.screenfull=b,void 0):e.screenfull=!1})(window,
document);
var swfobject=function(){function e(){if(!N){try{var a=C.getElementsByTagName("body")[0].appendChild(C.createElement("span"));a.parentNode.removeChild(a)}catch(d){return}N=!0;for(var a=J.length,b=0;b<a;b++)J[b]()}}function k(a){N?a():J[J.length]=a}function h(a){if("undefined"!=typeof F.addEventListener)F.addEventListener("load",a,!1);else if("undefined"!=typeof C.addEventListener)C.addEventListener("load",a,!1);else if("undefined"!=typeof F.attachEvent)t(F,"onload",a);else if("function"==typeof F.onload){var d=
F.onload;F.onload=function(){d();a()}}else F.onload=a}function f(){var a=C.getElementsByTagName("body")[0],d=C.createElement("object");d.setAttribute("type","application/x-shockwave-flash");var e=a.appendChild(d);if(e){var f=0;(function(){if("undefined"!=typeof e.GetVariable){var g=e.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),H.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}else if(10>f){f++;setTimeout(arguments.callee,10);return}a.removeChild(d);e=null;b()})()}else b()}
function b(){var b=G.length;if(0<b)for(var e=0;e<b;e++){var f=G[e].id,h=G[e].callbackFn,k={success:!1,id:f};if(0<H.pv[0]){var t=m(f);if(t)if(!u(G[e].swfVersion)||H.wk&&312>H.wk)if(G[e].expressInstall&&a()){k={};k.data=G[e].expressInstall;k.width=t.getAttribute("width")||"0";k.height=t.getAttribute("height")||"0";t.getAttribute("class")&&(k.styleclass=t.getAttribute("class"));t.getAttribute("align")&&(k.align=t.getAttribute("align"));for(var q={},t=t.getElementsByTagName("param"),v=t.length,w=0;w<
v;w++)"movie"!=t[w].getAttribute("name").toLowerCase()&&(q[t[w].getAttribute("name")]=t[w].getAttribute("value"));d(k,q,f,h)}else l(t),h&&h(k);else y(f,!0),h&&(k.success=!0,k.ref=g(f),h(k))}else y(f,!0),h&&((f=g(f))&&"undefined"!=typeof f.SetVariable&&(k.success=!0,k.ref=f),h(k))}}function g(a){var d=null;(a=m(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?d=a:(a=a.getElementsByTagName("object")[0])&&(d=a));return d}function a(){return!n&&u("6.0.65")&&(H.win||H.mac)&&!(H.wk&&312>H.wk)}
function d(a,d,b,e){n=!0;E=e||null;Y={success:!1,id:b};var f=m(b);if(f){"OBJECT"==f.nodeName?(O=q(f),P=null):(O=f,P=b);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";C.title=C.title.slice(0,47)+" - Flash Player Installation";e=H.ie&&H.win?"ActiveX":"PlugIn";e="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+
e+"&MMdoctitle="+C.title;d.flashvars="undefined"!=typeof d.flashvars?d.flashvars+("&"+e):e;H.ie&&H.win&&4!=f.readyState&&(e=C.createElement("div"),b+="SWFObjectNew",e.setAttribute("id",b),f.parentNode.insertBefore(e,f),f.style.display="none",function(){4==f.readyState?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}());v(a,d,b)}}function l(a){if(H.ie&&H.win&&4!=a.readyState){var d=C.createElement("div");a.parentNode.insertBefore(d,a);d.parentNode.replaceChild(q(a),d);a.style.display="none";
(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(q(a),a)}function q(a){var d=C.createElement("div");if(H.win&&H.ie)d.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var b=a.length,e=0;e<b;e++)1==a[e].nodeType&&"PARAM"==a[e].nodeName||8==a[e].nodeType||d.appendChild(a[e].cloneNode(!0));return d}function v(a,d,b){var e,f=m(b);if(H.wk&&312>H.wk)return e;if(f)if("undefined"==typeof a.id&&
(a.id=b),H.ie&&H.win){var g="",l;for(l in a)a[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?d.movie=a[l]:"styleclass"==l.toLowerCase()?g+=' class="'+a[l]+'"':"classid"!=l.toLowerCase()&&(g+=" "+l+'="'+a[l]+'"'));l="";for(var h in d)d[h]!=Object.prototype[h]&&(l+='<param name="'+h+'" value="'+d[h]+'" />');f.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+l+"</object>";A[A.length]=a.id;e=m(a.id)}else{h=C.createElement("object");h.setAttribute("type","application/x-shockwave-flash");
for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?h.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&h.setAttribute(k,a[k]));for(g in d)d[g]!=Object.prototype[g]&&"movie"!=g.toLowerCase()&&(a=h,l=g,k=d[g],b=C.createElement("param"),b.setAttribute("name",l),b.setAttribute("value",k),a.appendChild(b));f.parentNode.replaceChild(h,f);e=h}return e}function w(a){var d=m(a);d&&"OBJECT"==d.nodeName&&(H.ie&&H.win?(d.style.display="none",function(){if(4==d.readyState){var b=m(a);
if(b){for(var e in b)"function"==typeof b[e]&&(b[e]=null);b.parentNode.removeChild(b)}}else setTimeout(arguments.callee,10)}()):d.parentNode.removeChild(d))}function m(a){var d=null;try{d=C.getElementById(a)}catch(b){}return d}function t(a,d,b){a.attachEvent(d,b);I[I.length]=[a,d,b]}function u(a){var d=H.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return d[0]>a[0]||d[0]==a[0]&&d[1]>a[1]||d[0]==a[0]&&d[1]==a[1]&&d[2]>=a[2]?!0:!1}function x(a,d,b,e){if(!H.ie||
!H.mac){var f=C.getElementsByTagName("head")[0];f&&(b=b&&"string"==typeof b?b:"screen",e&&(U=M=null),M&&U==b||(e=C.createElement("style"),e.setAttribute("type","text/css"),e.setAttribute("media",b),M=f.appendChild(e),H.ie&&H.win&&"undefined"!=typeof C.styleSheets&&0<C.styleSheets.length&&(M=C.styleSheets[C.styleSheets.length-1]),U=b),H.ie&&H.win?M&&"object"==typeof M.addRule&&M.addRule(a,d):M&&"undefined"!=typeof C.createTextNode&&M.appendChild(C.createTextNode(a+" {"+d+"}")))}}function y(a,d){if(W){var b=
d?"visible":"hidden";N&&m(a)?m(a).style.visibility=b:x("#"+a,"visibility:"+b)}}function B(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var F=window,C=document,K=navigator,z=!1,J=[function(){z?f():b()}],G=[],A=[],I=[],O,P,E,Y,N=!1,n=!1,M,U,W=!0,H=function(){var a="undefined"!=typeof C.getElementById&&"undefined"!=typeof C.getElementsByTagName&&"undefined"!=typeof C.createElement,d=K.userAgent.toLowerCase(),b=K.platform.toLowerCase(),e=b?/win/.test(b):
/win/.test(d),b=b?/mac/.test(b):/mac/.test(d),d=/webkit/.test(d)?parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,f=!+"\v1",g=[0,0,0],l=null;if("undefined"!=typeof K.plugins&&"object"==typeof K.plugins["Shockwave Flash"])!(l=K.plugins["Shockwave Flash"].description)||"undefined"!=typeof K.mimeTypes&&K.mimeTypes["application/x-shockwave-flash"]&&!K.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(z=!0,f=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),g[0]=parseInt(l.replace(/^(.*)\..*$/,
"$1"),10),g[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),g[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof F.ActiveXObject)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h&&(l=h.GetVariable("$version"))&&(f=!0,l=l.split(" ")[1].split(","),g=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)])}catch(k){}return{w3:a,pv:g,wk:d,ie:f,win:e,mac:b}}();(function(){H.w3&&(("undefined"!=typeof C.readyState&&"complete"==C.readyState||
"undefined"==typeof C.readyState&&(C.getElementsByTagName("body")[0]||C.body))&&e(),N||("undefined"!=typeof C.addEventListener&&C.addEventListener("DOMContentLoaded",e,!1),H.ie&&H.win&&(C.attachEvent("onreadystatechange",function(){"complete"==C.readyState&&(C.detachEvent("onreadystatechange",arguments.callee),e())}),F==top&&function(){if(!N){try{C.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}e()}}()),H.wk&&function(){N||(/loaded|complete/.test(C.readyState)?e():
setTimeout(arguments.callee,0))}(),h(e)))})();(function(){H.ie&&H.win&&window.attachEvent("onunload",function(){for(var a=I.length,d=0;d<a;d++)I[d][0].detachEvent(I[d][1],I[d][2]);a=A.length;for(d=0;d<a;d++)w(A[d]);for(var b in H)H[b]=null;H=null;for(var e in swfobject)swfobject[e]=null;swfobject=null})})();return{registerObject:function(a,d,b,e){if(H.w3&&a&&d){var f={};f.id=a;f.swfVersion=d;f.expressInstall=b;f.callbackFn=e;G[G.length]=f;y(a,!1)}else e&&e({success:!1,id:a})},getObjectById:function(a){if(H.w3)return g(a)},
embedSWF:function(b,e,f,g,l,h,m,t,q,w){var x={success:!1,id:e};H.w3&&!(H.wk&&312>H.wk)&&b&&e&&f&&g&&l?(y(e,!1),k(function(){f+="";g+="";var k={};if(q&&"object"===typeof q)for(var n in q)k[n]=q[n];k.data=b;k.width=f;k.height=g;n={};if(t&&"object"===typeof t)for(var H in t)n[H]=t[H];if(m&&"object"===typeof m)for(var A in m)n.flashvars="undefined"!=typeof n.flashvars?n.flashvars+("&"+A+"="+m[A]):A+"="+m[A];if(u(l))H=v(k,n,e),k.id==e&&y(e,!0),x.success=!0,x.ref=H;else{if(h&&a()){k.data=h;d(k,n,e,w);return}y(e,
!0)}w&&w(x)})):w&&w(x)},switchOffAutoHideShow:function(){W=!1},ua:H,getFlashPlayerVersion:function(){return{major:H.pv[0],minor:H.pv[1],release:H.pv[2]}},hasFlashPlayerVersion:u,createSWF:function(a,d,b){if(H.w3)return v(a,d,b)},showExpressInstall:function(b,e,f,g){H.w3&&a()&&d(b,e,f,g)},removeSWF:function(a){H.w3&&w(a)},createCSS:function(a,d,b,e){H.w3&&x(a,d,b,e)},addDomLoadEvent:k,addLoadEvent:h,getQueryParamValue:function(a){var d=C.location.search||C.location.hash;if(d){/\?/.test(d)&&(d=d.split("?")[1]);
if(null==a)return B(d);for(var d=d.split("&"),b=0;b<d.length;b++)if(d[b].substring(0,d[b].indexOf("="))==a)return B(d[b].substring(d[b].indexOf("=")+1))}return""},expressInstallCallback:function(){if(n){var a=m("SWFObjectExprInst");a&&O&&(a.parentNode.replaceChild(O,a),P&&(y(P,!0),H.ie&&H.win&&(O.style.display="block")),E&&E(Y));n=!1}}}}(),key,_,_active_combos,_add_key_to_sequence,_add_to_active_combos,_allow_key_repeat,_bind_key_events,_bug_catcher,_change_keycodes_by_browser,_cmd_bug_check,_combo_defaults,
_compare_arrays,_convert_key_to_readable,_convert_to_shifted_key,_decide_meta_key,_event_classname,_fire,_get_active_combos,_get_possible_sequences,_get_potential_combos,_get_sequence,_handle_combo_down,_handle_combo_up,_init,_key_down,_key_up,_keycode_alternate_names,_keycode_dictionary,_keycode_shifted_keys,_keys_down,_keys_remain,_log_error,_match_combo_arrays,_metakey,_modifier_event_mapping,_modifier_keys,_prevent_capture,_prevent_default,_ready,_receive_input,_registered_combos,_remove_from_active_combos,
_sequence,_sequence_timer,_unregister_combo,_valid_keys,_validate_combo,__indexOf=[].indexOf||function(e){for(var k=0,h=this.length;k<h;k++)if(k in this&&this[k]===e)return k;return-1},__hasProp={}.hasOwnProperty;_registered_combos=[];_sequence=[];_sequence_timer=null;_keys_down=[];_active_combos=[];_prevent_capture=!1;_event_classname="keypress_events";_metakey="ctrl";_modifier_keys="meta alt option ctrl shift cmd".split(" ");_valid_keys=[];_combo_defaults={keys:[],count:0};
_log_error=function(){return console.log.apply(console,arguments)};_compare_arrays=function(e,k){var h,f,b;if(e.length!==k.length)return!1;f=0;for(b=e.length;f<b;f++)if(h=e[f],!(0<=__indexOf.call(k,h)))return!1;f=0;for(b=k.length;f<b;f++)if(h=k[f],!(0<=__indexOf.call(e,h)))return!1;return!0};_prevent_default=function(e,k){if((k||keypress.suppress_event_defaults)&&!keypress.force_event_defaults)return e.preventDefault()};_allow_key_repeat=function(e){if(e.prevent_repeat)return!1;if("function"===typeof e.on_keydown)return!0};
_keys_remain=function(e){var k,h,f,b;b=e.keys;h=0;for(f=b.length;h<f;h++)if(e=b[h],0<=__indexOf.call(_keys_down,e)){k=!0;break}return k};_fire=function(e,k,h){"function"===typeof k["on_"+e]&&_prevent_default(h,!1===k["on_"+e].call(k["this"],h,k.count));"release"===e&&(k.count=0);if("keyup"===e)return k.keyup_fired=!0};
_match_combo_arrays=function(e,k,h){var f,b,g,a;null==h&&(h=!1);f=[];g=0;for(a=k.length;g<a;g++)b=k[g],k.is_sequence||(b.is_ordered?(e.join("")===b.keys.join("")&&f.push(b),h&&e.join("")===b.keys.slice(0,e.length).join("")&&f.push(b)):(_compare_arrays(e,b.keys)&&f.push(b),h&&_compare_arrays(e,b.keys.slice(0,e.length))&&f.push(b)));return f};_cmd_bug_check=function(e){return 0<=__indexOf.call(_keys_down,"cmd")&&0>__indexOf.call(e,"cmd")?!1:!0};
_get_active_combos=function(e){var k,h,f,b,g,a,d;b=[];h=_keys_down.filter(function(a){return a!==e});h.push(e);f=_match_combo_arrays(h,_registered_combos);f.length&&_cmd_bug_check(h)&&(b=f);k=!1;a=0;for(d=b.length;a<d;a++)f=b[a],f.is_exclusive&&(k=!0);g=function(a){var d,e,f,h,t,u,x;d=h=0;for(x=a.length;0<=x?h<x:h>x;d=0<=x?++h:--h)if(f=a.slice(),f.splice(d,1),f.length){e=_match_combo_arrays(f,_registered_combos);t=0;for(u=e.length;t<u;t++)d=e[t],k&&d.is_exclusive||b.push(d);g(f)}};g(h);return b};
_get_potential_combos=function(e){var k,h,f,b;h=[];f=0;for(b=_registered_combos.length;f<b;f++)k=_registered_combos[f],k.is_sequence||0<=__indexOf.call(k.keys,e)&&_cmd_bug_check(k.keys)&&h.push(k);return h};
_add_to_active_combos=function(e){var k,h,f,b,g,a,d,l,q;g=!1;if(0<=__indexOf.call(_active_combos,e))return!1;if(_active_combos.length)for(f=a=0,q=_active_combos.length;0<=q?a<q:a>q;f=0<=q?++a:--a)if(k=_active_combos[f],k.is_exclusive&&e.is_exclusive){h=k.keys.slice();d=0;for(l=h.length;d<l;d++)if(k=h[d],b=!0,0>__indexOf.call(e.keys,k)){b=!1;break}if(b){_active_combos.splice(f,1,e);g=!0;break}}g||_active_combos.unshift(e);return!0};
_remove_from_active_combos=function(e){var k,h,f,b;h=f=0;for(b=_active_combos.length;0<=b?f<b:f>b;h=0<=b?++f:--f)if(k=_active_combos[h],k===e){_active_combos.splice(h,1);break}};_add_key_to_sequence=function(e,k){var h,f,b,g;_sequence.push(e);f=_get_possible_sequences();if(f.length){b=0;for(g=f.length;b<g;b++)h=f[b],_prevent_default(k,h.prevent_default);_sequence_timer&&clearTimeout(_sequence_timer);_sequence_timer=setTimeout(function(){return _sequence=[]},800)}else _sequence=[]};
_get_possible_sequences=function(){var e,k,h,f,b,g,a,d,l,q,v;f=[];g=0;for(l=_registered_combos.length;g<l;g++)for(e=_registered_combos[g],k=a=1,q=_sequence.length;1<=q?a<=q:a>=q;k=1<=q?++a:--a)if(b=_sequence.slice(-k),e.is_sequence){if(0>__indexOf.call(e.keys,"shift")&&(b=b.filter(function(a){return"shift"!==a}),!b.length))continue;k=d=0;for(v=b.length;0<=v?d<v:d>v;k=0<=v?++d:--d)if(e.keys[k]===b[k])h=!0;else{h=!1;break}h&&f.push(e)}return f};
_get_sequence=function(e){var k,h,f,b,g,a,d,l,q,v,w;a=0;for(q=_registered_combos.length;a<q;a++)if(k=_registered_combos[a],k.is_sequence){h=d=1;for(v=_sequence.length;1<=v?d<=v:d>=v;h=1<=v?++d:--d)if(g=_sequence.filter(function(a){return 0<=__indexOf.call(k.keys,"shift")?!0:"shift"!==a}).slice(-h),k.keys.length===g.length)for(h=l=0,w=g.length;0<=w?l<w:l>w;h=0<=w?++l:--l)if(b=g[h],!(0>__indexOf.call(k.keys,"shift")&&"shift"===b||"shift"===e&&0>__indexOf.call(k.keys,"shift")))if(k.keys[h]===b)f=!0;
else{f=!1;break}if(f)return k}return!1};_convert_to_shifted_key=function(e,k){var h;if(!k.shiftKey)return!1;h=_keycode_shifted_keys[e];return null!=h?h:!1};_handle_combo_down=function(e,k,h){if(0>__indexOf.call(e.keys,k))return!1;_prevent_default(h,e&&e.prevent_default);if(0<=__indexOf.call(_keys_down,k)&&!_allow_key_repeat(e))return!1;_add_to_active_combos(e,k);e.keyup_fired=!1;e.is_counting&&"function"===typeof e.on_keydown&&(e.count+=1);return _fire("keydown",e,h)};
_key_down=function(e,k){var h,f,b,g;(f=_convert_to_shifted_key(e,k))&&(e=f);_add_key_to_sequence(e,k);(f=_get_sequence(e))&&_fire("keydown",f,k);for(h in _modifier_event_mapping)f=_modifier_event_mapping[h],k[f]&&("meta"===h&&(h=_metakey),h===e||0<=__indexOf.call(_keys_down,h)||_keys_down.push(h));for(h in _modifier_event_mapping)if(f=_modifier_event_mapping[h],"meta"===h&&(h=_metakey),h!==e&&0<=__indexOf.call(_keys_down,h)&&!k[f])for(f=b=0,g=_keys_down.length;0<=g?b<g:b>g;f=0<=g?++b:--b)_keys_down[f]===
h&&_keys_down.splice(f,1);f=_get_active_combos(e);b=0;for(g=f.length;b<g;b++)h=f[b],_handle_combo_down(h,e,k);f=_get_potential_combos(e);if(f.length)for(b=0,g=f.length;b<g;b++)h=f[b],_prevent_default(k,h.prevent_default);0>__indexOf.call(_keys_down,e)&&_keys_down.push(e)};
_handle_combo_up=function(e,k){var h;h=_keys_remain(e);!e.keyup_fired&&(!e.is_counting||e.is_counting&&h)&&(_fire("keyup",e,k),e.is_counting&&"function"===typeof e.on_keyup&&"function"!==typeof e.on_keydown&&(e.count+=1));h||(e.is_counting&&_fire("release",e,k),_remove_from_active_combos(e))};
_key_up=function(e,k){var h,f,b,g,a,d;f=e;(b=_convert_to_shifted_key(e,k))&&(e=b);b=_keycode_shifted_keys[f];k.shiftKey?b&&0<=__indexOf.call(_keys_down,b)||(e=f):f&&0<=__indexOf.call(_keys_down,f)||(e=b);(g=_get_sequence(e))&&_fire("keyup",g,k);if(0>__indexOf.call(_keys_down,e))return!1;g=a=0;for(d=_keys_down.length;0<=d?a<d:a>d;g=0<=d?++a:--a)if((h=_keys_down[g])===e||h===b||h===f){_keys_down.splice(g,1);break}f=_active_combos.length;b=[];g=0;for(a=_active_combos.length;g<a;g++)h=_active_combos[g],
0<=__indexOf.call(h.keys,e)&&b.push(h);g=0;for(a=b.length;g<a;g++)h=b[g],_handle_combo_up(h,k);if(1<f)for(f=0,g=_active_combos.length;f<g;f++)h=_active_combos[f],void 0===h||0<=__indexOf.call(b,h)||_keys_remain(h)||_remove_from_active_combos(h)};_receive_input=function(e,k){var h;if(_prevent_capture)_keys_down.length&&(_keys_down=[]);else if(k||_keys_down.length)if(h=_convert_key_to_readable(e.keyCode))return k?_key_down(h,e):_key_up(h,e)};
_unregister_combo=function(e){var k,h,f,b;b=[];k=h=0;for(f=_registered_combos.length;0<=f?h<f:h>f;k=0<=f?++h:--h)if(e===_registered_combos[k]){_registered_combos.splice(k,1);break}else b.push(void 0);return b};
_validate_combo=function(e){var k,h,f,b,g;e.keys.length||_log_error("You're trying to bind a combo with no keys.");h=b=0;for(g=e.keys.length;0<=g?b<g:b>g;h=0<=g?++b:--b)f=e.keys[h],(k=_keycode_alternate_names[f])&&(f=e.keys[h]=k),"meta"===f&&e.keys.splice(h,1,_metakey),"cmd"===f&&_log_error('Warning: use the "meta" key rather than "cmd" for Windows compatibility');g=e.keys;k=0;for(b=g.length;k<b;k++)if(f=g[k],0>__indexOf.call(_valid_keys,f))return _log_error('Do not recognize the key "'+f+'"'),!1;
if(0<=__indexOf.call(e.keys,"meta")||0<=__indexOf.call(e.keys,"cmd")){k=e.keys.slice();b=0;for(g=_modifier_keys.length;b<g;b++)f=_modifier_keys[b],-1<(h=k.indexOf(f))&&k.splice(h,1);1<k.length&&_log_error("META and CMD key combos cannot have more than 1 non-modifier keys",e,k)}return!0};_decide_meta_key=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(_metakey="cmd")};
_bug_catcher=function(e){var k;if(0<=__indexOf.call(_keys_down,"cmd")&&"cmd"!==(k=_convert_key_to_readable(e.keyCode))&&"shift"!==k&&"alt"!==k&&"caps"!==k&&"tab"!==k)return _receive_input(e,!1)};_change_keycodes_by_browser=function(){-1!==navigator.userAgent.indexOf("Opera")&&(_keycode_dictionary["17"]="cmd")};
_bind_key_events=function(){document.body.onkeydown=function(e){_receive_input(e,!0);return _bug_catcher(e)};document.body.onkeyup=function(e){return _receive_input(e,!1)};return window.onblur=function(){var e,k,h;k=0;for(h=_keys_down.length;k<h;k++)e=_keys_down[k],_key_up(e,{});_keys_down=[];return[]}};_init=function(){_decide_meta_key();return _change_keycodes_by_browser()};window.keypress={};keypress.force_event_defaults=!1;keypress.suppress_event_defaults=!1;
keypress.reset=function(){_registered_combos=[]};keypress.combo=function(e,k,h){null==h&&(h=!1);return keypress.register_combo({keys:e,on_keydown:k,prevent_default:h})};keypress.counting_combo=function(e,k,h){null==h&&(h=!1);return keypress.register_combo({keys:e,is_counting:!0,is_ordered:!0,on_keydown:k,prevent_default:h})};keypress.sequence_combo=function(e,k,h){null==h&&(h=!1);return keypress.register_combo({keys:e,on_keydown:k,is_sequence:!0,prevent_default:h})};
keypress.register_combo=function(e){var k,h;"string"===typeof e.keys&&(e.keys=e.keys.split(" "));for(k in _combo_defaults)__hasProp.call(_combo_defaults,k)&&(h=_combo_defaults[k],null==e[k]&&(e[k]=h));if(_validate_combo(e))return _registered_combos.push(e),!0};keypress.register_many=function(e){var k,h,f,b;b=[];h=0;for(f=e.length;h<f;h++)k=e[h],b.push(keypress.register_combo(k));return b};
keypress.unregister_combo=function(e){var k,h,f;if(!e)return!1;if(e.keys)return _unregister_combo(e);f=[];k=0;for(h=_registered_combos.length;k<h;k++)(e=_registered_combos[k])&&(_compare_arrays(keys,e.keys)?f.push(_unregister_combo(e)):f.push(void 0));return f};keypress.unregister_many=function(e){var k,h,f,b;b=[];h=0;for(f=e.length;h<f;h++)k=e[h],b.push(keypress.unregister_combo(k));return b};keypress.listen=function(){return _prevent_capture=!1};
keypress.stop_listening=function(){return _prevent_capture=!0};_convert_key_to_readable=function(e){return _keycode_dictionary[e]};_modifier_event_mapping={meta:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"};_keycode_alternate_names={control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"};
_keycode_shifted_keys={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"};
_keycode_dictionary={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",
89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"cmd",57392:"ctrl",63289:"num"};for(_ in _keycode_dictionary)key=_keycode_dictionary[_],_valid_keys.push(key);
for(_ in _keycode_shifted_keys)key=_keycode_shifted_keys[_],_valid_keys.push(key);_init();_ready=function(e){return/in/.test(document.readyState)?setTimeout(function(){return _ready(e)},9):e()};_ready(_bind_key_events);!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket);
(function(){function e(){}if(!window.WebSocket){var k=window.console;k&&k.log&&k.error||(k={log:function(){},error:function(){}});swfobject.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&k.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,f,b,g,a){var d=this;d.__id=WebSocket.__nextId++;WebSocket.__instances[d.__id]=d;d.readyState=WebSocket.CONNECTING;d.bufferedAmount=
0;setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(d.__id,e,f,b||null,g||0,a||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";e=WebSocket.__flash.send(this.__id,encodeURIComponent(e));if(0>e)return!0;this.bufferedAmount+=e;return!1},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=
WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,f,b){"__events"in this||(this.__events={});e in this.__events||(this.__events[e]=[],"function"==typeof this["on"+e]&&(this.__events[e].defaultHandler=this["on"+e],this["on"+e]=this.__createEventHandler(this,e)));this.__events[e].push(f)},WebSocket.prototype.removeEventListener=function(e,f,b){"__events"in this||(this.__events={});if(e in this.__events)for(b=this.__events.length;-1<b;--b)if(f===this.__events[e][b]){this.__events[e].splice(b,
1);break}},WebSocket.prototype.dispatchEvent=function(e){if(!("__events"in this))throw"UNSPECIFIED_EVENT_TYPE_ERR";if(!(e.type in this.__events))throw"UNSPECIFIED_EVENT_TYPE_ERR";for(var f=0,b=this.__events[e.type].length;f<b&&(this.__events[e.type][f](e),!e.cancelBubble);++f);!1!==e.returnValue&&"function"==typeof this.__events[e.type].defaultHandler&&this.__events[e.type].defaultHandler(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState);try{if("open"==
e.type){if(this.onopen)this.onopen()}else if("close"==e.type){if(this.onclose)this.onclose()}else if("error"==e.type){if(this.onerror)this.onerror(e)}else if("message"==e.type){if(this.onmessage){var f=decodeURIComponent(e.message),b;window.MessageEvent&&!window.opera?(b=document.createEvent("MessageEvent"),b.initMessageEvent("message",!1,!1,f,null,null,window,null)):b={data:f};this.onmessage(b)}}else throw"unknown event type: "+e.type;}catch(g){k.error(g)}},WebSocket.prototype.__createEventHandler=
function(h,f){return function(b){var g=new e;g.initEvent(f,!0,!0);g.target=g.currentTarget=h;for(var a in b)g[a]=b[a];h.dispatchEvent(g,arguments)}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.__initialize=function(){if(!WebSocket.__flash)if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){var e=document.createElement("div");
e.id="webSocketContainer";e.style.position="absolute";WebSocket.__isFlashLite()?(e.style.left="0px",e.style.top="0px"):(e.style.left="-100px",e.style.top="-100px");var f=document.createElement("div");f.id="webSocketFlash";e.appendChild(f);document.body.appendChild(e);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(b){b.success||k.error("[WebSocket] swfobject.embedSWF failed")})}else k.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},
WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){setTimeout(function(){for(var e=
WebSocket.__flash.receiveEvents(),f=0;f<e.length;++f)WebSocket.__instances[e[f].webSocketId].__handleEvent(e[f])},0);return!0},WebSocket.__log=function(e){k.log(decodeURIComponent(e))},WebSocket.__error=function(e){k.error(decodeURIComponent(e))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return e&&e.enabledPlugin&&
e.enabledPlugin.filename?e.enabledPlugin.filename.match(/flashlite/i)?!0:!1:!1},e.prototype.cancelable=!0,e.prototype.cancelBubble=!1,e.prototype.preventDefault=function(){this.cancelable&&(this.returnValue=!1)},e.prototype.stopPropagation=function(){this.cancelBubble=!0},e.prototype.initEvent=function(e,f,b){this.type=e;this.cancelable=b;this.timeStamp=new Date},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},
!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))):k.error("Flash Player >= 10.0.0 is required.")}})();
window.Modernizr=function(e,k,h){function f(a,d){for(var b in a){var e=a[b];if(!~(""+e).indexOf("-")&&l[e]!==h)return"pfx"==d?e:!0}return!1}function b(a,d,b){var e=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+q.join(e+" ")+e).split(" ");if("string"===typeof d||"undefined"===typeof d)return f(g,d);g=(a+" "+v.join(e+" ")+e).split(" ");a:{a=g;for(var l in a)if(e=d[a[l]],e!==h){d=!1===b?a[l]:"function"===typeof e?e.bind(b||d):e;break a}d=!1}return d}var g={},a=k.documentElement,d=k.createElement("modernizr"),
l=d.style,q=["Webkit","Moz","O","ms"],v=["webkit","moz","o","ms"],d={},w=[],m=w.slice,t,u=function(d,b,e,f){var g,l,h=k.createElement("div"),m=k.body,t=m||k.createElement("body");if(parseInt(e,10))for(;e--;)g=k.createElement("div"),g.id=f?f[e]:"modernizr"+(e+1),h.appendChild(g);e=['&#173;<style id="smodernizr">',d,"</style>"].join("");h.id="modernizr";(m?h:t).innerHTML+=e;t.appendChild(h);m||(t.style.background="",t.style.overflow="hidden",l=a.style.overflow,a.style.overflow="hidden",a.appendChild(t));
d=b(h,d);m?h.parentNode.removeChild(h):(t.parentNode.removeChild(t),a.style.overflow=l);return!!d},x={}.hasOwnProperty,y;y="undefined"!==typeof x&&"undefined"!==typeof x.call?function(a,d){return x.call(a,d)}:function(a,d){return d in a&&"undefined"===typeof a.constructor.prototype[d]};Function.prototype.bind||(Function.prototype.bind=function(a){var d=this;if("function"!=typeof d)throw new TypeError;var b=m.call(arguments,1),e=function(){if(this instanceof e){var f=function(){};f.prototype=d.prototype;
var f=new f,g=d.apply(f,b.concat(m.call(arguments)));return Object(g)===g?g:f}return d.apply(a,b.concat(m.call(arguments)))};return e});d.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e};d.cssanimations=function(){return b("animationName")};d.csstransforms3d=function(){var d=!!b("perspective");d&&"webkitPerspective"in a.style&&u("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(a,b){d=9===a.offsetLeft&&3===a.offsetHeight});
return d};d.csstransitions=function(){return b("transition")};for(var B in d)y(d,B)&&(t=B.toLowerCase(),g[t]=d[B](),w.push((g[t]?"":"no-")+t));g.addTest=function(d,b){if("object"==typeof d)for(var e in d)y(d,e)&&g.addTest(e,d[e]);else{d=d.toLowerCase();if(g[d]!==h)return g;b="function"==typeof b?b():b;"undefined"!==typeof enableClasses&&enableClasses&&(a.className+=" "+(b?"":"no-")+d);g[d]=b}return g};l.cssText="";d=null;g._version="2.6.2";g._prefixes=" -webkit- -moz- -o- -ms- ".split(" ");g._domPrefixes=
v;g._cssomPrefixes=q;g.mq=function(a){var d=e.matchMedia||e.msMatchMedia;if(d)return d(a).matches;var b;u("@media "+a+" { #modernizr { position: absolute; } }",function(a){b="absolute"==(e.getComputedStyle?getComputedStyle(a,null):a.currentStyle).position});return b};g.testProp=function(a){return f([a])};g.testAllProps=b;g.testStyles=u;g.prefixed=function(a,d,e){return d?b(a,d,e):b(a,"pfx")};return g}(this,this.document);
Modernizr.addTest("cssfilters",function(){var e=document.createElement("div");e.style.cssText=Modernizr._prefixes.join("filter:blur(2px); ");return!!e.style.length&&(void 0===document.documentMode||9<document.documentMode)});
(function(e,k){function h(a){var d=M[a]={},b,e;a=a.split(/\s+/);b=0;for(e=a.length;b<e;b++)d[a[b]]=!0;return d}function f(a,d,b){if(b===k&&1===a.nodeType)if(b="data-"+d.replace(H,"-$1").toLowerCase(),b=a.getAttribute(b),"string"===typeof b){try{b="true"===b?!0:"false"===b?!1:"null"===b?null:n.isNumeric(b)?+b:W.test(b)?n.parseJSON(b):b}catch(e){}n.data(a,d,b)}else b=k;return b}function b(a){for(var d in a)if(("data"!==d||!n.isEmptyObject(a[d]))&&"toJSON"!==d)return!1;return!0}function g(a,d,b){var e=
d+"defer",f=d+"queue",g=d+"mark",l=n._data(a,e);!l||"queue"!==b&&n._data(a,f)||"mark"!==b&&n._data(a,g)||setTimeout(function(){n._data(a,f)||n._data(a,g)||(n.removeData(a,e,!0),l.fire())},0)}function a(){return!1}function d(){return!0}function l(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function q(a,d,b){d=d||0;if(n.isFunction(d))return n.grep(a,function(a,e){return!!d.call(a,e,a)===b});if(d.nodeType)return n.grep(a,function(a,e){return a===d===b});if("string"===typeof d){var e=n.grep(a,
function(a){return 1===a.nodeType});if(Na.test(d))return n.filter(d,e,!b);d=n.filter(d,e)}return n.grep(a,function(a,e){return 0<=n.inArray(a,d)===b})}function v(a){var d=ra.split("|");a=a.createDocumentFragment();if(a.createElement)for(;d.length;)a.createElement(d.pop());return a}function w(a,d){return n.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a,d){if(1===d.nodeType&&n.hasData(a)){var b,e,f;e=n._data(a);var g=n._data(d,
e),l=e.events;if(l)for(b in delete g.handle,g.events={},l)for(e=0,f=l[b].length;e<f;e++)n.event.add(d,b,l[b][e]);g.data&&(g.data=n.extend({},g.data))}}function t(a,d){var b;1===d.nodeType&&(d.clearAttributes&&d.clearAttributes(),d.mergeAttributes&&d.mergeAttributes(a),b=d.nodeName.toLowerCase(),"object"===b?d.outerHTML=a.outerHTML:"input"!==b||"checkbox"!==a.type&&"radio"!==a.type?"option"===b?d.selected=a.defaultSelected:"input"===b||"textarea"===b?d.defaultValue=a.defaultValue:"script"===b&&d.text!==
a.text&&(d.text=a.text):(a.checked&&(d.defaultChecked=d.checked=a.checked),d.value!==a.value&&(d.value=a.value)),d.removeAttribute(n.expando),d.removeAttribute("_submit_attached"),d.removeAttribute("_change_attached"))}function u(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function x(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function y(a){var d=(a.nodeName||"").toLowerCase();
"input"===d?x(a):"script"!==d&&"undefined"!==typeof a.getElementsByTagName&&n.grep(a.getElementsByTagName("input"),x)}function B(a,d,b){var e="width"===d?a.offsetWidth:a.offsetHeight,f="width"===d?1:0;if(0<e){if("border"!==b)for(;4>f;f+=2)b||(e-=parseFloat(n.css(a,"padding"+ya[f]))||0),e="margin"===b?e+(parseFloat(n.css(a,b+ya[f]))||0):e-(parseFloat(n.css(a,"border"+ya[f]+"Width"))||0);return e+"px"}e=Qa(a,d);if(0>e||null==e)e=a.style[d];if(fb.test(e))return e;e=parseFloat(e)||0;if(b)for(;4>f;f+=
2)e+=parseFloat(n.css(a,"padding"+ya[f]))||0,"padding"!==b&&(e+=parseFloat(n.css(a,"border"+ya[f]+"Width"))||0),"margin"===b&&(e+=parseFloat(n.css(a,b+ya[f]))||0);return e+"px"}function F(a){return function(d,b){"string"!==typeof d&&(b=d,d="*");if(n.isFunction(b))for(var e=d.toLowerCase().split(jb),f=0,g=e.length,l,h;f<g;f++)l=e[f],(h=/^\+/.test(l))&&(l=l.substr(1)||"*"),l=a[l]=a[l]||[],l[h?"unshift":"push"](b)}}function C(a,d,b,e,f,g){f=f||d.dataTypes[0];g=g||{};g[f]=!0;f=a[f];for(var l=0,h=f?f.length:
0,m=a===Ya,t;l<h&&(m||!t);l++)t=f[l](d,b,e),"string"===typeof t&&(!m||g[t]?t=k:(d.dataTypes.unshift(t),t=C(a,d,b,e,t,g)));!m&&t||g["*"]||(t=C(a,d,b,e,"*",g));return t}function K(a,d){var b,e,f=n.ajaxSettings.flatOptions||{};for(b in d)d[b]!==k&&((f[b]?a:e||(e={}))[b]=d[b]);e&&n.extend(!0,a,e)}function z(a,d,b,e){if(n.isArray(d))n.each(d,function(d,f){b||Cb.test(a)?e(a,f):z(a+"["+("object"===typeof f?d:"")+"]",f,b,e)});else if(b||"object"!==n.type(d))e(a,d);else for(var f in d)z(a+"["+f+"]",d[f],b,
e)}function J(){try{return new e.XMLHttpRequest}catch(a){}}function G(){setTimeout(A,0);return ob=n.now()}function A(){ob=k}function I(a,d){var b={};n.each(nb.concat.apply([],nb.slice(0,d)),function(){b[this]=a});return b}function O(a){if(!zb[a]){var d=E.body,b=n("<"+a+">").appendTo(d),e=b.css("display");b.remove();if("none"===e||""===e)Da||(Da=E.createElement("iframe"),Da.frameBorder=Da.width=Da.height=0),d.appendChild(Da),Wa&&Da.createElement||(Wa=(Da.contentWindow||Da.contentDocument).document,
Wa.write((n.support.boxModel?"<!doctype html>":"")+"<html><body>"),Wa.close()),b=Wa.createElement(a),Wa.body.appendChild(b),e=n.css(b,"display"),d.removeChild(Da);zb[a]=e}return zb[a]}function P(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var E=e.document,Y=e.navigator,N=e.location,n=function(){function a(){if(!d.isReady){try{E.documentElement.doScroll("left")}catch(b){setTimeout(a,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},b=e.jQuery,f=e.$,
g,l=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=/\S/,m=/^\s+/,t=/\s+$/,q=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,u=/^[\],:{}\s]*$/,v=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,w=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,x=/(?:^|:|,)(?:\s*\[)+/g,n=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,H=/(msie) ([\w.]+)/,A=/(mozilla)(?:.*? rv:([\w.]+))?/,I=/-([a-z]|[0-9])/ig,B=/^-ms-/,S=function(a,d){return(d+"").toUpperCase()},M=Y.userAgent,z,C,O=Object.prototype.toString,U=Object.prototype.hasOwnProperty,
R=Array.prototype.push,Z=Array.prototype.slice,G=String.prototype.trim,F=Array.prototype.indexOf,W={};d.fn=d.prototype={constructor:d,init:function(a,b,e){var f;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!b&&E.body)return this.context=E,this[0]=E.body,this.selector=a,this.length=1,this;if("string"===typeof a){f="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:l.exec(a);if(!f||!f[1]&&b)return!b||b.jquery?(b||e).find(a):this.constructor(b).find(a);
if(f[1])return e=(b=b instanceof d?b[0]:b)?b.ownerDocument||b:E,(a=q.exec(a))?d.isPlainObject(b)?(a=[E.createElement(a[1])],d.fn.attr.call(a,b,!0)):a=[e.createElement(a[1])]:(a=d.buildFragment([f[1]],[e]),a=(a.cacheable?d.clone(a.fragment):a.fragment).childNodes),d.merge(this,a);if((b=E.getElementById(f[2]))&&b.parentNode){if(b.id!==f[2])return e.find(a);this.length=1;this[0]=b}this.context=E;this.selector=a;return this}if(d.isFunction(a))return e.ready(a);a.selector!==k&&(this.selector=a.selector,
this.context=a.context);return d.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return Z.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,e){var f=this.constructor();d.isArray(a)?R.apply(f,a):d.merge(f,a);f.prevObject=this;f.context=this.context;"find"===b?f.selector=this.selector+(this.selector?" ":"")+e:b&&(f.selector=this.selector+"."+b+"("+e+")");return f},each:function(a,
b){return d.each(this,a,b)},ready:function(a){d.bindReady();z.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Z.apply(this,arguments),"slice",Z.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(d,b){return a.call(d,b,d)}))},end:function(){return this.prevObject||this.constructor(null)},push:R,sort:[].sort,splice:[].splice};
d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var a,b,e,f,g,l=arguments[0]||{},h=1,m=arguments.length,t=!1;"boolean"===typeof l&&(t=l,l=arguments[1]||{},h=2);"object"===typeof l||d.isFunction(l)||(l={});m===h&&(l=this,--h);for(;h<m;h++)if(null!=(a=arguments[h]))for(b in a)e=l[b],f=a[b],l!==f&&(t&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,e=e&&d.isArray(e)?e:[]):e=e&&d.isPlainObject(e)?e:{},l[b]=d.extend(t,e,f)):f!==k&&(l[b]=f));return l};d.extend({noConflict:function(a){e.$===
d&&(e.$=f);a&&e.jQuery===d&&(e.jQuery=b);return d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(!0===a&&!--d.readyWait||!0!==a&&!d.isReady){if(!E.body)return setTimeout(d.ready,1);d.isReady=!0;!0!==a&&0<--d.readyWait||(z.fireWith(E,[d]),d.fn.trigger&&d(E).trigger("ready").off("ready"))}},bindReady:function(){if(!z){z=d.Callbacks("once memory");if("complete"===E.readyState)return setTimeout(d.ready,1);if(E.addEventListener)E.addEventListener("DOMContentLoaded",
C,!1),e.addEventListener("load",d.ready,!1);else if(E.attachEvent){E.attachEvent("onreadystatechange",C);e.attachEvent("onload",d.ready);var b=!1;try{b=null==e.frameElement}catch(f){}E.documentElement.doScroll&&b&&a()}}},isFunction:function(a){return"function"===d.type(a)},isArray:Array.isArray||function(a){return"array"===d.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):W[O.call(a)]||
"object"},isPlainObject:function(a){if(!a||"object"!==d.type(a)||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!U.call(a,"constructor")&&!U.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var e in a);return e===k||U.call(a,e)},isEmptyObject:function(a){for(var d in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(a){if("string"!==typeof a||!a)return null;a=d.trim(a);if(e.JSON&&e.JSON.parse)return e.JSON.parse(a);if(u.test(a.replace(v,
"@").replace(w,"]").replace(x,"")))return(new Function("return "+a))();d.error("Invalid JSON: "+a)},parseXML:function(a){if("string"!==typeof a||!a)return null;var b,f;try{e.DOMParser?(f=new DOMParser,b=f.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(g){b=k}b&&b.documentElement&&!b.getElementsByTagName("parsererror").length||d.error("Invalid XML: "+a);return b},noop:function(){},globalEval:function(a){a&&h.test(a)&&(e.execScript||function(a){e.eval.call(e,
a)})(a)},camelCase:function(a){return a.replace(B,"ms-").replace(I,S)},nodeName:function(a,d){return a.nodeName&&a.nodeName.toUpperCase()===d.toUpperCase()},each:function(a,b,e){var f,g=0,l=a.length,h=l===k||d.isFunction(a);if(e)if(h)for(f in a){if(!1===b.apply(a[f],e))break}else for(;g<l&&!1!==b.apply(a[g++],e););else if(h)for(f in a){if(!1===b.call(a[f],f,a[f]))break}else for(;g<l&&!1!==b.call(a[g],g,a[g++]););return a},trim:G?function(a){return null==a?"":G.call(a)}:function(a){return null==a?
"":a.toString().replace(m,"").replace(t,"")},makeArray:function(a,b){var e=b||[];if(null!=a){var f=d.type(a);null==a.length||"string"===f||"function"===f||"regexp"===f||d.isWindow(a)?R.call(e,a):d.merge(e,a)}return e},inArray:function(a,d,b){var e;if(d){if(F)return F.call(d,a,b);e=d.length;for(b=b?0>b?Math.max(0,e+b):b:0;b<e;b++)if(b in d&&d[b]===a)return b}return-1},merge:function(a,d){var b=a.length,e=0;if("number"===typeof d.length)for(var f=d.length;e<f;e++)a[b++]=d[e];else for(;d[e]!==k;)a[b++]=
d[e++];a.length=b;return a},grep:function(a,d,b){var e=[],f;b=!!b;for(var g=0,l=a.length;g<l;g++)f=!!d(a[g],g),b!==f&&e.push(a[g]);return e},map:function(a,b,e){var f,g,l=[],h=0,m=a.length;if(a instanceof d||m!==k&&"number"===typeof m&&(0<m&&a[0]&&a[m-1]||0===m||d.isArray(a)))for(;h<m;h++)f=b(a[h],h,e),null!=f&&(l[l.length]=f);else for(g in a)f=b(a[g],g,e),null!=f&&(l[l.length]=f);return l.concat.apply([],l)},guid:1,proxy:function(a,b){if("string"===typeof b){var e=a[b];b=a;a=e}if(!d.isFunction(a))return k;
var f=Z.call(arguments,2),e=function(){return a.apply(b,f.concat(Z.call(arguments)))};e.guid=a.guid=a.guid||e.guid||d.guid++;return e},access:function(a,b,e,f,g,l,h){var m,t=null==e,q=0,u=a.length;if(e&&"object"===typeof e){for(q in e)d.access(a,b,q,e[q],1,l,f);g=1}else if(f!==k){m=h===k&&d.isFunction(f);t&&(m?(m=b,b=function(a,b,e){return m.call(d(a),e)}):(b.call(a,f),b=null));if(b)for(;q<u;q++)b(a[q],e,m?f.call(a[q],q,b(a[q],e)):f,h);g=1}return g?a:t?b.call(a):u?b(a[0],e):l},now:function(){return(new Date).getTime()},
uaMatch:function(a){a=a.toLowerCase();a=n.exec(a)||y.exec(a)||H.exec(a)||0>a.indexOf("compatible")&&A.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(d,b){return new a.fn.init(d,b)}d.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(e,f){f&&f instanceof d&&!(f instanceof a)&&(f=a(f));return d.fn.init.call(this,e,f,b)};a.fn.init.prototype=a.fn;var b=a(E);return a},browser:{}});d.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(a,d){W["[object "+d+"]"]=d.toLowerCase()});M=d.uaMatch(M);M.browser&&(d.browser[M.browser]=!0,d.browser.version=M.version);d.browser.webkit&&(d.browser.safari=!0);h.test("\u00a0")&&(m=/^[\s\xA0]+/,t=/[\s\xA0]+$/);g=d(E);E.addEventListener?C=function(){E.removeEventListener("DOMContentLoaded",C,!1);d.ready()}:E.attachEvent&&(C=function(){"complete"===E.readyState&&(E.detachEvent("onreadystatechange",C),d.ready())});return d}(),M={};n.Callbacks=function(a){a=a?M[a]||h(a):{};var d=[],b=[],e,
f,g,l,m,t,q=function(b){var e,f,g,l;e=0;for(f=b.length;e<f;e++)g=b[e],l=n.type(g),"array"===l?q(g):"function"===l&&(a.unique&&v.has(g)||d.push(g))},u=function(h,k){k=k||[];e=!a.memory||[h,k];g=f=!0;t=l||0;l=0;for(m=d.length;d&&t<m;t++)if(!1===d[t].apply(h,k)&&a.stopOnFalse){e=!0;break}g=!1;d&&(a.once?!0===e?v.disable():d=[]:b&&b.length&&(e=b.shift(),v.fireWith(e[0],e[1])))},v={add:function(){if(d){var a=d.length;q(arguments);g?m=d.length:e&&!0!==e&&(l=a,u(e[0],e[1]))}return this},remove:function(){if(d)for(var b=
arguments,e=0,f=b.length;e<f;e++)for(var l=0;l<d.length&&(b[e]!==d[l]||(g&&l<=m&&(m--,l<=t&&t--),d.splice(l--,1),!a.unique));l++);return this},has:function(a){if(d)for(var b=0,e=d.length;b<e;b++)if(a===d[b])return!0;return!1},empty:function(){d=[];return this},disable:function(){d=b=e=k;return this},disabled:function(){return!d},lock:function(){b=k;e&&!0!==e||v.disable();return this},locked:function(){return!b},fireWith:function(d,f){b&&(g?a.once||b.push([d,f]):a.once&&e||u(d,f));return this},fire:function(){v.fireWith(this,
arguments);return this},fired:function(){return!!f}};return v};var U=[].slice;n.extend({Deferred:function(a){var d=n.Callbacks("once memory"),b=n.Callbacks("once memory"),e=n.Callbacks("memory"),f="pending",g={resolve:d,reject:b,notify:e},l={done:d.add,fail:b.add,progress:e.add,state:function(){return f},isResolved:d.fired,isRejected:b.fired,then:function(a,d,b){h.done(a).fail(d).progress(b);return this},always:function(){h.done.apply(h,arguments).fail.apply(h,arguments);return this},pipe:function(a,
d,b){return n.Deferred(function(e){n.each({done:[a,"resolve"],fail:[d,"reject"],progress:[b,"notify"]},function(a,d){var b=d[0],f=d[1],g;if(n.isFunction(b))h[a](function(){if((g=b.apply(this,arguments))&&n.isFunction(g.promise))g.promise().then(e.resolve,e.reject,e.notify);else e[f+"With"](this===h?e:this,[g])});else h[a](e[f])})}).promise()},promise:function(a){if(null==a)a=l;else for(var d in l)a[d]=l[d];return a}},h=l.promise({}),k;for(k in g)h[k]=g[k].fire,h[k+"With"]=g[k].fireWith;h.done(function(){f=
"resolved"},b.disable,e.lock).fail(function(){f="rejected"},d.disable,e.lock);a&&a.call(h,h);return h},when:function(a){function d(a){return function(d){e[a]=1<arguments.length?U.call(arguments,0):d;--h||k.resolveWith(k,e)}}function b(a){return function(d){l[a]=1<arguments.length?U.call(arguments,0):d;k.notifyWith(m,l)}}var e=U.call(arguments,0),f=0,g=e.length,l=Array(g),h=g,k=1>=g&&a&&n.isFunction(a.promise)?a:n.Deferred(),m=k.promise();if(1<g){for(;f<g;f++)e[f]&&e[f].promise&&n.isFunction(e[f].promise)?
e[f].promise().then(d(f),k.reject,b(f)):--h;h||k.resolveWith(k,e)}else k!==a&&k.resolveWith(k,g?[a]:[]);return m}});n.support=function(){var a,d,b,f,g,l,h,k,m=E.createElement("div");m.setAttribute("className","t");m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";d=m.getElementsByTagName("*");b=m.getElementsByTagName("a")[0];if(!d||!d.length||!b)return{};f=E.createElement("select");g=f.appendChild(E.createElement("option"));d=
m.getElementsByTagName("input")[0];a={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(b.getAttribute("style")),hrefNormalized:"/a"===b.getAttribute("href"),opacity:/^0.55/.test(b.style.opacity),cssFloat:!!b.style.cssFloat,checkOn:"on"===d.value,optSelected:g.selected,getSetAttribute:"t"!==m.className,enctype:!!E.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==E.createElement("nav").cloneNode(!0).outerHTML,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0};n.boxModel=a.boxModel="CSS1Compat"===E.compatMode;d.checked=!0;a.noCloneChecked=d.cloneNode(!0).checked;f.disabled=!0;a.optDisabled=!g.disabled;try{delete m.test}catch(t){a.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){a.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"));
d=E.createElement("input");d.value="t";d.setAttribute("type","radio");a.radioValue="t"===d.value;d.setAttribute("checked","checked");d.setAttribute("name","t");m.appendChild(d);b=E.createDocumentFragment();b.appendChild(m.lastChild);a.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;a.appendChecked=d.checked;b.removeChild(d);b.appendChild(m);if(m.attachEvent)for(h in{submit:1,change:1,focusin:1})d="on"+h,k=d in m,k||(m.setAttribute(d,"return;"),k="function"===typeof m[d]),a[h+"Bubbles"]=
k;b.removeChild(m);b=f=g=m=d=null;n(function(){var d,b,f,g,h=E.getElementsByTagName("body")[0];h&&(d=E.createElement("div"),d.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(d,h.firstChild),m=E.createElement("div"),d.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",l=m.getElementsByTagName("td"),k=0===l[0].offsetHeight,l[0].style.display="",l[1].style.display=
"none",a.reliableHiddenOffsets=k&&0===l[0].offsetHeight,e.getComputedStyle&&(m.innerHTML="",b=E.createElement("div"),b.style.width="0",b.style.marginRight="0",m.style.width="2px",m.appendChild(b),a.reliableMarginRight=0===(parseInt((e.getComputedStyle(b,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof m.style.zoom&&(m.innerHTML="",m.style.width=m.style.padding="1px",m.style.border=0,m.style.overflow="hidden",m.style.display="inline",m.style.zoom=1,a.inlineBlockNeedsLayout=3===m.offsetWidth,
m.style.display="block",m.style.overflow="visible",m.innerHTML="<div style='width:5px;'></div>",a.shrinkWrapBlocks=3!==m.offsetWidth),m.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",m.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",
b=m.firstChild,f=b.firstChild,g=b.nextSibling.firstChild.firstChild,g={doesNotAddBorder:5!==f.offsetTop,doesAddBorderForTableAndCells:5===g.offsetTop},f.style.position="fixed",f.style.top="20px",g.fixedPosition=20===f.offsetTop||15===f.offsetTop,f.style.position=f.style.top="",b.style.overflow="hidden",b.style.position="relative",g.subtractsBorderForOverflowNotVisible=-5===f.offsetTop,g.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,e.getComputedStyle&&(m.style.marginTop="1%",a.pixelMargin="1%"!==
(e.getComputedStyle(m,null)||{marginTop:0}).marginTop),"undefined"!==typeof d.style.zoom&&(d.style.zoom=1),h.removeChild(d),m=null,n.extend(a,g))});return a}();var W=/^(?:\{.*\}|\[.*\])$/,H=/([A-Z])/g;n.extend({cache:{},uuid:0,expando:"jQuery"+(n.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?n.cache[a[n.expando]]:a[n.expando];return!!a&&!b(a)},data:function(a,d,b,e){if(n.acceptData(a)){var f;
f=n.expando;var g="string"===typeof d,l=a.nodeType,h=l?n.cache:a,m=l?a[f]:a[f]&&f,t="events"===d;if(m&&h[m]&&(t||e||h[m].data)||!g||b!==k){m||(l?a[f]=m=++n.uuid:m=f);h[m]||(h[m]={},l||(h[m].toJSON=n.noop));if("object"===typeof d||"function"===typeof d)e?h[m]=n.extend(h[m],d):h[m].data=n.extend(h[m].data,d);f=a=h[m];e||(a.data||(a.data={}),a=a.data);b!==k&&(a[n.camelCase(d)]=b);if(t&&!a[d])return f.events;g?(b=a[d],null==b&&(b=a[n.camelCase(d)])):b=a;return b}}},removeData:function(a,d,e){if(n.acceptData(a)){var f,
g,l,h=n.expando,k=a.nodeType,m=k?n.cache:a,t=k?a[h]:h;if(m[t]){if(d&&(f=e?m[t]:m[t].data)){n.isArray(d)||(d in f?d=[d]:(d=n.camelCase(d),d=d in f?[d]:d.split(" ")));g=0;for(l=d.length;g<l;g++)delete f[d[g]];if(!(e?b:n.isEmptyObject)(f))return}if(!e&&(delete m[t].data,!b(m[t])))return;n.support.deleteExpando||!m.setInterval?delete m[t]:m[t]=null;k&&(n.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}}},_data:function(a,d,b){return n.data(a,d,b,!0)},acceptData:function(a){if(a.nodeName){var d=
n.noData[a.nodeName.toLowerCase()];if(d)return!(!0===d||a.getAttribute("classid")!==d)}return!0}});n.fn.extend({data:function(a,d){var b,e,g,l,h,m=this[0],t=0,q=null;if(a===k){if(this.length&&(q=n.data(m),1===m.nodeType&&!n._data(m,"parsedAttrs"))){g=m.attributes;for(h=g.length;t<h;t++)l=g[t].name,0===l.indexOf("data-")&&(l=n.camelCase(l.substring(5)),f(m,l,q[l]));n._data(m,"parsedAttrs",!0)}return q}if("object"===typeof a)return this.each(function(){n.data(this,a)});b=a.split(".",2);b[1]=b[1]?"."+
b[1]:"";e=b[1]+"!";return n.access(this,function(d){if(d===k)return q=this.triggerHandler("getData"+e,[b[0]]),q===k&&m&&(q=n.data(m,a),q=f(m,a,q)),q===k&&b[1]?this.data(b[0]):q;b[1]=d;this.each(function(){var f=n(this);f.triggerHandler("setData"+e,b);n.data(this,a,d);f.triggerHandler("changeData"+e,b)})},null,d,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){n.removeData(this,a)})}});n.extend({_mark:function(a,d){a&&(d=(d||"fx")+"mark",n._data(a,d,(n._data(a,d)||0)+
1))},_unmark:function(a,d,b){!0!==a&&(b=d,d=a,a=!1);if(d){b=b||"fx";var e=b+"mark";(a=a?0:(n._data(d,e)||1)-1)?n._data(d,e,a):(n.removeData(d,e,!0),g(d,b,"mark"))}},queue:function(a,d,b){var e;if(a)return d=(d||"fx")+"queue",e=n._data(a,d),b&&(!e||n.isArray(b)?e=n._data(a,d,n.makeArray(b)):e.push(b)),e||[]},dequeue:function(a,d){d=d||"fx";var b=n.queue(a,d),e=b.shift(),f={};"inprogress"===e&&(e=b.shift());e&&("fx"===d&&b.unshift("inprogress"),n._data(a,d+".run",f),e.call(a,function(){n.dequeue(a,
d)},f));b.length||(n.removeData(a,d+"queue "+d+".run",!0),g(a,d,"queue"))}});n.fn.extend({queue:function(a,d){var b=2;"string"!==typeof a&&(d=a,a="fx",b--);return arguments.length<b?n.queue(this[0],a):d===k?this:this.each(function(){var b=n.queue(this,a,d);"fx"===a&&"inprogress"!==b[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},delay:function(a,d){a=n.fx?n.fx.speeds[a]||a:a;return this.queue(d||"fx",function(d,b){var e=setTimeout(d,a);b.stop=function(){clearTimeout(e)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,d){function b(){--l||e.resolveWith(f,[f])}"string"!==typeof a&&(d=a,a=k);a=a||"fx";for(var e=n.Deferred(),f=this,g=f.length,l=1,h=a+"defer",m=a+"queue",t=a+"mark",q;g--;)if(q=n.data(f[g],h,k,!0)||(n.data(f[g],m,k,!0)||n.data(f[g],t,k,!0))&&n.data(f[g],h,n.Callbacks("once memory"),!0))l++,q.add(b);b();return e.promise(d)}});var S=/[\n\t\r]/g,R=/\s+/,X=/\r/g,ea=/^(?:button|input)$/i,fa=/^(?:button|input|object|select|textarea)$/i,
ja=/^a(?:rea)?$/i,ga=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=n.support.getSetAttribute,ca,pa,sa;n.fn.extend({attr:function(a,d){return n.access(this,n.attr,a,d,1<arguments.length)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})},prop:function(a,d){return n.access(this,n.prop,a,d,1<arguments.length)},removeProp:function(a){a=n.propFix[a]||a;return this.each(function(){try{this[a]=k,delete this[a]}catch(d){}})},
addClass:function(a){var d,b,e,f,g,l,h;if(n.isFunction(a))return this.each(function(d){n(this).addClass(a.call(this,d,this.className))});if(a&&"string"===typeof a)for(d=a.split(R),b=0,e=this.length;b<e;b++)if(f=this[b],1===f.nodeType)if(f.className||1!==d.length){g=" "+f.className+" ";l=0;for(h=d.length;l<h;l++)~g.indexOf(" "+d[l]+" ")||(g+=d[l]+" ");f.className=n.trim(g)}else f.className=a;return this},removeClass:function(a){var d,b,e,f,g,l,h;if(n.isFunction(a))return this.each(function(d){n(this).removeClass(a.call(this,
d,this.className))});if(a&&"string"===typeof a||a===k)for(d=(a||"").split(R),b=0,e=this.length;b<e;b++)if(f=this[b],1===f.nodeType&&f.className)if(a){g=(" "+f.className+" ").replace(S," ");l=0;for(h=d.length;l<h;l++)g=g.replace(" "+d[l]+" "," ");f.className=n.trim(g)}else f.className="";return this},toggleClass:function(a,d){var b=typeof a,e="boolean"===typeof d;return n.isFunction(a)?this.each(function(b){n(this).toggleClass(a.call(this,b,this.className,d),d)}):this.each(function(){if("string"===
b)for(var f,g=0,l=n(this),h=d,k=a.split(R);f=k[g++];)h=e?h:!l.hasClass(f),l[h?"addClass":"removeClass"](f);else if("undefined"===b||"boolean"===b)this.className&&n._data(this,"__className__",this.className),this.className=this.className||!1===a?"":n._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var d=0,b=this.length;d<b;d++)if(1===this[d].nodeType&&-1<(" "+this[d].className+" ").replace(S," ").indexOf(a))return!0;return!1},val:function(a){var d,b,e,f=this[0];if(arguments.length)return e=
n.isFunction(a),this.each(function(b){var f=n(this);1===this.nodeType&&(b=e?a.call(this,b,f.val()):a,null==b?b="":"number"===typeof b?b+="":n.isArray(b)&&(b=n.map(b,function(a){return null==a?"":a+""})),d=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,b,"value")!==k||(this.value=b))});if(f){if((d=n.valHooks[f.type]||n.valHooks[f.nodeName.toLowerCase()])&&"get"in d&&(b=d.get(f,"value"))!==k)return b;b=f.value;return"string"===typeof b?b.replace(X,""):null==
b?"":b}}});n.extend({valHooks:{option:{get:function(a){var d=a.attributes.value;return!d||d.specified?a.value:a.text}},select:{get:function(a){var d,b,e=a.selectedIndex,f=[],g=a.options,l="select-one"===a.type;if(0>e)return null;a=l?e:0;for(b=l?e+1:g.length;a<b;a++)if(d=g[a],!(!d.selected||(n.support.optDisabled?d.disabled:null!==d.getAttribute("disabled"))||d.parentNode.disabled&&n.nodeName(d.parentNode,"optgroup"))){d=n(d).val();if(l)return d;f.push(d)}return l&&!f.length&&g.length?n(g[e]).val():
f},set:function(a,d){var b=n.makeArray(d);n(a).find("option").each(function(){this.selected=0<=n.inArray(n(this).val(),b)});b.length||(a.selectedIndex=-1);return b}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,d,b,e){var f,g,l=a.nodeType;if(a&&3!==l&&8!==l&&2!==l){if(e&&d in n.attrFn)return n(a)[d](b);if("undefined"===typeof a.getAttribute)return n.prop(a,d,b);if(e=1!==l||!n.isXMLDoc(a))d=d.toLowerCase(),g=n.attrHooks[d]||(ga.test(d)?pa:ca);if(b!==
k)if(null===b)n.removeAttr(a,d);else{if(g&&"set"in g&&e&&(f=g.set(a,b,d))!==k)return f;a.setAttribute(d,""+b);return b}else{if(g&&"get"in g&&e&&null!==(f=g.get(a,d)))return f;f=a.getAttribute(d);return null===f?k:f}}},removeAttr:function(a,d){var b,e,f,g,l,h=0;if(d&&1===a.nodeType)for(e=d.toLowerCase().split(R),g=e.length;h<g;h++)if(f=e[h])b=n.propFix[f]||f,(l=ga.test(f))||n.attr(a,f,""),a.removeAttribute(V?f:b),l&&b in a&&(a[b]=!1)},attrHooks:{type:{set:function(a,d){if(ea.test(a.nodeName)&&a.parentNode)n.error("type property can't be changed");
else if(!n.support.radioValue&&"radio"===d&&n.nodeName(a,"input")){var b=a.value;a.setAttribute("type",d);b&&(a.value=b);return d}}},value:{get:function(a,d){return ca&&n.nodeName(a,"button")?ca.get(a,d):d in a?a.value:null},set:function(a,d,b){if(ca&&n.nodeName(a,"button"))return ca.set(a,d,b);a.value=d}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,d,b){var e,f,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!n.isXMLDoc(a))d=n.propFix[d]||d,f=n.propHooks[d];return b!==k?f&&"set"in f&&(e=f.set(a,b,d))!==k?e:a[d]=b:f&&"get"in f&&null!==(e=f.get(a,d))?e:a[d]}},propHooks:{tabIndex:{get:function(a){var d=a.getAttributeNode("tabindex");return d&&d.specified?parseInt(d.value,10):fa.test(a.nodeName)||ja.test(a.nodeName)&&a.href?0:k}}}});n.attrHooks.tabindex=
n.propHooks.tabIndex;pa={get:function(a,d){var b,e=n.prop(a,d);return!0===e||"boolean"!==typeof e&&(b=a.getAttributeNode(d))&&!1!==b.nodeValue?d.toLowerCase():k},set:function(a,d,b){!1===d?n.removeAttr(a,b):(d=n.propFix[b]||b,d in a&&(a[d]=!0),a.setAttribute(b,b.toLowerCase()));return b}};V||(sa={name:!0,id:!0,coords:!0},ca=n.valHooks.button={get:function(a,d){var b;return(b=a.getAttributeNode(d))&&(sa[d]?""!==b.nodeValue:b.specified)?b.nodeValue:k},set:function(a,d,b){var e=a.getAttributeNode(b);
e||(e=E.createAttribute(b),a.setAttributeNode(e));return e.nodeValue=d+""}},n.attrHooks.tabindex.set=ca.set,n.each(["width","height"],function(a,d){n.attrHooks[d]=n.extend(n.attrHooks[d],{set:function(a,b){if(""===b)return a.setAttribute(d,"auto"),b}})}),n.attrHooks.contenteditable={get:ca.get,set:function(a,d,b){""===d&&(d="false");ca.set(a,d,b)}});n.support.hrefNormalized||n.each(["href","src","width","height"],function(a,d){n.attrHooks[d]=n.extend(n.attrHooks[d],{get:function(a){a=a.getAttribute(d,
2);return null===a?k:a}})});n.support.style||(n.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||k},set:function(a,d){return a.style.cssText=""+d}});n.support.optSelected||(n.propHooks.selected=n.extend(n.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));n.support.enctype||(n.propFix.enctype="encoding");n.support.checkOn||n.each(["radio","checkbox"],function(){n.valHooks[this]={get:function(a){return null===
a.getAttribute("value")?"on":a.value}}});n.each(["radio","checkbox"],function(){n.valHooks[this]=n.extend(n.valHooks[this],{set:function(a,d){if(n.isArray(d))return a.checked=0<=n.inArray(n(a).val(),d)}})});var la=/^(?:textarea|input|select)$/i,qa=/^([^\.]*)?(?:\.(.+))?$/,ia=/(?:^|\s)hover(\.\S+)?\b/,Z=/^key/,ha=/^(?:mouse|contextmenu)|click/,La=/^(?:focusinfocus|focusoutblur)$/,Ma=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,xa=function(a){if(a=Ma.exec(a))a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&new RegExp("(?:^|\\s)"+
a[3]+"(?:\\s|$)");return a},Ka=function(a){return n.event.special.hover?a:a.replace(ia,"mouseenter$1 mouseleave$1")};n.event={add:function(a,d,b,e,f){var g,l,h,m,t,q,u,v,w;if(3!==a.nodeType&&8!==a.nodeType&&d&&b&&(g=n._data(a))){b.handler&&(u=b,b=u.handler,f=u.selector);b.guid||(b.guid=n.guid++);h=g.events;h||(g.events=h={});l=g.handle;l||(g.handle=l=function(a){return"undefined"===typeof n||a&&n.event.triggered===a.type?k:n.event.dispatch.apply(l.elem,arguments)},l.elem=a);d=n.trim(Ka(d)).split(" ");
for(g=0;g<d.length;g++)m=qa.exec(d[g])||[],t=m[1],q=(m[2]||"").split(".").sort(),w=n.event.special[t]||{},t=(f?w.delegateType:w.bindType)||t,w=n.event.special[t]||{},m=n.extend({type:t,origType:m[1],data:e,handler:b,guid:b.guid,selector:f,quick:f&&xa(f),namespace:q.join(".")},u),v=h[t],v||(v=h[t]=[],v.delegateCount=0,w.setup&&!1!==w.setup.call(a,e,q,l)||(a.addEventListener?a.addEventListener(t,l,!1):a.attachEvent&&a.attachEvent("on"+t,l))),w.add&&(w.add.call(a,m),m.handler.guid||(m.handler.guid=b.guid)),
f?v.splice(v.delegateCount++,0,m):v.push(m),n.event.global[t]=!0;a=null}},global:{},remove:function(a,d,b,e,f){var g=n.hasData(a)&&n._data(a),l,h,k,m,t,q,u,v,w,x;if(g&&(u=g.events)){d=n.trim(Ka(d||"")).split(" ");for(l=0;l<d.length;l++)if(h=qa.exec(d[l])||[],k=m=h[1],h=h[2],k){v=n.event.special[k]||{};k=(e?v.delegateType:v.bindType)||k;w=u[k]||[];t=w.length;h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(q=0;q<w.length;q++)x=w[q],!f&&m!==x.origType||b&&b.guid!==
x.guid||h&&!h.test(x.namespace)||e&&e!==x.selector&&("**"!==e||!x.selector)||(w.splice(q--,1),x.selector&&w.delegateCount--,v.remove&&v.remove.call(a,x));0===w.length&&t!==w.length&&(v.teardown&&!1!==v.teardown.call(a,h)||n.removeEvent(a,k,g.handle),delete u[k])}else for(k in u)n.event.remove(a,k+d[l],b,e,!0);if(n.isEmptyObject(u)){if(d=g.handle)d.elem=null;n.removeData(a,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(a,d,b,f){if(!b||3!==b.nodeType&&
8!==b.nodeType){var g=a.type||a,l=[],h,m,t,q,u;if(!La.test(g+n.event.triggered)&&(0<=g.indexOf("!")&&(g=g.slice(0,-1),h=!0),0<=g.indexOf(".")&&(l=g.split("."),g=l.shift(),l.sort()),b&&!n.event.customEvent[g]||n.event.global[g]))if(a="object"===typeof a?a[n.expando]?a:new n.Event(g,a):new n.Event(g),a.type=g,a.isTrigger=!0,a.exclusive=h,a.namespace=l.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,h=0>g.indexOf(":")?"on"+g:"",b){if(a.result=k,a.target||
(a.target=b),d=null!=d?n.makeArray(d):[],d.unshift(a),t=n.event.special[g]||{},!t.trigger||!1!==t.trigger.apply(b,d)){u=[[b,t.bindType||g]];if(!f&&!t.noBubble&&!n.isWindow(b)){q=t.delegateType||g;l=La.test(q+g)?b:b.parentNode;for(m=null;l;l=l.parentNode)u.push([l,q]),m=l;m&&m===b.ownerDocument&&u.push([m.defaultView||m.parentWindow||e,q])}for(m=0;m<u.length&&!a.isPropagationStopped();m++)l=u[m][0],a.type=u[m][1],(q=(n._data(l,"events")||{})[a.type]&&n._data(l,"handle"))&&q.apply(l,d),(q=h&&l[h])&&
n.acceptData(l)&&!1===q.apply(l,d)&&a.preventDefault();a.type=g;f||a.isDefaultPrevented()||t._default&&!1!==t._default.apply(b.ownerDocument,d)||"click"===g&&n.nodeName(b,"a")||!n.acceptData(b)||!h||!b[g]||("focus"===g||"blur"===g)&&0===a.target.offsetWidth||n.isWindow(b)||((m=b[h])&&(b[h]=null),n.event.triggered=g,b[g](),n.event.triggered=k,m&&(b[h]=m));return a.result}}else for(m in b=n.cache,b)b[m].events&&b[m].events[g]&&n.event.trigger(a,d,b[m].handle.elem,!0)}},dispatch:function(a){a=n.event.fix(a||
e.event);var d=(n._data(this,"events")||{})[a.type]||[],b=d.delegateCount,f=[].slice.call(arguments,0),g=!a.exclusive&&!a.namespace,l=n.event.special[a.type]||{},h=[],m,t,q,u,v,w,x;f[0]=a;a.delegateTarget=this;if(!l.preDispatch||!1!==l.preDispatch.call(this,a)){if(b&&(!a.button||"click"!==a.type))for(q=n(this),q.context=this.ownerDocument||this,t=a.target;t!=this;t=t.parentNode||this)if(!0!==t.disabled){v={};w=[];q[0]=t;for(m=0;m<b;m++){u=d[m];x=u.selector;if(v[x]===k){var y=v,H=x,A;if(u.quick){A=
u.quick;var I=t.attributes||{};A=(!A[1]||t.nodeName.toLowerCase()===A[1])&&(!A[2]||(I.id||{}).value===A[2])&&(!A[3]||A[3].test((I["class"]||{}).value))}else A=q.is(x);y[H]=A}v[x]&&w.push(u)}w.length&&h.push({elem:t,matches:w})}d.length>b&&h.push({elem:this,matches:d.slice(b)});for(m=0;m<h.length&&!a.isPropagationStopped();m++)for(b=h[m],a.currentTarget=b.elem,d=0;d<b.matches.length&&!a.isImmediatePropagationStopped();d++)if(u=b.matches[d],g||!a.namespace&&!u.namespace||a.namespace_re&&a.namespace_re.test(u.namespace))a.data=
u.data,a.handleObj=u,u=((n.event.special[u.origType]||{}).handle||u.handler).apply(b.elem,f),u!==k&&(a.result=u,!1===u&&(a.preventDefault(),a.stopPropagation()));l.postDispatch&&l.postDispatch.call(this,a);return a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,d){null==a.which&&
(a.which=null!=d.charCode?d.charCode:d.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var b,e,f=d.button,g=d.fromElement;null==a.pageX&&null!=d.clientX&&(b=a.target.ownerDocument||E,e=b.documentElement,b=b.body,a.pageX=d.clientX+(e&&e.scrollLeft||b&&b.scrollLeft||0)-(e&&e.clientLeft||b&&b.clientLeft||0),a.pageY=d.clientY+(e&&e.scrollTop||b&&b.scrollTop||0)-(e&&e.clientTop||b&&
b.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?d.toElement:g);a.which||f===k||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[n.expando])return a;var d,b,e=a,f=n.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=n.Event(e);for(d=g.length;d;)b=g[--d],a[b]=e[b];a.target||(a.target=e.srcElement||E);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===k&&(a.metaKey=a.ctrlKey);return f.filter?f.filter(a,e):a},special:{ready:{setup:n.bindReady},
load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,d,b){n.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,d){this.onbeforeunload===d&&(this.onbeforeunload=null)}}},simulate:function(a,d,b,e){a=n.extend(new n.Event,b,{type:a,isSimulated:!0,originalEvent:{}});e?n.event.trigger(a,null,d):n.event.dispatch.call(d,a);a.isDefaultPrevented()&&b.preventDefault()}};n.event.handle=n.event.dispatch;n.removeEvent=E.removeEventListener?function(a,
d,b){a.removeEventListener&&a.removeEventListener(d,b,!1)}:function(a,d,b){a.detachEvent&&a.detachEvent("on"+d,b)};n.Event=function(b,e){if(!(this instanceof n.Event))return new n.Event(b,e);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||!1===b.returnValue||b.getPreventDefault&&b.getPreventDefault()?d:a):this.type=b;e&&n.extend(this,e);this.timeStamp=b&&b.timeStamp||n.now();this[n.expando]=!0};n.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
d;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=d;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d;this.stopPropagation()},isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a};n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,d){n.event.special[a]={delegateType:d,
bindType:d,handle:function(a){var b=a.relatedTarget,e=a.handleObj,f;if(!b||b!==this&&!n.contains(this,b))a.type=e.origType,f=e.handler.apply(this,arguments),a.type=d;return f}}});n.support.submitBubbles||(n.event.special.submit={setup:function(){if(n.nodeName(this,"form"))return!1;n.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=n.nodeName(a,"input")||n.nodeName(a,"button")?a.form:k)&&!a._submit_attached&&(n.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),
a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(n.nodeName(this,"form"))return!1;n.event.remove(this,"._submit")}});n.support.changeBubbles||(n.event.special.change={setup:function(){if(la.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,n.event.simulate("change",this,a,!0))});return!1}n.event.add(this,"beforeactivate._change",function(a){a=a.target;la.test(a.nodeName)&&!a._change_attached&&(n.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var d=a.target;if(this!==d||a.isSimulated||
a.isTrigger||"radio"!==d.type&&"checkbox"!==d.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){n.event.remove(this,"._change");return la.test(this.nodeName)}});n.support.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,d){var b=0,e=function(a){n.event.simulate(d,a.target,n.event.fix(a),!0)};n.event.special[d]={setup:function(){0===b++&&E.addEventListener(a,e,!0)},teardown:function(){0===--b&&E.removeEventListener(a,e,!0)}}});n.fn.extend({on:function(d,
b,e,f,g){var l,h;if("object"===typeof d){"string"!==typeof b&&(e=e||b,b=k);for(h in d)this.on(h,b,e,d[h],g);return this}null==e&&null==f?(f=b,e=b=k):null==f&&("string"===typeof b?(f=e,e=k):(f=e,e=b,b=k));if(!1===f)f=a;else if(!f)return this;1===g&&(l=f,f=function(a){n().off(a);return l.apply(this,arguments)},f.guid=l.guid||(l.guid=n.guid++));return this.each(function(){n.event.add(this,d,f,e,b)})},one:function(a,d,b,e){return this.on(a,d,b,e,1)},off:function(d,b,e){if(d&&d.preventDefault&&d.handleObj){var f=
d.handleObj;n(d.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler);return this}if("object"===typeof d){for(f in d)this.off(f,b,d[f]);return this}if(!1===b||"function"===typeof b)e=b,b=k;!1===e&&(e=a);return this.each(function(){n.event.remove(this,d,e,b)})},bind:function(a,d,b){return this.on(a,null,d,b)},unbind:function(a,d){return this.off(a,null,d)},live:function(a,d,b){n(this.context).on(a,this.selector,d,b);return this},die:function(a,d){n(this.context).off(a,
this.selector||"**",d);return this},delegate:function(a,d,b,e){return this.on(d,a,b,e)},undelegate:function(a,d,b){return 1==arguments.length?this.off(a,"**"):this.off(d,a,b)},trigger:function(a,d){return this.each(function(){n.event.trigger(a,d,this)})},triggerHandler:function(a,d){if(this[0])return n.event.trigger(a,d,this[0],!0)},toggle:function(a){var d=arguments,b=a.guid||n.guid++,e=0,f=function(b){var f=(n._data(this,"lastToggle"+a.guid)||0)%e;n._data(this,"lastToggle"+a.guid,f+1);b.preventDefault();
return d[f].apply(this,arguments)||!1};for(f.guid=b;e<d.length;)d[e++].guid=b;return this.click(f)},hover:function(a,d){return this.mouseenter(a).mouseleave(d||a)}});n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,d){n.fn[d]=function(a,b){null==b&&(b=a,a=null);return 0<arguments.length?this.on(d,null,a,b):this.trigger(d)};
n.attrFn&&(n.attrFn[d]=!0);Z.test(d)&&(n.event.fixHooks[d]=n.event.keyHooks);ha.test(d)&&(n.event.fixHooks[d]=n.event.mouseHooks)});(function(){function a(d,b,f,g,l,h){l=0;for(var k=g.length;l<k;l++){var m=g[l];if(m){for(var t=!1,m=m[d];m;){if(m[e]===f){t=g[m.sizset];break}1!==m.nodeType||h||(m[e]=f,m.sizset=l);if(m.nodeName.toLowerCase()===b){t=m;break}m=m[d]}g[l]=t}}}function d(a,b,f,g,l,h){l=0;for(var k=g.length;l<k;l++){var m=g[l];if(m){for(var t=!1,m=m[a];m;){if(m[e]===f){t=g[m.sizset];break}if(1===
m.nodeType)if(h||(m[e]=f,m.sizset=l),"string"!==typeof b){if(m===b){t=!0;break}}else if(0<u.filter(b,[m]).length){t=m;break}m=m[a]}g[l]=t}}}var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,l=!1,h=!0,m=/\\/g,t=/\r\n/g,q=/\W/;[0,0].sort(function(){h=!1;return 0});var u=function(a,d,e,f){e=e||[];var l=d=d||E;if(1!==d.nodeType&&9!==
d.nodeType)return[];if(!a||"string"!==typeof a)return e;var h,k,m,t,q,v=!0,n=u.isXML(d),y=[],H=a;do if(b.exec(""),h=b.exec(H))if(H=h[3],y.push(h[1]),h[2]){t=h[3];break}while(h);if(1<y.length&&x.exec(a))if(2===y.length&&w.relative[y[0]])k=z(y[0]+y[1],d,f);else for(k=w.relative[y[0]]?[d]:u(y.shift(),d);y.length;)a=y.shift(),w.relative[a]&&(a+=y.shift()),k=z(a,k,f);else if(!f&&1<y.length&&9===d.nodeType&&!n&&w.match.ID.test(y[0])&&!w.match.ID.test(y[y.length-1])&&(h=u.find(y.shift(),d,n),d=h.expr?u.filter(h.expr,
h.set)[0]:h.set[0]),d)for(h=f?{expr:y.pop(),set:A(f)}:u.find(y.pop(),1!==y.length||"~"!==y[0]&&"+"!==y[0]||!d.parentNode?d:d.parentNode,n),k=h.expr?u.filter(h.expr,h.set):h.set,0<y.length?m=A(k):v=!1;y.length;)h=q=y.pop(),w.relative[q]?h=y.pop():q="",null==h&&(h=d),w.relative[q](m,h,n);else m=[];m||(m=k);m||u.error(q||a);if("[object Array]"===g.call(m))if(v)if(d&&1===d.nodeType)for(a=0;null!=m[a];a++)m[a]&&(!0===m[a]||1===m[a].nodeType&&u.contains(d,m[a]))&&e.push(k[a]);else for(a=0;null!=m[a];a++)m[a]&&
1===m[a].nodeType&&e.push(k[a]);else e.push.apply(e,m);else A(m,e);t&&(u(t,l,e,f),u.uniqueSort(e));return e};u.uniqueSort=function(a){if(B&&(l=h,a.sort(B),l))for(var d=1;d<a.length;d++)a[d]===a[d-1]&&a.splice(d--,1);return a};u.matches=function(a,d){return u(a,null,null,d)};u.matchesSelector=function(a,d){return 0<u(d,null,null,[a]).length};u.find=function(a,d,b){var e,f,g,l,h,k;if(!a)return[];f=0;for(g=w.order.length;f<g;f++)if(h=w.order[f],l=w.leftMatch[h].exec(a))if(k=l[1],l.splice(1,1),"\\"!==
k.substr(k.length-1)&&(l[1]=(l[1]||"").replace(m,""),e=w.find[h](l,d,b),null!=e)){a=a.replace(w.match[h],"");break}e||(e="undefined"!==typeof d.getElementsByTagName?d.getElementsByTagName("*"):[]);return{set:e,expr:a}};u.filter=function(a,d,b,e){for(var f,g,l,h,m,t,q,v,x=a,n=[],y=d,A=d&&d[0]&&u.isXML(d[0]);a&&d.length;){for(l in w.filter)if(null!=(f=w.leftMatch[l].exec(a))&&f[2]&&(t=w.filter[l],m=f[1],g=!1,f.splice(1,1),"\\"!==m.substr(m.length-1))){y===n&&(n=[]);if(w.preFilter[l])if(f=w.preFilter[l](f,
y,b,n,e,A),!f)g=h=!0;else if(!0===f)continue;if(f)for(q=0;null!=(m=y[q]);q++)m&&(h=t(m,f,q,y),v=e^h,b&&null!=h?v?g=!0:y[q]=!1:v&&(n.push(m),g=!0));if(h!==k){b||(y=n);a=a.replace(w.match[l],"");if(!g)return[];break}}if(a===x)if(null==g)u.error(a);else break;x=a}return y};u.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var v=u.getText=function(a){var d,b;d=a.nodeType;var e="";if(d)if(1===d||9===d||11===d){if("string"===typeof a.textContent)return a.textContent;if("string"===
typeof a.innerText)return a.innerText.replace(t,"");for(a=a.firstChild;a;a=a.nextSibling)e+=v(a)}else{if(3===d||4===d)return a.nodeValue}else for(d=0;b=a[d];d++)8!==b.nodeType&&(e+=v(b));return e},w=u.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,d){var b="string"===typeof d,e=b&&!q.test(d),
b=b&&!e;e&&(d=d.toLowerCase());for(var e=0,f=a.length,g;e<f;e++)if(g=a[e]){for(;(g=g.previousSibling)&&1!==g.nodeType;);a[e]=b||g&&g.nodeName.toLowerCase()===d?g||!1:g===d}b&&u.filter(d,a,!0)},">":function(a,d){var b,e="string"===typeof d,f=0,g=a.length;if(e&&!q.test(d))for(d=d.toLowerCase();f<g;f++){if(b=a[f])b=b.parentNode,a[f]=b.nodeName.toLowerCase()===d?b:!1}else{for(;f<g;f++)(b=a[f])&&(a[f]=e?b.parentNode:b.parentNode===d);e&&u.filter(d,a,!0)}},"":function(b,e,g){var l,h=f++,k=d;"string"!==
typeof e||q.test(e)||(l=e=e.toLowerCase(),k=a);k("parentNode",e,h,b,l,g)},"~":function(b,e,g){var l,h=f++,k=d;"string"!==typeof e||q.test(e)||(l=e=e.toLowerCase(),k=a);k("previousSibling",e,h,b,l,g)}},find:{ID:function(a,d,b){if("undefined"!==typeof d.getElementById&&!b)return(a=d.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,d){if("undefined"!==typeof d.getElementsByName){for(var b=[],e=d.getElementsByName(a[1]),f=0,g=e.length;f<g;f++)e[f].getAttribute("name")===a[1]&&b.push(e[f]);
return 0===b.length?null:b}},TAG:function(a,d){if("undefined"!==typeof d.getElementsByTagName)return d.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,d,b,e,f,g){a=" "+a[1].replace(m,"")+" ";if(g)return a;g=0;for(var l;null!=(l=d[g]);g++)l&&(f^(l.className&&0<=(" "+l.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?b||e.push(l):b&&(d[g]=!1));return!1},ID:function(a){return a[1].replace(m,"")},TAG:function(a,d){return a[1].replace(m,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||
u.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var d=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=d[1]+(d[2]||1)-0;a[3]=d[3]-0}else a[2]&&u.error(a[0]);a[0]=f++;return a},ATTR:function(a,d,b,e,f,g){d=a[1]=a[1].replace(m,"");!g&&w.attrMap[d]&&(a[1]=w.attrMap[d]);a[4]=(a[4]||a[5]||"").replace(m,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,d,e,f,g){if("not"===a[1])if(1<(b.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=
u(a[3],null,null,d);else return a=u.filter(a[3],d,e,1^g),e||f.push.apply(f,a),!1;else if(w.match.POS.test(a[0])||w.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},
has:function(a,d,b){return!!u(b[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var d=a.getAttribute("type"),b=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===b&&(d===b||null===d)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&
"password"===a.type},submit:function(a){var d=a.nodeName.toLowerCase();return("input"===d||"button"===d)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var d=a.nodeName.toLowerCase();return("input"===d||"button"===d)&&"reset"===a.type},button:function(a){var d=a.nodeName.toLowerCase();return"input"===d&&"button"===a.type||"button"===d},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===
a.ownerDocument.activeElement}},setFilters:{first:function(a,d){return 0===d},last:function(a,d,b,e){return d===e.length-1},even:function(a,d){return 0===d%2},odd:function(a,d){return 1===d%2},lt:function(a,d,b){return d<b[3]-0},gt:function(a,d,b){return d>b[3]-0},nth:function(a,d,b){return b[3]-0===d},eq:function(a,d,b){return b[3]-0===d}},filter:{PSEUDO:function(a,d,b,e){var f=d[1],g=w.filters[f];if(g)return g(a,b,d,e);if("contains"===f)return 0<=(a.textContent||a.innerText||v([a])||"").indexOf(d[3]);
if("not"===f){d=d[3];b=0;for(e=d.length;b<e;b++)if(d[b]===a)return!1;return!0}u.error(f)},CHILD:function(a,d){var b,f,g,l,h,k;b=d[1];k=a;switch(b){case "only":case "first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===b)return!0;k=a;case "last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case "nth":b=d[2];f=d[3];if(1===b&&0===f)return!0;g=d[0];if((l=a.parentNode)&&(l[e]!==g||!a.nodeIndex)){h=0;for(k=l.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);
l[e]=g}k=a.nodeIndex-f;return 0===b?0===k:0===k%b&&0<=k/b}},ID:function(a,d){return 1===a.nodeType&&a.getAttribute("id")===d},TAG:function(a,d){return"*"===d&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===d},CLASS:function(a,d){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(d)},ATTR:function(a,d){var b=d[1],b=u.attr?u.attr(a,b):w.attrHandle[b]?w.attrHandle[b](a):null!=a[b]?a[b]:a.getAttribute(b),e=b+"",f=d[2],g=d[4];return null==b?"!="===f:!f&&u.attr?null!=b:"="===f?
e===g:"*="===f?0<=e.indexOf(g):"~="===f?0<=(" "+e+" ").indexOf(g):g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&!1!==b},POS:function(a,d,b,e){var f=w.setFilters[d[2]];if(f)return f(a,b,d,e)}}},x=w.match.POS,y=function(a,d){return"\\"+(d-0+1)},H;for(H in w.match)w.match[H]=new RegExp(w.match[H].source+/(?![^\[]*\])(?![^\(]*\))/.source),w.leftMatch[H]=new RegExp(/(^(?:.|\r|\n)*?)/.source+w.match[H].source.replace(/\\(\d+)/g,
y));w.match.globalPOS=x;var A=function(a,d){a=Array.prototype.slice.call(a,0);return d?(d.push.apply(d,a),d):a};try{Array.prototype.slice.call(E.documentElement.childNodes,0)[0].nodeType}catch(I){A=function(a,d){var b=0,e=d||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(e,a);else if("number"===typeof a.length)for(var f=a.length;b<f;b++)e.push(a[b]);else for(;a[b];b++)e.push(a[b]);return e}}var B,M;E.documentElement.compareDocumentPosition?B=function(a,d){return a===d?(l=!0,0):a.compareDocumentPosition&&
d.compareDocumentPosition?a.compareDocumentPosition(d)&4?-1:1:a.compareDocumentPosition?-1:1}:(B=function(a,d){if(a===d)return l=!0,0;if(a.sourceIndex&&d.sourceIndex)return a.sourceIndex-d.sourceIndex;var b,e,f=[],g=[];b=a.parentNode;e=d.parentNode;var h=b;if(b===e)return M(a,d);if(!b)return-1;if(!e)return 1;for(;h;)f.unshift(h),h=h.parentNode;for(h=e;h;)g.unshift(h),h=h.parentNode;b=f.length;e=g.length;for(h=0;h<b&&h<e;h++)if(f[h]!==g[h])return M(f[h],g[h]);return h===b?M(a,g[h],-1):M(f[h],d,1)},
M=function(a,d,b){if(a===d)return b;for(a=a.nextSibling;a;){if(a===d)return-1;a=a.nextSibling}return 1});(function(){var a=E.createElement("div"),d="script"+(new Date).getTime(),b=E.documentElement;a.innerHTML="<a name='"+d+"'/>";b.insertBefore(a,b.firstChild);E.getElementById(d)&&(w.find.ID=function(a,d,b){if("undefined"!==typeof d.getElementById&&!b)return(d=d.getElementById(a[1]))?d.id===a[1]||"undefined"!==typeof d.getAttributeNode&&d.getAttributeNode("id").nodeValue===a[1]?[d]:k:[]},w.filter.ID=
function(a,d){var b="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&b&&b.nodeValue===d});b.removeChild(a);b=a=null})();(function(){var a=E.createElement("div");a.appendChild(E.createComment(""));0<a.getElementsByTagName("*").length&&(w.find.TAG=function(a,d){var b=d.getElementsByTagName(a[1]);if("*"===a[1]){for(var e=[],f=0;b[f];f++)1===b[f].nodeType&&e.push(b[f]);b=e}return b});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&
"#"!==a.firstChild.getAttribute("href")&&(w.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();E.querySelectorAll&&function(){var a=u,d=E.createElement("div");d.innerHTML="<p class='TEST'></p>";if(!d.querySelectorAll||0!==d.querySelectorAll(".TEST").length){u=function(d,b,e,f){b=b||E;if(!f&&!u.isXML(b)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(d);if(g&&(1===b.nodeType||9===b.nodeType)){if(g[1])return A(b.getElementsByTagName(d),e);if(g[2]&&w.find.CLASS&&b.getElementsByClassName)return A(b.getElementsByClassName(g[2]),
e)}if(9===b.nodeType){if("body"===d&&b.body)return A([b.body],e);if(g&&g[3]){var l=b.getElementById(g[3]);if(l&&l.parentNode){if(l.id===g[3])return A([l],e)}else return A([],e)}try{return A(b.querySelectorAll(d),e)}catch(h){}}else if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){var g=b,k=(l=b.getAttribute("id"))||"__sizzle__",m=b.parentNode,t=/^\s*[+~]/.test(d);l?k=k.replace(/'/g,"\\$&"):b.setAttribute("id",k);t&&m&&(b=b.parentNode);try{if(!t||m)return A(b.querySelectorAll("[id='"+k+"'] "+
d),e)}catch(q){}finally{l||g.removeAttribute("id")}}}return a(d,b,e,f)};for(var b in a)u[b]=a[b];d=null}}();(function(){var a=E.documentElement,d=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(d){var b=!d.call(E.createElement("div"),"div"),e=!1;try{d.call(E.documentElement,"[test!='']:sizzle")}catch(f){e=!0}u.matchesSelector=function(a,f){f=f.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!u.isXML(a))try{if(e||!w.match.PSEUDO.test(f)&&!/!=/.test(f)){var g=d.call(a,
f);if(g||!b||a.document&&11!==a.document.nodeType)return g}}catch(l){}return 0<u(f,null,null,[a]).length}}})();(function(){var a=E.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(w.order.splice(1,0,"CLASS"),w.find.CLASS=function(a,d,b){if("undefined"!==typeof d.getElementsByClassName&&!b)return d.getElementsByClassName(a[1])},
a=null))})();u.contains=E.documentElement.contains?function(a,d){return a!==d&&(a.contains?a.contains(d):!0)}:E.documentElement.compareDocumentPosition?function(a,d){return!!(a.compareDocumentPosition(d)&16)}:function(){return!1};u.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var z=function(a,d,b){var e,f=[],g="";for(d=d.nodeType?[d]:d;e=w.match.PSEUDO.exec(a);)g+=e[0],a=a.replace(w.match.PSEUDO,"");a=w.relative[a]?a+"*":a;e=0;for(var l=d.length;e<l;e++)u(a,
d[e],f,b);return u.filter(g,f)};u.attr=n.attr;u.selectors.attrMap={};n.find=u;n.expr=u.selectors;n.expr[":"]=n.expr.filters;n.unique=u.uniqueSort;n.text=u.getText;n.isXMLDoc=u.isXML;n.contains=u.contains})();var Ua=/Until$/,Ta=/^(?:parents|prevUntil|prevAll)/,ma=/,/,Na=/^.[^:#\[\.,]*$/,ua=Array.prototype.slice,Ea=n.expr.match.globalPOS,za={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({find:function(a){var d=this,b,e;if("string"!==typeof a)return n(a).filter(function(){b=0;for(e=d.length;b<
e;b++)if(n.contains(d[b],this))return!0});var f=this.pushStack("","find",a),g,l,h;b=0;for(e=this.length;b<e;b++)if(g=f.length,n.find(a,this[b],f),0<b)for(l=g;l<f.length;l++)for(h=0;h<g;h++)if(f[h]===f[l]){f.splice(l--,1);break}return f},has:function(a){var d=n(a);return this.filter(function(){for(var a=0,b=d.length;a<b;a++)if(n.contains(this,d[a]))return!0})},not:function(a){return this.pushStack(q(this,a,!1),"not",a)},filter:function(a){return this.pushStack(q(this,a,!0),"filter",a)},is:function(a){return!!a&&
("string"===typeof a?Ea.test(a)?0<=n(a,this.context).index(this[0]):0<n.filter(a,this).length:0<this.filter(a).length)},closest:function(a,d){var b=[],e,f,g=this[0];if(n.isArray(a)){for(f=1;g&&g.ownerDocument&&g!==d;){for(e=0;e<a.length;e++)n(g).is(a[e])&&b.push({selector:a[e],elem:g,level:f});g=g.parentNode;f++}return b}var l=Ea.test(a)||"string"!==typeof a?n(a,d||this.context):0;e=0;for(f=this.length;e<f;e++)for(g=this[e];g;)if(l?-1<l.index(g):n.find.matchesSelector(g,a)){b.push(g);break}else if(g=
g.parentNode,!g||!g.ownerDocument||g===d||11===g.nodeType)break;b=1<b.length?n.unique(b):b;return this.pushStack(b,"closest",a)},index:function(a){return a?"string"===typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,d){var b="string"===typeof a?n(a,d):n.makeArray(a&&a.nodeType?[a]:a),e=n.merge(this.get(),b);return this.pushStack(l(b[0])||l(e[0])?e:n.unique(e))},andSelf:function(){return this.add(this.prevObject)}});
n.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,d,b){return n.dir(a,"parentNode",b)},next:function(a){return n.nth(a,2,"nextSibling")},prev:function(a){return n.nth(a,2,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,d,b){return n.dir(a,"nextSibling",b)},prevUntil:function(a,d,b){return n.dir(a,"previousSibling",
b)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.makeArray(a.childNodes)}},function(a,d){n.fn[a]=function(b,e){var f=n.map(this,d,b);Ua.test(a)||(e=b);e&&"string"===typeof e&&(f=n.filter(e,f));f=1<this.length&&!za[a]?n.unique(f):f;(1<this.length||ma.test(e))&&Ta.test(a)&&(f=f.reverse());return this.pushStack(f,a,ua.call(arguments).join(","))}});
n.extend({filter:function(a,d,b){b&&(a=":not("+a+")");return 1===d.length?n.find.matchesSelector(d[0],a)?[d[0]]:[]:n.find.matches(a,d)},dir:function(a,d,b){var e=[];for(a=a[d];a&&9!==a.nodeType&&(b===k||1!==a.nodeType||!n(a).is(b));)1===a.nodeType&&e.push(a),a=a[d];return e},nth:function(a,d,b,e){d=d||1;for(e=0;a&&(1!==a.nodeType||++e!==d);a=a[b]);return a},sibling:function(a,d){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&a!==d&&b.push(a);return b}});var ra="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
va=/ jQuery\d+="(?:\d+|null)"/g,Ga=/^\s+/,Oa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ha=/<([\w:]+)/,Za=/<tbody/i,Fa=/<|&#?\w+;/,Aa=/<(?:script|style)/i,db=/<(?:script|object|embed|option|style)/i,ta=new RegExp("<(?:"+ra+")[\\s/>]","i"),rb=/checked\s*(?:[^=]|=\s*.checked.)/i,eb=/\/(java|ecma)script/i,$a=/^\s*<!(?:\[CDATA\[|\-\-)/,na={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>",
"</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ab=v(E);na.optgroup=na.option;na.tbody=na.tfoot=na.colgroup=na.caption=na.thead;na.th=na.td;n.support.htmlSerialize||(na._default=[1,"div<div>","</div>"]);n.fn.extend({text:function(a){return n.access(this,function(a){return a===k?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||E).createTextNode(a))},
null,a,arguments.length)},wrapAll:function(a){if(n.isFunction(a))return this.each(function(d){n(this).wrapAll(a.call(this,d))});if(this[0]){var d=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&d.insertBefore(this[0]);d.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(d){n(this).wrapInner(a.call(this,d))}):this.each(function(){var d=n(this),b=d.contents();
b.length?b.wrapAll(a):d.append(a)})},wrap:function(a){var d=n.isFunction(a);return this.each(function(b){n(this).wrapAll(d?a.call(this,b):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&
this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=n.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,n.clean(arguments));return a}},remove:function(a,
d){for(var b=0,e;null!=(e=this[b]);b++)if(!a||n.filter(a,[e]).length)d||1!==e.nodeType||(n.cleanData(e.getElementsByTagName("*")),n.cleanData([e])),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var a=0,d;null!=(d=this[a]);a++)for(1===d.nodeType&&n.cleanData(d.getElementsByTagName("*"));d.firstChild;)d.removeChild(d.firstChild);return this},clone:function(a,d){a=null==a?!1:a;d=null==d?a:d;return this.map(function(){return n.clone(this,a,d)})},html:function(a){return n.access(this,
function(a){var d=this[0]||{},b=0,e=this.length;if(a===k)return 1===d.nodeType?d.innerHTML.replace(va,""):null;if(!("string"!==typeof a||Aa.test(a)||!n.support.leadingWhitespace&&Ga.test(a)||na[(Ha.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Oa,"<$1></$2>");try{for(;b<e;b++)d=this[b]||{},1===d.nodeType&&(n.cleanData(d.getElementsByTagName("*")),d.innerHTML=a);d=0}catch(f){}}d&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(n.isFunction(a))return this.each(function(d){var b=
n(this),e=b.html();b.replaceWith(a.call(this,d,e))});"string"!==typeof a&&(a=n(a).detach());return this.each(function(){var d=this.nextSibling,b=this.parentNode;n(this).remove();d?n(d).before(a):n(b).append(a)})}return this.length?this.pushStack(n(n.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,d,b){var e,f,g,l=a[0],h=[];if(!n.support.checkClone&&3===arguments.length&&"string"===typeof l&&rb.test(l))return this.each(function(){n(this).domManip(a,
d,b,!0)});if(n.isFunction(l))return this.each(function(e){var f=n(this);a[0]=l.call(this,e,d?f.html():k);f.domManip(a,d,b)});if(this[0]){e=l&&l.parentNode;e=n.support.parentNode&&e&&11===e.nodeType&&e.childNodes.length===this.length?{fragment:e}:n.buildFragment(a,this,h);g=e.fragment;if(f=1===g.childNodes.length?g=g.firstChild:g.firstChild){d=d&&n.nodeName(f,"tr");for(var m=0,t=this.length,q=t-1;m<t;m++)b.call(d?w(this[m],f):this[m],e.cacheable||1<t&&m<q?n.clone(g,!0,!0):g)}h.length&&n.each(h,function(a,
d){d.src?n.ajax({type:"GET",global:!1,url:d.src,async:!1,dataType:"script"}):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace($a,"/*$0*/"));d.parentNode&&d.parentNode.removeChild(d)})}return this}});n.buildFragment=function(a,d,b){var e,f,g,l,h=a[0];d&&d[0]&&(l=d[0].ownerDocument||d[0]);l.createDocumentFragment||(l=E);!(1===a.length&&"string"===typeof h&&512>h.length&&l===E&&"<"===h.charAt(0))||db.test(h)||!n.support.checkClone&&rb.test(h)||!n.support.html5Clone&&ta.test(h)||(f=!0,(g=
n.fragments[h])&&1!==g&&(e=g));e||(e=l.createDocumentFragment(),n.clean(a,l,e,b));f&&(n.fragments[h]=g?e:1);return{fragment:e,cacheable:f}};n.fragments={};n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){n.fn[a]=function(b){var e=[];b=n(b);var f=1===this.length&&this[0].parentNode;if(f&&11===f.nodeType&&1===f.childNodes.length&&1===b.length)return b[d](this[0]),this;for(var f=0,g=b.length;f<g;f++){var l=(0<f?this.clone(!0):
this).get();n(b[f])[d](l);e=e.concat(l)}return this.pushStack(e,a,b.selector)}});n.extend({clone:function(a,d,b){var e,f,g;n.support.html5Clone||n.isXMLDoc(a)||!ta.test("<"+a.nodeName+">")?e=a.cloneNode(!0):(e=E.createElement("div"),ab.appendChild(e),e.innerHTML=a.outerHTML,e=e.firstChild);var l=e;if(!(n.support.noCloneEvent&&n.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(t(a,l),e=u(a),f=u(l),g=0;e[g];++g)f[g]&&t(e[g],f[g]);if(d&&(m(a,l),b))for(e=u(a),f=u(l),g=0;e[g];++g)m(e[g],
f[g]);return l},clean:function(a,d,b,e){var f,g=[];d=d||E;"undefined"===typeof d.createElement&&(d=d.ownerDocument||d[0]&&d[0].ownerDocument||E);for(var l=0,h;null!=(h=a[l]);l++)if("number"===typeof h&&(h+=""),h){if("string"===typeof h)if(Fa.test(h)){h=h.replace(Oa,"<$1></$2>");f=(Ha.exec(h)||["",""])[1].toLowerCase();var k=na[f]||na._default,m=k[0],t=d.createElement("div"),q=ab.childNodes;d===E?ab.appendChild(t):v(d).appendChild(t);for(t.innerHTML=k[1]+h+k[2];m--;)t=t.lastChild;if(!n.support.tbody)for(m=
Za.test(h),k="table"!==f||m?"<table>"!==k[1]||m?[]:t.childNodes:t.firstChild&&t.firstChild.childNodes,f=k.length-1;0<=f;--f)n.nodeName(k[f],"tbody")&&!k[f].childNodes.length&&k[f].parentNode.removeChild(k[f]);!n.support.leadingWhitespace&&Ga.test(h)&&t.insertBefore(d.createTextNode(Ga.exec(h)[0]),t.firstChild);h=t.childNodes;t&&(t.parentNode.removeChild(t),0<q.length&&(t=q[q.length-1])&&t.parentNode&&t.parentNode.removeChild(t))}else h=d.createTextNode(h);var u;if(!n.support.appendChecked)if(h[0]&&
"number"===typeof(u=h.length))for(f=0;f<u;f++)y(h[f]);else y(h);h.nodeType?g.push(h):g=n.merge(g,h)}if(b)for(a=function(a){return!a.type||eb.test(a.type)},l=0;g[l];l++)d=g[l],e&&n.nodeName(d,"script")&&(!d.type||eb.test(d.type))?e.push(d.parentNode?d.parentNode.removeChild(d):d):(1===d.nodeType&&(h=n.grep(d.getElementsByTagName("script"),a),g.splice.apply(g,[l+1,0].concat(h))),b.appendChild(d));return g},cleanData:function(a){for(var d,b,e=n.cache,f=n.event.special,g=n.support.deleteExpando,l=0,h;null!=
(h=a[l]);l++)if(!h.nodeName||!n.noData[h.nodeName.toLowerCase()])if(b=h[n.expando]){if((d=e[b])&&d.events){for(var k in d.events)f[k]?n.event.remove(h,k):n.removeEvent(h,k,d.handle);d.handle&&(d.handle.elem=null)}g?delete h[n.expando]:h.removeAttribute&&h.removeAttribute(n.expando);delete e[b]}}});var Pa=/alpha\([^)]*\)/i,qb=/opacity=([^)]*)/,Sa=/([A-Z]|^ms)/g,bb=/^[\-+]?(?:\d*\.)?\d+$/i,fb=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,pb=/^([\-+])=([\-+.\de]+)/,sb=/^margin/,Ab={position:"absolute",visibility:"hidden",
display:"block"},ya=["Top","Right","Bottom","Left"],Qa,tb,ub;n.fn.css=function(a,d){return n.access(this,function(a,d,b){return b!==k?n.style(a,d,b):n.css(a,d)},a,d,1<arguments.length)};n.extend({cssHooks:{opacity:{get:function(a,d){if(d){var b=Qa(a,"opacity");return""===b?"1":b}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":n.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,d,b,e){if(a&&
3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g=n.camelCase(d),l=a.style,h=n.cssHooks[g];d=n.cssProps[g]||g;if(b!==k){if(e=typeof b,"string"===e&&(f=pb.exec(b))&&(b=+(f[1]+1)*+f[2]+parseFloat(n.css(a,d)),e="number"),!(null==b||"number"===e&&isNaN(b)||("number"!==e||n.cssNumber[g]||(b+="px"),h&&"set"in h&&(b=h.set(a,b))===k)))try{l[d]=b}catch(m){}}else return h&&"get"in h&&(f=h.get(a,!1,e))!==k?f:l[d]}},css:function(a,d,b){var e,f;d=n.camelCase(d);f=n.cssHooks[d];d=n.cssProps[d]||d;"cssFloat"===d&&
(d="float");if(f&&"get"in f&&(e=f.get(a,!0,b))!==k)return e;if(Qa)return Qa(a,d)},swap:function(a,d,b){var e={},f;for(f in d)e[f]=a.style[f],a.style[f]=d[f];b=b.call(a);for(f in d)a.style[f]=e[f];return b}});n.curCSS=n.css;E.defaultView&&E.defaultView.getComputedStyle&&(tb=function(a,d){var b,e,f,g=a.style;d=d.replace(Sa,"-$1").toLowerCase();(e=a.ownerDocument.defaultView)&&(f=e.getComputedStyle(a,null))&&(b=f.getPropertyValue(d),""!==b||n.contains(a.ownerDocument.documentElement,a)||(b=n.style(a,
d)));!n.support.pixelMargin&&f&&sb.test(d)&&fb.test(b)&&(e=g.width,g.width=b,b=f.width,g.width=e);return b});E.documentElement.currentStyle&&(ub=function(a,d){var b,e,f=a.currentStyle&&a.currentStyle[d],g=a.style;null==f&&g&&(b=g[d])&&(f=b);if(fb.test(f)){b=g.left;if(e=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;g.left="fontSize"===d?"1em":f;f=g.pixelLeft+"px";g.left=b;e&&(a.runtimeStyle.left=e)}return""===f?"auto":f});Qa=tb||ub;n.each(["height","width"],function(a,
d){n.cssHooks[d]={get:function(a,b,e){if(b)return 0!==a.offsetWidth?B(a,d,e):n.swap(a,Ab,function(){return B(a,d,e)})},set:function(a,d){return bb.test(d)?d+"px":d}}});n.support.opacity||(n.cssHooks.opacity={get:function(a,d){return qb.test((d&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":d?"1":""},set:function(a,d){var b=a.style,e=a.currentStyle,f=n.isNumeric(d)?"alpha(opacity="+100*d+")":"",g=e&&e.filter||b.filter||"";b.zoom=1;if(1<=d&&""===n.trim(g.replace(Pa,
""))&&(b.removeAttribute("filter"),e&&!e.filter))return;b.filter=Pa.test(g)?g.replace(Pa,f):g+" "+f}});n(function(){n.support.reliableMarginRight||(n.cssHooks.marginRight={get:function(a,d){return n.swap(a,{display:"inline-block"},function(){return d?Qa(a,"margin-right"):a.style.marginRight})}})});n.expr&&n.expr.filters&&(n.expr.filters.hidden=function(a){var d=a.offsetHeight;return 0===a.offsetWidth&&0===d||!n.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||n.css(a,"display"))},
n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)});n.each({margin:"",padding:"",border:"Width"},function(a,d){n.cssHooks[a+d]={expand:function(b){var e="string"===typeof b?b.split(" "):[b],f={};for(b=0;4>b;b++)f[a+ya[b]+d]=e[b]||e[b-2]||e[0];return f}}});var Bb=/%20/g,Cb=/\[\]$/,Ba=/\r?\n/g,gb=/#.*$/,hb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,da=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,vb=/^(?:GET|HEAD)$/,Ra=/^\/\//,
cb=/\?/,ib=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,wb=/^(?:select|textarea)/i,jb=/\s+/,kb=/([?&])_=[^&]*/,oa=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ba=n.fn.load,Ya={},Xa={},Ca,wa,ka=["*/"]+["*"];try{Ca=N.href}catch(xb){Ca=E.createElement("a"),Ca.href="",Ca=Ca.href}wa=oa.exec(Ca.toLowerCase())||[];n.fn.extend({load:function(a,d,b){if("string"!==typeof a&&ba)return ba.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(0<=e){var f=a.slice(e,a.length);a=
a.slice(0,e)}e="GET";d&&(n.isFunction(d)?(b=d,d=k):"object"===typeof d&&(d=n.param(d,n.ajaxSettings.traditional),e="POST"));var g=this;n.ajax({url:a,type:e,dataType:"html",data:d,complete:function(a,d,e){e=a.responseText;a.isResolved()&&(a.done(function(a){e=a}),g.html(f?n("<div>").append(e.replace(ib,"")).find(f):e));b&&g.each(b,[e,d,a])}});return this},serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?n.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||wb.test(this.nodeName)||da.test(this.type))}).map(function(a,d){var b=n(this).val();return null==b?null:n.isArray(b)?n.map(b,function(a,b){return{name:d.name,value:a.replace(Ba,"\r\n")}}):{name:d.name,value:b.replace(Ba,"\r\n")}}).get()}});n.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,d){n.fn[d]=function(a){return this.on(d,a)}});n.each(["get","post"],function(a,d){n[d]=function(a,
b,e,f){n.isFunction(b)&&(f=f||e,e=b,b=k);return n.ajax({type:d,url:a,data:b,success:e,dataType:f})}});n.extend({getScript:function(a,d){return n.get(a,k,d,"script")},getJSON:function(a,d,b){return n.get(a,d,b,"json")},ajaxSetup:function(a,d){d?K(a,n.ajaxSettings):(d=a,a=n.ajaxSettings);K(a,d);return a},ajaxSettings:{url:Ca,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(wa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ka},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:F(Ya),ajaxTransport:F(Xa),ajax:function(a,d){function b(a,d,q,u){if(2!==H){H=2;y&&clearTimeout(y);x=k;w=u||"";M.readyState=0<a?4:
0;var v,A,B;u=d;if(q){var z=e,S=M,C=z.contents,O=z.dataTypes,U=z.responseFields,R,Z,G,E;for(Z in U)Z in q&&(S[U[Z]]=q[Z]);for(;"*"===O[0];)O.shift(),R===k&&(R=z.mimeType||S.getResponseHeader("content-type"));if(R)for(Z in C)if(C[Z]&&C[Z].test(R)){O.unshift(Z);break}if(O[0]in q)G=O[0];else{for(Z in q){if(!O[0]||z.converters[Z+" "+O[0]]){G=Z;break}E||(E=Z)}G=G||E}G?(G!==O[0]&&O.unshift(G),q=q[G]):q=void 0}else q=k;if(200<=a&&300>a||304===a){if(e.ifModified){if(R=M.getResponseHeader("Last-Modified"))n.lastModified[t]=
R;if(R=M.getResponseHeader("Etag"))n.etag[t]=R}if(304===a)u="notmodified",v=!0;else try{R=e;R.dataFilter&&(q=R.dataFilter(q,R.dataType));var F=R.dataTypes;Z={};var aa,W,ha=F.length,X,P=F[0],K,T,V,J,Q;for(aa=1;aa<ha;aa++){if(1===aa)for(W in R.converters)"string"===typeof W&&(Z[W.toLowerCase()]=R.converters[W]);K=P;P=F[aa];if("*"===P)P=K;else if("*"!==K&&K!==P){T=K+" "+P;V=Z[T]||Z["* "+P];if(!V)for(J in Q=k,Z)if(X=J.split(" "),X[0]===K||"*"===X[0])if(Q=Z[X[1]+" "+P]){J=Z[J];!0===J?V=Q:!0===Q&&(V=J);
break}V||Q||n.error("No conversion from "+T.replace(" "," to "));!0!==V&&(q=V?V(q):Q(J(q)))}}A=q;u="success";v=!0}catch(N){u="parsererror",B=N}}else if(B=u,!u||a)u="error",0>a&&(a=0);M.status=a;M.statusText=""+(d||u);v?l.resolveWith(f,[A,u,M]):l.rejectWith(f,[M,u,B]);M.statusCode(m);m=k;I&&g.trigger("ajax"+(v?"Success":"Error"),[M,e,v?A:B]);h.fireWith(f,[M,u]);I&&(g.trigger("ajaxComplete",[M,e]),--n.active||n.event.trigger("ajaxStop"))}}"object"===typeof a&&(d=a,a=k);d=d||{};var e=n.ajaxSetup({},
d),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof n)?n(f):n.event,l=n.Deferred(),h=n.Callbacks("once memory"),m=e.statusCode||{},t,q={},u={},w,v,x,y,A,H=0,I,B,M={readyState:0,setRequestHeader:function(a,d){if(!H){var b=a.toLowerCase();a=u[b]=u[b]||a;q[a]=d}return this},getAllResponseHeaders:function(){return 2===H?w:null},getResponseHeader:function(a){var d;if(2===H){if(!v)for(v={};d=hb.exec(w);)v[d[1].toLowerCase()]=d[2];d=v[a.toLowerCase()]}return d===k?null:d},overrideMimeType:function(a){H||
(e.mimeType=a);return this},abort:function(a){a=a||"abort";x&&x.abort(a);b(0,a);return this}};l.promise(M);M.success=M.done;M.error=M.fail;M.complete=h.add;M.statusCode=function(a){if(a){var d;if(2>H)for(d in a)m[d]=[m[d],a[d]];else d=a[M.status],M.then(d,d)}return this};e.url=((a||e.url)+"").replace(gb,"").replace(Ra,wa[1]+"//");e.dataTypes=n.trim(e.dataType||"*").toLowerCase().split(jb);null==e.crossDomain&&(A=oa.exec(e.url.toLowerCase()),e.crossDomain=!(!A||A[1]==wa[1]&&A[2]==wa[2]&&(A[3]||("http:"===
A[1]?80:443))==(wa[3]||("http:"===wa[1]?80:443))));e.data&&e.processData&&"string"!==typeof e.data&&(e.data=n.param(e.data,e.traditional));C(Ya,e,d,M);if(2===H)return!1;I=e.global;e.type=e.type.toUpperCase();e.hasContent=!vb.test(e.type);I&&0===n.active++&&n.event.trigger("ajaxStart");if(!e.hasContent&&(e.data&&(e.url+=(cb.test(e.url)?"&":"?")+e.data,delete e.data),t=e.url,!1===e.cache)){A=n.now();var z=e.url.replace(kb,"$1_="+A);e.url=z+(z===e.url?(cb.test(e.url)?"&":"?")+"_="+A:"")}(e.data&&e.hasContent&&
!1!==e.contentType||d.contentType)&&M.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(t=t||e.url,n.lastModified[t]&&M.setRequestHeader("If-Modified-Since",n.lastModified[t]),n.etag[t]&&M.setRequestHeader("If-None-Match",n.etag[t]));M.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+("*"!==e.dataTypes[0]?", "+ka+"; q=0.01":""):e.accepts["*"]);for(B in e.headers)M.setRequestHeader(B,e.headers[B]);if(e.beforeSend&&(!1===e.beforeSend.call(f,M,
e)||2===H))return M.abort(),!1;for(B in{success:1,error:1,complete:1})M[B](e[B]);if(x=C(Xa,e,d,M)){M.readyState=1;I&&g.trigger("ajaxSend",[M,e]);e.async&&0<e.timeout&&(y=setTimeout(function(){M.abort("timeout")},e.timeout));try{H=1,x.send(q,b)}catch(S){if(2>H)b(-1,S);else throw S;}}else b(-1,"No Transport");return M},param:function(a,d){var b=[],e=function(a,d){d=n.isFunction(d)?d():d;b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(d)};d===k&&(d=n.ajaxSettings.traditional);if(n.isArray(a)||
a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(var f in a)z(f,a[f],d,e);return b.join("&").replace(Bb,"+")}});n.extend({active:0,lastModified:{},etag:{}});var Fb=n.now(),lb=/(\=)\?(&|$)|\?\?/i;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return n.expando+"_"+Fb++}});n.ajaxPrefilter("json jsonp",function(a,d,b){d="string"===typeof a.data&&/^application\/x\-www\-form\-urlencoded/.test(a.contentType);if("jsonp"===a.dataTypes[0]||!1!==a.jsonp&&(lb.test(a.url)||
d&&lb.test(a.data))){var f,g=a.jsonpCallback=n.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,l=e[g],h=a.url,k=a.data,m="$1"+g+"$2";!1!==a.jsonp&&(h=h.replace(lb,m),a.url===h&&(d&&(k=k.replace(lb,m)),a.data===k&&(h+=(/\?/.test(h)?"&":"?")+a.jsonp+"="+g)));a.url=h;a.data=k;e[g]=function(a){f=[a]};b.always(function(){e[g]=l;if(f&&n.isFunction(l))e[g](f[0])});a.converters["script json"]=function(){f||n.error(g+" was not called");return f[0]};a.dataTypes[0]="json";return"script"}});n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){n.globalEval(a);return a}}});n.ajaxPrefilter("script",function(a){a.cache===k&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});n.ajaxTransport("script",function(a){if(a.crossDomain){var d,b=E.head||E.getElementsByTagName("head")[0]||E.documentElement;return{send:function(e,f){d=E.createElement("script");d.async="async";a.scriptCharset&&(d.charset=a.scriptCharset);d.src=a.url;d.onload=d.onreadystatechange=function(a,
e){if(e||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,b&&d.parentNode&&b.removeChild(d),d=k,e||f(200,"success")};b.insertBefore(d,b.firstChild)},abort:function(){if(d)d.onload(0,1)}}}});var yb=e.ActiveXObject?function(){for(var a in Va)Va[a](0,1)}:!1,Gb=0,Va;n.ajaxSettings.xhr=e.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&J()))a:{try{a=new e.ActiveXObject("Microsoft.XMLHTTP");break a}catch(d){}a=void 0}return a}:J;(function(a){n.extend(n.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(n.ajaxSettings.xhr());n.support.ajax&&n.ajaxTransport(function(a){if(!a.crossDomain||n.support.cors){var d;return{send:function(b,f){var g=a.xhr(),l,h;a.username?g.open(a.type,a.url,a.async,a.username,a.password):g.open(a.type,a.url,a.async);if(a.xhrFields)for(h in a.xhrFields)g[h]=a.xhrFields[h];a.mimeType&&g.overrideMimeType&&g.overrideMimeType(a.mimeType);a.crossDomain||b["X-Requested-With"]||(b["X-Requested-With"]="XMLHttpRequest");try{for(h in b)g.setRequestHeader(h,
b[h])}catch(m){}g.send(a.hasContent&&a.data||null);d=function(b,e){var h,m,t,q,u;try{if(d&&(e||4===g.readyState))if(d=k,l&&(g.onreadystatechange=n.noop,yb&&delete Va[l]),e)4!==g.readyState&&g.abort();else{h=g.status;t=g.getAllResponseHeaders();q={};(u=g.responseXML)&&u.documentElement&&(q.xml=u);try{q.text=g.responseText}catch(w){}try{m=g.statusText}catch(v){m=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=q.text?200:404}}catch(x){e||f(-1,x)}q&&f(h,m,q,t)};a.async&&4!==g.readyState?(l=++Gb,yb&&
(Va||(Va={},n(e).unload(yb)),Va[l]=d),g.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var zb={},Da,Wa,Hb=/^(?:toggle|show|hide)$/,Ib=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,mb,nb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],ob;n.fn.extend({show:function(a,d,b){if(a||0===a)return this.animate(I("show",3),a,d,b);b=0;for(var e=this.length;b<e;b++)a=this[b],a.style&&(d=a.style.display,n._data(a,
"olddisplay")||"none"!==d||(d=a.style.display=""),(""===d&&"none"===n.css(a,"display")||!n.contains(a.ownerDocument.documentElement,a))&&n._data(a,"olddisplay",O(a.nodeName)));for(b=0;b<e;b++)if(a=this[b],a.style&&(d=a.style.display,""===d||"none"===d))a.style.display=n._data(a,"olddisplay")||"";return this},hide:function(a,d,b){if(a||0===a)return this.animate(I("hide",3),a,d,b);b=0;for(var e=this.length;b<e;b++)a=this[b],a.style&&(d=n.css(a,"display"),"none"===d||n._data(a,"olddisplay")||n._data(a,
"olddisplay",d));for(b=0;b<e;b++)this[b].style&&(this[b].style.display="none");return this},_toggle:n.fn.toggle,toggle:function(a,d,b){var e="boolean"===typeof a;n.isFunction(a)&&n.isFunction(d)?this._toggle.apply(this,arguments):null==a||e?this.each(function(){var d=e?a:n(this).is(":hidden");n(this)[d?"show":"hide"]()}):this.animate(I("toggle",3),a,d,b);return this},fadeTo:function(a,d,b,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:d},a,b,e)},animate:function(a,
d,b,e){function f(){!1===g.queue&&n._mark(this);var d=n.extend({},g),b=1===this.nodeType,e=b&&n(this).is(":hidden"),l,h,k,m,t;d.animatedProperties={};for(k in a)if(l=n.camelCase(k),k!==l&&(a[l]=a[k],delete a[k]),(h=n.cssHooks[l])&&"expand"in h)for(k in m=h.expand(a[l]),delete a[l],m)k in a||(a[k]=m[k]);for(l in a){h=a[l];n.isArray(h)?(d.animatedProperties[l]=h[1],h=a[l]=h[0]):d.animatedProperties[l]=d.specialEasing&&d.specialEasing[l]||d.easing||"swing";if("hide"===h&&e||"show"===h&&!e)return d.complete.call(this);
!b||"height"!==l&&"width"!==l||(d.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===n.css(this,"display")&&"none"===n.css(this,"float")&&(n.support.inlineBlockNeedsLayout&&"inline"!==O(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=d.overflow&&(this.style.overflow="hidden");for(k in a)if(b=new n.fx(this,d,k),h=a[k],Hb.test(h))if(l=n._data(this,"toggle"+k)||("toggle"===h?e?"show":"hide":0))n._data(this,"toggle"+k,"show"===l?"hide":"show"),
b[l]();else b[h]();else l=Ib.exec(h),m=b.cur(),l?(h=parseFloat(l[2]),t=l[3]||(n.cssNumber[k]?"":"px"),"px"!==t&&(n.style(this,k,(h||1)+t),m*=(h||1)/b.cur(),n.style(this,k,m+t)),l[1]&&(h=("-="===l[1]?-1:1)*h+m),b.custom(m,h,t)):b.custom(m,h,"");return!0}var g=n.speed(d,b,e);if(n.isEmptyObject(a))return this.each(g.complete,[!1]);a=n.extend({},a);return!1===g.queue?this.each(f):this.queue(g.queue,f)},stop:function(a,d,b){"string"!==typeof a&&(b=d,d=a,a=k);d&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var d,
e=!1,f=n.timers,g=n._data(this);b||n._unmark(!0,this);if(null==a)for(d in g){if(g[d]&&g[d].stop&&d.indexOf(".run")===d.length-4){var l=g[d];n.removeData(this,d,!0);l.stop(b)}}else g[d=a+".run"]&&g[d].stop&&(g=g[d],n.removeData(this,d,!0),g.stop(b));for(d=f.length;d--;)if(f[d].elem===this&&(null==a||f[d].queue===a)){if(b)f[d](!0);else f[d].saveState();e=!0;f.splice(d,1)}b&&e||n.dequeue(this,a)})}});n.each({slideDown:I("show",1),slideUp:I("hide",1),slideToggle:I("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,d){n.fn[a]=function(a,b,e){return this.animate(d,a,b,e)}});n.extend({speed:function(a,d,b){var e=a&&"object"===typeof a?n.extend({},a):{complete:b||!b&&d||n.isFunction(a)&&a,duration:a,easing:b&&d||d&&!n.isFunction(d)&&d};e.duration=n.fx.off?0:"number"===typeof e.duration?e.duration:e.duration in n.fx.speeds?n.fx.speeds[e.duration]:n.fx.speeds._default;if(null==e.queue||!0===e.queue)e.queue="fx";e.old=e.complete;e.complete=function(a){n.isFunction(e.old)&&
e.old.call(this);e.queue?n.dequeue(this,e.queue):!1!==a&&n._unmark(this)};return e},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,d,b){this.options=d;this.elem=a;this.prop=b;d.orig=d.orig||{}}});n.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(n.fx.step[this.prop]||n.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,d=n.css(this.elem,this.prop);return isNaN(a=parseFloat(d))?d&&"auto"!==d?d:0:a},custom:function(a,d,b){function e(a){return f.step(a)}var f=this,g=n.fx;this.startTime=ob||G();this.end=d;this.now=this.start=a;this.pos=this.state=0;this.unit=b||this.unit||(n.cssNumber[this.prop]?"":"px");e.queue=this.options.queue;e.elem=this.elem;e.saveState=function(){n._data(f.elem,"fxshow"+f.prop)===k&&(f.options.hide?n._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&n._data(f.elem,"fxshow"+f.prop,f.end))};
e()&&n.timers.push(e)&&!mb&&(mb=setInterval(g.tick,g.interval))},show:function(){var a=n._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||n.style(this.elem,this.prop);this.options.show=!0;a!==k?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());n(this.elem).show()},hide:function(){this.options.orig[this.prop]=n._data(this.elem,"fxshow"+this.prop)||n.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var d,
b=ob||G(),e=!0,f=this.elem,g=this.options;if(a||b>=g.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();g.animatedProperties[this.prop]=!0;for(d in g.animatedProperties)!0!==g.animatedProperties[d]&&(e=!1);if(e){null==g.overflow||n.support.shrinkWrapBlocks||n.each(["","X","Y"],function(a,d){f.style["overflow"+d]=g.overflow[a]});g.hide&&n(f).hide();if(g.hide||g.show)for(d in g.animatedProperties)n.style(f,d,g.orig[d]),n.removeData(f,"fxshow"+d,!0),n.removeData(f,"toggle"+
d,!0);if(a=g.complete)g.complete=!1,a.call(f)}return!1}Infinity==g.duration?this.now=b:(a=b-this.startTime,this.state=a/g.duration,this.pos=n.easing[g.animatedProperties[this.prop]](this.state,a,0,1,g.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};n.extend(n.fx,{tick:function(){for(var a,d=n.timers,b=0;b<d.length;b++)a=d[b],a()||d[b]!==a||d.splice(b--,1);d.length||n.fx.stop()},interval:13,stop:function(){clearInterval(mb);mb=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){n.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});n.each(nb.concat.apply([],nb),function(a,d){d.indexOf("margin")&&(n.fx.step[d]=function(a){n.style(a.elem,d,Math.max(0,a.now)+a.unit)})});n.expr&&n.expr.filters&&(n.expr.filters.animated=function(a){return n.grep(n.timers,function(d){return a===d.elem}).length});var Db,Jb=/^t(?:able|d|h)$/i,Eb=/^(?:body|html)$/i;
Db="getBoundingClientRect"in E.documentElement?function(a,d,b,e){try{e=a.getBoundingClientRect()}catch(f){}if(!e||!n.contains(b,a))return e?{top:e.top,left:e.left}:{top:0,left:0};a=d.body;d=P(d);return{top:e.top+(d.pageYOffset||n.support.boxModel&&b.scrollTop||a.scrollTop)-(b.clientTop||a.clientTop||0),left:e.left+(d.pageXOffset||n.support.boxModel&&b.scrollLeft||a.scrollLeft)-(b.clientLeft||a.clientLeft||0)}}:function(a,d,b){var e,f=a.offsetParent,g=d.body;e=(d=d.defaultView)?d.getComputedStyle(a,
null):a.currentStyle;for(var l=a.offsetTop,h=a.offsetLeft;(a=a.parentNode)&&a!==g&&a!==b&&(!n.support.fixedPosition||"fixed"!==e.position);)e=d?d.getComputedStyle(a,null):a.currentStyle,l-=a.scrollTop,h-=a.scrollLeft,a===f&&(l+=a.offsetTop,h+=a.offsetLeft,!n.support.doesNotAddBorder||n.support.doesAddBorderForTableAndCells&&Jb.test(a.nodeName)||(l+=parseFloat(e.borderTopWidth)||0,h+=parseFloat(e.borderLeftWidth)||0),f=a.offsetParent),n.support.subtractsBorderForOverflowNotVisible&&"visible"!==e.overflow&&
(l+=parseFloat(e.borderTopWidth)||0,h+=parseFloat(e.borderLeftWidth)||0);if("relative"===e.position||"static"===e.position)l+=g.offsetTop,h+=g.offsetLeft;n.support.fixedPosition&&"fixed"===e.position&&(l+=Math.max(b.scrollTop,g.scrollTop),h+=Math.max(b.scrollLeft,g.scrollLeft));return{top:l,left:h}};n.fn.offset=function(a){if(arguments.length)return a===k?this:this.each(function(d){n.offset.setOffset(this,a,d)});var d=this[0],b=d&&d.ownerDocument;return b?d===b.body?n.offset.bodyOffset(d):Db(d,b,
b.documentElement):null};n.offset={bodyOffset:function(a){var d=a.offsetTop,b=a.offsetLeft;n.support.doesNotIncludeMarginInBodyOffset&&(d+=parseFloat(n.css(a,"marginTop"))||0,b+=parseFloat(n.css(a,"marginLeft"))||0);return{top:d,left:b}},setOffset:function(a,d,b){var e=n.css(a,"position");"static"===e&&(a.style.position="relative");var f=n(a),g=f.offset(),l=n.css(a,"top"),h=n.css(a,"left"),k={},m={};("absolute"===e||"fixed"===e)&&-1<n.inArray("auto",[l,h])?(m=f.position(),e=m.top,h=m.left):(e=parseFloat(l)||
0,h=parseFloat(h)||0);n.isFunction(d)&&(d=d.call(a,b,g));null!=d.top&&(k.top=d.top-g.top+e);null!=d.left&&(k.left=d.left-g.left+h);"using"in d?d.using.call(a,k):f.css(k)}};n.fn.extend({position:function(){if(!this[0])return null;var a=this[0],d=this.offsetParent(),b=this.offset(),e=Eb.test(d[0].nodeName)?{top:0,left:0}:d.offset();b.top-=parseFloat(n.css(a,"marginTop"))||0;b.left-=parseFloat(n.css(a,"marginLeft"))||0;e.top+=parseFloat(n.css(d[0],"borderTopWidth"))||0;e.left+=parseFloat(n.css(d[0],
"borderLeftWidth"))||0;return{top:b.top-e.top,left:b.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!Eb.test(a.nodeName)&&"static"===n.css(a,"position");)a=a.offsetParent;return a})}});n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,d){var b=/Y/.test(d);n.fn[a]=function(e){return n.access(this,function(a,e,f){var g=P(a);if(f===k)return g?d in g?g[d]:n.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:a[e];
g?g.scrollTo(b?n(g).scrollLeft():f,b?f:n(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});n.each({Height:"height",Width:"width"},function(a,d){var b="client"+a,e="scroll"+a,f="offset"+a;n.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(n.css(a,d,"padding")):this[d]():null};n.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(n.css(b,d,a?"margin":"border")):this[d]():null};n.fn[d]=function(a){return n.access(this,function(a,d,g){if(n.isWindow(a))return d=a.document,
a=d.documentElement[b],n.support.boxModel&&a||d.body&&d.body[b]||a;if(9===a.nodeType)return d=a.documentElement,d[b]>=d[e]?d[b]:Math.max(a.body[e],d[e],a.body[f],d[f]);if(g===k)return a=n.css(a,d),d=parseFloat(a),n.isNumeric(d)?d:a;n(a).css(d,g)},d,a,arguments.length,null)}});e.jQuery=e.$=n;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return n})})(window);
(function(e,k,h,f){function b(b){b[0]&&e.isPlainObject(b[0])?this.data=b[0]:this.el=b;this.isCoords=!0;this.coords={};this.init();return this}k=b.prototype;k.init=function(){this.set();this.original_coords=this.get()};k.set=function(b,a){var d=this.el;d&&!b&&(this.data=d.offset(),this.data.width=d.width(),this.data.height=d.height());if(d&&b&&!a){var e=d.offset();this.data.top=e.top;this.data.left=e.left}e=this.data;"undefined"===typeof e.left&&(e.left=e.x1);"undefined"===typeof e.top&&(e.top=e.y1);
this.coords.x1=e.left;this.coords.y1=e.top;this.coords.x2=e.left+e.width;this.coords.y2=e.top+e.height;this.coords.cx=e.left+e.width/2;this.coords.cy=e.top+e.height/2;this.coords.width=e.width;this.coords.height=e.height;this.coords.el=d||!1;return this};k.update=function(b){if(!b&&!this.el)return this;if(b)return this.data=e.extend({},this.data,b),this.set(!0,!0);this.set(!0);return this};k.get=function(){return this.coords};k.destroy=function(){this.el.removeData("coords");delete this.el};e.fn.coords=
function(e){if(this.data("coords"))return this.data("coords");e=new b(this,e);this.data("coords",e);return e}})(jQuery,window,document);
(function(e,k,h,f){function b(a,d,b){this.options=e.extend(g,b);this.$element=a;this.last_colliders=[];this.last_colliders_coords=[];this.set_colliders(d);this.init()}var g={colliders_context:h.body,overlapping_region:"C"};k=b.prototype;k.init=function(){this.find_collisions()};k.overlaps=function(a,d){var b=!1,e=!1;if(d.x1>=a.x1&&d.x1<=a.x2||d.x2>=a.x1&&d.x2<=a.x2||a.x1>=d.x1&&a.x2<=d.x2)b=!0;if(d.y1>=a.y1&&d.y1<=a.y2||d.y2>=a.y1&&d.y2<=a.y2||a.y1>=d.y1&&a.y2<=d.y2)e=!0;return b&&e};k.detect_overlapping_region=
function(a,d){var b="",e="";a.y1>d.cy&&a.y1<d.y2&&(b="N");a.y2>d.y1&&a.y2<d.cy&&(b="S");a.x1>d.cx&&a.x1<d.x2&&(e="W");a.x2>d.x1&&a.x2<d.cx&&(e="E");return b+e||"C"};k.calculate_overlapped_area_coords=function(a,d){var b=Math.max(a.x1,d.x1),f=Math.max(a.y1,d.y1),g=Math.min(a.x2,d.x2),h=Math.min(a.y2,d.y2);return e({left:b,top:f,width:g-b,height:h-f}).coords().get()};k.calculate_overlapped_area=function(a){return a.width*a.height};k.manage_colliders_start_stop=function(a,d,b){for(var f=this.last_colliders_coords,
g=0,h=f.length;g<h;g++)-1===e.inArray(f[g],a)&&d.call(this,f[g]);d=0;for(g=a.length;d<g;d++)-1===e.inArray(a[d],f)&&b.call(this,a[d])};k.find_collisions=function(a){var d=this.options.overlapping_region,b=[],f=[],g=this.colliders||this.$colliders,h=g.length;for(a=this.$element.coords().update(a||!1).get();h--;){var k=this.$colliders?e(g[h]):g[h],t=k.isCoords?k:k.coords(),u=t.get();if(this.overlaps(a,u)){var x=this.detect_overlapping_region(a,u);if(x===d||"all"===d){var y=this.calculate_overlapped_area_coords(a,
u),k={area:this.calculate_overlapped_area(y),area_coords:y,region:x,coords:u,player_coords:a,el:k};this.options.on_overlap&&this.options.on_overlap.call(this,k);b.push(t);f.push(k)}}}(this.options.on_overlap_stop||this.options.on_overlap_start)&&this.manage_colliders_start_stop(b,this.options.on_overlap_start,this.options.on_overlap_stop);this.last_colliders_coords=b;return f};k.get_closest_colliders=function(a){a=this.find_collisions(a);a.sort(function(a,b){return"C"===a.region&&"C"===b.region?a.coords.y1<
b.coords.y1||a.coords.x1<b.coords.x1?-1:1:1});return a};k.set_colliders=function(a){"string"===typeof a||a instanceof e?this.$colliders=e(a,this.options.colliders_context).not(this.$element):this.colliders=e(a)};e.fn.collision=function(a,d){return new b(this,a,d)}})(jQuery,window,document);
(function(e,k){e.delay=function(e,f){var b=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,b)},f)};e.debounce=function(e,f,b){var g;return function(){var a=this,d=arguments;b&&!g&&e.apply(a,d);clearTimeout(g);g=setTimeout(function(){g=null;b||e.apply(a,d)},f)}};e.throttle=function(e,f){var b,g,a,d,l,k,v=debounce(function(){l=d=!1},f);return function(){b=this;g=arguments;a||(a=setTimeout(function(){a=null;l&&e.apply(b,g);v()},f));d?l=!0:k=e.apply(b,g);v();d=
!0;return k}}})(window);
(function(e,k,h,f){function b(a,d){this.options=e.extend({},g,d);this.$body=e(h.body);this.$container=e(a);this.$dragitems=e(this.options.items,this.$container);this.is_dragging=!1;this.player_min_left=0+this.options.offset_left;this.init()}var g={items:"li",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1},a=e(k),d={x:"left",y:"top"},l=!!("ontouchstart"in k),q=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};
f=b.prototype;f.init=function(){var a=this.$container.css("position");this.calculate_dimensions();this.$container.css("position","static"===a?"relative":a);this.disabled=!1;this.events();e(k).bind("resize.gridster-draggable",throttle(e.proxy(this.calculate_dimensions,this),200))};f.events=function(){this.$container.on("selectstart.gridster-draggable",e.proxy(this.on_select_start,this));this.$container.on("touchstart.gridster-draggable mousedown.gridster-draggable",this.options.items,e.proxy(this.drag_handler,
this));this.$body.on("touchend.gridster-draggable mouseup.gridster-draggable",e.proxy(function(a){this.is_dragging=!1;if(!this.disabled&&(this.$body.off("touchmove.gridster-draggable mousemove.gridster-draggable"),this.drag_start))this.on_dragstop(a)},this))};f.get_actual_pos=function(a){return a.position()};f.get_mouse_pos=function(a){a.originalEvent&&a.originalEvent.touches&&(a=a.originalEvent,a=a.touches.length?a.touches[0]:a.changedTouches[0]);return{left:a.clientX,top:a.clientY}};f.get_offset=
function(a){a.preventDefault();a=this.get_mouse_pos(a);var d=Math.round(a.left-this.mouse_init_pos.left),b=Math.round(a.top-this.mouse_init_pos.top),e=Math.round(this.el_init_offset.left+d-this.baseX+this.scroll_offset_x),f=Math.round(this.el_init_offset.top+b-this.baseY+this.scroll_offset_y);this.options.limit&&(e>this.player_max_left?e=this.player_max_left:e<this.player_min_left&&(e=this.player_min_left));return{position:{left:e,top:f},pointer:{left:a.left,top:a.top,diff_left:d+this.scroll_offset_x,
diff_top:b+this.scroll_offset_y}}};f.get_drag_data=function(a){a=this.get_offset(a);a.$player=this.$player;a.$helper=this.helper?this.$helper:this.$player;return a};f.set_limits=function(a){a||(a=this.$container.width());this.player_max_left=a-this.player_width+-this.options.offset_left;this.options.container_width=a;return this};f.scroll_in=function(b,f){var g=d[b],l="x"===b,k=l?this.window_width:this.window_height,x=l?e(h).width():e(h).height(),y=l?this.$player.width():this.$player.height(),l=a["scroll"+
q(g)](),B=l+50,F=l+f.pointer[g],x=x-k+y;F>=l+k-50&&(k=l+30,k<x&&(a["scroll"+q(g)](k),this["scroll_offset_"+b]+=30));F<=B&&(k=l-30,0<k&&(a["scroll"+q(g)](k),this["scroll_offset_"+b]-=30));return this};f.manage_scroll=function(a){this.scroll_in("x",a);this.scroll_in("y",a)};f.calculate_dimensions=function(d){this.window_height=a.height();this.window_width=a.width()};f.drag_handler=function(a){if(!this.disabled&&(1===a.which||l)&&!this.ignore_drag(a)){var d=this,b=!0;this.$player=e(a.currentTarget);
this.el_init_pos=this.get_actual_pos(this.$player);this.mouse_init_pos=this.get_mouse_pos(a);this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top;this.$body.on("touchmove.gridster-draggable mousemove.gridster-draggable",function(a){var e=d.get_mouse_pos(a),f=Math.abs(e.left-d.mouse_init_pos.left),e=Math.abs(e.top-d.mouse_init_pos.top);if(!(f>d.options.distance||e>d.options.distance))return!1;if(b)return b=!1,d.on_dragstart.call(d,a),!1;!0===d.is_dragging&&d.on_dragmove.call(d,a);return!1});if(!l)return!1}};
f.on_dragstart=function(a){a.preventDefault();if(this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var d=this.$container.offset();this.baseX=Math.round(d.left);this.baseY=Math.round(d.top);this.initial_container_width=this.options.container_width||this.$container.width();"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1;this.scroll_offset_x=this.scroll_offset_y=0;this.el_init_offset=this.$player.offset();
this.player_width=this.$player.width();this.player_height=this.$player.height();this.set_limits(this.options.container_width);this.options.start&&this.options.start.call(this.$player,a,this.get_drag_data(a));return!1};f.on_dragmove=function(a){var d=this.get_drag_data(a);this.options.autoscroll&&this.manage_scroll(d);this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:d.position.left,top:d.position.top});d.prev_position=this.last_position||d.position;this.options.drag&&
this.options.drag.call(this.$player,a,d);this.last_position=d.position;return!1};f.on_dragstop=function(a){var d=this.get_drag_data(a);this.drag_start=!1;this.options.stop&&this.options.stop.call(this.$player,a,d);this.helper&&this.$helper.remove();return!1};f.on_select_start=function(a){if(!this.disabled&&!this.ignore_drag(a))return!1};f.enable=function(){this.disabled=!1};f.disable=function(){this.disabled=!0};f.destroy=function(){this.disable();this.$container.off(".gridster-draggable");this.$body.off(".gridster-draggable");
e(k).off(".gridster-draggable");e.removeData(this.$container,"drag")};f.ignore_drag=function(a){return this.options.handle?!e(a.target).is(this.options.handle):e(a.target).is(this.options.ignore_dragging.join(", "))};e.fn.drag=function(a){return new b(this,a)}})(jQuery,window,document);
(function(e,k,h,f){function b(a,d){this.options=e.extend(!0,{},g,d);this.$el=e(a);this.$wrapper=this.$el.parent();this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w");this.widgets=[];this.$changed=e([]);this.wrapper_width=this.$wrapper.width();this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0];this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1];this.generated_stylesheets=[];this.$style_tags=
e([]);this.init()}var g={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:Infinity,min_rows:15,max_size_x:!1,autogrow_cols:!1,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,serialize_params:function(a,d){return{col:d.col,row:d.row,size_x:d.size_x,size_y:d.size_y}},collision:{},draggable:{items:".gs-w",distance:4},resize:{enabled:!1,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[Infinity,
Infinity],min_size:[1,1]}};b.generated_stylesheets=[];f=b.prototype;f.init=function(){this.options.resize.enabled&&this.setup_resize();this.generate_grid_and_stylesheet();this.get_widgets_from_DOM();this.set_dom_grid_height();this.set_dom_grid_width();this.$wrapper.addClass("ready");this.draggable();this.options.resize.enabled&&this.resizable();e(k).bind("resize.gridster",throttle(e.proxy(this.recalculate_faux_grid,this),200))};f.disable=function(){this.$wrapper.find(".player-revert").removeClass("player-revert");
this.drag_api.disable();return this};f.enable=function(){this.drag_api.enable();return this};f.disable_resize=function(){this.$el.addClass("gs-resize-disabled");this.resize_api.disable();return this};f.enable_resize=function(){this.$el.removeClass("gs-resize-disabled");this.resize_api.enable();return this};f.add_widget=function(a,d,b,f,g,h,k){var t;d||(d=1);b||(b=1);!f&!g?t=this.next_position(d,b):(t={col:f,row:g},this.empty_cells(f,g,d,b));a=e(a).attr({"data-col":t.col,"data-row":t.row,"data-sizex":d,
"data-sizey":b}).addClass("gs-w").appendTo(this.$el).hide();this.$widgets=this.$widgets.add(a);this.register_widget(a);this.add_faux_rows(t.size_y);h&&this.set_widget_max_size(a,h);k&&this.set_widget_min_size(a,k);this.set_dom_grid_width();this.set_dom_grid_height();this.drag_api.set_limits(this.cols*this.min_widget_width);return a.fadeIn()};f.set_widget_min_size=function(a,d){a="number"===typeof a?this.$widgets.eq(a):a;if(!a.length)return this;var b=a.data("coords").grid;b.min_size_x=d[0];b.min_size_y=
d[1];return this};f.set_widget_max_size=function(a,d){a="number"===typeof a?this.$widgets.eq(a):a;if(!a.length)return this;var b=a.data("coords").grid;b.max_size_x=d[0];b.max_size_y=d[1];return this};f.add_resize_handle=function(a){var d=this.options.resize.handle_append_to;e(this.resize_handle_tpl).appendTo(d?e(d,a):a);return this};f.resize_widget=function(a,d,b,e){var f=a.coords().grid,g=f.col,h=this.options.max_cols,k=f.size_y,u=f.col;d||(d=f.size_x);b||(b=f.size_y);Infinity!==h&&(d=Math.min(d,
h-g+1));b>k&&this.add_faux_rows(Math.max(b-k,0));g=g+d-1;g>this.cols&&this.add_faux_cols(g-this.cols);d={col:u,row:f.row,size_x:d,size_y:b};this.mutate_widget_in_gridmap(a,f,d);this.set_dom_grid_height();this.set_dom_grid_width();e&&e.call(this,d.size_x,d.size_y);return a};f.mutate_widget_in_gridmap=function(a,d,b){var f=d.size_y,g=this.get_cells_occupied(d),h=this.get_cells_occupied(b),k=[];e.each(g.cols,function(a,d){-1===e.inArray(d,h.cols)&&k.push(d)});var t=[];e.each(h.cols,function(a,d){-1===
e.inArray(d,g.cols)&&t.push(d)});var u=[];e.each(g.rows,function(a,d){-1===e.inArray(d,h.rows)&&u.push(d)});var x=[];e.each(h.rows,function(a,d){-1===e.inArray(d,g.rows)&&x.push(d)});this.remove_from_gridmap(d);if(t.length){var y=[b.col,b.row,b.size_x,Math.min(f,b.size_y),a];this.empty_cells.apply(this,y)}x.length&&this.empty_cells.apply(this,[b.col,b.row,b.size_x,b.size_y,a]);d.col=b.col;d.row=b.row;d.size_x=b.size_x;d.size_y=b.size_y;this.add_to_gridmap(b,a);a.removeClass("player-revert");a.data("coords").update({width:b.size_x*
this.options.widget_base_dimensions[0]+(b.size_x-1)*this.options.widget_margins[0]*2,height:b.size_y*this.options.widget_base_dimensions[1]+(b.size_y-1)*this.options.widget_margins[1]*2});a.attr({"data-col":b.col,"data-row":b.row,"data-sizex":b.size_x,"data-sizey":b.size_y});k.length&&(d=[k[0],b.row,k.length,Math.min(f,b.size_y),a],this.remove_empty_cells.apply(this,d));u.length&&this.remove_empty_cells.apply(this,[b.col,b.row,b.size_x,b.size_y,a]);this.move_widget_up(a);return this};f.empty_cells=
function(a,d,b,f,g){this.widgets_below({col:a,row:d-f,size_x:b,size_y:f}).not(g).each(e.proxy(function(a,b){var g=e(b).coords().grid;g.row<=d+f-1&&(g=d+f-g.row,this.move_widget_down(e(b),g))},this));this.set_dom_grid_height();return this};f.remove_empty_cells=function(a,d,b,f,g){this.widgets_below({col:a,row:d,size_x:b,size_y:f}).not(g).each(e.proxy(function(a,d){this.move_widget_up(e(d),f)},this));this.set_dom_grid_height();return this};f.next_position=function(a,d){a||(a=1);d||(d=1);for(var b=this.gridmap,
e=b.length,f=[],g,h=1;h<e;h++){g=b[h].length;for(var k=1;k<=g;k++)this.can_move_to({size_x:a,size_y:d},h,k)&&f.push({col:h,row:k,size_y:d,size_x:a})}return f.length?this.sort_by_row_and_col_asc(f)[0]:!1};f.remove_widget=function(a,d,b){var f=a instanceof e?a:e(a),g=f.coords().grid;e.isFunction(d)&&(b=d,d=!1);this.cells_occupied_by_placeholder={};this.$widgets=this.$widgets.not(f);var h=this.widgets_below(f);this.remove_from_gridmap(g);f.fadeOut(e.proxy(function(){f.remove();d||h.each(e.proxy(function(a,
d){this.move_widget_up(e(d),g.size_y)},this));this.set_dom_grid_height();b&&b.call(this,a)},this));return this};f.remove_all_widgets=function(a){this.$widgets.each(e.proxy(function(d,b){this.remove_widget(b,!0,a)},this));return this};f.serialize=function(a){a||(a=this.$widgets);var d=[];a.each(e.proxy(function(a,b){d.push(this.options.serialize_params(e(b),e(b).coords().grid))},this));return d};f.serialize_changed=function(){return this.serialize(this.$changed)};f.register_widget=function(a){var d=
{col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),10),size_x:parseInt(a.attr("data-sizex"),10),size_y:parseInt(a.attr("data-sizey"),10),max_size_x:parseInt(a.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(a.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(a.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(a.attr("data-min-sizey"),10)||!1,el:a};this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:d.size_x,size_y:d.size_y},d.col,d.row)&&(e.extend(d,this.next_position(d.size_x,
d.size_y)),a.attr({"data-col":d.col,"data-row":d.row,"data-sizex":d.size_x,"data-sizey":d.size_y}));a.data("coords",a.coords());a.data("coords").grid=d;this.add_to_gridmap(d,a);this.options.resize.enabled&&this.add_resize_handle(a);return this};f.update_widget_position=function(a,d){this.for_each_cell_occupied(a,function(a,b){if(!this.gridmap[a])return this;this.gridmap[a][b]=d});return this};f.remove_from_gridmap=function(a){return this.update_widget_position(a,!1)};f.add_to_gridmap=function(a,d){this.update_widget_position(a,
d||a.el);a.el&&this.widgets_below(a.el).each(e.proxy(function(a,d){this.move_widget_up(e(d))},this))};f.draggable=function(){var a=this,d=e.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width,limit:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON","."+this.options.resize.handle_class],start:function(d,b){a.$widgets.filter(".player-revert").removeClass("player-revert");a.$player=
e(this);a.$helper=e(b.$helper);a.helper=!a.$helper.is(a.$player);a.on_start_drag.call(a,d,b);a.$el.trigger("gridster:dragstart")},stop:function(d,b){a.on_stop_drag.call(a,d,b);a.$el.trigger("gridster:dragstop")},drag:throttle(function(d,b){a.on_drag.call(a,d,b);a.$el.trigger("gridster:drag")},60)});this.drag_api=this.$el.drag(d);return this};f.resizable=function(){this.resize_api=this.$el.drag({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,
move_element:!1,resize:!0,limit:this.options.autogrow_cols?!1:!0,start:e.proxy(this.on_start_resize,this),stop:e.proxy(function(a,d){delay(e.proxy(function(){this.on_stop_resize(a,d)},this),120)},this),drag:throttle(e.proxy(this.on_resize,this),60)});return this};f.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var a='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';this.resize_handle_tpl=e.map(this.options.resize.axes,function(d){return a.replace("{type}",
d)}).join("");return this};f.on_start_drag=function(a,d){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging");this.highest_col=this.get_highest_occupied_cell().col;this.$player.addClass("player");this.player_grid_data=this.$player.coords().grid;this.placeholder_grid_data=e.extend({},this.player_grid_data);this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);this.set_dom_grid_width(this.cols);var b=this.player_grid_data.size_x,f=this.cols-
this.highest_col;this.options.autogrow_cols&&f<=b&&this.add_faux_cols(Math.min(b-f,1));b=this.faux_grid;f=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);this.last_cols=[];this.last_rows=[];this.collision_api=this.$helper.collision(b,this.options.collision);this.$preview_holder=e("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),
"data-col":this.$player.attr("data-col"),css:{width:f.width,height:f.height}}).appendTo(this.$el);this.options.draggable.start&&this.options.draggable.start.call(this,a,d)};f.on_drag=function(a,d){if(null===this.$player)return!1;var b={left:d.position.left+this.baseX,top:d.position.top+this.baseY};this.options.autogrow_cols&&(this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+
1),this.drag_api.set_limits(this.container_width)),this.collision_api.set_colliders(this.faux_grid));this.colliders_data=this.collision_api.get_closest_colliders(b);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);this.helper&&this.$player&&this.$player.css({left:d.position.left,top:d.position.top});this.options.draggable.drag&&this.options.draggable.drag.call(this,
a,d)};f.on_stop_drag=function(a,d){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging");d.position.left+=this.baseX;d.position.top+=this.baseY;this.colliders_data=this.collision_api.get_closest_colliders(d.position);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,
"data-row":this.placeholder_grid_data.row}).css({left:"",top:""});this.$changed=this.$changed.add(this.$player);this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data);this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row);this.$player.coords().grid.row=this.placeholder_grid_data.row;this.$player.coords().grid.col=this.placeholder_grid_data.col;this.options.draggable.stop&&this.options.draggable.stop.call(this,a,d);this.$preview_holder.remove();
this.$helper=this.$player=null;this.placeholder_grid_data={};this.player_grid_data={};this.cells_occupied_by_placeholder={};this.cells_occupied_by_player={};this.set_dom_grid_height();this.set_dom_grid_width();this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)};f.on_start_resize=function(a,d){this.$resized_widget=d.$player.closest(".gs-w");this.resize_coords=this.$resized_widget.coords();this.resize_wgd=this.resize_coords.grid;this.resize_initial_width=this.resize_coords.coords.width;
this.resize_initial_height=this.resize_coords.coords.height;this.resize_initial_sizex=this.resize_coords.grid.size_x;this.resize_initial_sizey=this.resize_coords.grid.size_y;this.resize_initial_col=this.resize_coords.grid.col;this.resize_last_sizex=this.resize_initial_sizex;this.resize_last_sizey=this.resize_initial_sizey;this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1);this.resize_max_size_y=this.resize_wgd.max_size_y||
this.options.resize.max_size[1];this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1;this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1;this.resize_initial_last_col=this.get_highest_occupied_cell().col;this.set_dom_grid_width(this.cols);this.resize_dir={right:d.$player.is("."+this.resize_handle_class+"-x"),bottom:d.$player.is("."+this.resize_handle_class+"-y")};this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],
"min-height":this.options.widget_base_dimensions[1]});var b=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=e("<"+b+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el);this.$resized_widget.addClass("resizing");this.options.resize.start&&this.options.resize.start.call(this,a,d,this.$resized_widget);
this.$el.trigger("gridster:resizestart")};f.on_stop_resize=function(a,d){this.$resized_widget.removeClass("resizing").css({width:"",height:""});delay(e.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""});this.options.resize.stop&&this.options.resize.stop.call(this,a,d,this.$resized_widget);this.$el.trigger("gridster:resizestop")},this),300);this.set_dom_grid_width();this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)};f.on_resize=
function(a,d){var b=d.pointer.diff_left,e=d.pointer.diff_top,f=this.options.widget_base_dimensions[0],g=this.options.widget_base_dimensions[1],h=this.options.widget_margins[0],k=this.options.widget_margins[1],u=this.resize_max_size_x,x=this.resize_min_size_x,y=this.resize_max_size_y,B=this.resize_min_size_y,F=this.options.autogrow_cols,C=Infinity,K=Infinity,z=Math.ceil(b/(f+2*h)-.2),J=Math.ceil(e/(g+2*k)-.2),z=Math.max(1,this.resize_initial_sizex+z),J=Math.max(1,this.resize_initial_sizey+J),C=this.container_width/
this.min_widget_width-this.resize_initial_col+1,K=C*this.min_widget_width-2*h,z=Math.max(Math.min(z,u),x),z=Math.min(C,z),C=Math.min(u*f+(z-1)*h*2,K);min_width=x*f+(z-1)*h*2;J=Math.max(Math.min(J,y),B);K=y*g+(J-1)*k*2;min_height=B*g+(J-1)*k*2;this.resize_dir.right?J=this.resize_initial_sizey:this.resize_dir.bottom&&(z=this.resize_initial_sizex);F&&(f=this.resize_initial_col+z-1,F&&this.resize_initial_last_col<=f&&(this.set_dom_grid_width(Math.max(f+1,this.cols)),this.cols<f&&this.add_faux_cols(f-
this.cols)));F={};!this.resize_dir.bottom&&(F.width=Math.max(Math.min(this.resize_initial_width+b,C),min_width));!this.resize_dir.right&&(F.height=Math.max(Math.min(this.resize_initial_height+e,K),min_height));this.$resized_widget.css(F);if(z!==this.resize_last_sizex||J!==this.resize_last_sizey)this.resize_widget(this.$resized_widget,z,J),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":z,"data-sizey":J});
this.options.resize.resize&&this.options.resize.resize.call(this,a,d,this.$resized_widget);this.$el.trigger("gridster:resize");this.resize_last_sizex=z;this.resize_last_sizey=J};f.on_overlapped_column_change=function(a,d){if(!this.colliders_data.length)return this;var b=this.get_targeted_columns(this.colliders_data[0].el.data.col),f=this.last_cols.length,g=b.length,h;for(h=0;h<g;h++)-1===e.inArray(b[h],this.last_cols)&&(a||e.noop).call(this,b[h]);for(h=0;h<f;h++)-1===e.inArray(this.last_cols[h],b)&&
(d||e.noop).call(this,this.last_cols[h]);this.last_cols=b;return this};f.on_overlapped_row_change=function(a,d){if(!this.colliders_data.length)return this;var b=this.get_targeted_rows(this.colliders_data[0].el.data.row),f=this.last_rows.length,g=b.length,h;for(h=0;h<g;h++)-1===e.inArray(b[h],this.last_rows)&&(a||e.noop).call(this,b[h]);for(h=0;h<f;h++)-1===e.inArray(this.last_rows[h],b)&&(d||e.noop).call(this,this.last_rows[h]);this.last_rows=b};f.set_player=function(a,d,b){b||this.empty_cells_player_occupies();
b=b?{col:a}:this.colliders_data[0].el.data;a=b.col;d=d||b.row;this.player_grid_data={col:a,row:d,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x};this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);b=this.get_widgets_overlapped(this.player_grid_data);var e=this.widgets_constraints(b);this.manage_movements(e.can_go_up,a,d);this.manage_movements(e.can_not_go_up,a,d);b.length||(b=this.can_go_player_up(this.player_grid_data),!1!==b&&(d=b),this.set_placeholder(a,
d));return{col:a,row:d}};f.widgets_constraints=function(a){var d=e([]),b=[],f=[];a.each(e.proxy(function(a,g){var h=e(g),k=h.coords().grid;this.can_go_widget_up(k)?(d=d.add(h),b.push(k)):f.push(k)},this));a.not(d);return{can_go_up:this.sort_by_row_asc(b),can_not_go_up:this.sort_by_row_desc(f)}};f.sort_by_row_asc=function(a){return a=a.sort(function(a,b){a.row||(a=e(a).coords().grid,b=e(b).coords().grid);return a.row>b.row?1:-1})};f.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,b){return a.row>
b.row||a.row===b.row&&a.col>b.col?1:-1})};f.sort_by_col_asc=function(a){return a=a.sort(function(a,b){return a.col>b.col?1:-1})};f.sort_by_row_desc=function(a){return a=a.sort(function(a,b){return a.row+a.size_y<b.row+b.size_y?1:-1})};f.manage_movements=function(a,d,b){e.each(a,e.proxy(function(a,e){var f=e.el,g=this.can_go_widget_up(e);g?(this.move_widget_to(f,g),this.set_placeholder(d,g+e.size_y)):this.can_go_player_up(this.player_grid_data)||(this.move_widget_down(f,b+this.player_grid_data.size_y-
e.row),this.set_placeholder(d,b))},this));return this};f.is_player=function(a,d){if(d&&!this.gridmap[a])return!1;var b=d?this.gridmap[a][d]:a;return b&&(b.is(this.$player)||b.is(this.$helper))};f.is_player_in=function(a,d){var b=this.cells_occupied_by_player||{};return 0<=e.inArray(a,b.cols)&&0<=e.inArray(d,b.rows)};f.is_placeholder_in=function(a,d){var b=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(a)&&0<=e.inArray(d,b.rows)};f.is_placeholder_in_col=function(a){return 0<=
e.inArray(a,(this.cells_occupied_by_placeholder||[]).cols)};f.is_empty=function(a,d){return"undefined"!==typeof this.gridmap[a]?"undefined"!==typeof this.gridmap[a][d]&&!1===this.gridmap[a][d]?!0:!1:!0};f.is_occupied=function(a,d){return this.gridmap[a]?this.gridmap[a][d]?!0:!1:!1};f.is_widget=function(a,d){var b=this.gridmap[a];return b?(b=b[d])?b:!1:!1};f.is_widget_under_player=function(a,d){return this.is_widget(a,d)?this.is_player_in(a,d):!1};f.get_widgets_under_player=function(a){a||(a=this.cells_occupied_by_player||
{cols:[],rows:[]});var d=e([]);e.each(a.cols,e.proxy(function(b,f){e.each(a.rows,e.proxy(function(a,b){this.is_widget(f,b)&&(d=d.add(this.gridmap[f][b]))},this))},this));return d};f.set_placeholder=function(a,d){var b=e.extend({},this.placeholder_grid_data),f=this.widgets_below({col:b.col,row:b.row,size_y:b.size_y,size_x:b.size_x}),g=a+b.size_x-1;g>this.cols&&(a-=g-a);var g=this.placeholder_grid_data.row<d,h=this.placeholder_grid_data.col!==a;this.placeholder_grid_data.col=a;this.placeholder_grid_data.row=
d;this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);this.$preview_holder.attr({"data-row":d,"data-col":a});(g||h)&&f.each(e.proxy(function(d,f){this.move_widget_up(e(f),this.placeholder_grid_data.col-a+b.size_y)},this));f=this.get_widgets_under_player(this.cells_occupied_by_placeholder);f.length&&f.each(e.proxy(function(a,f){var g=e(f);this.move_widget_down(g,d+b.size_y-g.data("coords").grid.row)},this))};f.can_go_player_up=function(a){var d=a.row+a.size_y-1,b=
!0,e=[],f=1E4,g=this.get_widgets_under_player();this.for_each_column_occupied(a,function(a){var h=this.gridmap[a],k=d+1;for(e[a]=[];0<--k;)if(this.is_empty(a,k)||this.is_player(a,k)||this.is_widget(a,k)&&h[k].is(g))e[a].push(k),f=k<f?k:f;else break;if(0===e[a].length)return b=!1,!0;e[a].sort(function(a,d){return a-d})});return b?this.get_valid_rows(a,e,f):!1};f.can_go_widget_up=function(a){var d=a.row+a.size_y-1,b=!0,e=[],f=1E4;this.for_each_column_occupied(a,function(g){var h=this.gridmap[g];e[g]=
[];for(var k=d+1;0<--k&&(!this.is_widget(g,k)||this.is_player_in(g,k)||h[k].is(a.el));)this.is_player(g,k)||this.is_placeholder_in(g,k)||this.is_player_in(g,k)||e[g].push(k),k<f&&(f=k);if(0===e[g].length)return b=!1,!0;e[g].sort(function(a,d){return a-d})});return b?this.get_valid_rows(a,e,f):!1};f.get_valid_rows=function(a,d,b){var f=a.row,g=a.row+a.size_y-1;a=a.size_y;var h=b-1;for(b=[];++h<=g;){var k=!0;e.each(d,function(a,d){e.isArray(d)&&-1===e.inArray(h,d)&&(k=!1)});if(!0===k&&(b.push(h),b.length===
a))break}d=!1;1===a?b[0]!==f&&(d=b[0]||!1):b[0]!==f&&(d=this.get_consecutive_numbers_index(b,a));return d};f.get_consecutive_numbers_index=function(a,d){for(var b=a.length,e=[],f=!0,g=-1,h=0;h<b;h++){if(f||a[h]===g+1){e.push(h);if(e.length===d)break;f=!1}else e=[],f=!0;g=a[h]}return e.length>=d?a[e[0]]:!1};f.get_widgets_overlapped=function(){var a=e([]),d=[],b=this.cells_occupied_by_player.rows.slice(0);b.reverse();e.each(this.cells_occupied_by_player.cols,e.proxy(function(f,g){e.each(b,e.proxy(function(b,
f){if(!this.gridmap[g])return!0;var h=this.gridmap[g][f];this.is_occupied(g,f)&&!this.is_player(h)&&-1===e.inArray(h,d)&&(a=a.add(h),d.push(h))},this))},this));return a};f.on_start_overlapping_column=function(a){this.set_player(a,!1)};f.on_start_overlapping_row=function(a){this.set_player(!1,a)};f.on_stop_overlapping_column=function(a){this.set_player(a,!1);var d=this;this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(a,b){d.move_widget_up(this,d.player_grid_data.size_y)})};
f.on_stop_overlapping_row=function(a){this.set_player(!1,a);for(var d=this,b=this.cells_occupied_by_player.cols,e=0,f=b.length;e<f;e++)this.for_each_widget_below(b[e],a,function(a,b){d.move_widget_up(this,d.player_grid_data.size_y)})};f.move_widget_to=function(a,d){var b=this,f=a.coords().grid,g=this.widgets_below(a);if(!1===this.can_move_to(f,f.col,d,a))return!1;this.remove_from_gridmap(f);f.row=d;this.add_to_gridmap(f);a.attr("data-row",d);this.$changed=this.$changed.add(a);g.each(function(a,d){var f=
e(d),g=f.coords().grid,h=b.can_go_widget_up(g);h&&h!==g.row&&b.move_widget_to(f,h)});return this};f.move_widget_up=function(a,d){var b=a.coords().grid,f=b.row,g=[];d||(d=1);if(!this.can_go_up(a))return!1;this.for_each_column_occupied(b,function(b){if(-1===e.inArray(a,g)){var h=a.coords().grid,l=f-d,l=this.can_go_up_to_row(h,b,l);if(!l)return!0;b=this.widgets_below(a);this.remove_from_gridmap(h);h.row=l;this.add_to_gridmap(h);a.attr("data-row",h.row);this.$changed=this.$changed.add(a);g.push(a);b.each(e.proxy(function(a,
b){this.move_widget_up(e(b),d)},this))}})};f.move_widget_down=function(a,d){var b,f;if(0>=d)return!1;b=a.coords().grid.row;f=[];if(!a)return!1;if(-1===e.inArray(a,f)){var g=a.coords().grid;b+=d;var h=this.widgets_below(a);this.remove_from_gridmap(g);h.each(e.proxy(function(a,b){var f=e(b),h=f.coords().grid,h=this.displacement_diff(h,g,d);0<h&&this.move_widget_down(f,h)},this));g.row=b;this.update_widget_position(g,a);a.attr("data-row",g.row);this.$changed=this.$changed.add(a);f.push(a)}};f.can_go_up_to_row=
function(a,d,b){var f=!0,g=[],h=a.row,k;this.for_each_column_occupied(a,function(a){g[a]=[];for(k=h;k--;)if(this.is_empty(a,k)&&!this.is_placeholder_in(a,k))g[a].push(k);else break;if(!g[a].length)return f=!1,!0});if(!f)return!1;k=b;for(k=1;k<h;k++){a=!0;d=0;for(b=g.length;d<b;d++)g[d]&&-1===e.inArray(k,g[d])&&(a=!1);if(!0===a){f=k;break}}return f};f.displacement_diff=function(a,d,b){var e=a.row,f=[],g=d.row+d.size_y;this.for_each_column_occupied(a,function(a){for(var d=0,b=g;b<e;b++)this.is_empty(a,
b)&&(d+=1);f.push(d)});a=Math.max.apply(Math,f);b-=a;return 0<b?b:0};f.widgets_below=function(a){a=e.isPlainObject(a)?a:a.coords().grid;var d=this,b=a.row+a.size_y-1,f=e([]);this.for_each_column_occupied(a,function(a){d.for_each_widget_below(a,b,function(a,b){if(!d.is_player(this)&&-1===e.inArray(this,f))return f=f.add(this),!0})});return this.sort_by_row_asc(f)};f.set_cells_player_occupies=function(a,d){this.remove_from_gridmap(this.placeholder_grid_data);this.placeholder_grid_data.col=a;this.placeholder_grid_data.row=
d;this.add_to_gridmap(this.placeholder_grid_data,this.$player);return this};f.empty_cells_player_occupies=function(){this.remove_from_gridmap(this.placeholder_grid_data);return this};f.can_go_up=function(a){a=a.coords().grid;var d=a.row,b=d-1,e=!0;if(1===d)return!1;this.for_each_column_occupied(a,function(a){this.is_widget(a,b);if(this.is_occupied(a,b)||this.is_player(a,b)||this.is_placeholder_in(a,b)||this.is_player_in(a,b))return e=!1,!0});return e};f.can_move_to=function(a,d,b,e){var f=a.el,g=
!0;if(d+a.size_x-1>this.cols||e&&e<b+a.size_y-1)return!1;this.for_each_cell_occupied({size_y:a.size_y,size_x:a.size_x,col:d,row:b},function(d,b){var e=this.is_widget(d,b);!e||a.el&&!e.is(f)||(g=!1)});return g};f.get_targeted_columns=function(a){for(var d=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-1),b=[];a<=d;a++)b.push(a);return b};f.get_targeted_rows=function(a){for(var d=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),b=[];a<=d;a++)b.push(a);return b};f.get_cells_occupied=
function(a,d){var b={cols:[],rows:[]},f;d instanceof e&&(a=d.coords().grid);for(f=0;f<a.size_x;f++)b.cols.push(a.col+f);for(f=0;f<a.size_y;f++)b.rows.push(a.row+f);return b};f.for_each_cell_occupied=function(a,d){this.for_each_column_occupied(a,function(b){this.for_each_row_occupied(a,function(a){d.call(this,b,a)})});return this};f.for_each_column_occupied=function(a,d){for(var b=0;b<a.size_x;b++)d.call(this,a.col+b,a)};f.for_each_row_occupied=function(a,d){for(var b=0;b<a.size_y;b++)d.call(this,
a.row+b,a)};f._traversing_widgets=function(a,d,b,f,g){var h=this.gridmap;if(h[b]){var k,t;a=a+"/"+d;b instanceof e&&(d=b.coords().grid,b=d.col,g=f=d.row);var u=[],x=f;d={"for_each/above":function(){for(;x--&&!(0<x&&this.is_widget(b,x)&&-1===e.inArray(h[b][x],u)&&(k=g.call(h[b][x],b,x),u.push(h[b][x]),k)););},"for_each/below":function(){x=f+1;for(t=h[b].length;x<t&&(!this.is_widget(b,x)||-1!==e.inArray(h[b][x],u)||(k=g.call(h[b][x],b,x),u.push(h[b][x]),!k));x++);}};d[a]&&d[a].call(this)}};f.for_each_widget_above=
function(a,d,b){this._traversing_widgets("for_each","above",a,d,b);return this};f.for_each_widget_below=function(a,d,b){this._traversing_widgets("for_each","below",a,d,b);return this};f.get_highest_occupied_cell=function(){var a;a=this.gridmap;for(var d=a[1].length,b=[],e=[],f=a.length-1;1<=f;f--)for(a=d-1;1<=a;a--)if(this.is_widget(f,a)){b.push(a);e.push(f);break}return{col:Math.max.apply(Math,e),row:Math.max.apply(Math,b)}};f.get_widgets_from=function(a,d){var b=e();a&&(b=b.add(this.$widgets.filter(function(){var d=
e(this).attr("data-col");return d===a||d>a})));d&&(b=b.add(this.$widgets.filter(function(){var a=e(this).attr("data-row");return a===d||a>d})));return b};f.set_dom_grid_height=function(a){"undefined"===typeof a&&(a=this.get_highest_occupied_cell().row*this.min_widget_height);this.container_height=a;this.$el.css("height",this.container_height);return this};f.set_dom_grid_width=function(a){"undefined"===typeof a&&(a=this.get_highest_occupied_cell().col);a=Math.min(this.options.autogrow_cols?this.options.max_cols:
this.cols,Math.max(a,this.options.min_cols));this.container_width=a*this.min_widget_width;this.$el.css("width",this.container_width);return this};f.generate_stylesheet=function(a){var d="",f=this.options.max_size_x||this.cols,g;a||(a={});a.cols||(a.cols=this.cols);a.rows||(a.rows=this.rows);a.namespace||(a.namespace=this.options.namespace);a.widget_base_dimensions||(a.widget_base_dimensions=this.options.widget_base_dimensions);a.widget_margins||(a.widget_margins=this.options.widget_margins);a.min_widget_width=
2*a.widget_margins[0]+a.widget_base_dimensions[0];a.min_widget_height=2*a.widget_margins[1]+a.widget_base_dimensions[1];g=e.param(a);if(0<=e.inArray(g,b.generated_stylesheets))return!1;this.generated_stylesheets.push(g);b.generated_stylesheets.push(g);for(g=a.cols;0<=g;g--)d+=a.namespace+' [data-col="'+(g+1)+'"] { left:'+(g*a.widget_base_dimensions[0]+g*a.widget_margins[0]+(g+1)*a.widget_margins[0])+"px; }\n";for(g=a.rows;0<=g;g--)d+=a.namespace+' [data-row="'+(g+1)+'"] { top:'+(g*a.widget_base_dimensions[1]+
g*a.widget_margins[1]+(g+1)*a.widget_margins[1])+"px; }\n";for(g=1;g<=a.rows;g++)d+=a.namespace+' [data-sizey="'+g+'"] { height:'+(g*a.widget_base_dimensions[1]+2*(g-1)*a.widget_margins[1])+"px; }\n";for(g=1;g<=f;g++)d+=a.namespace+' [data-sizex="'+g+'"] { width:'+(g*a.widget_base_dimensions[0]+2*(g-1)*a.widget_margins[0])+"px; }\n";return this.add_style_tag(d)};f.add_style_tag=function(a){var d=h.createElement("style");h.getElementsByTagName("head")[0].appendChild(d);d.setAttribute("type","text/css");
d.styleSheet?d.styleSheet.cssText=a:d.appendChild(h.createTextNode(a));this.$style_tags=this.$style_tags.add(d);return this};f.remove_style_tags=function(){var a=b.generated_stylesheets,d=this.generated_stylesheets;this.$style_tags.remove();b.generated_stylesheets=e.map(a,function(a){if(-1===e.inArray(a,d))return a})};f.generate_faux_grid=function(a,d){this.faux_grid=[];this.gridmap=[];var b,e;for(b=d;0<b;b--)for(this.gridmap[b]=[],e=a;0<e;e--)this.add_faux_cell(e,b);return this};f.add_faux_cell=
function(a,d){var b=e({left:this.baseX+(d-1)*this.min_widget_width,top:this.baseY+(a-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:d,row:a,original_col:d,original_row:a}).coords();e.isArray(this.gridmap[d])||(this.gridmap[d]=[]);this.gridmap[d][a]=!1;this.faux_grid.push(b);return this};f.add_faux_rows=function(a){for(var d=this.rows,b=a=d+(a||1);b>d;b--)for(var e=this.cols;1<=e;e--)this.add_faux_cell(b,e);this.rows=a;this.options.autogenerate_stylesheet&&
this.generate_stylesheet();return this};f.add_faux_cols=function(a){var d=this.cols;a=Math.min(d+(a||1),this.options.max_cols);for(d+=1;d<=a;d++)for(var b=this.rows;1<=b;b--)this.add_faux_cell(b,d);this.cols=a;this.options.autogenerate_stylesheet&&this.generate_stylesheet();return this};f.recalculate_faux_grid=function(){var a=this.$wrapper.width();this.baseX=(e(k).width()-a)/2;this.baseY=this.$wrapper.offset().top;e.each(this.faux_grid,e.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+
(b.data.col-1)*this.min_widget_width,top:this.baseY+(b.data.row-1)*this.min_widget_height})},this));return this};f.get_widgets_from_DOM=function(){this.$widgets.each(e.proxy(function(a,d){this.register_widget(e(d))},this));return this};f.generate_grid_and_stylesheet=function(){var a=this.$wrapper.width(),d=this.options.max_cols,b=Math.floor(a/this.min_widget_width)+this.options.extra_cols,f=this.$widgets.map(function(){return e(this).attr("data-col")}).get();f.length||(f=[0]);f=Math.max.apply(Math,
f);this.cols=Math.max(f,b,this.options.min_cols);Infinity!==d&&d>=f&&d<this.cols&&(this.cols=d);var g=this.options.extra_rows;this.$widgets.each(function(a,d){g+=+e(d).attr("data-sizey")});this.rows=Math.max(g,this.options.min_rows);this.baseX=(e(k).width()-a)/2;this.baseY=this.$wrapper.offset().top;this.options.autogenerate_stylesheet&&this.generate_stylesheet();return this.generate_faux_grid(this.rows,this.cols)};f.destroy=function(a){this.$el.removeData("gridster");e(k).unbind(".gridster");this.drag_api&&
this.drag_api.destroy();this.remove_style_tags();a&&this.$el.remove();return this};e.fn.gridster=function(a){return this.each(function(){e(this).data("gridster")||e(this).data("gridster",new b(this,a))})};e.Gridster=f})(jQuery,window,document);
(function(e,k,h,f){k=e.Gridster;k.widgets_in_col=function(b){if(!this.gridmap[b])return!1;for(var e=this.gridmap[b].length-1;0<=e;e--)if(!1!==this.is_widget(b,e))return!0;return!1};k.widgets_in_row=function(b){for(var e=this.gridmap.length;1<=e;e--)if(!1!==this.is_widget(e,b))return!0;return!1};k.widgets_in_range=function(b,f,a,d){var h=e([]),k,v,w,m;for(k=a;k>=b;k--)for(v=d;v>=f;v--)w=this.is_widget(k,v),!1!==w&&(m=w.data("coords").grid,m.col>=b&&m.col<=a&&m.row>=f&&m.row<=d&&(h=h.add(w)));return h};
k.get_bottom_most_occupied_cell=function(){var b=0,e=0;this.for_each_cell(function(a,d,f){a&&f>b&&(b=f,e=d)});return{col:e,row:b}};k.get_right_most_occupied_cell=function(){var b=0,e=0;this.for_each_cell(function(a,d,f){if(a)return b=f,e=d,!1});return{col:e,row:b}};k.for_each_cell=function(b,e){e||(e=this.gridmap);var a=e[1].length,d=e.length-1;a:for(;1<=d;d--)for(var f=a-1;1<=f;f--){var h=e[d]&&e[d][f];if(b&&!1===b.call(this,h,d,f))break a}};k.next_position_in_range=function(b,e,a){b||(b=1);e||(e=
1);for(var d=this.gridmap,f=d.length,h=[],k,w=1;w<f;w++){k=a||d[w].length;for(var m=1;m<=k;m++)this.can_move_to({size_x:b,size_y:e},w,m,a)&&h.push({col:w,row:m,size_y:e,size_x:b})}return 1<=h.length?this.sort_by_col_asc(h)[0]:!1};k.closest_to_right=function(b,e){if(!this.gridmap[b])return!1;for(var a=this.gridmap.length-1,d=b;d<=a;d++)if(this.gridmap[d][e])return{col:d,row:e};return!1};k.closest_to_left=function(b,e){if(!this.gridmap[b])return!1;for(var a=b;1<=a;a--)if(this.gridmap[a][e])return{col:a,
row:e};return!1}})(jQuery,window,document);
(function(e,k){function h(a,d,b,f){f={data:f||0===f||!1===f?f:d?d.data:{},_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:q,nest:v,wrap:w,html:m,update:t};a&&e.extend(f,a,{nodes:[],parent:d});b&&(f.tmpl=b,f._ctnt=f._ctnt||f.tmpl(e,f),f.key=++K,(J.length?B:y)[K]=f);return f}function f(a,d,g){var h;g=g?e.map(g,function(d){return"string"===typeof d?a.key?d.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,'$1 _tmplitem="'+a.key+'" $2'):d:f(d,a,d._ctnt)}):a;if(d)return g;g=g.join("");g.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(a,d,f,g){h=e(f).get();l(h);d&&(h=b(d).concat(h));g&&(h=h.concat(b(g)))});return h?h:b(g)}function b(a){var d=document.createElement("div");d.innerHTML=a;return e.makeArray(d.childNodes)}function g(a){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(a,b,f,g,h,l,k){a=e.tmpl.tag[f];if(!a)throw"Unknown template tag: "+f;f=a._default||[];l&&!/\w$/.test(h)&&(h+=l,l="");h?(h=d(h),k=k?","+d(k)+")":l?")":"",k=l?-1<h.indexOf(".")?h+d(l):"("+h+").call($item"+k:h,l=l?k:"(typeof("+h+")==='function'?("+h+").call($item):("+h+"))"):l=k=f.$1||"null";g=d(g);return"');"+a[b?"close":"open"].split("$notnull_1").join(h?"typeof("+h+")!=='undefined' && ("+h+")!=null":"true").split("$1a").join(l).split("$1").join(k).split("$2").join(g||f.$2||"")+"__.push('"})+
"');}return __;")}function a(a,d){a._wrap=f(a,!0,e.isArray(d)?d:[x.test(d)?d:e(d).html()]).join("")}function d(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function l(a){function d(a){function f(a){a+=b;m=l[a]=l[a]||h(m,y[m.parent.key+b]||m.parent)}var g,k=a,m,t;if(t=a.getAttribute("_tmplitem")){for(;k.parentNode&&1===(k=k.parentNode).nodeType&&!(g=k.getAttribute("_tmplitem")););g!==t&&(k=k.parentNode?11===k.nodeType?0:k.getAttribute("_tmplitem")||0:0,(m=y[t])||(m=B[t],m=h(m,y[k]||
B[k]),m.key=++K,y[K]=m),z&&f(t));a.removeAttribute("_tmplitem")}else z&&(m=e.data(a,"tmplItem"))&&(f(m.key),y[m.key]=m,k=(k=e.data(a.parentNode,"tmplItem"))?k.key:0);if(m){for(g=m;g&&g.key!=k;)g.nodes.push(a),g=g.parent;delete m._ctnt;delete m._wrap;e.data(a,"tmplItem",m)}}var b="_"+z,f,g,l={},k,m,t;k=0;for(m=a.length;k<m;k++)if(1===(f=a[k]).nodeType){g=f.getElementsByTagName("*");for(t=g.length-1;0<=t;t--)d(g[t]);d(f)}}function q(a,d,b,e){if(!a)return J.pop();J.push({_:a,tmpl:d,item:this,data:b,
options:e})}function v(a,d,b){return e.tmpl(e.template(a),d,b,this)}function w(a,d){var b=a.options||{};b.wrapped=d;return e.tmpl(e.template(a.tmpl),a.data,b,a.item)}function m(a,d){var b=this._wrap;return e.map(e(e.isArray(b)?b.join(""):b).filter(a||"*"),function(a){if(d)a=a.innerText||a.textContent;else{var b;(b=a.outerHTML)||(b=document.createElement("div"),b.appendChild(a.cloneNode(!0)),b=b.innerHTML);a=b}return a})}function t(){var a=this.nodes;e.tmpl(null,null,null,this).insertBefore(a[0]);
e(a).remove()}var u=e.fn.domManip,x=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,y={},B={},F,C={key:0,data:{}},K=0,z=0,J=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,d){e.fn[a]=function(b){var f=[];b=e(b);var g,h,l;g=1===this.length&&this[0].parentNode;F=y||{};if(g&&11===g.nodeType&&1===g.childNodes.length&&1===b.length)b[d](this[0]),f=this;else{h=0;for(l=b.length;h<l;h++)z=h,g=(0<h?this.clone(!0):this).get(),e(b[h])[d](g),f=
f.concat(g);z=0;f=this.pushStack(f,a,b.selector)}b=F;F=null;e.tmpl.complete(b);return f}});e.fn.extend({tmpl:function(a,d,b){return e.tmpl(this[0],a,d,b)},tmplItem:function(){return e.tmplItem(this[0])},template:function(a){return e.template(a,this[0])},domManip:function(a,d,b,f){if(a[0]&&e.isArray(a[0])){for(var g=e.makeArray(arguments),h=a[0],l=h.length,k=0,m;k<l&&!(m=e.data(h[k++],"tmplItem")););m&&z&&(g[2]=function(a){e.tmpl.afterManip(this,a,b)});u.apply(this,g)}else u.apply(this,arguments);
z=0;F||e.tmpl.complete(y);return this}});e.extend({tmpl:function(d,b,g,l){var k=!l;if(k)l=C,d=e.template[d]||e.template(null,d),B={};else if(!d)return d=l.tmpl,y[l.key]=l,l.nodes=[],l.wrapped&&a(l,l.wrapped),e(f(l,null,l.tmpl(e,l)));if(!d)return[];"function"===typeof b&&(b=b.call(l||{}));g&&g.wrapped&&a(g,g.wrapped);b=e.isArray(b)?e.map(b,function(a){return a?h(g,l,d,a):null}):[h(g,l,d,b)];return k?e(f(l,null,b)):b},tmplItem:function(a){var d;for(a instanceof e&&(a=a[0]);a&&1===a.nodeType&&!(d=e.data(a,
"tmplItem"))&&(a=a.parentNode););return d||C},template:function(a,d){return d?("string"===typeof d?d=g(d):d instanceof e&&(d=d[0]||{}),d.nodeType&&(d=e.data(d,"tmpl")||e.data(d,"tmpl",g(d.innerHTML))),"string"===typeof a?e.template[a]=d:d):a?"string"!==typeof a?e.template(null,a):e.template[a]||e.template(null,x.test(a)?a:e(a)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},
open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},
"!":{open:""}},complete:function(a){y={}},afterManip:function(a,d,b){var f=11===d.nodeType?e.makeArray(d.childNodes):1===d.nodeType?[d]:[];b.call(a,d);l(f);z++}})})(jQuery);$.template("slot_leaderboard",'<section class="slot s-leaderboard ${data_source_kind}">    {{if title}}    <header><h4>${title}</h4></header>    {{/if}}    <table class="board">    {{if headers}}        <thead>        {{each headers}}            <th><div title="${$value}">${$value}</div></th>        {{/each}}        {{if extra_header}}            <th><div>{{html extra_header}}</div></th>        {{/if}}        </thead>    {{/if}}    </table></section>');
$.template("plan_item",'<li class="plan-item">    <span class="plan-name">${name}</span><br />    <span class="plan-description">${description}</span><br />    <span class="plan-interval">${payment_frequency}</span><br />    <span class="invoice-total">${subtotal} USD<span class="vat_num"> + ${vat_percent}% VAT = $${total} USD</span></span></li>');$.template("directory_services_detail",'<article id="directory-detail" class="m-directory service-widget-detail">    <header>        <hgroup>            <h1>${service_name} widgets</h1>        </hgroup>        <a class="close" href="#">close</a>        <a class="back" href="#directory/service/${service}">Go back to the ${service_name} widgets</a>    </header>    <div class="groups slidster">        <div class="viewport">            <ul>            </ul>        </div>    </div></article>');
$.template("slot_funnel_item",'<tr>    <th>        <strong class="label">${name}</strong>        <em class="amount">${amount} {{if percent_lost}}/ ${percent_lost}% {{/if}}</em>    </th>    <td>        <div>            <div>                <span class="bar"><span></span></span>            </div>        </div>        <strong class="percent">${percent}%</strong>    </td></tr>');$.template("section_option","<a><span>${title}</span></a>");$.template("directory_services_page","<li></li>");
$.template("directory_custom_item",'<a href="#custom/${id}" class="${id}">    <h4>${name}</h4>    <p>${description}</p></a>');$.template("widget_appearance_fieldset",'{{if has_multiple_slot_appearances}}<a class="edit">Edit</a>{{/if}}<fieldset>    {{if editable}}    <strong class="title">NAME FOR VARIABLE ${layout}</strong>    <input type="text" class="field-subtitle" placeholder="value name" value="${subtitle}">    <strong class="title">CHOOSE A COLOR</strong>    <ul class="color_picker">        {{each(i, color) colors}}        <li{{if color === current_color}} class="ui-selected"{{/if}}>            <span style="background-color: ${color}" data-color="${color}"></span>        </li>        {{/each}}    </ul>    {{/if}}    {{if !editable && isNew}}    <h3>        <p>This item\'s appearance can\'t be changed.</p><br/>        <p>Nothing to see here, move along!</p>    </h3>    {{/if}}</fieldset>');
$.template("directory_service_widgets_item",'<a href="#directory/service/${id}" class="${id}{{if needs_upgrade === true}} disabled{{/if}}">    <h4>${name}</h4></a>');$.template("plan_invoices",'<div class="pane invoices">    <section>        <h1>Invoices</h1>        <ul class="invoice-list"></ul>        <div class="failure">            <div>                <h2>OOOPS :(</h2>                <p>                    We weren\'t able to obtain your invoices                    from the service.                </p>                <a>C\'mon, try again</a>            </div>        </div>    </section></div>');
$.template("widget_embed_snippet",'<div class="snippet">    <input class="embed-code" type="text" value=\'<iframe src="${url}" width="${width}" height="${height}" frameborder="0" scrolling="no" style="border: ${border}; border-radius: ${border_radius}; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box;"></iframe>\' disabled="disabled">    <div class="actions">        <a href="#" class="disable btn btn-action lightdark no-link">            <span>Disable<br>embedding</span>        </a>        {{if has_flash}}        <div class="copy">            <div class="zeroclipboard-container">            <a class="btn btn-ico-action lightdark no-link">                <i class="icon-copy-to-clipboard icon-small"></i>                <span>Copy<br>snippet</span>            </a>            </div>        </div>        {{/if}}    </div></div>');
$.template("widget_embed",'<li class="embed">    <h3>EMBED THIS WIDGET ON ANY WEBSITE</h3>    <div class="mod-embed disabled">        <p class="description">You can insert this widget into any web page, just enable embedding and copy the snippet.</p>        <a href="#" class="enable"><span>Enable embedding</span></a>    </div>    <div class="mod-embed enabled">        <p class="description">Place this snippet into any web page.</p>        <div class="snippet"></div>    </div></li>');
$.template("slot_image",'<section class="slot s-image ${data_source_kind} empty">    <div class="empty">        <ul>            <li class="placeholder">No image yet</li>        </ul>    </div>    <time class="time"></time>    <p class="caption"></p></section>');$.template("billing_info",'<div class="billing pane"><section>    <div class="form">        <h3>your current plan:</h3>        {{tmpl($data, $item) "plan_info"}}        <h3 class="billing">Your billing information:</h3>        <ul class="server-errors"></ul>        <fieldset id="billing-info" class="recurly"></fieldset>        <h3 class="billing">Your VAT related information:</h3>        <div class="vat-info recurly">        </div>    </div>    {{if has_recurly_account_expired === false}}    <div class="loading-plans-info">        <h3>Loading plans...</h3>    </div>    <div class="plans-info">        {{tmpl($data, $item) "plan_list"}}    </div>    {{tmpl($data, $item) "confirmation_info"}}    {{/if}}    <div class="sent">      <h1>Thanks, your billing info has been updated correctly.</h1>    </div>    {{if has_recurly_account_expired === false}}    <div class="plan-changed">      <h1>Thanks, your plan has been updated correctly.</h1>    </div>    {{/if}}    <div class="failure">        <div>            <h2>OOOPS :(</h2>            <p>                We weren\'t able to obtain your billing information                from the service.            </p>            <a>C\'mon, try again</a>        </div>    </div></section><button class="send btn btn-submit full has_children">{{html submit_html}}</button></div>');
$.template("widget_timespans",'<section class="timespans-dropdown">    <select>        {{if $item.includes(allowed, \'yearly\')}}            <option value="yearly" {{if timespan === \'yearly\'}}selected="selected"{{/if}} >Last 12 months</option>        {{/if}}        {{if $item.includes(allowed, \'quarterly\')}}            <option value="quarterly" {{if timespan === \'quarterly\'}}selected="selected"{{/if}} >Last 13 weeks</option>        {{/if}}        {{if $item.includes(allowed, \'monthly\')}}            <option value="monthly" {{if timespan === \'monthly\'}}selected="selected"{{/if}} >Last 30 days</option>        {{/if}}        {{if $item.includes(allowed, \'weekly\')}}            <option value="weekly" {{if timespan === \'weekly\'}}selected="selected"{{/if}} >Last 7 days</option>        {{/if}}        {{if $item.includes(allowed, \'daily\')}}            <option value="daily" {{if timespan === \'daily\'}}selected="selected"{{/if}} >Last 24 hours</option>        {{/if}}    </select></div>');
$.template("interpolable_input_text",'<div class="f-input">    {{if label}}<label class="f-label" for="field-${name}">{{html label}}</label>{{/if}}    {{if tooltip}}        <div class="tip-input tip-${name}-container">            <input type="text" id="field-${name}" class="field-${name} f-interpolable" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} {{if maxlength}}maxlength="${maxlength}"{{/if}} />            <input type="button" class="tip" value="tip" tabindex="9999" />            <div class="tooltip">                <span>{{html tooltip}}</span>                <a class="close-tooltip">close</a>            </div>        </div>    {{else}}        <input type="text" id="field-${name}" class="field-${name} f-interpolable" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} {{if maxlength}}maxlength="${maxlength}"{{/if}} />    {{/if}}</div>');
$.template("dashboard_tvmode_reel",'<section class="pane tvmode-reel">\t<h1>TV Mode - Display dashboards on a large screen</h1>\t<div class="m-text">\t\t<p>In TV mode, Ducksboard detects the resolution of your screen and adapts size and position of every widget to offer the best visualization.</p>\t</div>    <h2>Carrousel Mode - Chain dashboards in TV Mode</h2>    <div class="m-text">        <p>To chain several dashboards in TV Mode, switch some dashboard to Carrousel Mode On. Then TV Mode rotates over all the dashboards with Carrousel Mode On.</p>    </div>\t<div class="switcher">\t\t<a class="{{if in_carousel}}active{{/if}} include">Carrousel Mode ON</a>\t\t<a class="{{if !in_carousel}}active{{/if}} exclude">Carrousel Mode OFF</a>\t</div></section>');
$.template("slot_timeline_item",'<li>    {{if image}}        <figure>        {{if $item.is_color($item.data)}}            <span style="background-color: ${image};"></span>        {{else}}            <img src="${image}" alt="${name}" />        {{/if}}        </figure>    {{/if}}    <div class="body">        <span class="title">            ${title}            <time class="time" datetime="${time}"></time>        </span>        <div class="content"><p>${content}</p></div>    </div></li>');
$.template("widget_settings",'<article id="widget-preferences" {{if !is_custom}} class="service"{{/if}}>    <header>        <section class="title">            <input type="text" value="${title}" class="field-title" maxlength="50">        </section>        <p href="#" class="btn btn-ico-toggler sound{{if sound}} enabled{{/if}}" title="Play sound when new data arrives">            <a class="icon-alarm enable"></a>            <a class="icon-alarm-off disable"></a>        </p>        <a href="#" class="btn btn-ico-action delete{{if is_new}} disabled{{/if}}">            <i class="icon-trash"></i>            <span>Delete<br>widget</span>        </a>        <div class="copy-to">            <a href="#" class="btn btn-ico-action{{if is_new}} disabled{{/if}}">                <i class="icon-copy-to"></i>                <span>Copy to another<br>dashboard</span>            </a>            <ul id="dashboards-to-copy-list" class="contextual">            </ul>        </div>        <a class="close" href="#">close</a>    </header>    <div class="nav-container">        <nav class="sidebar"></nav>    </div>    <section class="placeholder pane"></section>    <button type="submit" class="btn btn btn-submit full save">save preferences for this widget</button></article>');
$.template("widget_data_api",'<section class="data-api pane">    <div class="editor m-widget-edit-positions ${kind}"></div>    <div class="extras api-key">      <strong class="title">YOUR API KEY</strong>      <a href="http://{{if wiki_url}}dev.ducksboard.com/${wiki_url}{{else}}doc.ducksboard.com{{/if}}" target="_blank" class="docs">API documentation</a>      <input type="text" readonly="" value="${api_key}">    </div></section>');$.template("wizard_start",'<article class="modal-wizard wizard-start">    <h1>How would you like to start?</h1>    <div class="m-text">        <p>Use our setup wizard to create ready-made dashboards for the most popular services, or start from scratch adding all the widgets you need.</p>    </div>    <div class="actions layout-2">        <div class="col">            <a href="#wizard/dashboard/choose_service" class="btn btn-submit left">Setup wizard</a>        </div>        <div class="col">            <a href="#wizard/dashboard/manual_setup" class="btn btn-submit right">Manual setup</a>        </div>    </div></article>');
$.template("background_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Hold on a second...</strong></p>        <p>Custom backgrounds are not included in your plan, upgrade now to unlock this feature, and many others</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("slot_line_chart_header_legend",'<span class="legend label-${layout}">${subtitle} </span>');$.template("directory_group_detail_item",'<li>    <a class="${kind} m-widget-kind-icon"></a></li>');$.template("slot_counter_trend",'<section class="slot s-counter-trend ${data_source_kind}">    <p class="value"></p>    <p class="subtitle">${subtitle}</p>    <p class="delta"></p></section>');$.template("slot_histogram",'<section class="slot s-histogram ${data_source_kind}">    <ol class="histogram"></ol></section>');
$.template("slot_image_full_item",'<div class="picture ${klass}" style="background-image: url(\'${source}\')">    <div class="caption">${caption}</div></div>');$.template("dashboard_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Should we take this to the next level?</strong></p>        <p>You have reached the limit of dashboards for your plan. Upgrade now for more dashboards, more widgets and other enhanced functionality.</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("widget_feedback",'<div class="pane feedback">    <section>        <div class="form">            <div class="titles">                <p>From:</p>                <p>Subject:</p>            </div>            <div class="values">                <p>${name}</p>                <p>${subject}</p>            </div>            <textarea></textarea>        </div>        <div class="sent">            <h1>Thanks, your feedback has been sent.</h1>        </div>    </section>    <button type="submit" class="send btn btn-submit full">send feedback</button></div>');
$.template("slot_current_time",'<section class="slot current-time ${data_source_kind}">    <p class="city"></p>    <p>        <strong class="time"></strong>        <span class="am_pm"></span>    </p></section>');$.template("directory_group_item",'<a href="#directory/${service}/${group}" class="${service}{{if needs_upgrade}} disabled{{/if}}">    <span class="images images-${total_images}">    {{each(i, img) images}}        <img src="/static/dashboard/img/previews/${img}.png"/>    {{/each}}    </span>    <h4>${name}</h4>    <p>${description}</p></a>');
$.template("select_multiple",'<select multiple class="field-${name} ${klass}"        {{if load_service_params}}data-placeholder="Loading..."{{/if}}        {{if placeholder}}data-default-text="${placeholder}"{{else}}data-default-text="Select some options"{{/if}}>    {{each(i, option) options}}    <option value="${option.value}" {{if $.inArray(option.value, $data.value) >= 0 }}selected="selected"{{/if}}>${option.display_name}</option>    {{/each}}</select>');$.template("public_info",'<menu id="public-info">    <ul>        <li>            <h1>            ${label}            </h1>        </li>        <li>            <ul class="actions">                {{if can_use_tvmode}}                <li>                    <a href="#tvmode" class="tvmode">                        <i class="icon-tvmode"></i>                    </a>                </li>                {{/if}}                {{if !no_branding}}                <li>                    <a href="http://ducksboard.com" class="ducksboard" title="ducksboard.com" target="_blank">                        <i class="icon-ducksboard"></i>                    </a>                </li>                {{/if}}            </ul>        </li>    </ul></menu>{{if is_sponsored}}     <div class="corner">        <a href="http://ducksboard.com" target="_blank">            Track your KPIs with <strong>Ducksboard</strong>        </a>    </ldiv{{/if}}');
$.template("account_api_key",'<div class="api-key pane"><section>    <h1>You can use your API key to control every part of the dashboard</h1>    <a class="docs" target="_blank" href="http://dev.ducksboard.com/apidoc/">Check out our API documentation!</a></section><div class="button-wrap">    <button type="submit" class="reset btn btn-submit full">generate new key</button></div></div>');$.template("dashboard_twilio_create",'<article class="service-board-setup twilio {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo twilio"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the Twilio account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service twilio new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your Twilio account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Which account do you want the dashboard for?</legend>                <input type="button" class="create small" value="ok!" />                <input class="subaccounts-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("wizard_manual_setup",'<article class="modal-wizard">    <h1>Manual setup</h1>    <a href="#" class="close">close</a>    <div class="m-text">        <ul>            <li>Easily add ready made widgets</li>            <li>Organize your widgets on Dashboards</li>            <li>Share your Dashboards</li>        </ul>    </div>    <a href="#directory" class="btn btn-submit hovered">Open widgets directory &raquo;</a></article>');$.template("integration_ticket",'<article id="integration-ticket">    <header>        <hgroup>            <h1>New support ticket</h1>        </hgroup>        <a class="close" href="#directory">go back to the widgets</a>    </header>    <section>        <div class="form">            <dl>                <dt>from:</dt>                <dd>${name}</dd>                <dt>to:</dt>                <dd>support@ducksboard.com</dd>                <dt>subject:</dt>                <dd class="subject">Integration request</dd>            </dl>            <textarea placeholder="what widget would you like to see?"></textarea>        </div>        <div class="sent">            <h1>Thanks, your request has been received!</h1>        </div>    </section>    <button type="submit" class="send btn btn-submit full">create request</button></article>');
$.template("widget_error",'<div class="error">    {{if !is_public}}    <div class="background"></div>    <div class="message">        <p>${message}</p>        <div class="actions">            {{if uses_external_authentication}}            <a class="authorize btn btn-ico-option">                <i class="icon-sync"></i>                <span>Relink<br>account</span>            </a>            {{/if}}            <a class="preferences btn btn-ico-trans"><i class="icon-settings"></i></a>        </div>    </div>    {{/if}}</div>');
$.template("slot_image_full",'<section class="slot s-image-full ${data_source_kind}">    <div class="picture empty">        <ul>            <li class="placeholder">No image yet</li>        </ul>    </div></section>');$.template("directory_custom_detail",'<article id="custom-detail" class="m-directory custom-widget-detail">    <header>        <hgroup>            <h1>Add a custom widget</h1>        </hgroup>        <a class="close" href="#">close</a>        <a class="back" href="#custom">Go back to the widgets</a>    </header>    <nav>        <a class="previous"></a>        <a class="next"></a>    </nav>    <div class="groups slidster">        <div class="viewport">            <ul></ul>        </div>    </div></article>');
$.template("services_settings",'<div class="services pane">    <section class="account-list">        <h1>External accounts</h1>        <ul></ul>    </section>    <section class="form">        <a class="cancel" href="#">cancel</a>        <input type="button" class="send" value="connect" />    </section></div>');$.template("select_months",'<select class="field-month">    <option value="1"{{if $data.value === "1"}} selected="selected"{{/if}}>January</option>    <option value="2"{{if $data.value === "2"}} selected="selected"{{/if}}>February</option>    <option value="3"{{if $data.value === "3"}} selected="selected"{{/if}}>March</option>    <option value="4"{{if $data.value === "4"}} selected="selected"{{/if}}>April</option>    <option value="5"{{if $data.value === "5"}} selected="selected"{{/if}}>May</option>    <option value="6"{{if $data.value === "6"}} selected="selected"{{/if}}>June</option>    <option value="7"{{if $data.value === "7"}} selected="selected"{{/if}}>July</option>    <option value="8"{{if $data.value === "8"}} selected="selected"{{/if}}>August</option>    <option value="9"{{if $data.value === "9"}} selected="selected"{{/if}}>September</option>    <option value="10"{{if $data.value === "10"}} selected="selected"{{/if}}>October</option>    <option value="11"{{if $data.value === "11"}} selected="selected"{{/if}}>November</option>    <option value="12"{{if $data.value === "12"}} selected="selected"{{/if}}>December</option></select>');
$.template("slot_leaderboard_trend_item",'<tr>    <td><div title="${name}">${name}</div></td>    {{each values}}        <td class="value"><div title="${$value}">${$value}</div></td>    {{/each}}    <td class="trend">        <span class="${trend}">${trend}</span>    </td></tr>');$.template("widget_create_account",'<section class="create-account">    <div class="dialog">        <h1>You need to link an account to the widget so it knows where to take data from</h1>        {{if create_tip}}        <h1>{{html create_tip}}</h1>        {{/if}}        <div class="form"/>        <button type="submit" class="send btn btn-submit full">{{if uses_external_authentication}}go to the authentication page{{else}}link the widget to this account{{/if}}</button>    </div>    <div class="loading">        <h1>Please wait while the newly linked account is being created...</h1>    </div>    <div class="failure">        <h1>You need to link an account to the widget so it knows where to take data from</h1>        <div>            <h2>OOOPS :(</h2>            <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?            </p>            <a>C\'mon, try again</a>        </div>    </div></section>');
$.template("wizard_choose_service",'<article class="modal-wizard wizard-choose-service">    <h1>Choose a service to fill your dashboard with</h1>    <a class="close" href="#">close</a>    <ul class="services-grid">        {{each(i, service) services}}        <li>            <a {{if needs_upgrade}}class="disabled"{{else}}href="#wizard/dashboard/connect/${slug}"{{/if}}>                <strong class="serv-logo ${slug}">${name}</strong>            </a>        </li>        {{/each}}    </ul></article>');
$.template("gridster_container",'<li data-col="${col}" data-row="${row}" data-sizex="${sizex}" data-sizey="${sizey}"></li>');$.template("widget_advanced",'<section class="advanced pane">    <h1>These settings are aimed at technical users. Check the documentation when in doubt.</h1>    <div class="scroller">        <ul class="subsections"></ul>    </div></section>');$.template("widget_panicboard",'<li class="panicboard-embed">    <h3>EMBED THIS WIDGET ON PANIC STATUS BOARD</h3>    <div class="mod-embed enabled">        <p class="description">Copy this URL into the Do-It-Yourself configuration panel.</p>        \t        <div class="snippet">            <input class="embed-code" type="text" value="${url}" disabled="disabled">            <div class="actions">                <a href="panicboard://?url=${url_encoded}&panel=diy&sourceDisplayName=Ducksboard" class="btn btn-action lightdark no-link">                    <span>Add to<br/>Status Board</span>                </a>            </div>        </div>    </div></li>');
$.template("slot_leaderboard_item",'<tr>    <td><div title="${name}">${name}</div></td>    {{each values}}        <td class="value"><div title="${$value}">${$value}</div></td>    {{/each}}</tr>');$.template("slot_line_chart",'<section class="slot s-chart ${extra_classes} fake">    <div class="timespan">        <div class="canvas"></div>    </div>    <ul class="legend"></ul></section>');$.template("slot_map",'<section class="slot s-map s-interactive ${data_source_kind}">    <div class="iframe border"></div>    <div class="actions">        <span class="dragger btn btn btn-ico-trans"><i class="icon-move"></i><span class="accessible">Drag</span></span>        <a href="#settings/widget/id" class="settings btn btn-ico-trans"><i class="icon-settings"></i><span class="accessible">Settings</span></a>    </div>    <span class="fake-border border-left"></span>    <span class="fake-border border-top"></span>    <span class="fake-border border-right"></span>    <span class="fake-border border-bottom"></span>    <div class="map"></div></section>');
$.template("dashboard_salesforce_create",'<article class="service-board-setup salesforce {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo salesforce"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the salesforce account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service salesforce new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your salesforce account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Create your dashboard!</legend>                <input type="button" class="create small" value="ok!" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("dashboard_settings",'<article id="dashboard-preferences">    <header{{if is_new}} class="new"{{/if}}>        <section class="title">            <h1>${label}</h1>            <fieldset>                <input type="text" class="field-label" name="label" placeholder="dashboard name" maxlength="60" value="${label}" />                <input class="save" type="button" value="save" />            </fieldset>        </section>        <a class="btn btn-ico-action rename">            <i class="icon-edit"></i>            <span>Change<br>name</span>        </a>        {{if !is_last}}        <a href="#" class="btn btn-ico-action delete{{if is_new}} disabled{{/if}}">            <i class="icon-trash"></i>            <span>Delete<br>dashboard</span>        </a>        {{/if}}        <a class="close" href="#">close</a>    </header>    <nav class="sidebar">        {{if !is_new}}        <a><span>Share this<br/>dashboard</span></a>        {{/if}}        {{if is_editable}}        <a><span>Backgrounds</span></a>        {{/if}}        {{if is_editable_and_not_new}}        <a><span>TV mode reel</span></a>        {{/if}}    </nav>    {{if !is_new}}    <section class="pane access-tokens">        <h1>You can share the generated links to give others read-only access to this dashboard.</h1>        <ul></ul>    </section>    {{/if}}    <section class="pane backgrounds">        <ul></ul>    </section>    <section class="pane tvmode-reel">    </section></article>');
$.template("account_close",'<div class="pane account-close">    <section>        <h1>Sniff Sniff... we hate when someone leaves</h1>        <h2>Could you help us understand why? Hopefully we could improve things and see you again soon!</h2>        <div class="error" style="display:none;">            Oops, you forgot to tell us the reason        </div>        <ul>            <li>                <input type="radio" name="reason[]" id="reason-1">                <label for="reason-1">Too expensive</label>                <div>                    <textarea placeholder="Tell us a bit more about your project, and we will try to help. We started in a kitchen not long time ago, and understand that sometimes any extra expense is a luxury"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-2">                <label for="reason-2">Too difficult, need more support</label>                <div>                    <textarea placeholder="Tell us what you need, and we will work together with you to set everything up"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-3">                <label for="reason-3">Something not working</label>                <div>                    <textarea placeholder="Sorry to hear, please let us know what it is, and we will start working on it"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-4">                <label for="reason-4">Not for me</label>                <div>                    <textarea placeholder="That\'s fine, happens sometimes. Tell us what you need, and we will try to help. Even if it\'s not with Ducksboard, we could recommend you another solution"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-5">                <label for="reason-5">Missing features</label>                <div>                    <textarea placeholder="Tell us what you need, there are new features coming up constantly, and a few betas being tested at any time"></textarea>                </div>            </li>            <li>                <input type="radio" name="reason[]" id="reason-6">                <label for="reason-6">Other</label>                <div>                    <textarea placeholder="Appreciate if you could explain why..."></textarea>                </div>            </li>        </ul>        <p>*Closing an account cannot be undone. We will completely delete all your work, data, passwords, API keys, etc.. You might need to remove the external connection form external services you previously authorised it with.</p>    </section>    <div class="button-wrap">        <a href="#support" class="submit btn btn-submit">Request help</a>        <button type="submit" class="submit-and-close btn btn-submit "><span>Submit & delete<br><em>(Careful, this cannot be undone)</em></span></button>    </div></div>');
$.template("timespans_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not so fast...</strong></p>        <p>Your plan is limited to 30 days data retention. Upgrade to a higher plan to get unlimited data retention, and unlock many other features.</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("widget_urls",'<section class="urls pane">    <h1>Send your data to the following URL{{if slots.length > 1}}s{{/if}}:</h1>    <ul class="${widget.kind}">        {{each slots}}        <div class="slot-number">${$value}</div>        {{/each}}    </ul>    <a class="docs" target="_blank" href="http://{{if widget.wiki_url}}dev.ducksboard.com/${widget.wiki_url}{{else}}doc.ducksboard.com{{/if}}">Check out our API documentation!</a></section>');$.template("directory_service_widgets",'<article id="directory" class="m-directory service-widgets">    <header>        <hgroup>            <h1>${name} widgets</h1>        </hgroup>        <a class="close" href="#">close</a>        <a class="back" href="#directory">Go back to the services</a>    </header>    {{if description && external_service && !using_service}}    <div class="service-description">        <span class="serv-logo ${id}"></span>        <p>${description}</p>        {{if signup_url}}        <a href="${signup_url}" target="_blank" class="btn-try">            {{if button_text}}                ${button_text}            {{else}}                Try ${name}            {{/if}}        </a>        {{/if}}    </div>    {{/if}}    <div class="groups slidster">        <div class="viewport">            <ul>            </ul>        </div>    </div></article>');
$.template("slot_completion_progress",'<section class="slot s-completion s-completion-progress ${data_source_kind}">    <div class="preview">        <p>            <span class="value">...</span>            <span class="subtitle">${subtitle}</span>        </p>    </div>    <div class="bar">        <ol class="refs"></ol>        <div class="mask">            <span class="value" style="background-color: #EEC96D;">                <span class="label">                    <strong>2165\u20ac</strong>                    <span></span>                </span>            </span>        </div>    </div></section>');
$.template("widget_contextual",'<ul class="contextual">    {{each(i, action) actions}}    <li {{if action.css_class}}class="${action.css_class}"{{/if}}>        <a href="${action.url}" class="btn btn-ico-option {{if action.icon }} with-ico {{/if}}" {{if action.external || $item.is_external(action.url)}}target="_blank"{{/if}}>            {{if action.icon }} <i class="icon-${action.icon}"></i> {{/if}}            <span>${action.label}</span>        </a>    </li>    {{/each}}</ul>');
$.template("select",'<select class="field-${name} ${klass}"        {{if load_service_params}}data-placeholder="Loading..."{{/if}}         {{if placeholder}}data-default-text="${placeholder}"{{else}}data-default-text="Select some options"{{/if}}>    {{each(i, option) options}}    <option value="${option.value}" {{if $data.value === option.value}}selected="selected"{{/if}}>${option.display_name}</option>    {{/each}}</select>');$.template("directory_dashboard_detail",'<li>    <div class="kind serviceboard">        <img src="/static/dashboard/img/dashboards/${kind}_dashboard.png"/>        <div class="info">            <h2>${name}</h2>            <p class="description">{{html description}}</p>        </div>        {{if needs_upgrade}}            <a class="add">Upgrade your account</a>        {{else}}            <a class="add" href="#new/dashboard/${kind}">Add this dashboard</a>        {{/if}}    </div></li>');
$.template("confirmation_info",'<div class="confirm">    <a class="cancel" href="#">cancel</a>    {{if previous_plan}}    <h1>Here are the details of your plan change:</h1>    <p>Your current plan</p>    <div class="current preview plan-item">      <span class="name">${previous_plan.name}</span>      <a class="link" href="http://ducksboard.com/pricing" target="_blank">See plan details</a>      <span class="total cost">            {{if is_eu}}${previous_totals.stages.before_vat_eur}{{else}}${previous_totals.stages.usd_now}{{/if}}{{if previous_plan.payment_frequency === \'monthly\'}}<span class="monthly">/mo</span>{{else}}<span class="yearly">/year</span>{{/if}}      </span>      {{if previous_totals.vat}}          <span class="vat">Your Country\'s VAT will be included</span>      {{/if}}    </div>    <p>Your new plan</p>    <div class="preview plan-item">      <span class="name">${plan.name}</span>      <a class="link" href="http://ducksboard.com/pricing" target="_blank">See plan details</a>      <span class="total cost">            {{if is_eu}}${totals.stages.before_vat_eur}{{else}}${totals.stages.usd_now}{{/if}}{{if plan.payment_frequency === \'monthly\'}}<span class="monthly">/mo</span>{{else}}<span class="yearly">/year</span>{{/if}}      </span>      {{if totals.vat}}          <span class="vat">Your country\'s VAT will be included</span>      {{/if}}    </div>    <p>{{if previous_plan.code === plan.code}}The payment frequency will be adjusted at the end of the current billing cycle.{{else}}The change will take place immediately and we will prorate the subscription cost.{{/if}}</p>    {{else}}    <h1>        Almost there! Here are the details of your <b>${plan.payment_frequency}</b> subscription to the ${plan.name} plan:    </h1>    <p class="features">        <strong>This plan includes:</strong><br/>        ${plan.description}    </p>    <table>        <tbody>            {{if totals}}                <tr class="first">                    <td>Plan price</td>                    <td class="num">                        {{if is_eu}}                            ${totals.eur_plan}                        {{else}}                            ${totals.usd_plan}                        {{/if}}                    </td>                </tr>                {{if coupon }}                    <tr>                        <td>Coupon: ${coupon_description}</td>                        <td class="num">                            {{if is_eu}}                                ${totals.eur_coupon}                            {{else}}                                ${totals.usd_coupon}                            {{/if}}                        </td>                    </tr>                {{/if}}                <tr class="total">                    <td>TOTAL</td>                    <td class="num">                    {{if is_eu}}                        ${totals.stages.before_vat_eur}                    {{else}}                        ${totals.stages.usd_now}                    {{/if}}                    </td>                </tr>            {{/if}}        </tbody>    </table>    {{if totals.vat}}    <p class="vat">Your Country\'s VAT will be included</p>    {{/if}}    {{/if}}</div>');
$.template("slot_counter_bar",'<section class="slot s-counter-bar ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("sinfonier_upgrade",'<article id="upgrade-required" class="sinfonier">    <header>        <hgroup>            <h1>Powered by Sinfonier</h1>        </hgroup>        <a class="close" href="#">close</a>    </header></article>');$.template("autocomplete",'{{if tooltip}}    <div class="tip-input tip-input-autocomplete tip-${name}-container">        <input type="text" class="autocomplete field-${name}" value="${value}" {{if load_service_params}}data-loading="Loading..."{{/if}} {{if placeholder}}data-placeholder="${placeholder}"{{/if}} placeholder="Loading..." {{if maxlength}}maxlength="${maxlength}"{{/if}} />        <input type="button" class="tip" value="tip" tabindex="9999" />        <div class="tooltip">            <span>{{html tooltip}}</span>            <a class="close-tooltip">close</a>        </div>    </div>{{else}}    <input type="text" class="autocomplete field-${name}" value="${value}" {{if placeholder}}data-placeholder="${placeholder}"{{/if}} {{if load_service_params}}data-loading="Loading..."{{/if}}  placeholder="Loading..." {{if maxlength}}maxlength="${maxlength}"{{/if}} />{{/if}}');
$.template("slot_gauge",'<section class="slot s-gauge ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("directory_customs",'<article id="directory" class="m-directory custom-widgets">    <header>        <hgroup>            <h1>Custom widgets: Visualise your own data</h1>            <a class="close" href="#">close</a>        </hgroup>        <a class="back" href="#directory">Go back to the widgets for internet services</a>    </header>    <div class="groups slidster">        <div class="viewport">            <ul></ul>        </div>    </div></article>');
$.template("slot_data_image",'<fieldset class="image-data">    <div class="preview">        <span class="caption"></span>        <span class="upload-bar hidden">            <span>0%</span>        </span>        <span class="loading"></span>        <span class="img-preview-wrap"></span>        <div class="file">            <label for="upload-image">CHANGE IMAGE</label>            <input type="file" id="upload-image" value="" accept="image/*">        </div>        <span class="cancel">cancel</span>    </div>    <span class="button">send</span></fieldset>');
$.template("input_text",'{{if tooltip}}    <div class="tip-input tip-${name}-container">        <input type="text" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} {{if maxlength}}maxlength="${maxlength}"{{/if}} />        <input type="button" class="tip" value="tip" tabindex="9999" />        <div class="tooltip">            <span>{{html tooltip}}</span>            <a class="close-tooltip">close</a>        </div>    </div>{{else}}    <input type="text" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} {{if maxlength}}maxlength="${maxlength}"{{/if}} />{{/if}}');
$.template("slot_line_chart_legend",'<li class="label-${layout}"><span class="icon"></span><strong>${subtitle}</strong></li>');$.template("new_access_token",'<fieldset class="token-data">    <input type="text" class="field-description" name="description" placeholder="description" />    <input type="password" class="field-password" name="password" placeholder="optional password" />    <button type="submit" class="create btn btn-text-dark">create</button></fieldset>');$.template("slot_url",'<strong class="main-title">Display data in this widget</strong><strong class="title">PUSH DATA TO THIS URL</strong><div class="m-editable-url">    <span class="index">${layout}</span>    <div class="url">${url_pattern}<span class="label" title="${label}">${label}</span></div>    <input type="button" class="more tip" value="..." />    <div class="tooltip">        ${url_pattern}<span class="label">${label}</span>        <a class="close-tooltip">close</a>    </div>    <fieldset>        <input type="text" class="field-label" name="label" placeholder="label name" value="${label}" />        <input type="button" class="cancel" value="X" />    </fieldset></div>{{if has_send_data }}<div class="send-value-wrap">    <p class="send-value">        <strong class="title">... OR SET THE VALUE MANUALLY</strong>    </p></div>{{/if}}<strong class="title">... OR PULL DATA FROM THIS URL</strong><div class="pull-url"></div>');
$.template("plan_list",'<h3>Your current plan</h3>{{tmpl($data, {plan_list: true}) "plan_info"}}<h3 class="left">You have options. Choose a plan that fits you.</h3><ul class="plan-list">    {{each available_plans}}        <li class="plan-item" id="${$value.label}">            <div class="detail">            <span class="name">${$value.name}</span>            <span class="description"><a href="http://ducksboard.com/pricing" target="_blank">See plan details</a></span>            <span id="${$value.monthly_plan_code}"                  class="recurly-plan total cost{{if plan.code === $value.monthly_plan_code}} selected{{/if}}">                {{if is_eu}}${$value.monthly_eur_cost}{{else}}${$value.monthly_usd_cost}{{/if}}<span class="monthly">/mo</span>            </span>            </div>            <div class="error">            Hold on a sec...<br/>            <span></span>            </div>        </li>    {{/each}}</ul>');
$.template("trial_expired",'<article id="trial-expired">    <header>        <hgroup>            <h1>Your trial has sadly come to an end</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        {{if from_notification }}        <p>Sorry, this feature is not available for your current account plan. {{if is_whitelabel }}<a href="https://whitelabel.ducksboard.local/#subscription" target="_blank">{{else}}<a href="#settings/account/subscription">{{/if}}Upgrade</a> your account plan to access many more features and make the most out of your dashboard!</p>        {{else}}        <p>Your free trial period is over, but your widgets will be updated daily. Unfortunately, you can no longer create new widgets or dashboards, neither will TV Mode or sharing be functional.</p>        <p>If you want all these features back, upgrade your account <a href="#settings/account/subscription">here</a>!</p>        {{/if}}        {{if is_whitelabel }}        <a class="btn-upsell" href="https://whitelabel.ducksboard.local/#subscription" target="_blank">        {{else}}        <a class="btn-upsell" href="#settings/account/subscription">        {{/if}}            <strong>Upgrade your account</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("widget_data_api_fieldset",'{{if has_multiple_slots}}<a class="edit">Edit</a>{{/if}}<fieldset></fieldset>');$.template("slot_countdown_detail",'<span class="hour">${hours}</span>:<span class="minutes">${minutes}</span>:<span class="seconds">${seconds}</span>');$.template("slot_counter_box",'<section class="slot s-counter-box ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("slot_status",'<section class="slot s-status ${data_source_kind}">    <p class="${subtitle_size}">        <strong class="subtitle">${subtitle}</strong>        <time class="time"></time>    </p>    <strong class="status" data-status="${status}">${status}</strong></section>');
$.template("upload_error",'<div class="error" style="display: none;">    <p>${errors}</p>    {{if details}}<span>${details}</span>{{/if}}    <a href="#">Retry</a></div>');$.template("fieldset","<fieldset></fieldset>");$.template("widget_notifications_slider",'<div class="m-notifications-list">    <strong class="title">YOUR ALERTS</strong>    <div class="slidster">        <div class="viewport">            <ul>            </ul>        </div>    </div></div>');$.template("widget_count_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not so fast...</strong></p>        <p>Your Free Trial includes 10 widgets. Upgrade now to access more widgets, more dashboards and a whole bunch of enhanced features</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("background_item",'<li {{if user_managed}} class="custom" {{/if}}>    <a{{if is_current}} class="selected"{{/if}}>        {{if user_managed}}            <div class="background custom preview">                <span class="placeholder">YOUR WALLPAPER</span>                <span class="upload-bar"></span>                <span class="upload-percent"></span>                <span class="loading"></span>            </div>        {{else}}        <div class="background ${slug} preview" />        {{/if}}        <div class="label">            {{if user_managed}}                {{if can_upload_background}}                <label for="upload-file-1">{{if uploaded_background}}CHANGE{{else}}UPLOAD A NEW ONE{{/if}}</label>                <span class="file">                    <input type="file" id="upload-file-1" value="" accept="image/*">                </span>                {{else}}                <span class="upgrade">{{if uploaded_background}}CHANGE{{else}}UPLOAD A NEW ONE{{/if}}</span>                {{/if}}            {{else}}                ${label}            {{/if}}        </div>    </a></li>');
$.template("slot_counter_subtitle",'<section class="slot counter-subtitle ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("slot_image_item",'<img src="${source}" class="${klass}" />');$.template("directory_latest",'<div class="m-latest-widgets slidster">    <strong class="title">Check our latest widgets</strong>    <div class="viewport">        <ul>            {{each(i, widget) widgets}}                <li>                    <a href="#directory/${widget.service}/${widget.group}" class="serv-sq-logo ${widget.service}">                        <strong>${widget.name}</strong>                        <span>${widget.description}</span>                    </a>                </li>            {{/each}}        </ul>    </div></div>');
$.template("directory_custom_services_item",'<a href="#custom" class="${id} {{if needs_upgrade}} disabled{{/if}}">    <h4 class="serv-logo ${id}">${name}</h4></a>');$.template("directory_dashboard_item",'<a href="#directory/${kind}/${kind}" class="serviceboard ${kind} {{if needs_upgrade === true}} disabled{{/if}}">    <h4>${name} Dashboard</h4>    <p>${description}</p>    <img src="/static/dashboard/img/dashboards/${kind}_small_dashboard.png"/></a>');$.template("input_textarea",'<textarea class="field-${name}" {{if placeholder}}placeholder="${placeholder}"{{/if}} >${value}</textarea>');
$.template("dashboard_to_copy_item",'<li id="${dashboard_id}">    <a href="" class="btn btn-ico-option">        <i class="icon-copy-from"></i>        <span>to dashboard<br/>${$item.truncate(30)}</span>    </a></li>');$.template("widget",'<article class="widget w${width}x${height} w${width}xh w${height}xv ${css_classes} ${kind}">    <div class="inner">        <header>            <h4>${title}</h4>        </header>    </div></article>');$.template("accounts_per_service_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Should we take this to the next level?</strong></p>        <p>You have reached the limit of linked accounts per service for your plan. Upgrade now to link more accounts</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("coupon_info",'<div class="coupon-info">    {{if discount_applied }}        <div class="applied">            coupon applied<br/>            (${coupon_code})<br/>            <span class="link">remove it?</span>            {{if coupon_description}}                <div class="info-tooltip">                    i                    <span class="tooltip">${coupon_description}</span>                </div>            {{/if}}        </div>    {{else}}        {{if !coupon_error }}            {{if applying_coupon}}                <div class="applying">                    APPLYING COUPON...                </div>            {{else}}                <a class="show">i have a coupon code</a>            {{/if}}        {{else}}            <div class="invalid show">                Invalid/Expired code<br/>                <span>Please check and try again</span>            </div>        {{/if}}        <div class="apply">            <input type="text" class="field-coupon_code" value="" placeholder="Code" />            <a>apply</a>        </div>    {{/if}}</div>');
$.template("select_timezones",'<select class="field-timezone">    <optgroup label="most used">    {{each(i, timezone) most_used_timezones}}        <option value="${timezone}" {{if $data.value === timezone}}selected="selected"{{/if}}>${timezone}</option>    {{/each}}    </optgroup>    <optgroup label="all timezones">    {{each(i, timezone) timezones}}        <option value="${timezone}" {{if $data.value === timezone}}selected="selected"{{/if}}>${timezone}</option>    {{/each}}    </optgroup></select>');
$.template("access_token",'<li>    <a href="${link}" target="_blank" class="link{{if has_password}} protected{{/if}}">        <div class="description">${description}{{if has_password}} <i class="icon-lock"></i>{{/if}}</div>    </a>    <a href="#" class="delete btn btn-ico-action-medium btn-light no-link">        <i class="icon-trash icon-small"></i>        <span>Delete</span>    </a>    {{if has_flash}}    <div class="copy">        <div class="zeroclipboard-container"></div>        <a class="btn btn-ico-action-medium btn-light no-link">            <i class="icon-copy-to-clipboard icon-small"></i>            <span>Copy<br>link</span>        </a>    </div>    {{/if}}</li>');
$.template("slot_counter_pin",'<section class="slot s-counter-pin ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p></section>');$.template("widget_notification_form",'<div class="notification-form">    <a href="#" class="back">Go back to the list</a>    <h1>Alerts get you notified when something important happens:</h1>    <strong class="title">{{if edition}}Edit alert{{else}}Create a new alert{{/if}}</strong>    <form class="m-notification-form" action="" method="post" accept-charset="utf-8">        <fieldset>            <div class="if">                <strong>if</strong>                <select class="field-layout" {{if edition }}disabled="disabled"{{/if}}>                    {{each(i, s) slots}}                    <option value="${s.layout}" {{if s.layout === $data.layout }}selected="selected"{{/if}}>${s.subtitle}</option>                    {{/each}}                </select>                <select class="field-condition_kind"></select>                <div class=\'condition-params\'></div>            </div>            <div class="then">                <strong>then</strong>                <select class="field-action_kind">                    {{each(i, k) action_kinds}}                    <option value="${k.kind}" {{if k.kind === $data.action_kind }}selected="selected"{{/if}}>${k.display_name}</option>                    {{/each}}                </select>                <div class=\'action-params\'></div>            </div>        </fieldset>        <button type="submit">Save alert</button>    </form>    <div class="server-error"></div></div>');
$.template("wizard_what_is_next",'<article class="modal-wizard whats-next">    <h1>Done! What is next?</h1>    <a class="close" href="#">close</a>    <div class="m-text">        <ul>            <li>Add/remove widgets</li>            <li>Add new dashboards to organize your widgets</li>            <li>Share your dashboards</li>        </ul>    </div>    <a href="#dashboard/${slug}" class="btn btn-submit hovered">Go to my dashboard</a></article>');$.template("dashboard_current",'<a id="change-dashboard">    <span>${label}</span></a>');
$.template("post-it","<textarea>Welcome![br][br]Why don't you add some more widgets?.[br]You can also customize and share your dashboard once it's ready.[br][br][appurl href=https://app.ducksboard.com/#directory]Create a widget now![/appurl][br]</textarea>");$.template("api_key",'<div class="api-key"><span>Your API key</span><input type="text" readonly value="${api_key}"></div>');$.template("interpolator",'<div class="f-interpolator">    <label class="f-label" for="field-${name}">{{html label}}</label>    <textarea readonly class="f-readonly" id="field-${name}">${placeholder}</textarea>    <span class="f-interpolator-info"></span></span>');
$.template("account_creds",'<div class="pane account">    <section>        <fieldset>            <input type="text" class="field-first_name" name="first_name" placeholder="your new first name" value="${first_name}" maxlength="80" />            <input type="text" class="field-last_name" name="first_name" placeholder="your new last name" value="${last_name}" maxlength="80" />            <input type="text" class="field-email" name="email" placeholder="your new email" value="${email}" maxlength="80" />            <input type="text" class="field-company" name="company" placeholder="your company name" value="${company}" maxlength="80" />            <input type="text" class="field-position" name="position" placeholder="your position" value="${position}" maxlength="80" />            {{tmpl "select_countries"}}            {{tmpl "select_timezones"}}            <input type="password" class="field-current_password" name="current_password" placeholder="current password" maxlength="180" />            <input type="password" class="field-new_password" name="new_password" placeholder="new password" maxlength="180" />        </fieldset>    </section>    <button type="submit" class="save btn btn-submit full">save settings for your account</button></div>');
$.template("slot_data",'<fieldset {{if unit}}class="has-unit"{{/if}}>{{if unit}}<span class="unit">${unit}</span>{{/if}}<span class="button">send</span></fieldset>');$.template("slot_completion_gauge",'<section class="slot s-completion s-completion-gauge ${data_source_kind}">    <p class="value">...</p>    <p class="subtitle">${subtitle}</p>    <ol class="refs"></ol></section>');$.template("slot_leaderboard_status_item",'<tr>    <td><div title="${name}">${name}</div></td>    {{each values}}        <td class="value"><div title="${$value}">${$value}</div></td>    {{/each}}    <td class="status">        <span class="${status}">${status}</span>    </td></tr>');
$.template("directory_services",'<article id="directory" class="m-directory directory-index">    <header>        <hgroup>            <h1>Add a widget</h1>            <a class="close" href="#">close</a>            {{if plan === \'developer\'}}                <h3>You\'re using a Developer Account. You can create unlimited custom widgets using our API as well as Github widgets in a dashboard.  If you\'d like to enjoy the widgets marketplace or create more dashboards, please <a href="#settings/account/subscription">upgrade your account</a>.</h3>            {{else}}                {{if has_trial_account === false && has_premium_directory === false}}                <h3>Some of the services are not allowed in your current plan. If you\'d like to unlock all the widgets, please <a href="#settings/account/subscription">upgrade your account</a>.</h3>                {{else}}                    <h3>                        We have ${total} widgets, search or browse to find the ones you need.<br>                        <a class="integration-request" href="#integration"><span>Missing a widget?</span> tell us and we\'ll add it</a>                    </h3>                {{/if}}            {{/if}}        </hgroup>    </header>    <form class="filters">        <div class="field-input">            <i class="icon-tip light icon-search"></i>            <input type="text" id="directory-search" class="search" placeholder="search here">        </div>        <select class="category">            <option value="all">All Categories</option>            {{each(i, category) categories}}            <option value="${category.id}">${category.name}</option>            {{/each}}        </select>    </form>    <div class="groups slidster">        <div class="viewport">            <ul></ul>        </div>    </div>    <nav class="other-sections">        <a href="#custom" class="btn-section customs">            <strong>Send data through our API</strong>            <span>Create custom widgets to display your own data</span>        </a>        \x3c!-- <a href="#kpi" class="btn-section kpis">            <strong>KPI widgets</strong>            <span>Use APIs to show your own data</span>        </a> --\x3e    </nav>    <div class="latest-widgets"></div></article>');
$.template("slot_iframe",'<section class="slot s-iframe s-interactive ${data_source_kind}">    <div class="iframe border"></div>    <div class="actions">        <span class="dragger btn btn btn-ico-trans"><i class="icon-move"></i><span class="accessible">Drag</span></span>        <a href="#settings/widget/id" class="settings btn btn-ico-trans"><i class="icon-settings"></i><span class="accessible">Settings</span></a>    </div>    <span class="fake-border border-left"></span>    <span class="fake-border border-top"></span>    <span class="fake-border border-right"></span>    <span class="fake-border border-bottom"></span>    <span class="helper-layer"></span>    <div class="iframe">        <iframe class="empty" src="" scrolling="no"></iframe>    </div></section>');
$.template("directory_custom_categories",'<article id="directory-custom" class="m-directory">    <header>        <hgroup>            <h1>Add a custom widget</h1>            <h3>Track your own data with our pre-made widgets</h3>        </hgroup>        <a class="close" href="#">close</a>    </header>    <ul>        {{each(i, category) categories}}        <li class="${category.id}">            <a href="#custom/${category.id}">${category.name}</a>            <p class="description">${category.description}</p>        </li>        {{/each}}    </ul>    <a class="back" href="#directory">Go back to widgets for internet services</a></article>');
$.template("widget_content",'<section class="content pane">    <h1>Configure the content this widget will show:</h1>    \x3c!-- FF doesn\'t implement overflow property on fieldsets --\x3e    <div class="scroller">        <fieldset></fieldset>    </div></section>');$.template("welcome_widget",'<li class="welcome-widget not-draggable">    <article class="widget no-border w1x2 post-it" style="display: block;">        <div class="inner">            <p>Welcome!</p>            {{if plan_label === \'whitelabel\' }}            <p>You are creating a dashboard for your client.<br />Remember you can customize the background image and create as many widgets as you need.<br />Don\'t forget to give your client their username and password so that they can access their gorgeous dashboard!</p>            {{else}}            <p>This is your empty dashboard, brimming with possibility.<br>Why don\'t you grab some widgets and light this thing up?<br><br><a href="#directory">Create a widget now!</a></p>            {{/if}}            <p class="ttr">The ducks</p>        </div>    </article></li>');
(function(e,k,h,f){function b(a,b){this.options=h.extend({},g,b);this.options.start_at=parseInt(this.options.start_at);this.current=this.options.start_at;this.$el=a instanceof h?a:h(a);this.el=a[0];this.$viewport=this.$el.find(".viewport");this.$slider=this.$viewport.find("> ul");this.$el.data("slidster",this);this.init()}var g={pager_insertion:"append",pager_info:!0,pager_info_item:"widgets",pager_info_insertion:"append",loop:!0,items_per_slide:3,start_at:1,on_slide_show:null,arrows:{next:{css_class:"next",
html:"Next"},prev:{css_class:"prev",html:"Prev"}}},a=Modernizr.csstransforms3d;e=b.prototype;e.init=function(){this.$all_items=this.$items=this.$slider.find("> li");if(!(0>=this.$items.length)){this.items=this.$items.length;this.item_width=this.$items.outerWidth(!0);this.items_width=this.items*this.item_width;this.viewport_width=this.$viewport.width();this.item_margin=parseInt(this.$items.css("margin-right"));this.items_per_slide=Math.max(1,Math.floor(this.viewport_width/this.item_width));this.all_items_per_slide=
Math.ceil(this.viewport_width/this.item_width);this.slides=Math.ceil(this.items/this.items_per_slide);this.slide_width=this.items_per_slide*this.item_width;this.real_slide_width=this.all_items_per_slide*this.item_width;this.elements=this.$items.children().length;this.max_width=this.items_width-this.item_margin;this.max_left=-(this.max_width-this.viewport_width);if(this.loop=this.options.loop&&this.max_width>this.viewport_width)this.$appended=this.$items.slice(0,this.all_items_per_slide),this.$preppended=
this.$items.slice(this.items-this.all_items_per_slide,this.items),this.$preppended_clone=this.$preppended.clone().prependTo(this.$slider),this.$appended_clone=this.$appended.clone().appendTo(this.$slider),this.$all_items=this.$items.add(this.$appended_clone).add(this.$preppended_clone),this.max_left=-(this.max_width-this.viewport_width+this.real_slide_width);this.pager();this.events();var d=this.get_offset(this.options.start_at||1);a?this.$slider.css("transform","translate3d("+d+"px, 0, 0)"):this.$slider.css("left",
d);1===this.options.start_at&&1<this.slides&&this.$el.addClass("first-item");this.$el.addClass("ready")}};e.events=function(){this.$next.on("click",h.proxy(this.next,this));this.$prev.on("click",h.proxy(this.prev,this));this.$anchors.on("click",h.proxy(this.go,this))};e.pager=function(){this.$controls&&this.$controls.remove();var a="";this.$prev=h('<a href="#" class="'+this.options.arrows.prev.css_class+'">'+this.options.arrows.prev.html+"</a>");this.$next=h('<a href="#" class="'+this.options.arrows.next.css_class+
'">'+this.options.arrows.next.html+"</a>");for(var b=0;b<this.slides;b++)a+='<a href="#"><span>'+(b+1)+"</span></a>";this.$controls=h('<div class="controls">'+a+"</div>");this.$anchors=this.$controls.find("a");this.$controls.append(this.$next).prepend(this.$prev);this.$controls.insertAfter(this.$viewport);this.options.pager_info&&this.pager_counter();return this};e.pager_counter=function(){var a='<div class="pager-info"><span class="current">'+(this.slides?this.current:0)+'</span><span class="total"> of '+
this.slides+"</span> "+('<span class="elements">('+this.elements+" "+this.options.pager_info_item+")</span>")+"</div>";if(this.$pager_info){var b=this.$pager_info;this.$pager_info=h(a);b.replaceWith(this.$pager_info)}else this.$pager_info=h(a).insertAfter(this.$controls);1>=this.slides?(this.$pager_info.hide(),this.$controls&&this.$controls.hide()):(this.$pager_info.show(),this.$controls&&this.$controls.show());return this};e.go=function(a){a.target&&(a=this.$anchors.index(a.currentTarget)+1);this.loop?
(a>this.slides+1&&(a=this.slides+1),0>a&&(a=0)):a=this.get_index(a);this.displace_to(a);this.current=this.get_index(a);this.options.pager_info&&this.pager_counter();this.$el.removeClass("first-item last-item");if(1>=this.slides)return this;1===a||a===this.slides+1?this.$el.addClass("first-item"):a!==this.slides&&0!==a||this.$el.addClass("last-item");return this};e.displace_to=function(d){var b=this.get_offset(d),e=0===d,f=d===this.slides+1;this.$slider.addClass("animation");d=function(){var d;this.$slider.removeClass("animation");
this.loop&&(e?(d=this.get_offset(this.slides),a?this.$slider.css("transform","translate3d("+d+"px, 0, 0)"):this.$slider.css("left",d),this.current=this.slides):f&&(d=this.get_offset(1),a?this.$slider.css("transform","translate3d("+d+"px, 0, 0)"):this.$slider.css("left",d),this.current=1),this.options.on_slide_show&&this.options.on_slide_show.call(this,this.current,e,f),this.options.pager_info&&this.pager_counter())};a?(this.$slider.transEnd("slidster",h.proxy(d,this)),this.$slider.css("transform",
"translate3d("+b+"px, 0, 0)")):this.$slider.animate({left:b},500,h.proxy(d,this))};e.get_offset=function(a){var b=this.loop?-((a-1)*this.slide_width)-this.real_slide_width:-((a-1)*this.slide_width),b=Math.max(this.max_left,b);0<b&&(b=0);this.loop&&(0==a&&(b=-(this.real_slide_width-this.$viewport.width()-this.item_margin)),a==this.slides+1&&(b=-(this.max_width+this.slide_width+(this.all_items_per_slide-this.items_per_slide)*this.item_width)));return b};e.get_index=function(a){a>this.slides&&(a=this.slides);
1>a&&(a=1);return a};e.next=function(a){a&&a.target&&a.preventDefault();this.go(this.current+1);return this};e.prev=function(a){a&&a.target&&a.preventDefault();this.go(this.current-1);return this};e.add=function(a){this.$slider.append(a);this.refresh();return this};e.add_item=function(a,b){var e=this.$items.last(),f=e.children().length;0<f&&f<b?e.append(a):this.add(h("<li />").append(a));this.refresh();return this};e.remove=function(a){this.$el.find(a).remove();this.refresh();return this};e.remove_item=
function(a,b){0===a.siblings().length?a.parent().remove():a.remove();this.refresh();return this};e.empty=function(){this.$slider.empty();return this};e.destroy=function(){this.$slider.empty();return this};e.refresh=function(){this.$preppended_clone&&this.$preppended_clone.remove();this.$appended_clone&&this.$appended_clone.remove();this.init();return this};e.search=function(a){this.$items_back||(this.$items_back=this.$items);if(a&&a.length){var b=this.$items_back.clone().children(':icontains("'+a+
'")'),e=1,f,g=h([]);b.each(h.proxy(function(a,d){1===e&&(f=h("<li></li>"));f=f.prepend(d);if(a===b.length-1||e===this.options.items_per_slide)g=g.add(f),e=0;e++},this));this.empty();this.add(g)}else this.empty(),this.add(this.$items_back)};h.fn.Slidster=b})(window,document,jQuery);
(function(e,k){e.fn.jPlayer=function(f){var b="string"===typeof f,g=Array.prototype.slice.call(arguments,1),a=this;f=!b&&g.length?e.extend.apply(null,[!0,f].concat(g)):f;if(b&&"_"===f.charAt(0))return a;b?this.each(function(){var d=e.data(this,"jPlayer"),b=d&&e.isFunction(d[f])?d[f].apply(d,g):d;if(b!==d&&b!==k)return a=b,!1}):this.each(function(){var a=e.data(this,"jPlayer");a?a.option(f||{}):e.data(this,"jPlayer",new e.jPlayer(f,this))});return a};e.jPlayer=function(f,b){if(arguments.length){this.element=
e(b);this.options=e.extend(!0,{},this.options,f);var g=this;this.element.bind("remove.jPlayer",function(){g.destroy()});this._init()}};e.jPlayer.emulateMethods="load play pause";e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";e.jPlayer.emulateOptions="muted volume";e.jPlayer.reservedEvent="ready flashreset resize repeat error warning";e.jPlayer.event={ready:"jPlayer_ready",flashreset:"jPlayer_flashreset",resize:"jPlayer_resize",repeat:"jPlayer_repeat",
click:"jPlayer_click",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",
timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"};e.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata loadeddata canplay canplaythrough ratechange".split(" ");e.jPlayer.pause=function(){e.each(e.jPlayer.prototype.instances,function(e,b){b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})};e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,
sepHour:":",sepMin:":",sepSec:""};e.jPlayer.convertTime=function(f){var b=new Date(1E3*f),g=b.getUTCHours();f=b.getUTCMinutes();b=b.getUTCSeconds();g=e.jPlayer.timeFormat.padHour&&10>g?"0"+g:g;f=e.jPlayer.timeFormat.padMin&&10>f?"0"+f:f;b=e.jPlayer.timeFormat.padSec&&10>b?"0"+b:b;return(e.jPlayer.timeFormat.showHour?g+e.jPlayer.timeFormat.sepHour:"")+(e.jPlayer.timeFormat.showMin?f+e.jPlayer.timeFormat.sepMin:"")+(e.jPlayer.timeFormat.showSec?b+e.jPlayer.timeFormat.sepSec:"")};e.jPlayer.uaBrowser=
function(e){e=e.toLowerCase();var b=/(opera)(?:.*version)?[ \/]([\w.]+)/,g=/(msie) ([\w.]+)/,a=/(mozilla)(?:.*? rv:([\w.]+))?/;e=/(webkit)[ \/]([\w.]+)/.exec(e)||b.exec(e)||g.exec(e)||0>e.indexOf("compatible")&&a.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}};e.jPlayer.uaPlatform=function(e){var b=e.toLowerCase(),g=/(android)/,a=/(mobile)/;e=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(b)||[];b=/(ipad|playbook)/.exec(b)||!a.exec(b)&&g.exec(b)||[];e[1]&&(e[1]=e[1].replace(/\s/g,
"_"));return{platform:e[1]||"",tablet:b[1]||""}};e.jPlayer.browser={};e.jPlayer.platform={};var h=e.jPlayer.uaBrowser(navigator.userAgent);h.browser&&(e.jPlayer.browser[h.browser]=!0,e.jPlayer.browser.version=h.version);h=e.jPlayer.uaPlatform(navigator.userAgent);h.platform&&(e.jPlayer.platform[h.platform]=!0,e.jPlayer.platform.mobile=!h.tablet,e.jPlayer.platform.tablet=!!h.tablet);e.jPlayer.prototype={count:0,version:{script:"2.1.0",needFlash:"2.1.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",
supplied:"mp3",preload:"metadata",volume:.8,muted:!1,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",
repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},fullScreen:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1E3},loop:!1,repeat:function(f){f.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullScreen:{msie:/msie [0-6]/,ipad:/ipad.*?os [0-4]/,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3](?!.*?mobile)/,
android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,webos:/webos/,playbook:/playbook/},verticalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},
optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,
media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,
media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"}},_init:function(){var f=this;this.element.empty();this.status=e.extend({},this.status);this.internal=e.extend({},this.internal);this.internal.domNode=this.element.get(0);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=
[];this.options.volume=this._limitValue(this.options.volume,0,1);e.each(this.options.supplied.toLowerCase().split(","),function(a,b){var g=b.replace(/^\s+|\s+$/g,"");if(f.format[g]){var h=!1;e.each(f.formats,function(a,d){if(g===d)return h=!0,!1});h||f.formats.push(g)}});e.each(this.options.solution.toLowerCase().split(","),function(a,b){var g=b.replace(/^\s+|\s+$/g,"");if(f.solution[g]){var h=!1;e.each(f.solutions,function(a,d){if(g===d)return h=!0,!1});h||f.solutions.push(g)}});this.internal.instance=
"jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:k});this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:k});this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:k,swf:this.options.swfPath+
(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf":"")});this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:k});e.each(e.jPlayer.event,function(a,b){f.options[a]!==k&&(f.element.bind(b+".jPlayer",f.options[a]),f.options[a]=k)});this.require.audio=!1;this.require.video=!1;e.each(this.formats,function(a,b){f.require[f.format[b].media]=!0});this.options=this.require.video?e.extend(!0,
{},this.optionsVideo,this.options):e.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){f.status.video&&
!f.status.waitForPlay||f.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=e("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(){f._trigger(e.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,
this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10);this.html.canPlay={};this.flash.canPlay={};e.each(this.formats,function(a,b){f.html.canPlay[b]=
f.html[f.format[b].media].available&&""!==f.htmlElement[f.format[b].media].canPlayType(f.format[b].codec);f.flash.canPlay[b]=f.format[b].flashCanPlay&&f.flash.available});this.html.desired=!1;this.flash.desired=!1;e.each(this.solutions,function(a,b){if(0===a)f[b].desired=!0;else{var g=!1,h=!1;e.each(f.formats,function(a,d){f[f.solutions[0]].canPlay[d]&&("video"===f.format[d].media?h=!0:g=!0)});f[b].desired=f.require.audio&&!g||f.require.video&&!h}});this.html.support={};this.flash.support={};e.each(this.formats,
function(a,b){f.html.support[b]=f.html.canPlay[b]&&f.html.desired;f.flash.support[b]=f.flash.canPlay[b]&&f.flash.desired});this.html.used=!1;this.flash.used=!1;e.each(this.solutions,function(a,b){e.each(f.formats,function(a,d){if(f[b].support[d])return f[b].used=!0,!1})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);this.html.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:e.jPlayer.error.NO_SOLUTION,
context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show());if(this.flash.used){var b,g="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.browser.msie&&8>=Number(e.browser.version)){g=['<param name="movie" value="'+this.internal.flash.swf+
'" />','<param name="FlashVars" value="'+g+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];b=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0"></object>');for(var a=0;a<g.length;a++)b.appendChild(document.createElement(g[a]))}else a=function(a,b,e){var f=document.createElement("param");
f.setAttribute("name",b);f.setAttribute("value",e);a.appendChild(f)},b=document.createElement("object"),b.setAttribute("id",this.internal.flash.id),b.setAttribute("data",this.internal.flash.swf),b.setAttribute("type","application/x-shockwave-flash"),b.setAttribute("width","1"),b.setAttribute("height","1"),a(b,"flashvars",g),a(b,"allowscriptaccess","always"),a(b,"bgcolor",this.options.backgroundColor),a(b,"wmode",this.options.wmode);this.element.append(b);this.internal.flash.jq=e(b)}this.html.used&&
(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",
height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){f._trigger(e.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();this.html.used&&!this.flash.used&&setTimeout(function(){f.internal.ready=!0;f.version.flash="n/a";f._trigger(e.jPlayer.event.repeat);f._trigger(e.jPlayer.event.ready)},100);this._updateNativeVideoControls();this._updateInterface();this._updateButtons(!1);this._updateAutohide();this._updateVolume(this.options.volume);this._updateMute(this.options.muted);
this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();e.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");e.each(this.css.jq,function(e,b){b.length&&b.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");
this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),!0}catch(b){return!1}},_uaBlocklist:function(f){var b=navigator.userAgent.toLowerCase(),g=!1;e.each(f,function(a,d){if(d&&d.test(b))return g=!0,!1});return g},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=
!1,this.status.noFullScreen=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},
_addHtmlEventListeners:function(f,b){var g=this;f.preload=this.options.preload;f.muted=this.options.muted;f.volume=this.options.volume;f.addEventListener("progress",function(){b.gate&&(g._getHtmlStatus(f),g._updateInterface(),g._trigger(e.jPlayer.event.progress))},!1);f.addEventListener("timeupdate",function(){b.gate&&(g._getHtmlStatus(f),g._updateInterface(),g._trigger(e.jPlayer.event.timeupdate))},!1);f.addEventListener("durationchange",function(){b.gate&&(g.status.duration=this.duration,g._getHtmlStatus(f),
g._updateInterface(),g._trigger(e.jPlayer.event.durationchange))},!1);f.addEventListener("play",function(){b.gate&&(g._updateButtons(!0),g._html_checkWaitForPlay(),g._trigger(e.jPlayer.event.play))},!1);f.addEventListener("playing",function(){b.gate&&(g._updateButtons(!0),g._seeked(),g._trigger(e.jPlayer.event.playing))},!1);f.addEventListener("pause",function(){b.gate&&(g._updateButtons(!1),g._trigger(e.jPlayer.event.pause))},!1);f.addEventListener("waiting",function(){b.gate&&(g._seeking(),g._trigger(e.jPlayer.event.waiting))},
!1);f.addEventListener("seeking",function(){b.gate&&(g._seeking(),g._trigger(e.jPlayer.event.seeking))},!1);f.addEventListener("seeked",function(){b.gate&&(g._seeked(),g._trigger(e.jPlayer.event.seeked))},!1);f.addEventListener("volumechange",function(){b.gate&&(g.options.volume=f.volume,g.options.muted=f.muted,g._updateMute(),g._updateVolume(),g._trigger(e.jPlayer.event.volumechange))},!1);f.addEventListener("suspend",function(){b.gate&&(g._seeked(),g._trigger(e.jPlayer.event.suspend))},!1);f.addEventListener("ended",
function(){b.gate&&(e.jPlayer.browser.webkit||(g.htmlElement.media.currentTime=0),g.htmlElement.media.pause(),g._updateButtons(!1),g._getHtmlStatus(f,!0),g._updateInterface(),g._trigger(e.jPlayer.event.ended))},!1);f.addEventListener("error",function(){b.gate&&(g._updateButtons(!1),g._seeked(),g.status.srcSet&&(clearTimeout(g.internal.htmlDlyCmdId),g.status.waitForLoad=!0,g.status.waitForPlay=!0,g.status.video&&!g.status.nativeVideoControls&&g.internal.video.jq.css({width:"0px",height:"0px"}),g._validString(g.status.media.poster)&&
!g.status.nativeVideoControls&&g.internal.poster.jq.show(),g.css.jq.videoPlay.length&&g.css.jq.videoPlay.show(),g._error({type:e.jPlayer.error.URL,context:g.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1);e.each(e.jPlayer.htmlEvent,function(a,d){f.addEventListener(this,function(){b.gate&&g._trigger(e.jPlayer.event[d])},!1)})},_getHtmlStatus:function(e,b){var g=0,a=0,d=0,h=0;e.duration&&(this.status.duration=e.duration);g=e.currentTime;a=0<this.status.duration?100*g/
this.status.duration:0;"object"===typeof e.seekable&&0<e.seekable.length?(d=0<this.status.duration?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,h=100*e.currentTime/e.seekable.end(e.seekable.length-1)):(d=100,h=a);b&&(a=h=g=0);this.status.seekPercent=d;this.status.currentPercentRelative=h;this.status.currentPercentAbsolute=a;this.status.currentTime=g;this.status.readyState=e.readyState;this.status.networkState=e.networkState;this.status.playbackRate=e.playbackRate;this.status.ended=
e.ended},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(f,b,g){f=e.Event(f);f.jPlayer={};f.jPlayer.version=e.extend({},this.version);f.jPlayer.options=e.extend(!0,{},this.options);f.jPlayer.status=e.extend(!0,{},this.status);f.jPlayer.html=e.extend(!0,{},this.html);f.jPlayer.flash=e.extend(!0,{},this.flash);b&&(f.jPlayer.error=e.extend({},b));g&&(f.jPlayer.warning=e.extend({},g));this.element.trigger(f)},jPlayerFlashEvent:function(f,b){if(f===
e.jPlayer.event.ready)if(!this.internal.ready)this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=b.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(e.jPlayer.event.repeat),this._trigger(f);else if(this.flash.gate){if(this.status.srcSet){var g=this.status.currentTime,a=this.status.paused;
this.setMedia(this.status.media);0<g&&(a?this.pause(g):this.play(g))}this._trigger(e.jPlayer.event.flashreset)}if(this.flash.gate)switch(f){case e.jPlayer.event.progress:this._getFlashStatus(b);this._updateInterface();this._trigger(f);break;case e.jPlayer.event.timeupdate:this._getFlashStatus(b);this._updateInterface();this._trigger(f);break;case e.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(f);break;case e.jPlayer.event.pause:this._updateButtons(!1);this._trigger(f);break;
case e.jPlayer.event.ended:this._updateButtons(!1);this._trigger(f);break;case e.jPlayer.event.click:this._trigger(f);break;case e.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);
this._updateButtons(!1);this._error({type:e.jPlayer.error.URL,context:b.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking();this._trigger(f);break;case e.jPlayer.event.seeked:this._seeked();this._trigger(f);break;case e.jPlayer.event.ready:break;default:this._trigger(f)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent;this.status.currentPercentRelative=e.currentPercentRelative;this.status.currentPercentAbsolute=
e.currentPercentAbsolute;this.status.currentTime=e.currentTime;this.status.duration=e.duration;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_updateButtons:function(e){e!==k&&(this.status.paused=!e,this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())));this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullScreen?
(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullScreen?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+
"%");this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%");this.css.jq.currentTime.length&&this.css.jq.currentTime.text(e.jPlayer.convertTime(this.status.currentTime));this.css.jq.duration.length&&this.css.jq.duration.text(e.jPlayer.convertTime(this.status.duration))},_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},
_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.flash.active=!1},setMedia:function(f){var b=this,g=!1,a=this.status.media.poster!==f.poster;this._resetMedia();this._resetGate();this._resetActive();e.each(this.formats,function(a,h){var k="video"===b.format[h].media;e.each(b.solutions,function(a,d){if(b[d].support[h]&&b._validString(f[h])){var e="html"===d;k?(e?(b.html.video.gate=!0,b._html_setVideo(f),b.html.active=
!0):(b.flash.gate=!0,b._flash_setVideo(f),b.flash.active=!0),b.css.jq.videoPlay.length&&b.css.jq.videoPlay.show(),b.status.video=!0):(e?(b.html.audio.gate=!0,b._html_setAudio(f),b.html.active=!0):(b.flash.gate=!0,b._flash_setAudio(f),b.flash.active=!0),b.css.jq.videoPlay.length&&b.css.jq.videoPlay.hide(),b.status.video=!1);g=!0;return!1}});if(g)return!1});g?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(f.poster)||(a?this.htmlElement.poster.src=f.poster:this.internal.poster.jq.show()),
this.status.srcSet=!0,this.status.media=e.extend({},f),this._updateButtons(!1),this._updateInterface()):this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.flash.active&&
this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},play:function(e){e="number"===typeof e?e:NaN;this.status.srcSet?this.html.active?this._html_play(e):this.flash.active&&this._flash_play(e):this._urlNotSetError("play")},videoPlay:function(e){this.play()},
pause:function(e){e="number"===typeof e?e:NaN;this.status.srcSet?this.html.active?this._html_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},pauseOthers:function(){var f=this;e.each(this.instances,function(b,e){f.element!==e&&e.data("jPlayer").status.srcSet&&e.jPlayer("pause")})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100);
this.status.srcSet?this.html.active?this._html_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(f){this.options.muted=f;this.html.used&&this._html_mute(f);this.flash.used&&this._flash_mute(f);this.html.video.gate||this.html.audio.gate||(this._updateMute(f),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){e=e===k?!0:!!e;this._muted(e)},unmute:function(e){e=e===k?!0:!!e;this._muted(!e)},_updateMute:function(e){e===
k&&(e=this.options.muted);this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(f){f=this._limitValue(f,0,1);this.options.volume=f;this.html.used&&this._html_volume(f);this.flash.used&&this._flash_volume(f);this.html.video.gate||this.html.audio.gate||(this._updateVolume(f),this._trigger(e.jPlayer.event.volumechange))},
volumeBar:function(e){if(this.css.jq.volumeBar.length){var b=this.css.jq.volumeBar.offset(),g=e.pageX-b.left,a=this.css.jq.volumeBar.width();e=this.css.jq.volumeBar.height()-e.pageY+b.top;b=this.css.jq.volumeBar.height();this.options.verticalVolume?this.volume(e/b):this.volume(g/a)}this.options.muted&&this._muted(!1)},volumeBarValue:function(e){this.volumeBar(e)},_updateVolume:function(e){e===k&&(e=this.options.volume);e=this.options.muted?0:e;this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),
this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*e+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(f){var b=
this;this.options.cssSelectorAncestor=f;this._removeUiClass();this.ancestorJq=f?e(f):[];f&&1!==this.ancestorJq.length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:f,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();e.each(this.options.cssSelector,function(e,a){b._cssSelector(e,a)})},_cssSelector:function(f,b){var g=this;"string"===typeof b?e.jPlayer.prototype.options.cssSelector[f]?
(this.css.jq[f]&&this.css.jq[f].length&&this.css.jq[f].unbind(".jPlayer"),this.options.cssSelector[f]=b,this.css.cs[f]=this.options.cssSelectorAncestor+" "+b,this.css.jq[f]=b?e(this.css.cs[f]):[],this.css.jq[f].length&&this.css.jq[f].bind("click.jPlayer",function(a){g[f](a);e(this).blur();return!1}),b&&1!==this.css.jq[f].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[f],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[f].length+" found for "+f+" method.",
hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:f,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:b,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(e){if(this.css.jq.seekBar){var b=this.css.jq.seekBar.offset();e=e.pageX-b.left;b=this.css.jq.seekBar.width();
this.playHead(100*e/b)}},playBar:function(e){this.seekBar(e)},repeat:function(){this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(f){this.options.loop!==f&&(this.options.loop=f,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},currentTime:function(e){},duration:function(e){},gui:function(e){},noSolution:function(e){},option:function(f,b){var g=f;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"===typeof f){var a=f.split(".");if(b===k){for(var g=
e.extend(!0,{},this.options),d=0;d<a.length;d++)if(g[a[d]]!==k)g=g[a[d]];else return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:f,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),k;return g}for(var d=g={},h=0;h<a.length;h++)h<a.length-1?(d[a[h]]={},d=d[a[h]]):d[a[h]]=b}this._setOptions(g);return this},_setOptions:function(f){var b=this;e.each(f,function(e,a){b._setOption(e,a)});return this},_setOption:function(f,b){var g=this;switch(f){case "volume":this.volume(b);
break;case "muted":this._muted(b);break;case "cssSelectorAncestor":this._cssSelectorAncestor(b);break;case "cssSelector":e.each(b,function(a,d){g._cssSelector(a,d)});break;case "fullScreen":this.options[f]!==b&&(this._removeUiClass(),this.options[f]=b,this._refreshSize());break;case "size":this.options.fullScreen||this.options[f].cssClass===b.cssClass||this._removeUiClass();this.options[f]=e.extend({},this.options[f],b);this._refreshSize();break;case "sizeFull":this.options.fullScreen&&this.options[f].cssClass!==
b.cssClass&&this._removeUiClass();this.options[f]=e.extend({},this.options[f],b);this._refreshSize();break;case "autohide":this.options[f]=e.extend({},this.options[f],b);this._updateAutohide();break;case "loop":this._loop(b);break;case "nativeVideoControls":this.options[f]=e.extend({},this.options[f],b);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case "noFullScreen":this.options[f]=
e.extend({},this.options[f],b);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullScreen=this._uaBlocklist(this.options.noFullScreen);this._restrictNativeVideoControls();this._updateButtons();break;case "noVolume":this.options[f]=e.extend({},this.options[f],b);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case "emulateHtml":this.options[f]!==b&&((this.options[f]=b)?this._emulateHtmlBridge():
this._destroyHtmlBridge())}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullScreen?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=
this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&
this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var e=this,b=function(){e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId);e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};
this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullScreen&&this.options.autohide.full||!this.options.fullScreen&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",b),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",b),this.css.jq.gui.hide()):this.css.jq.gui.show())},
fullScreen:function(){this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_html_initMedia:function(){this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&this._html_load();this._trigger(e.jPlayer.event.timeupdate)},_html_setAudio:function(f){var b=this;e.each(this.formats,function(e,a){if(b.html.support[a]&&f[a])return b.status.src=f[a],b.status.format[a]=!0,b.status.formatType=a,!1});this.htmlElement.media=this.htmlElement.audio;this._html_initMedia()},
_html_setVideo:function(f){var b=this;e.each(this.formats,function(e,a){if(b.html.support[a]&&f[a])return b.status.src=f[a],b.status.format[a]=!0,b.status.formatType=a,!1});this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(f.poster)?f.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia()},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",
height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var b=this;this._html_load();this.htmlElement.media.play();if(!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(g){this.internal.htmlDlyCmdId=setTimeout(function(){b.play(e)},
100);return}this._html_checkWaitForPlay()},_html_pause:function(e){var b=this;0<e?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);this.htmlElement.media.pause();if(!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(g){this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(e)},100);return}0<e&&this._html_checkWaitForPlay()},_html_playHead:function(e){var b=this;this._html_load();try{if("object"===typeof this.htmlElement.media.seekable&&0<this.htmlElement.media.seekable.length)this.htmlElement.media.currentTime=
e*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100;else if(0<this.htmlElement.media.duration&&!isNaN(this.htmlElement.media.duration))this.htmlElement.media.currentTime=e*this.htmlElement.media.duration/100;else throw"e";}catch(g){this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(e)},100);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&
this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_volume:function(e){this.html.audio.available&&(this.htmlElement.audio.volume=e);this.html.video.available&&(this.htmlElement.video.volume=e)},_html_mute:function(e){this.html.audio.available&&(this.htmlElement.audio.muted=e);this.html.video.available&&(this.htmlElement.video.muted=e)},_flash_setAudio:function(f){var b=this;try{e.each(this.formats,
function(a,d){if(b.flash.support[d]&&f[d]){switch(d){case "m4a":case "fla":b._getMovie().fl_setAudio_m4a(f[d]);break;case "mp3":b._getMovie().fl_setAudio_mp3(f[d])}b.status.src=f[d];b.status.format[d]=!0;b.status.formatType=d;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(g){this._flashError(g)}},_flash_setVideo:function(f){var b=this;try{e.each(this.formats,function(a,d){if(b.flash.support[d]&&f[d]){switch(d){case "m4v":case "flv":b._getMovie().fl_setVideo_m4v(f[d])}b.status.src=
f[d];b.status.format[d]=!0;b.status.formatType=d;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(g){this._flashError(g)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(b){this._flashError(b)}this.status.waitForLoad=
!1;this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(b){this._flashError(b)}0<e&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(b){this._flashError(b)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&
(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(b){this._flashError(b)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(e){var b=!1,g;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e),b=!0}catch(a){}else navigator.plugins&&
0<navigator.mimeTypes.length&&(g=navigator.plugins["Shockwave Flash"])&&navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=e&&(b=!0);return b},_validString:function(e){return e&&"string"===typeof e},_limitValue:function(e,b,g){return e<b?b:e>g?g:e},_urlNotSetError:function(f){this._error({type:e.jPlayer.error.URL_NOT_SET,context:f,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(f){var b;b=this.internal.ready?"FLASH_DISABLED":
"FLASH";this._error({type:e.jPlayer.error[b],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[b]+f.message,hint:e.jPlayer.errorHint[b]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(f){this._trigger(e.jPlayer.event.error,f);this.options.errorAlerts&&this._alert("Error!"+(f.message?"\n\n"+f.message:"")+(f.hint?"\n\n"+f.hint:"")+"\n\nContext: "+f.context)},_warning:function(f){this._trigger(e.jPlayer.event.warning,k,f);this.options.warningAlerts&&this._alert("Warning!"+
(f.message?"\n\n"+f.message:"")+(f.hint?"\n\n"+f.hint:"")+"\n\nContext: "+f.context)},_alert:function(e){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e)},_emulateHtmlBridge:function(){var f=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(b,e){f.internal.domNode[e]=function(a){f[e](a)}});e.each(e.jPlayer.event,function(b,g){var a=!0;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(d,e){if(e===b)return a=!1});a&&f.element.bind(g+".jPlayer.jPlayerHtml",
function(){f._emulateHtmlUpdate();var a=document.createEvent("Event");a.initEvent(b,!1,!0);f.internal.domNode.dispatchEvent(a)})})},_emulateHtmlUpdate:function(){var f=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(b,e){f.internal.domNode[e]=f.status[e]});e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(b,e){f.internal.domNode[e]=f.options[e]})},_destroyHtmlBridge:function(){var f=this;this.element.unbind(".jPlayerHtml");e.each((e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+
" "+e.jPlayer.emulateOptions).split(/\s+/g),function(b,e){delete f.internal.domNode[e]})}};e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",
NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "};e.jPlayer.errorHint=
{FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",
CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",
CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})(jQuery);
(function(e){function k(b,f,a){var d=a.relative?b.position().top:b.offset().top,h=a.relative?b.position().left:b.offset().left,k=a.position[0],d=d-(f.outerHeight()-a.offset[0]),h=h+(b.outerWidth()+a.offset[1]);/iPad/i.test(navigator.userAgent)&&(d-=e(window).scrollTop());var v=f.outerHeight()+b.outerHeight();"center"==k&&(d+=v/2);"bottom"==k&&(d+=v);k=a.position[1];b=f.outerWidth()+b.outerWidth();"center"==k&&(h-=b/2);"left"==k&&(h-=b);return{top:d,left:h}}function h(b,g){var a=this,d=b.add(a),h,
q=0,v=0,w=b.attr("title"),m=b.attr("data-tooltip"),t=f[g.effect],u,x=b.is(":input"),y=x&&b.is(":checkbox, :radio, select, :button, :submit"),B=b.attr("type"),F=g.events[B]||g.events[x?y?"widget":"input":"def"];if(!t)throw'Nonexistent effect "'+g.effect+'"';F=F.split(/,\s*/);if(2!=F.length)throw"Tooltip: bad events configuration for "+B;b.bind(F[0],function(d){clearTimeout(q);g.predelay?v=setTimeout(function(){a.show(d)},g.predelay):a.show(d)}).bind(F[1],function(d){clearTimeout(v);g.delay?q=setTimeout(function(){a.hide(d)},
g.delay):a.hide(d)});w&&g.cancelDefault&&(b.removeAttr("title"),b.data("title",w));e.extend(a,{show:function(f){if(!h&&(m?h=e(m):g.tip?h=e(g.tip).eq(0):w?h=e(g.layout).addClass(g.tipClass).appendTo(document.body).hide().append(w):(h=b.next(),h.length||(h=b.parent().next())),!h.length))throw"Cannot find tooltip for "+b;if(a.isShown())return a;h.stop(!0,!0);var x=k(b,h,g);g.tip&&h.html(b.data("title"));f=e.Event();f.type="onBeforeShow";d.trigger(f,[x]);if(f.isDefaultPrevented())return a;x=k(b,h,g);
h.css({position:"absolute",top:x.top,left:x.left});u=!0;t[0].call(a,function(){f.type="onShow";u="full";d.trigger(f)});x=g.events.tooltip.split(/,\s*/);h.data("__set")||(h.unbind(x[0]).bind(x[0],function(){clearTimeout(q);clearTimeout(v)}),x[1]&&!b.is("input:not(:checkbox, :radio), textarea")&&h.unbind(x[1]).bind(x[1],function(a){a.relatedTarget!=b[0]&&b.trigger(F[1].split(" ")[0])}),g.tip||h.data("__set",!0));return a},hide:function(b){if(!h||!a.isShown())return a;b=e.Event();b.type="onBeforeHide";
d.trigger(b);if(!b.isDefaultPrevented())return u=!1,f[g.effect][1].call(a,function(){b.type="onHide";d.trigger(b)}),a},isShown:function(a){return a?"full"==u:u},getConf:function(){return g},getTip:function(){return h},getTrigger:function(){return b}});e.each(["onHide","onBeforeShow","onShow","onBeforeHide"],function(d,b){e.isFunction(g[b])&&e(a).bind(b,g[b]);a[b]=function(d){d&&e(a).bind(b,d);return a}})}e.tools=e.tools||{version:"@VERSION"};e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",
predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(b,e,a){f[b]=[e,a]}};var f={toggle:[function(b){var e=this.getConf(),a=this.getTip(),e=e.opacity;1>e&&a.css({opacity:e});a.show();b.call()},function(b){this.getTip().hide();b.call()}],fade:[function(b){var f=
this.getConf();!e.browser.msie||f.fadeIE?this.getTip().fadeTo(f.fadeInSpeed,f.opacity,b):(this.getTip().show(),b())},function(b){var f=this.getConf();!e.browser.msie||f.fadeIE?this.getTip().fadeOut(f.fadeOutSpeed,b):(this.getTip().hide(),b())}]};e.fn.tooltip=function(b){var f=this.data("tooltip");if(f)return f;b=e.extend(!0,{},e.tools.tooltip.conf,b);"string"==typeof b.position&&(b.position=b.position.split(/,?\s/));this.each(function(){f=new h(e(this),b);e(this).data("tooltip",f)});return b.api?
f:this}})(jQuery);
(function(e){var k=e.tools.tooltip;k.dynamic={conf:{classNames:"top right bottom left"}};e.fn.dynamic=function(h){"number"==typeof h&&(h={speed:h});h=e.extend({},k.dynamic.conf,h);var f=e.extend(!0,{},h),b=h.classNames.split(/\s/),g;this.each(function(){var a=e(this).tooltip().onBeforeShow(function(a,h){var k=this.getTip(),v=this.getConf();g||(g=[v.position[0],v.position[1],v.offset[0],v.offset[1],e.extend({},v)]);e.extend(v,g[4]);v.position=[g[0],g[1]];v.offset=[g[2],g[3]];k.css({visibility:"hidden",position:"absolute",
top:h.top,left:h.left}).show();var w=e.extend(!0,{},f),m;m=e(window);var t=m.width()+m.scrollLeft(),u=m.height()+m.scrollTop();m=[k.offset().top<=m.scrollTop(),t<=k.offset().left+k.width(),u<=k.offset().top+k.height(),m.scrollLeft()>=k.offset().left];a:{for(t=m.length;t--;)if(m[t]){t=!1;break a}t=!0}if(!t){m[2]&&(e.extend(v,w.top),v.position[0]="top",k.addClass(b[0]));m[3]&&(e.extend(v,w.right),v.position[1]="right",k.addClass(b[1]));m[0]&&(e.extend(v,w.bottom),v.position[0]="bottom",k.addClass(b[2]));
m[1]&&(e.extend(v,w.left),v.position[1]="left",k.addClass(b[3]));if(m[0]||m[2])v.offset[0]*=-1;if(m[1]||m[3])v.offset[1]*=-1}k.css({visibility:"visible"}).hide()});a.onBeforeShow(function(){var a=this.getConf();this.getTip();setTimeout(function(){a.position=[g[0],g[1]];a.offset=[g[2],g[3]]},0)});a.onHide(function(){this.getTip().removeClass(h.classNames)});ret=a});return h.api?ret:this}})(jQuery);
(function(e,k,h,f){function b(d,b){this.opts=h.extend({},a,b);this.data=this.opts.data;this.$el=h(d);this.init()}var g=h(e),a={data:[],max_results:5E3,regex:function(a){return new RegExp(a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i")}};h.extend(b.prototype,{init:function(){this.focus=this.open=!1;this.set_up_html();this.events()},set_up_html:function(){this.$wrap=this.$el.wrap('<div class="ac-wrap" />').parent();this.$list=h('<ul class="ac-dropdown" />');this.$list.appendTo(k.body);this.hide_results()},
get_size:function(a){a||(a=this.$el);return{offset:a.offset(),input_w:a.outerWidth()-1,input_h:a.outerHeight(),borderbottom_w:parseInt(a.css("border-bottom-width"),10)}},set_list_position:function(){var a=this.$el.closest(".tip-input"),a=a.length?this.get_size(a):this.get_size(this.$el);this.$list.css({left:a.offset.left,top:a.offset.top+a.input_h+a.borderbottom_w,width:a.input_w})},events:function(){this.$el.on("focus.ac keyup.ac",h.proxy(function(){this.focus=!0;this.search();this.show_results()},
this));this.$el.on("click.ac",h.proxy(function(){this.open||this.show_results()},this));this.$el.on("blur.ac",h.proxy(function(){this.focus=!1;this.over_list||this.hide_results()},this));this.$list.on("click.ac","li",h.proxy(this.select_result,this));this.$list.on({"mouseover.ac":h.proxy(function(){this.over_list=!0},this),"mouseout.ac":h.proxy(function(){this.over_list=!1;this.focus||this.hide_results()},this)});g.on("center.fb",h.proxy(this.set_list_position,this));g.on("resize scroll",_.debounce(h.proxy(this.set_list_position,
this),20));this.$el.closest(".scroller").on("scroll",_.debounce(h.proxy(function(){this.$el.blur()},this),70,!0));h(k).bind("keyup.ac",h.proxy(function(a){27==a.keyCode&&this.hide_results()},this))},search:function(a){a=this.$el.val();var b=this.opts.regex(a),e=[];h.each(this.data,h.proxy(function(a,d){b.test(d)&&e.push(d);if(e.length===this.opts.max_results)return!1},this));this.add_results(e);return this},add_results:function(a){a||h.isArray(a)&&a.length||(a=this.data);var b="";h.each(a,function(a,
d){b+="<li>"+d+"</li>"});this.$list=this.$list.html(b);return this},select_result:function(a){a=h(a.target);this.$el.val(a.text());this.hide_results();return this},hide_results:function(){this.$list.hide();this.$el.add(this.$el.closest(".tip-input")).removeClass("open");this.open=!1;return this},show_results:function(){var a=this.$list.children().length;!this.open&&a?(this.set_list_position(),this.$list.show(),this.$el.add(this.$el.closest(".tip-input")).addClass("open"),this.open=!0):!a&&this.open&&
this.hide_results();return this},clean_input:function(){this.$el.val("");return this},set_data:function(a){this.data=a;this.search();return this},destroy:function(){this.$el.off("focus.ac keyup.ac click.ac blur.ac");this.$list.off("click.ac mouseover.ac mouseout.ac");this.$el.closest(".scroller").off("scroll")}});h.fn.autocomplete=function(a){return this.each(function(){var e=h(this);e.data("autocomplete")||e.data("autocomplete",new b(this,a))})}})(window,document,jQuery);
!function(e){function k(){return new Date(Date.UTC.apply(Date,arguments))}var h=function(g,a){this.element=e(g);this.language=a.language||this.element.data("date-language")||"en";this.language=this.language in f?this.language:"en";this.isRTL=f[this.language].rtl||!1;this.format=b.parseFormat(a.format||this.element.data("date-format")||"mm/dd/yyyy");this.isInline=!1;this.isInput=this.element.is("input");this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on"):!1)&&this.element.find("input").length;
this.component&&0===this.component.length&&(this.component=!1);this._attachEvents();this.forceParse=!0;"forceParse"in a?this.forceParse=a.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));this.picker=e(b.template).appendTo(this.isInline?this.element:"body").on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)});this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu");
this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));this.autoclose=!1;"autoclose"in a?this.autoclose=a.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose"));this.keyboardNavigation=!0;"keyboardNavigation"in a?this.keyboardNavigation=a.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation"));
this.viewMode=this.startViewMode=0;switch(a.startView||this.element.data("date-start-view")){case 2:case "decade":this.viewMode=this.startViewMode=2;break;case 1:case "year":this.viewMode=this.startViewMode=1}this.todayBtn=a.todayBtn||this.element.data("date-today-btn")||!1;this.todayHighlight=a.todayHighlight||this.element.data("date-today-highlight")||!1;this.weekStart=(a.weekStart||this.element.data("date-weekstart")||f[this.language].weekStart||0)%7;this.weekEnd=(this.weekStart+6)%7;this.startDate=
-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(a.startDate||this.element.data("date-startdate"));this.setEndDate(a.endDate||this.element.data("date-enddate"));this.setDaysOfWeekDisabled(a.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();this.isInline&&this.show()};h.prototype={constructor:h,_events:[],_attachEvents:function(){this._detachEvents();this.isInput?this._events=[[this.element,
{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var b=0,a,d;b<this._events.length;b++)a=this._events[b][0],d=this._events[b][1],
a.on(d)},_detachEvents:function(){for(var b=0,a,d;b<this._events.length;b++)a=this._events[b][0],d=this._events[b][1],a.off(d);this._events=[]},_hide_on_blur:function(b){0===e(b.target).closest(".datepicker").length&&this.hide()},show:function(b){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.update();this.place();e(window).on("resize",e.proxy(this.place,this));b&&(b.stopPropagation(),b.preventDefault());e(document).on("mousedown",e.proxy(this._hide_on_blur,
this));this.element.trigger({type:"show",date:this.date})},hide:function(b){this.picker.hide();e(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();this.isInput||e(document).off("mousedown",this._hide_on_blur);this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue();this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents();this.picker.remove();delete this.element.data().datepicker},
getDate:function(){var b=this.getUTCDate();return new Date(b.getTime()+6E4*b.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(b){this.setUTCDate(new Date(b.getTime()-6E4*b.getTimezoneOffset()))},setUTCDate:function(b){this.date=b;this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):(this.component&&this.element.find("input").val(b),this.element.data("date",b))},getFormattedDate:function(e){void 0===e&&(e=this.format);return b.formatDate(this.date,
e,this.language)},setStartDate:function(e){this.startDate=e||-Infinity;-Infinity!==this.startDate&&(this.startDate=b.parseDate(this.startDate,this.format,this.language));this.update();this.updateNavArrows()},setEndDate:function(e){this.endDate=e||Infinity;Infinity!==this.endDate&&(this.endDate=b.parseDate(this.endDate,this.format,this.language));this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[];e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=
this.daysOfWeekDisabled.split(/,\s*/));this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var b=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+10,a=this.component?this.component.offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:a.top+d,left:a.left,
zIndex:b})}},update:function(){var e,a=!1;arguments&&arguments.length&&("string"===typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],a=!0):e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();this.date=b.parseDate(e,this.format,this.language);a&&this.setValue();e=this.viewDate;this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date);this.fill();e&&e.getTime()!=this.viewDate.getTime()&&
this.element.trigger({type:"changeDate",date:this.viewDate,ins:this})},fillDow:function(){for(var b=this.weekStart,a="<tr>";b<this.weekStart+7;)a+='<th class="dow">'+f[this.language].daysMin[b++%7]+"</th>";a+="</tr>";this.picker.find(".datepicker-days thead").append(a)},fillMonths:function(){for(var b="",a=0;12>a;)b+='<span class="month">'+f[this.language].monthsShort[a++]+"</span>";this.picker.find(".datepicker-months td").html(b)},fill:function(){var g=new Date(this.viewDate),a=g.getUTCFullYear(),
d=g.getUTCMonth(),g=-Infinity!==this.startDate?this.startDate.getUTCFullYear():-Infinity,h=-Infinity!==this.startDate?this.startDate.getUTCMonth():-Infinity,q=Infinity!==this.endDate?this.endDate.getUTCFullYear():Infinity,v=Infinity!==this.endDate?this.endDate.getUTCMonth():Infinity,w=this.date&&this.date.valueOf(),m=new Date;this.picker.find(".datepicker-days thead th:eq(1)").text(f[this.language].months[d]+" "+a);this.picker.find("tfoot th.today").text(f[this.language].today).toggle(!1!==this.todayBtn);
this.updateNavArrows();this.fillMonths();var t=k(a,d-1,28,0,0,0,0),u=b.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth());t.setUTCDate(u);t.setUTCDate(u-(t.getUTCDay()-this.weekStart+7)%7);var x=new Date(t);x.setUTCDate(x.getUTCDate()+42);for(var x=x.valueOf(),u=[],y;t.valueOf()<x;){t.getUTCDay()==this.weekStart&&u.push("<tr>");y="";if(t.getUTCFullYear()<a||t.getUTCFullYear()==a&&t.getUTCMonth()<d)y+=" old";else if(t.getUTCFullYear()>a||t.getUTCFullYear()==a&&t.getUTCMonth()>d)y+=" new";this.todayHighlight&&
t.getUTCFullYear()==m.getFullYear()&&t.getUTCMonth()==m.getMonth()&&t.getUTCDate()==m.getDate()&&(y+=" today");w&&t.valueOf()==w&&(y+=" active");if(t.valueOf()<this.startDate||t.valueOf()>this.endDate||-1!==e.inArray(t.getUTCDay(),this.daysOfWeekDisabled))y+=" disabled";u.push('<td class="day'+y+'">'+t.getUTCDate()+"</td>");t.getUTCDay()==this.weekEnd&&u.push("</tr>");t.setUTCDate(t.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(u.join(""));d=this.date&&this.date.getUTCFullYear();
u=this.picker.find(".datepicker-months").find("th:eq(1)").text(a).end().find("span").removeClass("active");d&&d==a&&u.eq(this.date.getUTCMonth()).addClass("active");(a<g||a>q)&&u.addClass("disabled");a==g&&u.slice(0,h).addClass("disabled");a==q&&u.slice(v+1).addClass("disabled");u="";a=10*parseInt(a/10,10);h=this.picker.find(".datepicker-years").find("th:eq(1)").text(a+"-"+(a+9)).end().find("td");a-=1;for(v=-1;11>v;v++)u+='<span class="year'+(-1==v||10==v?" old":"")+(d==a?" active":"")+(a<g||a>q?
" disabled":"")+'">'+a+"</span>",a+=1;h.html(u)},updateNavArrows:function(){var b=new Date(this.viewDate),a=b.getUTCFullYear(),b=b.getUTCMonth();switch(this.viewMode){case 0:-Infinity!==this.startDate&&a<=this.startDate.getUTCFullYear()&&b<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.endDate&&a>=this.endDate.getUTCFullYear()&&b>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):
this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:-Infinity!==this.startDate&&a<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),Infinity!==this.endDate&&a>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(f){f.stopPropagation();f.preventDefault();f=e(f.target).closest("span, td, th");
if(1==f.length)switch(f[0].nodeName.toLowerCase()){case "th":switch(f[0].className){case "switch":this.showMode(1);break;case "prev":case "next":f=b.modes[this.viewMode].navStep*("prev"==f[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,f);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,f)}this.fill();break;case "today":f=new Date,f=k(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),this.showMode(-2),this._setDate(f,"linked"==this.todayBtn?null:
"view")}break;case "span":if(!f.is(".disabled")){this.viewDate.setUTCDate(1);if(f.is(".month")){var a=f.parent().find("span").index(f);this.viewDate.setUTCMonth(a);this.element.trigger({type:"changeMonth",date:this.viewDate})}else{var d=parseInt(f.text(),10)||0;this.viewDate.setUTCFullYear(d);this.element.trigger({type:"changeYear",date:this.viewDate})}this.showMode(-1);this.fill()}break;case "td":if(f.is(".day")&&!f.is(".disabled")){var h=parseInt(f.text(),10)||1,d=this.viewDate.getUTCFullYear(),
a=this.viewDate.getUTCMonth();f.is(".old")?0===a?(a=11,d-=1):a-=1:f.is(".new")&&(11==a?(a=0,d+=1):a+=1);this._setDate(k(d,a,h,0,0,0,0))}}},_setDate:function(b,a){a&&"date"!=a||(this.date=b);a&&"view"!=a||(this.viewDate=b);this.fill();this.setValue();var d;this.isInput?d=this.element:this.component&&(d=this.element.find("input"));d&&(d.change(),!this.autoclose||a&&"date"!=a||this.hide());this.element.trigger({type:"changeDate",date:this.date,ins:this})},moveMonth:function(b,a){if(!a)return b;var d=
new Date(b.valueOf()),e=d.getUTCDate(),f=d.getUTCMonth(),h=Math.abs(a),k;a=0<a?1:-1;if(1==h){if(h=-1==a?function(){return d.getUTCMonth()==f}:function(){return d.getUTCMonth()!=k},k=f+a,d.setUTCMonth(k),0>k||11<k)k=(k+12)%12}else{for(var m=0;m<h;m++)d=this.moveMonth(d,a);k=d.getUTCMonth();d.setUTCDate(e);h=function(){return k!=d.getUTCMonth()}}for(;h();)d.setUTCDate(--e),d.setUTCMonth(k);return d},moveYear:function(b,a){return this.moveMonth(b,12*a)},dateWithinRange:function(b){return b>=this.startDate&&
b<=this.endDate},keydown:function(b){if(this.picker.is(":not(:visible)"))27==b.keyCode&&this.show();else{var a=!1,d,e,f;switch(b.keyCode){case 27:this.hide();b.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;d=37==b.keyCode?-1:1;b.ctrlKey?(e=this.moveYear(this.date,d),f=this.moveYear(this.viewDate,d)):b.shiftKey?(e=this.moveMonth(this.date,d),f=this.moveMonth(this.viewDate,d)):(e=new Date(this.date),e.setUTCDate(this.date.getUTCDate()+d),f=new Date(this.viewDate),f.setUTCDate(this.viewDate.getUTCDate()+
d));this.dateWithinRange(e)&&(this.date=e,this.viewDate=f,this.setValue(),this.update(),b.preventDefault(),a=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;d=38==b.keyCode?-1:1;b.ctrlKey?(e=this.moveYear(this.date,d),f=this.moveYear(this.viewDate,d)):b.shiftKey?(e=this.moveMonth(this.date,d),f=this.moveMonth(this.viewDate,d)):(e=new Date(this.date),e.setUTCDate(this.date.getUTCDate()+7*d),f=new Date(this.viewDate),f.setUTCDate(this.viewDate.getUTCDate()+7*d));this.dateWithinRange(e)&&
(this.date=e,this.viewDate=f,this.setValue(),this.update(),b.preventDefault(),a=!0);break;case 13:this.hide();b.preventDefault();break;case 9:this.hide()}if(a){var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input"));h&&h.change();this.element.trigger({type:"changeDate",date:this.date,ins:this})}}},showMode:function(e){e&&(this.viewMode=Math.max(0,Math.min(2,this.viewMode+e)));this.picker.find(">div").hide().filter(".datepicker-"+b.modes[this.viewMode].clsName).css("display",
"block");this.updateNavArrows()}};e.fn.datepicker=function(b){var a=Array.apply(null,arguments);a.shift();return this.each(function(){var d=e(this),f=d.data("datepicker"),k="object"==typeof b&&b;f||d.data("datepicker",f=new h(this,e.extend({},e.fn.datepicker.defaults,k)));"string"==typeof b&&"function"==typeof f[b]&&f[b].apply(f,a)})};e.fn.datepicker.defaults={};e.fn.datepicker.Constructor=h;var f=e.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),
daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today"}},b={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(b){return 0===b%4&&0!==b%100||0===b%400},
getDaysInMonth:function(e,a){return[31,b.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][a]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(b){var a=b.replace(this.validParts,"\x00").split("\x00");b=b.match(this.validParts);if(!a||!a.length||!b||0===b.length)throw Error("Invalid date format.");return{separators:a,parts:b}},parseDate:function(b,a,d){if(b instanceof Date)return b;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(b)){var l=
/([\-+]\d+)([dmwy])/,q=b.match(/([\-+]\d+)([dmwy])/g),v;b=new Date;for(var w=0;w<q.length;w++)switch(a=l.exec(q[w]),v=parseInt(a[1]),a[2]){case "d":b.setUTCDate(b.getUTCDate()+v);break;case "m":b=h.prototype.moveMonth.call(h.prototype,b,v);break;case "w":b.setUTCDate(b.getUTCDate()+7*v);break;case "y":b=h.prototype.moveYear.call(h.prototype,b,v)}return k(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,0)}q=b&&b.match(this.nonpunctuation)||[];b=new Date;var l={},m="yyyy yy M MM m mm d dd".split(" ");
v={yyyy:function(a,d){return a.setUTCFullYear(d)},yy:function(a,d){return a.setUTCFullYear(2E3+d)},m:function(a,d){for(d-=1;0>d;)d+=12;d%=12;for(a.setUTCMonth(d);a.getUTCMonth()!=d;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,d){return a.setUTCDate(d)}};var t;v.M=v.MM=v.mm=v.m;v.dd=v.d;b=k(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);var u=a.parts.slice();q.length!=u.length&&(u=e(u).filter(function(a,d){return-1!==e.inArray(d,m)}).toArray());if(q.length==u.length){for(var w=0,x=u.length;w<
x;w++){t=parseInt(q[w],10);a=u[w];if(isNaN(t))switch(a){case "MM":t=e(f[d].months).filter(function(){var a=this.slice(0,q[w].length),d=q[w].slice(0,a.length);return a==d});t=e.inArray(t[0],f[d].months)+1;break;case "M":t=e(f[d].monthsShort).filter(function(){var a=this.slice(0,q[w].length),d=q[w].slice(0,a.length);return a==d}),t=e.inArray(t[0],f[d].monthsShort)+1}l[a]=t}for(w=0;w<m.length;w++)if(a=m[w],a in l&&!isNaN(l[a]))v[a](b,l[a])}return b},formatDate:function(b,a,d){d={d:b.getUTCDate(),D:f[d].daysShort[b.getUTCDay()],
DD:f[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:f[d].monthsShort[b.getUTCMonth()],MM:f[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;b=[];for(var h=e.extend([],a.separators),k=0,v=a.parts.length;k<v;k++)h.length&&b.push(h.shift()),b.push(d[a.parts[k]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',
contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};b.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+b.headTemplate+"<tbody></tbody>"+b.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+b.headTemplate+b.contTemplate+b.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+b.headTemplate+
b.contTemplate+b.footTemplate+"</table></div></div>";e.fn.datepicker.DPGlobal=b}(window.jQuery);
(function(e){function k(f){this.input=f;"password"==f.attr("type")&&this.handlePassword();e(f[0].form).submit(function(){f.hasClass("placeholder")&&f[0].value==f.attr("placeholder")&&(f[0].value="")})}k.prototype={show:function(e){if(""===this.input[0].value||e&&this.valueIsPlaceholder()){if(this.isPassword)try{this.input[0].setAttribute("type","text")}catch(b){this.input.before(this.fakePassword.show()).hide()}this.input.addClass("placeholder");this.input[0].value=this.input.attr("placeholder")}},
hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")&&(this.input.removeClass("placeholder"),this.input[0].value="",this.isPassword)){try{this.input[0].setAttribute("type","password")}catch(e){}this.input.show();this.input[0].focus()}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var f=this.input;f.attr("realType","password");this.isPassword=!0;if(e.browser.msie&&f[0].outerHTML){var b=e(f[0].outerHTML.replace(/type=(['"])?password\1/gi,
"type=$1text$1"));this.fakePassword=b.val(f.attr("placeholder")).addClass("placeholder").focus(function(){f.trigger("focus");e(this).hide()});e(f[0].form).submit(function(){b.remove();f.show()})}}};var h=!!("placeholder"in document.createElement("input"));e.fn.placeholder=function(){return h?this:this.each(function(){var f=e(this),b=new k(f);b.show(!0);f.focus(function(){b.hide()});f.blur(function(){b.show(!1)});e.browser.msie&&(e(window).load(function(){f.val()&&f.removeClass("placeholder");b.show(!0)}),
f.focus(function(){if(""==this.value){var b=this.createTextRange();b.collapse(!0);b.moveStart("character",0);b.select()}}))})}})(jQuery);
(function(){var e;e=function(){function e(){this.options_index=0;this.parsed=[]}e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)};e.prototype.add_group=function(e){var f,b,g,a,d,k;f=this.parsed.length;this.parsed.push({array_index:f,group:!0,label:e.label,children:0,disabled:e.disabled});d=e.childNodes;k=[];g=0;for(a=d.length;g<a;g++)b=d[g],k.push(this.add_option(b,f,e.disabled));return k};e.prototype.add_option=function(e,f,b){if("OPTION"===
e.nodeName.toUpperCase())return""!==e.text?(null!=f&&(this.parsed[f].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:!0===b?b:e.disabled,group_array_index:f,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};return e}();e.select_to_array=function(k){var h,f,b,g;h=new e;g=
k.childNodes;f=0;for(b=g.length;f<b;f++)k=g[f],h.add_node(k);return h.parsed};this.SelectParser=e}).call(this);
(function(){this.AbstractChosen=function(){function e(e,h){this.form_field=e;this.options=null!=h?h:{};this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers();this.finish_setup()}e.prototype.set_default_values=function(){this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&
null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0;this.search_contains=this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;this.max_selected_options=
this.options.max_selected_options||Infinity;return this.inherit_select_classes=this.options.inherit_select_classes||!1};e.prototype.set_default_text=function(){this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.default_text=this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option";return this.results_none_found=
this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};e.prototype.mouse_enter=function(){return this.mouse_on_container=!0};e.prototype.mouse_leave=function(){return this.mouse_on_container=!1};e.prototype.input_focus=function(e){var h=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return h.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()};e.prototype.input_blur=function(e){var h=this;
if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return h.blur_test()},100)};e.prototype.result_add_option=function(e){var h,f;if(e.disabled)return"";e.dom_id=this.container_id+"_o_"+e.array_index;h=e.selected&&this.is_multiple?[]:["active-result"];e.selected&&h.push("result-selected");null!=e.group_array_index&&h.push("group-option");""!==e.classes&&h.push(e.classes);f=""!==e.style.cssText?' style="'+e.style+'"':"";return'<li id="'+e.dom_id+'" class="'+h.join(" ")+'"'+
f+">"+e.html+"</li>"};e.prototype.results_update_field=function(){this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()};e.prototype.keyup_checker=function(e){var h,f;h=null!=(f=e.which)?f:e.keyCode;this.search_field_scale();
switch(h){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:e.preventDefault();if(this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};e.prototype.generate_field_id=function(){var e;e=this.generate_random_id();
return this.form_field.id=e};e.prototype.generate_random_char=function(){var e;e=Math.floor(36*Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(e,e+1)};return e}()}).call(this);
(function(){var e,k,h,f,b={}.hasOwnProperty,g=function(a,d){function e(){this.constructor=a}for(var f in d)b.call(d,f)&&(a[f]=d[f]);e.prototype=d.prototype;a.prototype=new e;a.__super__=d.prototype;return a};f=this;e=jQuery;e.fn.extend({chosen:function(a){return e.browser.msie&&("6.0"===e.browser.version||"7.0"===e.browser.version&&7===document.documentMode)?this:this.each(function(d){d=e(this);if(!d.hasClass("chzn-done"))return d.data("chosen",new k(this,a))})}});k=function(a){function d(){return d.__super__.constructor.apply(this,
arguments)}g(d,a);d.prototype.setup=function(){this.form_field_jq=e(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};d.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};d.prototype.set_up_html=function(){var a,d;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";a=["chzn-container"];a.push("chzn-container-"+(this.is_multiple?
"multi":"single"));this.inherit_select_classes&&this.form_field.className&&a.push(this.form_field.className);this.is_rtl&&a.push("chzn-rtl");this.f_width=this.form_field_jq.outerWidth();a={id:this.container_id,"class":a.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title};a=e("<div />",a);this.is_multiple?a.html('<ul class="chzn-choices"><li class="search-field"><input class="chzn-input" type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):
a.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input class="chzn-input" type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(a);this.container=e("#"+this.container_id);this.dropdown=this.container.find("div.chzn-drop").first();a=this.container.height();d=this.f_width-h(this.dropdown);
this.dropdown.css({width:d+"px",top:a+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=
this.container.find(".chzn-single").first(),a=d-h(this.search_container)-h(this.search_field),this.search_field.css({width:a+"px"}));this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};d.prototype.register_observers=function(){var a=this;this.container.mousedown(function(d){return a.container_mousedown(d)});this.container.mouseup(function(d){return a.container_mouseup(d)});this.container.mouseenter(function(d){return a.mouse_enter(d)});this.container.mouseleave(function(d){return a.mouse_leave(d)});
this.search_results.mouseup(function(d){return a.search_results_mouseup(d)});this.search_results.mouseover(function(d){return a.search_results_mouseover(d)});this.search_results.mouseout(function(d){return a.search_results_mouseout(d)});this.form_field_jq.bind("liszt:updated",function(d){return a.results_update_field(d)});this.form_field_jq.bind("liszt:activate",function(d){return a.activate_field(d)});this.form_field_jq.bind("liszt:open",function(d){return a.container_mousedown(d)});this.search_field.blur(function(d){return a.input_blur(d)});
this.search_field.keyup(function(d){return a.keyup_checker(d)});this.search_field.keydown(function(d){return a.keydown_checker(d)});this.search_field.focus(function(d){return a.input_focus(d)});return this.is_multiple?this.search_choices.click(function(d){return a.choices_click(d)}):this.container.click(function(a){return a.preventDefault()})};d.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=
!0,this.is_multiple||this.selected_item.unbind("focus.chzn"),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus.chzn",e.proxy(this.activate_field,this))};d.prototype.container_mousedown=function(a){var d;if(!this.is_disabled){d=null!=a?e(a.target).hasClass("search-choice-close"):!1;a&&"mousedown"===a.type&&!this.results_showing&&a.preventDefault();if(this.pending_destroy_click||d)return this.pending_destroy_click=
!1;this.active_field?this.is_multiple||!a||e(a.target)[0]!==this.selected_item[0]&&!e(a.target).parents("a.chzn-single").length||(a.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).on("click.chzn",e.proxy(this.test_active_click,this)),this.results_show());return this.activate_field()}};d.prototype.container_mouseup=function(a){if("ABBR"===a.target.nodeName&&!this.is_disabled)return this.results_reset(a)};d.prototype.blur_test=function(a){if(!this.active_field&&
this.container.hasClass("chzn-container-active"))return this.close_field()};d.prototype.close_field=function(){e(document).off("click.chzn");this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};d.prototype.activate_field=function(){this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());
return this.search_field.focus()};d.prototype.test_active_click=function(a){return e(a.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()};d.prototype.results_build=function(){var a,d,b,e,g;this.parsing=!0;this.results_data=f.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),
this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch"));a="";g=this.results_data;b=0;for(e=g.length;b<e;b++)d=g[b],d.group?a+=this.result_add_group(d):d.empty||(a+=this.result_add_option(d),d.selected&&this.is_multiple?this.choice_build(d):d.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(d.text),this.allow_single_deselect&&
this.single_deselect_control_build()));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();this.search_results.html(a);return this.parsing=!1};d.prototype.result_add_group=function(a){if(a.disabled)return"";a.dom_id=this.container_id+"_g_"+a.array_index;return'<li id="'+a.dom_id+'" class="group-result">'+e("<div />").text(a.label).html()+"</li>"};d.prototype.result_do_highlight=function(a){var d,b,e,f;if(a.length){this.result_clear_highlight();this.result_highlight=
a;this.result_highlight.addClass("highlighted");b=parseInt(this.search_results.css("maxHeight"),10);f=this.search_results.scrollTop();e=b+f;d=this.result_highlight.position().top+this.search_results.scrollTop();a=d+this.result_highlight.outerHeight();if(a>=e)return this.search_results.scrollTop(0<a-b?a-b:0);if(d<f)return this.search_results.scrollTop(d)}};d.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=
null};d.prototype.results_show=function(){var a;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;a=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:a+"px",left:0});this.results_showing=
!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};d.prototype.results_hide=function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({top:"-5000px"});return this.results_showing=!1};d.prototype.set_tab_index=function(a){if(this.form_field_jq.attr("tabindex"))return a=this.form_field_jq.attr("tabindex"),
this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",a)};d.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};d.prototype.search_results_mouseup=function(a){var d;d=e(a.target).hasClass("active-result")?e(a.target):e(a.target).parents(".active-result").first();if(d.length)return this.result_highlight=
d,this.result_select(a),this.search_field.focus()};d.prototype.search_results_mouseover=function(a){if(a=e(a.target).hasClass("active-result")?e(a.target):e(a.target).parents(".active-result").first())return this.result_do_highlight(a)};d.prototype.search_results_mouseout=function(a){if(e(a.target).hasClass("active-result"))return this.result_clear_highlight()};d.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&!e(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};
d.prototype.choice_build=function(a){var d,b=this;if(this.is_multiple&&this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;d=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before(a.disabled?'<li class="search-choice search-choice-disabled" id="'+d+'"><span>'+a.html+"</span></li>":'<li class="search-choice" id="'+d+'"><span>'+a.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+a.array_index+
'"></a></li>');return e("#"+d).find("a").first().click(function(a){return b.choice_destroy_link_click(a)})};d.prototype.choice_destroy_link_click=function(a){a.preventDefault();if(this.is_disabled)return a.stopPropagation;this.pending_destroy_click=!0;return this.choice_destroy(e(a.target))};d.prototype.choice_destroy=function(a){if(this.result_deselect(a.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&0<this.choices&&1>this.search_field.val().length&&this.results_hide(),
a.parents("li").first().remove(),this.search_field_scale()};d.prototype.results_reset=function(){this.form_field.options[0].selected=!0;this.selected_item.find("span").text(this.default_text);this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};d.prototype.results_reset_cleanup=function(){this.current_value=this.form_field_jq.val();return this.selected_item.find("abbr").remove()};
d.prototype.result_select=function(a){var d,b;if(this.result_highlight)return d=this.result_highlight,b=d.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(d):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=d,this.selected_item.removeClass("chzn-default")),d.addClass("result-selected"),d=b.substr(b.lastIndexOf("_")+1),d=this.results_data[d],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.is_multiple?
this.choice_build(d):(this.selected_item.find("span").first().text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[d.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()};d.prototype.result_activate=function(a){return a.addClass("active-result")};
d.prototype.result_deactivate=function(a){return a.removeClass("active-result")};d.prototype.result_deselect=function(a){var d;d=this.results_data[a];if(this.form_field.options[d.options_index].disabled)return!1;d.selected=!1;this.form_field.options[d.options_index].selected=!1;e("#"+this.container_id+"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[d.options_index].value});
this.search_field_scale();return!0};d.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};d.prototype.winnow_results=function(){var a,d,b,f,g,h,k,x,y,B,F,C,K,z,J;this.no_results_clear();x=0;y=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html();g=new RegExp((this.search_contains?
"":"^")+y.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");B=new RegExp(y.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");J=this.results_data;F=0;for(K=J.length;F<K;F++)if(d=J[F],!d.disabled&&!d.empty)if(d.group)e("#"+d.dom_id).css("display","none");else if(!this.is_multiple||!d.selected){a=!1;k=d.dom_id;h=e("#"+k);if(g.test(d.html))a=!0,x+=1;else if(this.enable_split_word_search&&(0<=d.html.indexOf(" ")||0===d.html.indexOf("["))&&(f=d.html.replace(/\[|\]/g,"").split(" "),f.length))for(C=0,z=f.length;C<
z;C++)b=f[C],g.test(b)&&(a=!0,x+=1);a?(y.length?(a=d.html.search(B),b=d.html.substr(0,a+y.length)+"</em>"+d.html.substr(a+y.length),b=b.substr(0,a)+"<em>"+b.substr(a)):b=d.html,h.html(b),this.result_activate(h),null!=d.group_array_index&&e("#"+this.results_data[d.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&k===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}return 1>x&&y.length?this.no_results(y):this.winnow_results_set_highlight()};
d.prototype.winnow_results_clear=function(){var a,d,b,f,g;this.search_field.val("");d=this.search_results.find("li");g=[];b=0;for(f=d.length;b<f;b++)a=d[b],a=e(a),a.hasClass("group-result")?g.push(a.css("display","auto")):this.is_multiple&&a.hasClass("result-selected")?g.push(void 0):g.push(this.result_activate(a));return g};d.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=a.length?
a.first():this.search_results.find(".active-result").first(),null!=a))return this.result_do_highlight(a)};d.prototype.no_results=function(a){var d;d=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');d.find("span").first().html(a);return this.search_results.append(d)};d.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};d.prototype.keydown_arrow=function(){var a;this.result_highlight?this.results_showing&&(a=this.result_highlight.nextAll("li.active-result").first())&&
this.result_do_highlight(a):(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(e(a));if(!this.results_showing)return this.results_show()};d.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};d.prototype.keydown_backstroke=
function(){var a;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();a=this.search_container.siblings("li.search-choice").last();if(a.length&&!a.hasClass("search-choice-disabled"))return this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};d.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");
return this.pending_backstroke=null};d.prototype.keydown_checker=function(a){var d,b;d=null!=(b=a.which)?b:a.keyCode;this.search_field_scale();8!==d&&this.pending_backstroke&&this.clear_backstroke();switch(d){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};d.prototype.search_field_scale=
function(){var a,d,b,f,g;if(this.is_multiple){d="position:absolute; left: -1000px; top: -1000px; display:none;";b="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");f=0;for(g=b.length;f<g;f++)a=b[f],d+=a+":"+this.search_field.css(a)+";";a=e("<div />",{style:d});a.text(this.search_field.val());e("body").append(a);d=a.width()+25;a.remove();d>this.f_width-10&&(d=this.f_width-10);this.search_field.css({width:d+"px"});a=this.container.height();return this.dropdown.css({top:a+
"px"})}};d.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();0<e("#"+a).length;)a+=this.generate_random_char();return a};return d}(AbstractChosen);f.Chosen=k;h=function(a){return a.outerWidth()-a.width()};f.get_side_border_padding=h}).call(this);
(function(){var e=jQuery,k=e.extend({},Chosen.prototype);e.extend(Chosen.prototype,{set_up_html:function(){var h;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";h=["chzn-container"];h.push("chzn-container-"+(this.is_multiple?"multi":"single"));this.inherit_select_classes&&this.form_field.className&&h.push(this.form_field.className);this.is_rtl&&h.push("chzn-rtl");this.f_width=this.form_field_jq.outerWidth();h=
{id:this.container_id,"class":h.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title};h=e("<div />",h);this.is_multiple?h.html('<ul class="chzn-choices"><li class="search-field"><input class="chzn-input" type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="top:-5000px;"><ul class="chzn-results"></ul></div>'):h.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+
this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="top:-5000px;"><div class="chzn-search"><input class="chzn-input" type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(h);this.container=e("#"+this.container_id);this.dropdown=this.container.find("div.chzn-drop").first();this.container.height();h=this.f_width-get_side_border_padding(this.dropdown);this.dropdown.css({width:h+"px",left:0});this.search_field=this.container.find("input").first();
this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),h=h-get_side_border_padding(this.search_container)-get_side_border_padding(this.search_field),
this.search_field.css({width:h+"px"}));this.results_build();this.set_tab_index();this.form_field_jq.trigger("liszt:ready",{chosen:this});this.dropdown.appendTo("body");this.dropdown.addClass(this.container.attr("class"));this.is_multiple||this.search_field.css("width","");this.search_field.on("click",function(e){e.stopPropagation()})},register_observers:function(){var h=this;k.register_observers.call(this);this.dropdown.mouseenter(function(e){return h.mouse_enter(e)});this.dropdown.mouseleave(function(e){return h.mouse_leave(e)});
e(window).on("center.fb",e.proxy(this.set_position,this));e(window).on("resize.chosen scroll.chosen",_.debounce(e.proxy(this.set_position,this),20));this.container.closest(".scroller").on("scroll.chosen",_.debounce(e.proxy(this.close_field,this),70,!0))},results_show:function(){if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",
{chosen:this}),!1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.set_position(!0);this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()},results_hide:function(){var e=this;this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.hide().css({top:"-5000px"});setTimeout(function(){e.dropdown.show()},
0);return this.results_showing=!1},set_position:function(e){if(this.results_showing||!0===e){e=this.container.offset();var f=this.is_multiple?this.container.height()-1:this.container.height();return this.dropdown.css({left:e.left,top:e.top+f})}},results_build:function(){var e,f,b,g,a;this.parsing=!0;this.results_data=SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),
this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.dropdown.addClass("chzn-container-single-nosearch"):this.dropdown.removeClass("chzn-container-single-nosearch"));e="";a=this.results_data;b=0;for(g=a.length;b<g;b++)f=a[b],f.group?e+=this.result_add_group(f):f.empty||(e+=this.result_add_option(f),f.selected&&this.is_multiple?this.choice_build(f):f.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(f.text),this.allow_single_deselect&&
this.single_deselect_control_build()));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();this.search_results.html(e);return this.parsing=!1},search_field_scale:function(){var h,f,b,g,a;if(this.is_multiple){f="position:absolute; left: -1000px; top: -1000px; display:none;";b="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");g=0;for(a=b.length;g<a;g++)h=b[g],f+=h+":"+this.search_field.css(h)+";";h=e("<div />",{style:f});
h.text(this.search_field.val());e("body").append(h);f=h.width();h.remove();f>this.f_width-10&&(f=this.f_width-10);this.search_field.css({width:f+"px"});return this.set_position()}},winnow_results:function(){var h,f,b,g,a,d,k,q,v,w,m,t,u,x;this.no_results_clear();q=0;v=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html();a=new RegExp(v.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");x=this.results_data;w=0;for(t=x.length;w<t;w++)if(f=x[w],!f.disabled&&
!f.empty)if(f.group)e("#"+f.dom_id).css("display","none");else if(!this.is_multiple||!f.selected){h=!1;k=f.dom_id;d=e("#"+k);if(a.test(f.html))h=!0,q+=1;else if(this.enable_split_word_search&&(0<=f.html.indexOf(" ")||0===f.html.indexOf("["))&&(g=f.html.replace(/\[|\]/g,"").split(" "),g.length))for(m=0,u=g.length;m<u;m++)b=g[m],a.test(b)&&(h=!0,q+=1);h?(v.length?(h=f.html.search(a),b=f.html.substr(0,h+v.length)+"</em>"+f.html.substr(h+v.length),b=b.substr(0,h)+"<em>"+b.substr(h)):b=f.html,d.html(b),
this.result_activate(d),null!=f.group_array_index&&e("#"+this.results_data[f.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&k===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(d))}return 1>q&&v.length?this.no_results(v):this.winnow_results_set_highlight()}})}).call(this);
(function(e){function k(b,a,d){var f=this,k=b.add(this),v=b.find(d.tabs),w=a.jquery?a:b.children(a),m;v.length||(v=b.children());w.length||(w=b.parent().find(a));w.length||(w=e(a));e.extend(this,{click:function(a,b){var g=v.eq(a);"string"==typeof a&&a.replace("#","")&&(g=v.filter("[href*='"+a.replace("#","")+"']"),a=Math.max(v.index(g),0));if(d.rotate){var w=v.length-1;if(0>a)return f.click(w,b);if(a>w)return f.click(0,b)}if(!g.length){if(0<=m)return f;a=d.initialIndex;g=v.eq(a)}if(a===m)return f;
b=b||e.Event();b.type="onBeforeClick";k.trigger(b,[a]);if(!b.isDefaultPrevented())return h[d.effect].call(f,a,function(){m=a;b.type="onClick";k.trigger(b,[a])}),v.removeClass(d.current),g.addClass(d.current),f},getConf:function(){return d},getTabs:function(){return v},getPanes:function(){return w},getCurrentPane:function(){return w.eq(m)},getCurrentTab:function(){return v.eq(m)},getIndex:function(){return m},next:function(){return f.click(m+1)},prev:function(){return f.click(m-1)},destroy:function(){v.unbind(d.event).removeClass(d.current);
w.find("a[href^='#']").unbind("click.T");return f}});e.each(["onBeforeClick","onClick"],function(a,b){e.isFunction(d[b])&&e(f).bind(b,d[b]);f[b]=function(a){a&&e(f).bind(b,a);return f}});d.history&&e.fn.history&&(e.tools.history.init(v),d.event="history");v.each(function(a){e(this).bind(d.event,function(d){f.click(a,d);return d.preventDefault()})});w.find("a[href^='#']").bind("click.T",function(a){f.click(e(this).attr("href"),a)});location.hash&&"a"==d.tabs&&b.find("[href='"+location.hash+"']").length?
f.click(location.hash):(0===d.initialIndex||0<d.initialIndex)&&f.click(d.initialIndex)}e.tools=e.tools||{version:"@VERSION"};e.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,slideUpSpeed:400,slideDownSpeed:400,history:!1},addEffect:function(b,a){h[b]=a}};var h={"default":function(b,a){this.getPanes().hide().eq(b).show();a.call()},fade:function(b,a){var d=this.getConf(),e=d.fadeOutSpeed,f=this.getPanes();e?f.fadeOut(e):
f.hide();f.eq(b).fadeIn(d.fadeInSpeed,a)},slide:function(b,a){var d=this.getConf();this.getPanes().slideUp(d.slideUpSpeed);this.getPanes().eq(b).slideDown(d.slideDownSpeed,a)},ajax:function(b,a){this.getPanes().eq(0).load(this.getTabs().eq(b).attr("href"),a)}},f,b;e.tools.tabs.addEffect("horizontal",function(g,a){if(!f){var d=this.getPanes().eq(g),h=this.getCurrentPane();b||(b=this.getPanes().eq(0).width());f=!0;d.show();h.animate({width:0},{step:function(a){d.css("width",b-a)},complete:function(){e(this).hide();
a.call();f=!1}});h.length||(a.call(),f=!1)}});e.fn.tabs=function(b,a){var d=this.data("tabs");d&&(d.destroy(),this.removeData("tabs"));e.isFunction(a)&&(a={onBeforeClick:a});a=e.extend({},e.tools.tabs.conf,a);this.each(function(){d=new k(e(this),b,a);e(this).data("tabs",d)});return a.api?d:this}})(jQuery);
(function(e){function k(a){if(a in v.style)return a;var d=["Moz","Webkit","O","ms"],b=a.charAt(0).toUpperCase()+a.substr(1);if(a in v.style)return a;for(a=0;a<d.length;++a){var e=d[a]+b;if(e in v.style)return e}}function h(a){"string"===typeof a&&this.parse(a);return this}function f(a,d,b){!0===d?a.queue(b):d?a.queue(d,b):b()}function b(a){var b=[];e.each(a,function(a){a=e.camelCase(a);a=e.transit.propertyMap[a]||e.cssProps[a]||a;a=d(a);-1===e.inArray(a,b)&&b.push(a)});return b}function g(a,d,f,g){a=
b(a);e.cssEase[f]&&(f=e.cssEase[f]);var h=""+q(d)+" "+f;0<parseInt(g,10)&&(h+=" "+q(g));var k=[];e.each(a,function(a,d){k.push(d+" "+h)});return k.join(", ")}function a(a,d){d||(e.cssNumber[a]=!0);e.transit.propertyMap[a]=w.transform;e.cssHooks[a]={get:function(d){return e(d).css("transit:transform").get(a)},set:function(d,b){var f=e(d).css("transit:transform");f.setFromString(a,b);e(d).css({"transit:transform":f})}}}function d(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}
function l(a,d){return"string"!==typeof a||a.match(/^[\-0-9\.]+$/)?""+a+d:a}function q(a){"string"===typeof a&&(a=e.fx.speeds[a]||e.fx.speeds._default);return l(a,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var v=document.createElement("div"),w={},m=-1<navigator.userAgent.toLowerCase().indexOf("chrome");
w.transition=k("transition");w.transitionDelay=k("transitionDelay");w.transform=k("transform");w.transformOrigin=k("transformOrigin");v.style[w.transform]="";v.style[w.transform]="rotateY(90deg)";w.transform3d=""!==v.style[w.transform];var t=w.transitionEnd={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[w.transition]||null,u;for(u in w)w.hasOwnProperty(u)&&"undefined"===typeof e.support[u]&&
(e.support[u]=w[u]);v=null;e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",
easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",
easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};e.cssHooks["transit:transform"]={get:function(a){return e(a).data("transform")||new h},set:function(a,d){var b=d;b instanceof h||(b=new h(b));a.style[w.transform]="WebkitTransform"!==w.transform||m?b.toString():b.toString(!0);e(a).data("transform",b)}};e.cssHooks.transform={set:e.cssHooks["transit:transform"].set};"1.8">e.fn.jquery&&(e.cssHooks.transformOrigin={get:function(a){return a.style[w.transformOrigin]},
set:function(a,d){a.style[w.transformOrigin]=d}},e.cssHooks.transition={get:function(a){return a.style[w.transition]},set:function(a,d){a.style[w.transition]=d}});a("scale");a("translate");a("rotate");a("rotateX");a("rotateY");a("rotate3d");a("perspective");a("skewX");a("skewY");a("x",!0);a("y",!0);h.prototype={setFromString:function(a,d){var b="string"===typeof d?d.split(","):d.constructor===Array?d:[d];b.unshift(a);h.prototype.set.apply(this,b)},set:function(a){var d=Array.prototype.slice.apply(arguments,
[1]);this.setter[a]?this.setter[a].apply(this,d):this[a]=d.join(",")},get:function(a){return this.getter[a]?this.getter[a].apply(this):this[a]||0},setter:{rotate:function(a){this.rotate=l(a,"deg")},rotateX:function(a){this.rotateX=l(a,"deg")},rotateY:function(a){this.rotateY=l(a,"deg")},scale:function(a,d){void 0===d&&(d=a);this.scale=a+","+d},skewX:function(a){this.skewX=l(a,"deg")},skewY:function(a){this.skewY=l(a,"deg")},perspective:function(a){this.perspective=l(a,"px")},x:function(a){this.set("translate",
a,null)},y:function(a){this.set("translate",null,a)},translate:function(a,d){void 0===this._translateX&&(this._translateX=0);void 0===this._translateY&&(this._translateY=0);null!==a&&void 0!==a&&(this._translateX=l(a,"px"));null!==d&&void 0!==d&&(this._translateY=l(d,"px"));this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");a[0]&&(a[0]=parseFloat(a[0]));
a[1]&&(a[1]=parseFloat(a[1]));return a[0]===a[1]?a[0]:a},rotate3d:function(){for(var a=(this.rotate3d||"0,0,0,0deg").split(","),d=0;3>=d;++d)a[d]&&(a[d]=parseFloat(a[d]));a[3]&&(a[3]=l(a[3],"deg"));return a}},parse:function(a){var d=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(a,b,e){d.setFromString(b,e)})},toString:function(a){var d=[],b;for(b in this)this.hasOwnProperty(b)&&(w.transform3d||"rotateX"!==b&&"rotateY"!==b&&"perspective"!==b&&"transformOrigin"!==b)&&"_"!==b[0]&&(a&&"scale"===b?
d.push(b+"3d("+this[b]+",1)"):a&&"translate"===b?d.push(b+"3d("+this[b]+",0)"):d.push(b+"("+this[b]+")"));return d.join(" ")}};e.fn.transition=e.fn.transit=function(a,d,b,h){var k=this,l=0,m=!0;"function"===typeof d&&(h=d,d=void 0);"object"===typeof d&&(b=d.easing,l=d.delay||0,m=d.queue||!0,h=d.complete,d=d.duration);"function"===typeof b&&(h=b,b=void 0);"undefined"!==typeof a.easing&&(b=a.easing,delete a.easing);"undefined"!==typeof a.duration&&(d=a.duration,delete a.duration);"undefined"!==typeof a.complete&&
(h=a.complete,delete a.complete);"undefined"!==typeof a.queue&&(m=a.queue,delete a.queue);"undefined"!==typeof a.delay&&(l=a.delay,delete a.delay);"undefined"===typeof d&&(d=e.fx.speeds._default);"undefined"===typeof b&&(b=e.cssEase._default);d=q(d);var u=g(a,d,b,l),v=e.transit.enabled&&w.transition?parseInt(d,10)+parseInt(l,10):0;if(0===v)return f(k,m,function(d){k.css(a);h&&h.apply(k);d&&d()}),k;var A={},I=function(d){var b=!1,f=function(){b&&k.unbind(t,f);0<v&&k.each(function(){this.style[w.transition]=
A[this]||null});"function"===typeof h&&h.apply(k);"function"===typeof d&&d()};0<v&&t&&e.transit.useTransitionEnd?(b=!0,k.bind(t,f)):window.setTimeout(f,v);k.each(function(){0<v&&(this.style[w.transition]=u);e(this).css(a)})};f(k,m,function(a){this.offsetWidth;I(a)});return this};e.transit.getTransitionValue=g})(jQuery);$.template("dashboard_twitter_create",'<article class="service-board-setup twitter {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo twitter"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the twitter account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service twitter new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your twitter account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Create your dashboard!</legend>                <input type="button" class="create small" value="ok!" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("dashboard_analytics_create",'<article class="service-board-setup analytics {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo analytics"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the Analytics account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service analytics new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your Analytics account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Which property do you want the dashboard for?</legend>                <input type="button" class="create small" value="ok!" />                <input class="properties-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("select_countries",'<select class="field-country">    <option value="AF" {{if $data.value === "AF"}}selected="selected"{{/if}}>Afghanistan</option>    <option value="AX" {{if $data.value === "AX"}}selected="selected"{{/if}}>\u00c5land Islands</option>    <option value="AL" {{if $data.value === "AL"}}selected="selected"{{/if}}>Albania</option>    <option value="DZ" {{if $data.value === "DZ"}}selected="selected"{{/if}}>Algeria</option>    <option value="AS" {{if $data.value === "AS"}}selected="selected"{{/if}}>American Samoa</option>    <option value="AD" {{if $data.value === "AD"}}selected="selected"{{/if}}>Andorra</option>    <option value="AO" {{if $data.value === "AO"}}selected="selected"{{/if}}>Angola</option>    <option value="AI" {{if $data.value === "AI"}}selected="selected"{{/if}}>Anguilla</option>    <option value="AQ" {{if $data.value === "AQ"}}selected="selected"{{/if}}>Antarctica</option>    <option value="AG" {{if $data.value === "AG"}}selected="selected"{{/if}}>Antigua and Barbuda</option>    <option value="AR" {{if $data.value === "AR"}}selected="selected"{{/if}}>Argentina</option>    <option value="AM" {{if $data.value === "AM"}}selected="selected"{{/if}}>Armenia</option>    <option value="AW" {{if $data.value === "AW"}}selected="selected"{{/if}}>Aruba</option>    <option value="AP" {{if $data.value === "AP"}}selected="selected"{{/if}}>Asia/Pacific Region</option>    <option value="AU" {{if $data.value === "AU"}}selected="selected"{{/if}}>Australia</option>    <option value="AT" {{if $data.value === "AT"}}selected="selected"{{/if}}>Austria</option>    <option value="AZ" {{if $data.value === "AZ"}}selected="selected"{{/if}}>Azerbaijan</option>    <option value="BS" {{if $data.value === "BS"}}selected="selected"{{/if}}>Bahamas</option>    <option value="BH" {{if $data.value === "BH"}}selected="selected"{{/if}}>Bahrain</option>    <option value="BD" {{if $data.value === "BD"}}selected="selected"{{/if}}>Bangladesh</option>    <option value="BB" {{if $data.value === "BB"}}selected="selected"{{/if}}>Barbados</option>    <option value="BY" {{if $data.value === "BY"}}selected="selected"{{/if}}>Belarus</option>    <option value="BE" {{if $data.value === "BE"}}selected="selected"{{/if}}>Belgium</option>    <option value="BZ" {{if $data.value === "BZ"}}selected="selected"{{/if}}>Belize</option>    <option value="BJ" {{if $data.value === "BJ"}}selected="selected"{{/if}}>Benin</option>    <option value="BM" {{if $data.value === "BM"}}selected="selected"{{/if}}>Bermuda</option>    <option value="BT" {{if $data.value === "BT"}}selected="selected"{{/if}}>Bhutan</option>    <option value="BO" {{if $data.value === "BO"}}selected="selected"{{/if}}>Bolivia</option>    <option value="BA" {{if $data.value === "BA"}}selected="selected"{{/if}}>Bosnia and Herzegovina</option>    <option value="BW" {{if $data.value === "BW"}}selected="selected"{{/if}}>Botswana</option>    <option value="BV" {{if $data.value === "BV"}}selected="selected"{{/if}}>Bouvet Island</option>    <option value="BR" {{if $data.value === "BR"}}selected="selected"{{/if}}>Brazil</option>    <option value="IO" {{if $data.value === "IO"}}selected="selected"{{/if}}>British Indian Ocean Territory</option>    <option value="BN" {{if $data.value === "BN"}}selected="selected"{{/if}}>Brunei Darussalam</option>    <option value="BG" {{if $data.value === "BG"}}selected="selected"{{/if}}>Bulgaria</option>    <option value="BF" {{if $data.value === "BF"}}selected="selected"{{/if}}>Burkina Faso</option>    <option value="BI" {{if $data.value === "BI"}}selected="selected"{{/if}}>Burundi</option>    <option value="KH" {{if $data.value === "KH"}}selected="selected"{{/if}}>Cambodia</option>    <option value="CM" {{if $data.value === "CM"}}selected="selected"{{/if}}>Cameroon</option>    <option value="CA" {{if $data.value === "CA"}}selected="selected"{{/if}}>Canada</option>    <option value="CV" {{if $data.value === "CV"}}selected="selected"{{/if}}>Cape Verde</option>    <option value="KY" {{if $data.value === "KY"}}selected="selected"{{/if}}>Cayman Islands</option>    <option value="CF" {{if $data.value === "CF"}}selected="selected"{{/if}}>Central African Republic</option>    <option value="TD" {{if $data.value === "TD"}}selected="selected"{{/if}}>Chad</option>    <option value="CL" {{if $data.value === "CL"}}selected="selected"{{/if}}>Chile</option>    <option value="CN" {{if $data.value === "CN"}}selected="selected"{{/if}}>China</option>    <option value="CX" {{if $data.value === "CX"}}selected="selected"{{/if}}>Christmas Island</option>    <option value="CC" {{if $data.value === "CC"}}selected="selected"{{/if}}>Cocos (Keeling) Islands</option>    <option value="CO" {{if $data.value === "CO"}}selected="selected"{{/if}}>Colombia</option>    <option value="KM" {{if $data.value === "KM"}}selected="selected"{{/if}}>Comoros</option>    <option value="CG" {{if $data.value === "CG"}}selected="selected"{{/if}}>Congo</option>    <option value="CD" {{if $data.value === "CD"}}selected="selected"{{/if}}>Congo, The Democratic Republic of the</option>    <option value="CK" {{if $data.value === "CK"}}selected="selected"{{/if}}>Cook Islands</option>    <option value="CR" {{if $data.value === "CR"}}selected="selected"{{/if}}>Costa Rica</option>    <option value="CI" {{if $data.value === "CI"}}selected="selected"{{/if}}>C\u00f4te d\'Ivoire</option>    <option value="HR" {{if $data.value === "HR"}}selected="selected"{{/if}}>Croatia</option>    <option value="CU" {{if $data.value === "CU"}}selected="selected"{{/if}}>Cuba</option>    <option value="CW" {{if $data.value === "CW"}}selected="selected"{{/if}}>Cura\u00e7ao</option>    <option value="CY" {{if $data.value === "CY"}}selected="selected"{{/if}}>Cyprus</option>    <option value="CZ" {{if $data.value === "CZ"}}selected="selected"{{/if}}>Czech Republic</option>    <option value="DK" {{if $data.value === "DK"}}selected="selected"{{/if}}>Denmark</option>    <option value="DJ" {{if $data.value === "DJ"}}selected="selected"{{/if}}>Djibouti</option>    <option value="DM" {{if $data.value === "DM"}}selected="selected"{{/if}}>Dominica</option>    <option value="DO" {{if $data.value === "DO"}}selected="selected"{{/if}}>Dominican Republic</option>    <option value="EC" {{if $data.value === "EC"}}selected="selected"{{/if}}>Ecuador</option>    <option value="EG" {{if $data.value === "EG"}}selected="selected"{{/if}}>Egypt</option>    <option value="SV" {{if $data.value === "SV"}}selected="selected"{{/if}}>El Salvador</option>    <option value="GQ" {{if $data.value === "GQ"}}selected="selected"{{/if}}>Equatorial Guinea</option>    <option value="ER" {{if $data.value === "ER"}}selected="selected"{{/if}}>Eritrea</option>    <option value="EE" {{if $data.value === "EE"}}selected="selected"{{/if}}>Estonia</option>    <option value="ET" {{if $data.value === "ET"}}selected="selected"{{/if}}>Ethiopia</option>    <option value="EU" {{if $data.value === "EU"}}selected="selected"{{/if}}>Europe</option>    <option value="FK" {{if $data.value === "FK"}}selected="selected"{{/if}}>Falkland Islands (Malvinas)</option>    <option value="FO" {{if $data.value === "FO"}}selected="selected"{{/if}}>Faroe Islands</option>    <option value="FJ" {{if $data.value === "FJ"}}selected="selected"{{/if}}>Fiji</option>    <option value="FI" {{if $data.value === "FI"}}selected="selected"{{/if}}>Finland</option>    <option value="FR" {{if $data.value === "FR"}}selected="selected"{{/if}}>France</option>    <option value="FX" {{if $data.value === "FX"}}selected="selected"{{/if}}>France, Metropolitan</option>    <option value="GF" {{if $data.value === "GF"}}selected="selected"{{/if}}>French Guiana</option>    <option value="PF" {{if $data.value === "PF"}}selected="selected"{{/if}}>French Polynesia</option>    <option value="TF" {{if $data.value === "TF"}}selected="selected"{{/if}}>French Southern Territories</option>    <option value="GA" {{if $data.value === "GA"}}selected="selected"{{/if}}>Gabon</option>    <option value="GM" {{if $data.value === "GM"}}selected="selected"{{/if}}>Gambia</option>    <option value="GE" {{if $data.value === "GE"}}selected="selected"{{/if}}>Georgia</option>    <option value="DE" {{if $data.value === "DE"}}selected="selected"{{/if}}>Germany</option>    <option value="GH" {{if $data.value === "GH"}}selected="selected"{{/if}}>Ghana</option>    <option value="GI" {{if $data.value === "GI"}}selected="selected"{{/if}}>Gibraltar</option>    <option value="GR" {{if $data.value === "GR"}}selected="selected"{{/if}}>Greece</option>    <option value="GL" {{if $data.value === "GL"}}selected="selected"{{/if}}>Greenland</option>    <option value="GD" {{if $data.value === "GD"}}selected="selected"{{/if}}>Grenada</option>    <option value="GP" {{if $data.value === "GP"}}selected="selected"{{/if}}>Guadeloupe</option>    <option value="GU" {{if $data.value === "GU"}}selected="selected"{{/if}}>Guam</option>    <option value="GT" {{if $data.value === "GT"}}selected="selected"{{/if}}>Guatemala</option>    <option value="GG" {{if $data.value === "GG"}}selected="selected"{{/if}}>Guernsey</option>    <option value="GN" {{if $data.value === "GN"}}selected="selected"{{/if}}>Guinea</option>    <option value="GW" {{if $data.value === "GW"}}selected="selected"{{/if}}>Guinea-Bissau</option>    <option value="GY" {{if $data.value === "GY"}}selected="selected"{{/if}}>Guyana</option>    <option value="HT" {{if $data.value === "HT"}}selected="selected"{{/if}}>Haiti</option>    <option value="HM" {{if $data.value === "HM"}}selected="selected"{{/if}}>Heard Island and McDonald Islands</option>    <option value="VA" {{if $data.value === "VA"}}selected="selected"{{/if}}>Holy See (Vatican City State)</option>    <option value="HN" {{if $data.value === "HN"}}selected="selected"{{/if}}>Honduras</option>    <option value="HK" {{if $data.value === "HK"}}selected="selected"{{/if}}>Hong Kong</option>    <option value="HU" {{if $data.value === "HU"}}selected="selected"{{/if}}>Hungary</option>    <option value="IS" {{if $data.value === "IS"}}selected="selected"{{/if}}>Iceland</option>    <option value="IN" {{if $data.value === "IN"}}selected="selected"{{/if}}>India</option>    <option value="ID" {{if $data.value === "ID"}}selected="selected"{{/if}}>Indonesia</option>    <option value="IR" {{if $data.value === "IR"}}selected="selected"{{/if}}>Iran, Islamic Republic of</option>    <option value="IQ" {{if $data.value === "IQ"}}selected="selected"{{/if}}>Iraq</option>    <option value="IE" {{if $data.value === "IE"}}selected="selected"{{/if}}>Ireland</option>    <option value="IM" {{if $data.value === "IM"}}selected="selected"{{/if}}>Isle of Man</option>    <option value="IL" {{if $data.value === "IL"}}selected="selected"{{/if}}>Israel</option>    <option value="IT" {{if $data.value === "IT"}}selected="selected"{{/if}}>Italy</option>    <option value="JM" {{if $data.value === "JM"}}selected="selected"{{/if}}>Jamaica</option>    <option value="JP" {{if $data.value === "JP"}}selected="selected"{{/if}}>Japan</option>    <option value="JE" {{if $data.value === "JE"}}selected="selected"{{/if}}>Jersey</option>    <option value="JO" {{if $data.value === "JO"}}selected="selected"{{/if}}>Jordan</option>    <option value="KZ" {{if $data.value === "KZ"}}selected="selected"{{/if}}>Kazakhstan</option>    <option value="KE" {{if $data.value === "KE"}}selected="selected"{{/if}}>Kenya</option>    <option value="KI" {{if $data.value === "KI"}}selected="selected"{{/if}}>Kiribati</option>    <option value="KP" {{if $data.value === "KP"}}selected="selected"{{/if}}>Korea, Democratic People\'s Republic of</option>    <option value="KR" {{if $data.value === "KR"}}selected="selected"{{/if}}>Korea, Republic of</option>    <option value="KW" {{if $data.value === "KW"}}selected="selected"{{/if}}>Kuwait</option>    <option value="KG" {{if $data.value === "KG"}}selected="selected"{{/if}}>Kyrgyzstan</option>    <option value="LA" {{if $data.value === "LA"}}selected="selected"{{/if}}>Lao People\'s Democratic Republic</option>    <option value="LV" {{if $data.value === "LV"}}selected="selected"{{/if}}>Latvia</option>    <option value="LB" {{if $data.value === "LB"}}selected="selected"{{/if}}>Lebanon</option>    <option value="LS" {{if $data.value === "LS"}}selected="selected"{{/if}}>Lesotho</option>    <option value="LR" {{if $data.value === "LR"}}selected="selected"{{/if}}>Liberia</option>    <option value="LY" {{if $data.value === "LY"}}selected="selected"{{/if}}>Libyan Arab Jamahiriya</option>    <option value="LI" {{if $data.value === "LI"}}selected="selected"{{/if}}>Liechtenstein</option>    <option value="LT" {{if $data.value === "LT"}}selected="selected"{{/if}}>Lithuania</option>    <option value="LU" {{if $data.value === "LU"}}selected="selected"{{/if}}>Luxembourg</option>    <option value="MO" {{if $data.value === "MO"}}selected="selected"{{/if}}>Macao</option>    <option value="MK" {{if $data.value === "MK"}}selected="selected"{{/if}}>Macedonia</option>    <option value="MG" {{if $data.value === "MG"}}selected="selected"{{/if}}>Madagascar</option>    <option value="MW" {{if $data.value === "MW"}}selected="selected"{{/if}}>Malawi</option>    <option value="MY" {{if $data.value === "MY"}}selected="selected"{{/if}}>Malaysia</option>    <option value="MV" {{if $data.value === "MV"}}selected="selected"{{/if}}>Maldives</option>    <option value="ML" {{if $data.value === "ML"}}selected="selected"{{/if}}>Mali</option>    <option value="MT" {{if $data.value === "MT"}}selected="selected"{{/if}}>Malta</option>    <option value="MH" {{if $data.value === "MH"}}selected="selected"{{/if}}>Marshall Islands</option>    <option value="MQ" {{if $data.value === "MQ"}}selected="selected"{{/if}}>Martinique</option>    <option value="MR" {{if $data.value === "MR"}}selected="selected"{{/if}}>Mauritania</option>    <option value="MU" {{if $data.value === "MU"}}selected="selected"{{/if}}>Mauritius</option>    <option value="YT" {{if $data.value === "YT"}}selected="selected"{{/if}}>Mayotte</option>    <option value="MX" {{if $data.value === "MX"}}selected="selected"{{/if}}>Mexico</option>    <option value="FM" {{if $data.value === "FM"}}selected="selected"{{/if}}>Micronesia, Federated States of</option>    <option value="MD" {{if $data.value === "MD"}}selected="selected"{{/if}}>Moldova</option>    <option value="MC" {{if $data.value === "MC"}}selected="selected"{{/if}}>Monaco</option>    <option value="MN" {{if $data.value === "MN"}}selected="selected"{{/if}}>Mongolia</option>    <option value="ME" {{if $data.value === "ME"}}selected="selected"{{/if}}>Montenegro</option>    <option value="MS" {{if $data.value === "MS"}}selected="selected"{{/if}}>Montserrat</option>    <option value="MA" {{if $data.value === "MA"}}selected="selected"{{/if}}>Morocco</option>    <option value="MZ" {{if $data.value === "MZ"}}selected="selected"{{/if}}>Mozambique</option>    <option value="MM" {{if $data.value === "MM"}}selected="selected"{{/if}}>Myanmar</option>    <option value="NA" {{if $data.value === "NA"}}selected="selected"{{/if}}>Namibia</option>    <option value="NR" {{if $data.value === "NR"}}selected="selected"{{/if}}>Nauru</option>    <option value="NP" {{if $data.value === "NP"}}selected="selected"{{/if}}>Nepal</option>    <option value="NL" {{if $data.value === "NL"}}selected="selected"{{/if}}>Netherlands</option>    <option value="AN" {{if $data.value === "AN"}}selected="selected"{{/if}}>Netherlands Antilles</option>    <option value="NC" {{if $data.value === "NC"}}selected="selected"{{/if}}>New Caledonia</option>    <option value="NZ" {{if $data.value === "NZ"}}selected="selected"{{/if}}>New Zealand</option>    <option value="NI" {{if $data.value === "NI"}}selected="selected"{{/if}}>Nicaragua</option>    <option value="NE" {{if $data.value === "NE"}}selected="selected"{{/if}}>Niger</option>    <option value="NG" {{if $data.value === "NG"}}selected="selected"{{/if}}>Nigeria</option>    <option value="NU" {{if $data.value === "NU"}}selected="selected"{{/if}}>Niue</option>    <option value="NF" {{if $data.value === "NF"}}selected="selected"{{/if}}>Norfolk Island</option>    <option value="MP" {{if $data.value === "MP"}}selected="selected"{{/if}}>Northern Mariana Islands</option>    <option value="NO" {{if $data.value === "NO"}}selected="selected"{{/if}}>Norway</option>    <option value="OM" {{if $data.value === "OM"}}selected="selected"{{/if}}>Oman</option>    <option value="PK" {{if $data.value === "PK"}}selected="selected"{{/if}}>Pakistan</option>    <option value="PW" {{if $data.value === "PW"}}selected="selected"{{/if}}>Palau</option>    <option value="PS" {{if $data.value === "PS"}}selected="selected"{{/if}}>Palestinian Territory</option>    <option value="PA" {{if $data.value === "PA"}}selected="selected"{{/if}}>Panama</option>    <option value="PG" {{if $data.value === "PG"}}selected="selected"{{/if}}>Papua New Guinea</option>    <option value="PY" {{if $data.value === "PY"}}selected="selected"{{/if}}>Paraguay</option>    <option value="PE" {{if $data.value === "PE"}}selected="selected"{{/if}}>Peru</option>    <option value="PH" {{if $data.value === "PH"}}selected="selected"{{/if}}>Philippines</option>    <option value="PN" {{if $data.value === "PN"}}selected="selected"{{/if}}>Pitcairn</option>    <option value="PL" {{if $data.value === "PL"}}selected="selected"{{/if}}>Poland</option>    <option value="PT" {{if $data.value === "PT"}}selected="selected"{{/if}}>Portugal</option>    <option value="PR" {{if $data.value === "PR"}}selected="selected"{{/if}}>Puerto Rico</option>    <option value="QA" {{if $data.value === "QA"}}selected="selected"{{/if}}>Qatar</option>    <option value="RE" {{if $data.value === "RE"}}selected="selected"{{/if}}>Reunion</option>    <option value="RO" {{if $data.value === "RO"}}selected="selected"{{/if}}>Romania</option>    <option value="RU" {{if $data.value === "RU"}}selected="selected"{{/if}}>Russian Federation</option>    <option value="RW" {{if $data.value === "RW"}}selected="selected"{{/if}}>Rwanda</option>    <option value="BL" {{if $data.value === "BL"}}selected="selected"{{/if}}>Saint Barth\u00e9lemy</option>    <option value="SH" {{if $data.value === "SH"}}selected="selected"{{/if}}>Saint Helena</option>    <option value="KN" {{if $data.value === "KN"}}selected="selected"{{/if}}>Saint Kitts and Nevis</option>    <option value="LC" {{if $data.value === "LC"}}selected="selected"{{/if}}>Saint Lucia</option>    <option value="MF" {{if $data.value === "MF"}}selected="selected"{{/if}}>Saint Martin</option>    <option value="PM" {{if $data.value === "PM"}}selected="selected"{{/if}}>Saint Pierre and Miquelon</option>    <option value="VC" {{if $data.value === "VC"}}selected="selected"{{/if}}>Saint Vincent and the Grenadines</option>    <option value="WS" {{if $data.value === "WS"}}selected="selected"{{/if}}>Samoa</option>    <option value="SM" {{if $data.value === "SM"}}selected="selected"{{/if}}>San Marino</option>    <option value="ST" {{if $data.value === "ST"}}selected="selected"{{/if}}>Sao Tome and Principe</option>    <option value="SA" {{if $data.value === "SA"}}selected="selected"{{/if}}>Saudi Arabia</option>    <option value="SN" {{if $data.value === "SN"}}selected="selected"{{/if}}>Senegal</option>    <option value="RS" {{if $data.value === "RS"}}selected="selected"{{/if}}>Serbia</option>    <option value="SC" {{if $data.value === "SC"}}selected="selected"{{/if}}>Seychelles</option>    <option value="SL" {{if $data.value === "SL"}}selected="selected"{{/if}}>Sierra Leone</option>    <option value="SG" {{if $data.value === "SG"}}selected="selected"{{/if}}>Singapore</option>    <option value="SK" {{if $data.value === "SK"}}selected="selected"{{/if}}>Slovakia</option>    <option value="SI" {{if $data.value === "SI"}}selected="selected"{{/if}}>Slovenia</option>    <option value="SB" {{if $data.value === "SB"}}selected="selected"{{/if}}>Solomon Islands</option>    <option value="SO" {{if $data.value === "SO"}}selected="selected"{{/if}}>Somalia</option>    <option value="ZA" {{if $data.value === "ZA"}}selected="selected"{{/if}}>South Africa</option>    <option value="GS" {{if $data.value === "GS"}}selected="selected"{{/if}}>South Georgia and the South Sandwich Islands</option>    <option value="ES" {{if $data.value === "ES"}}selected="selected"{{/if}}>Spain</option>    <option value="LK" {{if $data.value === "LK"}}selected="selected"{{/if}}>Sri Lanka</option>    <option value="SD" {{if $data.value === "SD"}}selected="selected"{{/if}}>Sudan</option>    <option value="SR" {{if $data.value === "SR"}}selected="selected"{{/if}}>Suriname</option>    <option value="SJ" {{if $data.value === "SJ"}}selected="selected"{{/if}}>Svalbard and Jan Mayen</option>    <option value="SZ" {{if $data.value === "SZ"}}selected="selected"{{/if}}>Swaziland</option>    <option value="SE" {{if $data.value === "SE"}}selected="selected"{{/if}}>Sweden</option>    <option value="CH" {{if $data.value === "CH"}}selected="selected"{{/if}}>Switzerland</option>    <option value="SY" {{if $data.value === "SY"}}selected="selected"{{/if}}>Syrian Arab Republic</option>    <option value="TW" {{if $data.value === "TW"}}selected="selected"{{/if}}>Taiwan</option>    <option value="TJ" {{if $data.value === "TJ"}}selected="selected"{{/if}}>Tajikistan</option>    <option value="TZ" {{if $data.value === "TZ"}}selected="selected"{{/if}}>Tanzania, United Republic of</option>    <option value="TH" {{if $data.value === "TH"}}selected="selected"{{/if}}>Thailand</option>    <option value="TL" {{if $data.value === "TL"}}selected="selected"{{/if}}>Timor-Leste</option>    <option value="TG" {{if $data.value === "TG"}}selected="selected"{{/if}}>Togo</option>    <option value="TK" {{if $data.value === "TK"}}selected="selected"{{/if}}>Tokelau</option>    <option value="TO" {{if $data.value === "TO"}}selected="selected"{{/if}}>Tonga</option>    <option value="TT" {{if $data.value === "TT"}}selected="selected"{{/if}}>Trinidad and Tobago</option>    <option value="TN" {{if $data.value === "TN"}}selected="selected"{{/if}}>Tunisia</option>    <option value="TR" {{if $data.value === "TR"}}selected="selected"{{/if}}>Turkey</option>    <option value="TM" {{if $data.value === "TM"}}selected="selected"{{/if}}>Turkmenistan</option>    <option value="TC" {{if $data.value === "TC"}}selected="selected"{{/if}}>Turks and Caicos Islands</option>    <option value="TV" {{if $data.value === "TV"}}selected="selected"{{/if}}>Tuvalu</option>    <option value="UG" {{if $data.value === "UG"}}selected="selected"{{/if}}>Uganda</option>    <option value="UA" {{if $data.value === "UA"}}selected="selected"{{/if}}>Ukraine</option>    <option value="AE" {{if $data.value === "AE"}}selected="selected"{{/if}}>United Arab Emirates</option>    <option value="GB" {{if $data.value === "GB"}}selected="selected"{{/if}}>United Kingdom</option>    <option value="US" {{if $data.value === "US"}}selected="selected"{{/if}}>United States</option>    <option value="UM" {{if $data.value === "UM"}}selected="selected"{{/if}}>United States Minor Outlying Islands</option>    <option value="UY" {{if $data.value === "UY"}}selected="selected"{{/if}}>Uruguay</option>    <option value="UZ" {{if $data.value === "UZ"}}selected="selected"{{/if}}>Uzbekistan</option>    <option value="VU" {{if $data.value === "VU"}}selected="selected"{{/if}}>Vanuatu</option>    <option value="VE" {{if $data.value === "VE"}}selected="selected"{{/if}}>Venezuela</option>    <option value="VN" {{if $data.value === "VN"}}selected="selected"{{/if}}>Vietnam</option>    <option value="VG" {{if $data.value === "VG"}}selected="selected"{{/if}}>Virgin Islands, British</option>    <option value="VI" {{if $data.value === "VI"}}selected="selected"{{/if}}>Virgin Islands, U.S.</option>    <option value="WF" {{if $data.value === "WF"}}selected="selected"{{/if}}>Wallis and Futuna</option>    <option value="EH" {{if $data.value === "EH"}}selected="selected"{{/if}}>Western Sahara</option>    <option value="YE" {{if $data.value === "YE"}}selected="selected"{{/if}}>Yemen</option>    <option value="ZM" {{if $data.value === "ZM"}}selected="selected"{{/if}}>Zambia</option>    <option value="ZW" {{if $data.value === "ZW"}}selected="selected"{{/if}}>Zimbabwe</option></select>');
(function(){var e=this,k=e._,h={},f=Array.prototype,b=Object.prototype,g=f.push,a=f.slice,d=f.concat,l=b.toString,q=b.hasOwnProperty,v=f.forEach,w=f.map,m=f.reduce,t=f.reduceRight,u=f.filter,x=f.every,y=f.some,B=f.indexOf,F=f.lastIndexOf,b=Array.isArray,C=Object.keys,K=Function.prototype.bind,z=function(a){if(a instanceof z)return a;if(!(this instanceof z))return new z(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=z),exports._=
z):e._=z;z.VERSION="1.4.4";var J=z.each=z.forEach=function(a,d,b){if(null!=a)if(v&&a.forEach===v)a.forEach(d,b);else if(a.length===+a.length)for(var e=0,f=a.length;e<f&&d.call(b,a[e],e,a)!==h;e++);else for(e in a)if(z.has(a,e)&&d.call(b,a[e],e,a)===h)break};z.map=z.collect=function(a,d,b){var e=[];if(null==a)return e;if(w&&a.map===w)return a.map(d,b);J(a,function(a,f,g){e[e.length]=d.call(b,a,f,g)});return e};z.reduce=z.foldl=z.inject=function(a,d,b,e){var f=2<arguments.length;null==a&&(a=[]);if(m&&
a.reduce===m)return e&&(d=z.bind(d,e)),f?a.reduce(d,b):a.reduce(d);J(a,function(a,g,h){f?b=d.call(e,b,a,g,h):(b=a,f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return b};z.reduceRight=z.foldr=function(a,d,b,e){var f=2<arguments.length;null==a&&(a=[]);if(t&&a.reduceRight===t)return e&&(d=z.bind(d,e)),f?a.reduceRight(d,b):a.reduceRight(d);var g=a.length;if(g!==+g)var h=z.keys(a),g=h.length;J(a,function(k,l,m){l=h?h[--g]:--g;f?b=d.call(e,b,a[l],l,m):(b=a[l],f=!0)});
if(!f)throw new TypeError("Reduce of empty array with no initial value");return b};z.find=z.detect=function(a,d,b){var e;G(a,function(a,f,g){if(d.call(b,a,f,g))return e=a,!0});return e};z.filter=z.select=function(a,d,b){var e=[];if(null==a)return e;if(u&&a.filter===u)return a.filter(d,b);J(a,function(a,f,g){d.call(b,a,f,g)&&(e[e.length]=a)});return e};z.reject=function(a,d,b){return z.filter(a,function(a,e,f){return!d.call(b,a,e,f)},b)};z.every=z.all=function(a,d,b){d||(d=z.identity);var e=!0;if(null==
a)return e;if(x&&a.every===x)return a.every(d,b);J(a,function(a,f,g){if(!(e=e&&d.call(b,a,f,g)))return h});return!!e};var G=z.some=z.any=function(a,d,b){d||(d=z.identity);var e=!1;if(null==a)return e;if(y&&a.some===y)return a.some(d,b);J(a,function(a,f,g){if(e||(e=d.call(b,a,f,g)))return h});return!!e};z.contains=z.include=function(a,d){return null==a?!1:B&&a.indexOf===B?-1!=a.indexOf(d):G(a,function(a){return a===d})};z.invoke=function(d,b){var e=a.call(arguments,2),f=z.isFunction(b);return z.map(d,
function(a){return(f?b:a[b]).apply(a,e)})};z.pluck=function(a,d){return z.map(a,function(a){return a[d]})};z.where=function(a,d,b){return z.isEmpty(d)?b?null:[]:z[b?"find":"filter"](a,function(a){for(var b in d)if(d[b]!==a[b])return!1;return!0})};z.findWhere=function(a,d){return z.where(a,d,!0)};z.max=function(a,d,b){if(!d&&z.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!d&&z.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};J(a,function(a,f,g){f=d?
d.call(b,a,f,g):a;f>=e.computed&&(e={value:a,computed:f})});return e.value};z.min=function(a,d,b){if(!d&&z.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);if(!d&&z.isEmpty(a))return Infinity;var e={computed:Infinity,value:Infinity};J(a,function(a,f,g){f=d?d.call(b,a,f,g):a;f<e.computed&&(e={value:a,computed:f})});return e.value};z.shuffle=function(a){var d,b=0,e=[];J(a,function(a){d=z.random(b++);e[b-1]=e[d];e[d]=a});return e};var A=function(a){return z.isFunction(a)?a:function(d){return d[a]}};
z.sortBy=function(a,d,b){var e=A(d);return z.pluck(z.map(a,function(a,d,f){return{value:a,index:d,criteria:e.call(b,a,d,f)}}).sort(function(a,d){var b=a.criteria,e=d.criteria;if(b!==e){if(b>e||void 0===b)return 1;if(b<e||void 0===e)return-1}return a.index<d.index?-1:1}),"value")};var I=function(a,d,b,e){var f={},g=A(d||z.identity);J(a,function(d,h){var k=g.call(b,d,h,a);e(f,k,d)});return f};z.groupBy=function(a,d,b){return I(a,d,b,function(a,d,b){(z.has(a,d)?a[d]:a[d]=[]).push(b)})};z.countBy=function(a,
d,b){return I(a,d,b,function(a,d){z.has(a,d)||(a[d]=0);a[d]++})};z.sortedIndex=function(a,d,b,e){b=null==b?z.identity:A(b);d=b.call(e,d);for(var f=0,g=a.length;f<g;){var h=f+g>>>1;b.call(e,a[h])<d?f=h+1:g=h}return f};z.toArray=function(d){return d?z.isArray(d)?a.call(d):d.length===+d.length?z.map(d,z.identity):z.values(d):[]};z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length};z.first=z.head=z.take=function(d,b,e){return null==d?void 0:null==b||e?d[0]:a.call(d,0,b)};
z.initial=function(d,b,e){return a.call(d,0,d.length-(null==b||e?1:b))};z.last=function(d,b,e){return null==d?void 0:null==b||e?d[d.length-1]:a.call(d,Math.max(d.length-b,0))};z.rest=z.tail=z.drop=function(d,b,e){return a.call(d,null==b||e?1:b)};z.compact=function(a){return z.filter(a,z.identity)};var O=function(a,d,b){J(a,function(a){z.isArray(a)?d?g.apply(b,a):O(a,d,b):b.push(a)});return b};z.flatten=function(a,d){return O(a,d,[])};z.without=function(d){return z.difference(d,a.call(arguments,1))};
z.uniq=z.unique=function(a,d,b,e){z.isFunction(d)&&(e=b,b=d,d=!1);b=b?z.map(a,b,e):a;var f=[],g=[];J(b,function(b,e){(d?e&&g[g.length-1]===b:z.contains(g,b))||(g.push(b),f.push(a[e]))});return f};z.union=function(){return z.uniq(d.apply(f,arguments))};z.intersection=function(d){var b=a.call(arguments,1);return z.filter(z.uniq(d),function(a){return z.every(b,function(d){return 0<=z.indexOf(d,a)})})};z.difference=function(b){var e=d.apply(f,a.call(arguments,1));return z.filter(b,function(a){return!z.contains(e,
a)})};z.zip=function(){for(var d=a.call(arguments),b=z.max(z.pluck(d,"length")),e=Array(b),f=0;f<b;f++)e[f]=z.pluck(d,""+f);return e};z.object=function(a,d){if(null==a)return{};for(var b={},e=0,f=a.length;e<f;e++)d?b[a[e]]=d[e]:b[a[e][0]]=a[e][1];return b};z.indexOf=function(a,d,b){if(null==a)return-1;var e=0,f=a.length;if(b)if("number"==typeof b)e=0>b?Math.max(0,f+b):b;else return e=z.sortedIndex(a,d),a[e]===d?e:-1;if(B&&a.indexOf===B)return a.indexOf(d,b);for(;e<f;e++)if(a[e]===d)return e;return-1};
z.lastIndexOf=function(a,d,b){if(null==a)return-1;var e=null!=b;if(F&&a.lastIndexOf===F)return e?a.lastIndexOf(d,b):a.lastIndexOf(d);for(b=e?b:a.length;b--;)if(a[b]===d)return b;return-1};z.range=function(a,d,b){1>=arguments.length&&(d=a||0,a=0);b=arguments[2]||1;for(var e=Math.max(Math.ceil((d-a)/b),0),f=0,g=Array(e);f<e;)g[f++]=a,a+=b;return g};z.bind=function(d,b){if(d.bind===K&&K)return K.apply(d,a.call(arguments,1));var e=a.call(arguments,2);return function(){return d.apply(b,e.concat(a.call(arguments)))}};
z.partial=function(d){var b=a.call(arguments,1);return function(){return d.apply(this,b.concat(a.call(arguments)))}};z.bindAll=function(d){var b=a.call(arguments,1);0===b.length&&(b=z.functions(d));J(b,function(a){d[a]=z.bind(d[a],d)});return d};z.memoize=function(a,d){var b={};d||(d=z.identity);return function(){var e=d.apply(this,arguments);return z.has(b,e)?b[e]:b[e]=a.apply(this,arguments)}};z.delay=function(d,b){var e=a.call(arguments,2);return setTimeout(function(){return d.apply(null,e)},b)};
z.defer=function(d){return z.delay.apply(z,[d,1].concat(a.call(arguments,1)))};z.throttle=function(a,d){var b,e,f,g,h=0,k=function(){h=new Date;f=null;g=a.apply(b,e)};return function(){var l=new Date,m=d-(l-h);b=this;e=arguments;0>=m?(clearTimeout(f),f=null,h=l,g=a.apply(b,e)):f||(f=setTimeout(k,m));return g}};z.debounce=function(a,d,b){var e,f;return function(){var g=this,h=arguments,k=b&&!e;clearTimeout(e);e=setTimeout(function(){e=null;b||(f=a.apply(g,h))},d);k&&(f=a.apply(g,h));return f}};z.once=
function(a){var d=!1,b;return function(){if(d)return b;d=!0;b=a.apply(this,arguments);a=null;return b}};z.wrap=function(a,d){return function(){var b=[a];g.apply(b,arguments);return d.apply(this,b)}};z.compose=function(){var a=arguments;return function(){for(var d=arguments,b=a.length-1;0<=b;b--)d=[a[b].apply(this,d)];return d[0]}};z.after=function(a,d){return 0>=a?d():function(){if(1>--a)return d.apply(this,arguments)}};z.keys=C||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var d=[],b;for(b in a)z.has(a,b)&&(d[d.length]=b);return d};z.values=function(a){var d=[],b;for(b in a)z.has(a,b)&&d.push(a[b]);return d};z.pairs=function(a){var d=[],b;for(b in a)z.has(a,b)&&d.push([b,a[b]]);return d};z.invert=function(a){var d={},b;for(b in a)z.has(a,b)&&(d[a[b]]=b);return d};z.functions=z.methods=function(a){var d=[],b;for(b in a)z.isFunction(a[b])&&d.push(b);return d.sort()};z.extend=function(d){J(a.call(arguments,1),function(a){if(a)for(var b in a)d[b]=a[b]});return d};z.pick=
function(b){var e={},g=d.apply(f,a.call(arguments,1));J(g,function(a){a in b&&(e[a]=b[a])});return e};z.omit=function(b){var e={},g=d.apply(f,a.call(arguments,1)),h;for(h in b)z.contains(g,h)||(e[h]=b[h]);return e};z.defaults=function(d){J(a.call(arguments,1),function(a){if(a)for(var b in a)null==d[b]&&(d[b]=a[b])});return d};z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a};z.tap=function(a,d){d(a);return a};var P=function(a,d,b,e){if(a===d)return 0!==a||1/a==1/d;
if(null==a||null==d)return a===d;a instanceof z&&(a=a._wrapped);d instanceof z&&(d=d._wrapped);var f=l.call(a);if(f!=l.call(d))return!1;switch(f){case "[object String]":return a==String(d);case "[object Number]":return a!=+a?d!=+d:0==a?1/a==1/d:a==+d;case "[object Date]":case "[object Boolean]":return+a==+d;case "[object RegExp]":return a.source==d.source&&a.global==d.global&&a.multiline==d.multiline&&a.ignoreCase==d.ignoreCase}if("object"!=typeof a||"object"!=typeof d)return!1;for(var g=b.length;g--;)if(b[g]==
a)return e[g]==d;b.push(a);e.push(d);var g=0,h=!0;if("[object Array]"==f){if(g=a.length,h=g==d.length)for(;g--&&(h=P(a[g],d[g],b,e)););}else{var f=a.constructor,k=d.constructor;if(f!==k&&!(z.isFunction(f)&&f instanceof f&&z.isFunction(k)&&k instanceof k))return!1;for(var m in a)if(z.has(a,m)&&(g++,!(h=z.has(d,m)&&P(a[m],d[m],b,e))))break;if(h){for(m in d)if(z.has(d,m)&&!g--)break;h=!g}}b.pop();e.pop();return h};z.isEqual=function(a,d){return P(a,d,[],[])};z.isEmpty=function(a){if(null==a)return!0;
if(z.isArray(a)||z.isString(a))return 0===a.length;for(var d in a)if(z.has(a,d))return!1;return!0};z.isElement=function(a){return!(!a||1!==a.nodeType)};z.isArray=b||function(a){return"[object Array]"==l.call(a)};z.isObject=function(a){return a===Object(a)};J("Arguments Function String Number Date RegExp".split(" "),function(a){z["is"+a]=function(d){return l.call(d)=="[object "+a+"]"}});z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))});"function"!==typeof/./&&(z.isFunction=
function(a){return"function"===typeof a});z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};z.isNaN=function(a){return z.isNumber(a)&&a!=+a};z.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==l.call(a)};z.isNull=function(a){return null===a};z.isUndefined=function(a){return void 0===a};z.has=function(a,d){return q.call(a,d)};z.noConflict=function(){e._=k;return this};z.identity=function(a){return a};z.times=function(a,d,b){for(var e=Array(a),f=0;f<a;f++)e[f]=d.call(b,
f);return e};z.random=function(a,d){null==d&&(d=a,a=0);return a+Math.floor(Math.random()*(d-a+1))};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};E.unescape=z.invert(E.escape);var Y={escape:new RegExp("["+z.keys(E.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(E.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(d){return null==d?"":(""+d).replace(Y[a],function(d){return E[a][d]})}});z.result=function(a,d){if(null==
a)return null;var b=a[d];return z.isFunction(b)?b.call(a):b};z.mixin=function(a){J(z.functions(a),function(d){var b=z[d]=a[d];z.prototype[d]=function(){var a=[this._wrapped];g.apply(a,arguments);return W.call(this,b.apply(z,a))}})};var N=0;z.uniqueId=function(a){var d=++N+"";return a?a+d:d};z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var n=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\t|\u2028|\u2029/g;
z.template=function(a,d,b){var e;b=z.defaults({},b,z.templateSettings);var f=new RegExp([(b.escape||n).source,(b.interpolate||n).source,(b.evaluate||n).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(d,b,e,f,k){h+=a.slice(g,k).replace(U,function(a){return"\\"+M[a]});b&&(h+="'+\n((__t=("+b+"))==null?'':_.escape(__t))+\n'");e&&(h+="'+\n((__t=("+e+"))==null?'':__t)+\n'");f&&(h+="';\n"+f+"\n__p+='");g=k+d.length;return d});h+="';\n";b.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
h+"return __p;\n";try{e=new Function(b.variable||"obj","_",h)}catch(k){throw k.source=h,k;}if(d)return e(d,z);d=function(a){return e.call(this,a,z)};d.source="function("+(b.variable||"obj")+"){\n"+h+"}";return d};z.chain=function(a){return z(a).chain()};var W=function(a){return this._chain?z(a).chain():a};z.mixin(z);J("pop push reverse shift sort splice unshift".split(" "),function(a){var d=f[a];z.prototype[a]=function(){var b=this._wrapped;d.apply(b,arguments);"shift"!=a&&"splice"!=a||0!==b.length||
delete b[0];return W.call(this,b)}});J(["concat","join","slice"],function(a){var d=f[a];z.prototype[a]=function(){return W.call(this,d.apply(this._wrapped,arguments))}});z.extend(z.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);
!function(e,k){var h=k.prototype.trim,f=k.prototype.trimRight,b=k.prototype.trimLeft,g=function(a,d){if(1>d)return"";for(var b="";0<d;)d&1&&(b+=a),d>>=1,a+=a;return b},a=[].slice,d=function(a){return null==a?"\\s":a.source?a.source:"["+m.escapeRegExp(a)+"]"},l={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},q={},v;for(v in l)q[l[v]]=v;var w=function(){function a(d){return Object.prototype.toString.call(d).slice(8,-1).toLowerCase()}var d=function(){d.cache.hasOwnProperty(arguments[0])||(d.cache[arguments[0]]=
d.parse(arguments[0]));return d.format.call(null,d.cache[arguments[0]],arguments)};d.format=function(d,b){var e=1,f=d.length,h="",l=[],m,u,q,v;for(m=0;m<f;m++)if(h=a(d[m]),"string"===h)l.push(d[m]);else if("array"===h){q=d[m];if(q[2])for(h=b[e],u=0;u<q[2].length;u++){if(!h.hasOwnProperty(q[2][u]))throw Error(w('[_.sprintf] property "%s" does not exist',q[2][u]));h=h[q[2][u]]}else h=q[1]?b[q[1]]:b[e++];if(/[^s]/.test(q[8])&&"number"!=a(h))throw Error(w("[_.sprintf] expecting number but found %s",a(h)));
switch(q[8]){case "b":h=h.toString(2);break;case "c":h=k.fromCharCode(h);break;case "d":h=parseInt(h,10);break;case "e":h=q[7]?h.toExponential(q[7]):h.toExponential();break;case "f":h=q[7]?parseFloat(h).toFixed(q[7]):parseFloat(h);break;case "o":h=h.toString(8);break;case "s":h=(h=k(h))&&q[7]?h.substring(0,q[7]):h;break;case "u":h=Math.abs(h);break;case "x":h=h.toString(16);break;case "X":h=h.toString(16).toUpperCase()}h=/[def]/.test(q[8])&&q[3]&&0<=h?"+"+h:h;u=q[4]?"0"==q[4]?"0":q[4].charAt(1):" ";
v=q[6]-k(h).length;u=q[6]?g(u,v):"";l.push(q[5]?h+u:u+h)}return l.join("")};d.cache={};d.parse=function(a){for(var d=[],b=[],e=0;a;){if(null!==(d=/^[^\x25]+/.exec(a)))b.push(d[0]);else if(null!==(d=/^\x25{2}/.exec(a)))b.push("%");else if(null!==(d=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))){if(d[2]){var e=e|1,f=[],g=d[2],h=[];if(null!==(h=/^([a-z_][a-z_\d]*)/i.exec(g)))for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);
else if(null!==(h=/^\[(\d+)\]/.exec(g)))f.push(h[1]);else throw Error("[_.sprintf] huh?");else throw Error("[_.sprintf] huh?");d[2]=f}else e|=2;if(3===e)throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");b.push(d)}else throw Error("[_.sprintf] huh?");a=a.substring(d[0].length)}return b};return d}(),m={VERSION:"2.3.0",isBlank:function(a){null==a&&(a="");return/^\s*$/.test(a)},stripTags:function(a){return null==a?"":k(a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){a=
null==a?"":k(a);return a.charAt(0).toUpperCase()+a.slice(1)},chop:function(a,d){if(null==a)return[];a=k(a);d=~~d;return 0<d?a.match(new RegExp(".{1,"+d+"}","g")):[a]},clean:function(a){return m.strip(a).replace(/\s+/g," ")},count:function(a,d){return null==a||null==d?0:k(a).split(d).length-1},chars:function(a){return null==a?[]:k(a).split("")},swapCase:function(a){return null==a?"":k(a).replace(/\S/g,function(a){return a===a.toUpperCase()?a.toLowerCase():a.toUpperCase()})},escapeHTML:function(a){return null==
a?"":k(a).replace(/[&<>"']/g,function(a){return"&"+q[a]+";"})},unescapeHTML:function(a){return null==a?"":k(a).replace(/\&([^;]+);/g,function(a,d){var b;return d in l?l[d]:(b=d.match(/^#x([\da-fA-F]+)$/))?k.fromCharCode(parseInt(b[1],16)):(b=d.match(/^#(\d+)$/))?k.fromCharCode(~~b[1]):a})},escapeRegExp:function(a){return null==a?"":k(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(a,d,b,e){a=m.chars(a);a.splice(~~d,~~b,e);return a.join("")},insert:function(a,d,b){return m.splice(a,
d,0,b)},include:function(a,d){return""===d?!0:null==a?!1:-1!==k(a).indexOf(d)},join:function(){var d=a.call(arguments),b=d.shift();null==b&&(b="");return d.join(b)},lines:function(a){return null==a?[]:k(a).split("\n")},reverse:function(a){return m.chars(a).reverse().join("")},startsWith:function(a,d){if(""===d)return!0;if(null==a||null==d)return!1;a=k(a);d=k(d);return a.length>=d.length&&a.slice(0,d.length)===d},endsWith:function(a,d){if(""===d)return!0;if(null==a||null==d)return!1;a=k(a);d=k(d);
return a.length>=d.length&&a.slice(a.length-d.length)===d},succ:function(a){if(null==a)return"";a=k(a);return a.slice(0,-1)+k.fromCharCode(a.charCodeAt(a.length-1)+1)},titleize:function(a){return null==a?"":k(a).replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})},camelize:function(a){return m.trim(a).replace(/[-_\s]+(.)?/g,function(a,d){return d.toUpperCase()})},underscored:function(a){return m.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(a){return m.trim(a).replace(/([A-Z])/g,
"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(a){return m.titleize(k(a).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(a){return m.capitalize(m.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(a,b){if(null==a)return"";if(!b&&h)return h.call(a);b=d(b);return k(a).replace(new RegExp("^"+b+"+|"+b+"+$","g"),"")},ltrim:function(a,e){if(null==a)return"";if(!e&&b)return b.call(a);e=d(e);return k(a).replace(new RegExp("^"+e+"+"),"")},rtrim:function(a,b){if(null==
a)return"";if(!b&&f)return f.call(a);b=d(b);return k(a).replace(new RegExp(b+"+$"),"")},truncate:function(a,d,b){if(null==a)return"";a=k(a);b=b||"...";d=~~d;return a.length>d?a.slice(0,d)+b:a},prune:function(a,d,b){if(null==a)return"";a=k(a);d=~~d;b=null!=b?k(b):"...";if(a.length<=d)return a;d=a.slice(0,d+1).replace(/.(?=\W*\w*$)/g,function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "});d=d.slice(d.length-2).match(/\w\w/)?d.replace(/\s*\S+$/,""):m.rtrim(d.slice(0,d.length-1));return(d+b).length>
a.length?a:a.slice(0,d.length)+b},words:function(a,d){return m.isBlank(a)?[]:m.trim(a,d).split(d||/\s+/)},pad:function(a,d,b,e){a=null==a?"":k(a);d=~~d;var f=0;b?1<b.length&&(b=b.charAt(0)):b=" ";switch(e){case "right":return f=d-a.length,a+g(b,f);case "both":return f=d-a.length,g(b,Math.ceil(f/2))+a+g(b,Math.floor(f/2));default:return f=d-a.length,g(b,f)+a}},lpad:function(a,d,b){return m.pad(a,d,b)},rpad:function(a,d,b){return m.pad(a,d,b,"right")},lrpad:function(a,d,b){return m.pad(a,d,b,"both")},
sprintf:w,vsprintf:function(a,d){d.unshift(a);return w.apply(null,d)},toNumber:function(a,d){if(null==a||""==a)return 0;a=k(a);var b;b=1*(1*a||0).toFixed(~~d)||0;return 0!==b||a.match(/^0+$/)?b:Number.NaN},numberFormat:function(a,d,b,e){if(isNaN(a)||null==a)return"";a=a.toFixed(~~d);e=e||",";a=a.split(".");b=a[1]?(b||".")+a[1]:"";return a[0].replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+e)+b},strRight:function(a,d){if(null==a)return"";a=k(a);var b=(d=null!=d?k(d):d)?a.indexOf(d):-1;return~b?a.slice(b+d.length,
a.length):a},strRightBack:function(a,d){if(null==a)return"";a=k(a);var b=(d=null!=d?k(d):d)?a.lastIndexOf(d):-1;return~b?a.slice(b+d.length,a.length):a},strLeft:function(a,d){if(null==a)return"";a=k(a);var b=(d=null!=d?k(d):d)?a.indexOf(d):-1;return~b?a.slice(0,b):a},strLeftBack:function(a,d){if(null==a)return"";a+="";var b=a.lastIndexOf(null!=d?""+d:d);return~b?a.slice(0,b):a},toSentence:function(a,d,b,e){d=d||", ";b=b||" and ";var f=a.slice(),g=f.pop();2<a.length&&e&&(b=m.rtrim(d)+b);return f.length?
f.join(d)+b+g:g},toSentenceSerial:function(){var d=a.call(arguments);d[3]=!0;return m.toSentence.apply(m,d)},slugify:function(a){if(null==a)return"";var b=new RegExp(d("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u00e5\u00e6\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f8\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a"),"g");a=k(a).toLowerCase().replace(b,function(a){a="\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u00e5\u00e6\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f8\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a".indexOf(a);
return"aaaaaaaaceeeeeiiiilnoooooouuuunczz".charAt(a)||"-"});return m.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,d){return[d,a,d].join("")},quote:function(a){return m.surround(a,'"')},exports:function(){var a={},d;for(d in this)this.hasOwnProperty(d)&&!d.match(/^(?:include|contains|reverse)$/)&&(a[d]=this[d]);return a},repeat:function(a,d,b){if(null==a)return"";d=~~d;if(null==b)return g(k(a),d);for(var e=[];0<d;e[--d]=a);return e.join(b)},levenshtein:function(a,d){if(null==a&&null==
d)return 0;if(null==a)return k(d).length;if(null==d)return k(a).length;a=k(a);d=k(d);for(var b=[],e,f,g=0;g<=d.length;g++)for(var h=0;h<=a.length;h++)f=g&&h?a.charAt(h-1)===d.charAt(g-1)?e:Math.min(b[h],b[h-1],e)+1:g+h,e=b[h],b[h]=f;return b.pop()}};m.strip=m.trim;m.lstrip=m.ltrim;m.rstrip=m.rtrim;m.center=m.lrpad;m.rjust=m.lpad;m.ljust=m.rpad;m.contains=m.include;m.q=m.quote;"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(module.exports=m),exports._s=m):"function"===typeof define&&
define.amd?define("underscore.string",[],function(){return m}):(e._=e._||{},e._.string=e._.str=m);_.mixin(_.str.exports())}(this,String);$.template("widget_notifications",'<section class="notifications pane loading">    <div class="notifications-main-view">        <h1>Alerts get you notified when something important happens:</h1>        <div class="actions">            <a href="#" class="btn btn-ico-action lightdark no-link button-new">                <i class="icon-plus"></i>                <span>NEW<br>ALERT</span>            </a>        </div>        <div class="failure">            <div>                <h2>OOOPS :(</h2>                <p>                    We weren\'t able to obtain widget\'s alerts                    from server.                </p>                <a>C\'mon, try again</a>            </div>        </div>        <div class="m-notifications-list"></div>    </div></section>');
$.template("service_item",'<li class="serv-sq-logo ${kind}">    <div class="description">        <span class="username">${service_username}</span><br />        <span class="service">${kind_name}</span>    </div>    <a class="delete btn btn-ico-action btn-light no-link">        <i class="icon-unlink icon-small"></i>        <span>Unlink<br>account</span>    </a>    {{if can_relink === true}}    <a class="authorize btn btn-ico-action btn-light no-link">        <i class="icon-sync icon-small"></i>        <span>Relink<br>account</span>    </a>    {{/if}}</li>');
$.template("slot_chart",'<section class="slot s-chart s-single-line ${data_source_kind}">    <p class="value"></p>    <p class="subtitle">${subtitle}</p></section>');$.template("subscription_expired",'<article id="subscription-expired">    <header>        <hgroup>            <h1>Your account is disabled due to billing issues</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p>Your account is disabled due to billing issues, but your widgets will be updated daily. Unfortunately, you can no longer create new widgets or dashboards, neither will TV Mode or sharing be functional.</p>        <p>If you want all these features back, update you billing information <a href="#settings/account/billing">here</a>!</p>        <a class="btn-upsell" href="#settings/account/billing">            <strong>Update your billing information</strong>            <span>30 day money back guarantee</span>        </a>    </div></article>');
$.template("widget_appearance",'<section class="appearance pane">    <h1 class="hidden">Choose colors and text for your widget.</h1>    <div class="edit-appearance">        <div class="editor m-widget-edit-positions ${kind}"></div>    {{if has_timespans}}    <div class="extras timespan">      <strong class="title">Timeframe?</strong>    </div>    {{/if}}</section>');$.template("wizard_connect",'<article class="modal-wizard">\t<header>\t\t<hgroup>\t\t\t<h1>Upgrade required</h1>\t\t</hgroup>\t\t<a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>\t</header>\t<div class="content">\t\t<strong class="serv-logo ${$value}">${$value}</strong>\t\t<strong class="label">CONNECT YOUR MAILCHIMP ACCOUNT</strong>\t\t<strong class="label">IF YOU DON\u2019T HAVE AN ACCOUNT...</strong>\t\t<a href="#" class="btn-fake-fill">fill with dummy data</a>\t</div></article>');
$.template("dashboard_item",'{{if owner_index === 0 }}<li class="organization">    <strong>${owner}</strong></li>{{/if}}<li class="${kind.kind}">    <a href="#dashboard/id/${dashboard_id}" class="btn  btn-ico-option">        <span>${label}</span>    </a></li>');$.template("widget_appearance_map_fieldset",'{{if has_multiple_slot_appearances}}<a class="edit">Edit</a>{{/if}}<fieldset class="map-appearance">    <strong class="title">MAP TILE</strong>    <select name="map_tile">        <option value="base-dark" {{if map_tile === \'base-dark\'}}selected="selected"{{/if}}>Dark</option>        <option value="base-light" {{if map_tile === \'base-light\'}}selected="selected"{{/if}}>Light</option>        <option value="base-midnight" {{if map_tile === \'base-midnight\'}}selected="selected"{{/if}}>Midnight</option>        <option value="base-antique" {{if map_tile === \'base-antique\'}}selected="selected"{{/if}}>Antique</option>    <select>    <div class="L-3-1">        <div>            <strong class="title">CHOOSE THE MARKER COLOR</strong>            <ul class="color_picker color_picker_small">                {{each(i, c) colors}}                <li{{if c === color}} class="ui-selected"{{/if}}>                    <span style="background-color: ${c}" data-color="${c}"></span>                </li>                {{/each}}            </ul>        </div>        <div>            <strong class="title">MARKER SIZE</strong>            <input name="marker_size" type="number" value="${marker_size}" min="1"/>        </div>    </div>    <strong class="title">CENTER MAP ON (lat/lon)</strong>    <div class="L-2">        <p>            <input name="center_lat" type="number" step="any" value="${center_lat}"/>        </p>        <p>            <input name="center_lon" type="number" step="any" value="${center_lon}"/>        </p>    </div>    <div class="L-3">        <div>            <strong class="title">ZOOM LEVEL</strong>            <input name="zoom" type="number" value="${zoom}" min="0" />        </div>        <p>            <strong class="title">AUTOFIT</strong>            <select name="autofit">                <option value="t" {{if autofit === \'t\'}}selected="selected"{{/if}}>Yes</option>                <option value="" {{if autofit === \'\'}}selected="selected"{{/if}}>No</option>            </select>        </p>        <p class="field-max_zoom {{if autofit === \'\'}}js-disabled{{/if}}">            <strong class="title">MAX ZOOM</strong>            <input name="max_zoom" type="number" value="${max_zoom}" min="1" />        </p>    </div>    <div class="L-2">        <div>            <strong class="title">INITIAL DATA TYPE</strong>            <select class="field-map-tile" name="initial_data_type">                <option value="last" {{if initial_data_type === \'last\'}}selected="selected"{{/if}}>Last</option>                <option value="since" {{if initial_data_type === \'since\'}}selected="selected"{{/if}}>Since</option>            <select>        </div>        <div>            <div class="field-last"{{if initial_data_type === \'since\'}} style="display: none;"{{/if}}>                <strong class="title">LAST</strong>                <input name="last" type="number" value="${last}" min="0" />            </div>            <div class="field-since"{{if initial_data_type === \'last\'}} style="display: none;"{{/if}}>                <strong class="title">SINCE</strong>                <select name="since">                    <option value="3600">Last hour</option>                    <option value="86400">Last day</option>                    <option value="604800">Last week</option>                    <option value="2419200">Last month</option>                    <option value="29030400">Last year</option>                </select>            </div>        </div>    </div></fieldset>');
$.template("slot",'<section class="slot"></section>');(function(e){e.Client.prototype.deregister=function(){delete e.clients[this.id]}})(ZeroClipboard);$.template("dashboard_mozscape_create",'<article class="service-board-setup mozscape {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo mozscape"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the Mozscape account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service mozscape new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your Mozscape account</legend>                <input type="button" class="connect" value="connect" />            </fieldset>            <fieldset class="setup">                <legend>Which url(s) do you want the dashboard for?</legend>                <input type="button" class="create small" value="ok!" />                <input class="urls-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("directory_serviceboard_notice",'<article id="notice-modal">    <header>        <hgroup>            <h1>Want to add new widgets?</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not a problem...</strong>        <p>Please add a new dashboard by clicking on the button below. You currently have a preset ${service} dashboard that doesn\'t allow any changes, so create a fresh new one, and monitor your world.</p>        <a class="btn-upsell" href="#new/dashboard/default">            <strong>Add a new Dashboard</strong>            <span>(you will be able to add any widgets here)</span>        </a>    </div></article>');
$.template("slot_twilio_progress",'<section class="slot s-progress ${data_source_kind}">    <div class="preview">        <p class="value">...</p>        <p class="subtitle">${subtitle}</p>    </div>    <div class="bar">        <div class="mask">            <span class="value">                <span class="label">                    <strong>...</strong>                    <span>...</span>                </span>            </span>        </div>    </div></section>');
$.template("tvmode_reel_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not so fast....</strong></p>        <p>Advanced TV is only available on the Business and Enterprise plans. Upgrade now to unlock this and other cool features.</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("tvmode_notice",'<p class="display-notice ${size}">Press ESC to exit TV mode</p>');var JSON;JSON||(JSON={});
(function(){function e(a){return 10>a?"0"+a:a}function k(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=d[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function h(d,b){var e,f,t,u,x=g,y,B=b[d];B&&"object"===typeof B&&"function"===typeof B.toJSON&&(B=B.toJSON(d));"function"===typeof l&&(B=l.call(b,d,B));switch(typeof B){case "string":return k(B);case "number":return isFinite(B)?String(B):"null";case "boolean":case "null":return String(B);
case "object":if(!B)return"null";g+=a;y=[];if("[object Array]"===Object.prototype.toString.apply(B)){u=B.length;for(e=0;e<u;e+=1)y[e]=h(e,B)||"null";t=0===y.length?"[]":g?"[\n"+g+y.join(",\n"+g)+"\n"+x+"]":"["+y.join(",")+"]";g=x;return t}if(l&&"object"===typeof l)for(u=l.length,e=0;e<u;e+=1)"string"===typeof l[e]&&(f=l[e],(t=h(f,B))&&y.push(k(f)+(g?": ":":")+t));else for(f in B)Object.prototype.hasOwnProperty.call(B,f)&&(t=h(f,B))&&y.push(k(f)+(g?": ":":")+t);t=0===y.length?"{}":g?"{\n"+g+y.join(",\n"+
g)+"\n"+x+"}":"{"+y.join(",")+"}";g=x;return t}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,a,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(d,b,e){var f;a=g="";if("number"===typeof e)for(f=0;f<e;f+=1)a+=" ";else"string"===typeof e&&(a=e);if((l=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return h("",{"":d})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,d){function b(a,e){var f,g,h=a[e];if(h&&"object"===typeof h)for(f in h)Object.prototype.hasOwnProperty.call(h,f)&&(g=b(h,f),void 0!==g?h[f]=g:delete h[f]);return d.call(a,e,h)}var e;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof d?b({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){var e=this,k=e.Backbone,h=[],f=h.push,b=h.slice,g=h.splice,a;a="undefined"!==typeof exports?exports:e.Backbone={};a.VERSION="1.0.0";var d=e._;d||"undefined"===typeof require||(d=require("underscore"));a.$=e.jQuery||e.Zepto||e.ender||e.$;a.noConflict=function(){e.Backbone=k;return this};a.emulateHTTP=!1;a.emulateJSON=!1;var l=a.Events={on:function(a,d,b){if(!v(this,"on",a,[d,b])||!d)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:d,context:b,
ctx:b||this});return this},once:function(a,b,e){if(!v(this,"once",a,[b,e])||!b)return this;var f=this,g=d.once(function(){f.off(a,g);b.apply(this,arguments)});g._callback=b;return this.on(a,g,e)},off:function(a,b,e){var f,g,h,k,l,m,t,u;if(!this._events||!v(this,"off",a,[b,e]))return this;if(!a&&!b&&!e)return this._events={},this;k=a?[a]:d.keys(this._events);l=0;for(m=k.length;l<m;l++)if(a=k[l],h=this._events[a]){this._events[a]=f=[];if(b||e)for(t=0,u=h.length;t<u;t++)g=h[t],(b&&b!==g.callback&&b!==
g.callback._callback||e&&e!==g.context)&&f.push(g);f.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var d=b.call(arguments,1);if(!v(this,"trigger",a,d))return this;var e=this._events[a],f=this._events.all;e&&w(e,d);f&&w(f,arguments);return this},stopListening:function(a,d,b){var e=this._listeners;if(!e)return this;var f=!d&&!b;"object"===typeof d&&(b=this);a&&((e={})[a._listenerId]=a);for(var g in e)e[g].off(d,b,this),f&&delete this._listeners[g];return this}},
q=/\s+/,v=function(a,d,b,e){if(!b)return!0;if("object"===typeof b){for(var f in b)a[d].apply(a,[f,b[f]].concat(e));return!1}if(q.test(b)){b=b.split(q);f=0;for(var g=b.length;f<g;f++)a[d].apply(a,[b[f]].concat(e));return!1}return!0},w=function(a,d){var b,e=-1,f=a.length,g=d[0],h=d[1],k=d[2];switch(d.length){case 0:for(;++e<f;)(b=a[e]).callback.call(b.ctx);break;case 1:for(;++e<f;)(b=a[e]).callback.call(b.ctx,g);break;case 2:for(;++e<f;)(b=a[e]).callback.call(b.ctx,g,h);break;case 3:for(;++e<f;)(b=
a[e]).callback.call(b.ctx,g,h,k);break;default:for(;++e<f;)(b=a[e]).callback.apply(b.ctx,d)}};d.each({listenTo:"on",listenToOnce:"once"},function(a,b){l[b]=function(b,e,f){var g=this._listeners||(this._listeners={}),h=b._listenerId||(b._listenerId=d.uniqueId("l"));g[h]=b;"object"===typeof e&&(f=this);b[a](e,f,this);return this}});l.bind=l.on;l.unbind=l.off;d.extend(a,l);var m=a.Model=function(a,b){var e,f=a||{};b||(b={});this.cid=d.uniqueId("c");this.attributes={};d.extend(this,d.pick(b,t));b.parse&&
(f=this.parse(f,b)||{});if(e=d.result(this,"defaults"))f=d.defaults({},f,e);this.set(f,b);this.changed={};this.initialize.apply(this,arguments)},t=["url","urlRoot","collection"];d.extend(m.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return d.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=
this.get(a)},set:function(a,b,e){var f,g,h,k,l,m,t;if(null==a)return this;"object"===typeof a?(g=a,e=b):(g={})[a]=b;e||(e={});if(!this._validate(g,e))return!1;h=e.unset;k=e.silent;a=[];l=this._changing;this._changing=!0;l||(this._previousAttributes=d.clone(this.attributes),this.changed={});t=this.attributes;m=this._previousAttributes;this.idAttribute in g&&(this.id=g[this.idAttribute]);for(f in g)b=g[f],d.isEqual(t[f],b)||a.push(f),d.isEqual(m[f],b)?delete this.changed[f]:this.changed[f]=b,h?delete t[f]:
t[f]=b;if(!k)for(a.length&&(this._pending=!0),b=0,f=a.length;b<f;b++)this.trigger("change:"+a[b],this,t[a[b]],e);if(l)return this;if(!k)for(;this._pending;)this._pending=!1,this.trigger("change",this,e);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b={},e;for(e in this.attributes)b[e]=void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,
a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b,e=!1,f=this._changing?this._previousAttributes:this.attributes,g;for(g in a)d.isEqual(f[g],b=a[g])||((e||(e={}))[g]=b);return e},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return d.clone(this._previousAttributes)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,e=a.success;a.success=function(d){if(!b.set(b.parse(d,
a),a))return!1;e&&e(b,d,a);b.trigger("sync",b,d,a)};n(this,a);return this.sync("read",this,a)},save:function(a,b,e){var f,g=this.attributes;null==a||"object"===typeof a?(f=a,e=b):(f={})[a]=b;if(!(!f||e&&e.wait||this.set(f,e)))return!1;e=d.extend({validate:!0},e);if(!this._validate(f,e))return!1;f&&e.wait&&(this.attributes=d.extend({},g,f));void 0===e.parse&&(e.parse=!0);var h=this,k=e.success;e.success=function(a){h.attributes=g;var b=h.parse(a,e);e.wait&&(b=d.extend(f||{},b));if(d.isObject(b)&&!h.set(b,
e))return!1;k&&k(h,a,e);h.trigger("sync",h,a,e)};n(this,e);a=this.isNew()?"create":e.patch?"patch":"update";"patch"===a&&(e.attrs=f);a=this.sync(a,this,e);f&&e.wait&&(this.attributes=g);return a},destroy:function(a){a=a?d.clone(a):{};var b=this,e=a.success,f=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(d){(a.wait||b.isNew())&&f();e&&e(b,d,a);b.isNew()||b.trigger("sync",b,d,a)};if(this.isNew())return a.success(),!1;n(this,a);var g=this.sync("delete",this,a);a.wait||f();return g},
url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||N();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,d){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},d.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=d.extend({},this.attributes,a);var e=this.validationError=
this.validate(a,b)||null;if(!e)return!0;this.trigger("invalid",this,e,d.extend(b||{},{validationError:e}));return!1}});d.each("keys values pairs invert pick omit".split(" "),function(a){m.prototype[a]=function(){var e=b.call(arguments);e.unshift(this.attributes);return d[a].apply(d,e)}});var u=a.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,
d.extend({silent:!0},b))},x={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};d.extend(u.prototype,l,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(d){return d.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.defaults(b||{},y))},remove:function(a,b){a=d.isArray(a)?a.slice():[a];b||(b={});var e,f,g,h;e=0;for(f=a.length;e<f;e++)if(h=this.get(a[e]))delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),
this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h);return this},set:function(a,b){b=d.defaults(b||{},x);b.parse&&(a=this.parse(a,b));d.isArray(a)||(a=a?[a]:[]);var e,h,k,l,m,t=b.at,u=this.comparator&&null==t&&!1!==b.sort,w=d.isString(this.comparator)?this.comparator:null,q=[],v=[],n={};e=0;for(h=a.length;e<h;e++)if(k=this._prepareModel(a[e],b))(l=this.get(k))?(b.remove&&(n[l.cid]=!0),b.merge&&(l.set(k.attributes,b),u&&!m&&l.hasChanged(w)&&
(m=!0))):b.add&&(q.push(k),k.on("all",this._onModelEvent,this),this._byId[k.cid]=k,null!=k.id&&(this._byId[k.id]=k));if(b.remove){e=0;for(h=this.length;e<h;++e)n[(k=this.models[e]).cid]||v.push(k);v.length&&this.remove(v,b)}q.length&&(u&&(m=!0),this.length+=q.length,null!=t?g.apply(this.models,[t,0].concat(q)):f.apply(this.models,q));m&&this.sort({silent:!0});if(b.silent)return this;e=0;for(h=q.length;e<h;e++)(k=q[e]).trigger("add",k,this,b);m&&this.trigger("sort",this,b);return this},reset:function(a,
b){b||(b={});for(var e=0,f=this.models.length;e<f;e++)this._removeReference(this.models[e]);b.previousModels=this.models;this._reset();this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:this.length},b));return a},pop:function(a){var d=this.at(this.length-1);this.remove(d,a);return d},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:0},b));return a},shift:function(a){var d=
this.at(0);this.remove(d,a);return d},slice:function(a,d){return this.models.slice(a,d)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return d.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(d){for(var b in a)if(a[b]!==d.get(b))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});d.isString(this.comparator)||
1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(d.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,e){b||(b=this.comparator);var f=d.isFunction(b)?b:function(a){return a.get(b)};return d.sortedIndex(this.models,a,f,e)},pluck:function(a){return d.invoke(this.models,"get",a)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,e=this;a.success=function(d){e[a.reset?"reset":
"set"](d,a);b&&b(e,d,a);e.trigger("sync",e,d,a)};n(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var e=this,f=b.success;b.success=function(d){b.wait&&e.add(a,b);f&&f(a,d,b)};a.save(null,b);return a},parse:function(a,d){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,d){if(a instanceof m)return a.collection||
(a.collection=this),a;d||(d={});d.collection=this;var b=new this.model(a,d);return b._validate(a,d)?b:(this.trigger("invalid",this,a,d),!1)},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,d,b,e){if("add"!==a&&"remove"!==a||b===this)"destroy"===a&&this.remove(d,e),d&&a==="change:"+d.idAttribute&&(delete this._byId[d.previous(d.idAttribute)],null!=d.id&&(this._byId[d.id]=d)),this.trigger.apply(this,arguments)}});d.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),
function(a){u.prototype[a]=function(){var e=b.call(arguments);e.unshift(this.models);return d[a].apply(d,e)}});d.each(["groupBy","countBy","sortBy"],function(a){u.prototype[a]=function(b,e){var f=d.isFunction(b)?b:function(a){return a.get(b)};return d[a](this.models,f,e)}});var h=a.View=function(a){this.cid=d.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},B=/^(\S+)\s*(.*)$/,F="model collection el id attributes className tagName events".split(" ");
d.extend(h.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(d,b){this.$el&&this.undelegateEvents();this.$el=d instanceof a.$?d:a.$(d);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var e=a[b];d.isFunction(e)||
(e=this[a[b]]);if(e){var f=b.match(B),g=f[1],f=f[2],e=d.bind(e,this),g=g+(".delegateEvents"+this.cid);if(""===f)this.$el.on(g,e);else this.$el.on(g,f,e)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=d.extend({},d.result(this,"options"),a));d.extend(this,d.pick(a,F));this.options=a},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var b=d.extend({},d.result(this,"attributes"));
this.id&&(b.id=d.result(this,"id"));this.className&&(b["class"]=d.result(this,"className"));b=a.$("<"+d.result(this,"tagName")+">").attr(b);this.setElement(b,!1)}}});a.sync=function(b,e,f){var g=C[b];d.defaults(f||(f={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var h={type:g,dataType:"json"};f.url||(h.url=d.result(e,"url")||N());null!=f.data||!e||"create"!==b&&"update"!==b&&"patch"!==b||(h.contentType="application/json",h.data=JSON.stringify(f.attrs||e.toJSON(f)));f.emulateJSON&&(h.contentType=
"application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{});if(f.emulateHTTP&&("PUT"===g||"DELETE"===g||"PATCH"===g)){h.type="POST";f.emulateJSON&&(h.data._method=g);var k=f.beforeSend;f.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g);if(k)return k.apply(this,arguments)}}"GET"===h.type||f.emulateJSON||(h.processData=!1);"PATCH"!==h.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(h.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});
b=f.xhr=a.ajax(d.extend(h,f));e.trigger("request",e,b,f);return b};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var K=a.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,J=/(\(\?)?:\w+/g,G=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(K.prototype,l,{initialize:function(){},route:function(b,e,f){d.isRegExp(b)||(b=this._routeToRegExp(b));
d.isFunction(e)&&(f=e,e="");f||(f=this[e]);var g=this;a.history.route(b,function(d){d=g._extractParameters(b,d);f&&f.apply(g,d);g.trigger.apply(g,["route:"+e].concat(d));g.trigger("route",e,d);a.history.trigger("route",g,e,d)});return this},navigate:function(d,b){a.history.navigate(d,b);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(A,"\\$&").replace(z,
"(?:$1)?").replace(J,function(a,d){return d?a:"([^/]+)"}).replace(G,"(.*?)");return new RegExp("^"+a+"$")},_extractParameters:function(a,b){var e=a.exec(b).slice(1);return d.map(e,function(a){return a?decodeURIComponent(a):null})}});var I=a.History=function(){this.handlers=[];d.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,E=/msie [\w.]+/,Y=/\/$/;I.started=!1;d.extend(I.prototype,l,{interval:50,getHash:function(a){return(a=
(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,d){if(null==a)if(this._hasPushState||!this._wantsHashChange||d){a=this.location.pathname;var b=this.root.replace(Y,"");a.indexOf(b)||(a=a.substr(b.length))}else a=this.getHash();return a.replace(O,"")},start:function(b){if(I.started)throw Error("Backbone.history has already been started");I.started=!0;this.options=d.extend({},{root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;
this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);b=this.getFragment();var e=document.documentMode,e=E.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);this.root=("/"+this.root+"/").replace(P,"/");e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b));if(this._hasPushState)a.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&
"onhashchange"in window&&!e)a.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=b;b=this.location;e=b.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!e)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&e&&b.hash&&(this.fragment=
this.getHash().replace(O,""),this.history.replaceState({},document.title,this.root+this.fragment+b.search));if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);I.started=!1},route:function(a,d){this.handlers.unshift({route:a,callback:d})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;
this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,d){if(!I.started)return!1;d&&!0!==d||(d={trigger:d});a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var b=this.root+a;if(this._hasPushState)this.history[d.replace?"replaceState":"pushState"]({},document.title,b);else if(this._wantsHashChange)this._updateHash(this.location,
a,d.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(d.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,d.replace));else return this.location.assign(b);d.trigger&&this.loadUrl(a)}},_updateHash:function(a,d,b){b?(b=a.href.replace(/(javascript:|#).*$/,""),a.replace(b+"#"+d)):a.hash="#"+d}});a.history=new I;m.extend=u.extend=K.extend=h.extend=I.extend=function(a,b){var e=this,f;f=a&&d.has(a,"constructor")?a.constructor:function(){return e.apply(this,
arguments)};d.extend(f,e,b);var g=function(){this.constructor=f};g.prototype=e.prototype;f.prototype=new g;a&&d.extend(f.prototype,a);f.__super__=e.prototype;return f};var N=function(){throw Error('A "url" property or function must be specified');},n=function(a,d){var b=d.error;d.error=function(e){b&&b(a,e,d);a.trigger("error",a,e,d)}}}).call(this);$.template("notifications",'{{if subscriber_kind === \'whitelabel\' }}    {{if readonly === false && clients === true }}     <li class="notification login_as">        <a href="access/login-as/">            View the dashboard as your client        </a>        <a href="#" class="close">Dismiss</a>    </li>    {{else}}        <li class="notification empty"></li>    {{/if}}{{else current_is_serviceboard === true && signup }}     <li class="notification signup">        <a href="#new/dashboard/default">            Ready to explore? Start creating <strong>your own dashboards</strong>        </a>        <a href="#" class="close">Dismiss</a>    </li>{{else current_is_serviceboard === false && current_is_chromeboard === false && has_trial_expired === true }}    <li class="notification trial-expired">        <a href="#trial-expired">your trial has sadly come to an end</a>    </li>{{else current_is_serviceboard === false && current_is_chromeboard === false && has_recurly_account_expired}}    <li class="notification subscription-expired">        <a href="#subscription-expired">account disabled due to billing issues</a>    </li>{{else current_is_serviceboard === false && current_is_chromeboard === false && trial_expiration_date }}    <li class="notification subscription">        <a href="#settings/account/subscription">            your trial ends on ${trial_expiration_date}, <span>upgrade now!</span>        </a>    </li>{{else plan_label === \'sinfonier\'}}    <li class="notification subscription">        <a href="http://sinfonier-project.net" target="_blank">powered by <strong>Sinfonier</strong></a>    </li>{{else current_is_serviceboard === false && current_is_chromeboard === false && signup }}     <li class="notification signup">        <a href="#settings/dashboard">            Did you know you can <strong>share this dashboard?</strong>        </a>        <a href="#" class="close">Dismiss</a>    </li>{{else}}    <li class="notification empty"></li>{{/if}}');
(function(e){"function"===typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function k(){var a;a=e(this);if(!a.data("timeago")){a.data("timeago",{datetime:b.datetime(a)});var d=e.trim(a.text());b.settings.localeTitle?a.attr("title",a.data("timeago").datetime.toLocaleString()):!(0<d.length)||b.isTime(a)&&a.attr("title")||a.attr("title",d)}a=a.data("timeago");isNaN(a.datetime)||e(this).text(h(a.datetime));return this}function h(a){return b.inWords(f(a))}function f(a){return(new Date).getTime()-
a.getTime()}e.timeago=function(a){return a instanceof Date?h(a):"string"===typeof a?h(e.timeago.parse(a)):"number"===typeof a?h(new Date(a)):h(e.timeago.datetime(a))};var b=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6E4,allowFuture:!1,localeTitle:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",
months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(a){function d(d,f){return(e.isFunction(d)?d(f,a):d).replace(/%d/i,b.numbers&&b.numbers[f]||f)}var b=this.settings.strings,f=b.prefixAgo,g=b.suffixAgo;this.settings.allowFuture&&0>a&&(f=b.prefixFromNow,g=b.suffixFromNow);var h=Math.abs(a)/1E3,k=h/60,t=k/60,u=t/24,x=u/365,h=45>h&&d(b.seconds,Math.round(h))||90>h&&d(b.minute,1)||45>k&&d(b.minutes,Math.round(k))||90>k&&d(b.hour,1)||24>t&&d(b.hours,
Math.round(t))||42>t&&d(b.day,1)||30>u&&d(b.days,Math.round(u))||45>u&&d(b.month,1)||365>u&&d(b.months,Math.round(u/30))||1.5>x&&d(b.year,1)||d(b.years,Math.round(x)),k=b.wordSeparator||"";void 0===b.wordSeparator&&(k=" ");return e.trim([f,h,g].join(k))},parse:function(a){a=e.trim(a);a=a.replace(/\.\d+/,"");a=a.replace(/-/,"/").replace(/-/,"/");a=a.replace(/T/," ").replace(/Z/," UTC");a=a.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(a)},datetime:function(a){a=b.isTime(a)?e(a).attr("datetime"):
e(a).attr("title");return b.parse(a)},isTime:function(a){return"time"===e(a).get(0).tagName.toLowerCase()}});var g={init:function(){var a=e.proxy(k,this);a();var d=b.settings;if(0<d.refreshMillis)var f=setInterval(e.proxy(function(){0===e(this).parents("html").length?clearInterval(f):a(f)},this),d.refreshMillis)},update:function(a){e(this).data("timeago",{datetime:b.parse(a)});k.apply(this)}};e.fn.timeago=function(a,d){var b=a?g[a]:g.init;if(!b)throw Error("Unknown function name '"+a+"' for timeago");
this.each(function(){b.call(this,d)});return this};document.createElement("abbr");document.createElement("time")});
$(function(){$.timeago.settings.refreshMillis=1E4;$.timeago.settings.allowFuture=!0;$.timeago.settings.strings={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"few seconds",minute:"a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]}});$.template("directory_custom_category_item",'<a href="#custom/${id}" class="${id} custom">        <h4>${name}</h4>        <p>${description}</p></a>');
$.template("directory_services_item",'<a href="#directory/service/${id}" class="${id} {{if needs_upgrade}} disabled{{/if}}">    <h4 class="serv-logo ${id}">${name}</h4></a>');$.template("slot_timeline",'<section class="slot s-timeline ${data_source_kind}">    <ul>        <li class="placeholder">No data yet</li>    </ul></section>');$.template("directory_group_detail",'<li>    <div class="kind m-widget-preview">        <h2>${name}</h2>        <p class="description">{{html description}}</p>        {{if many_kinds}}            {{if has_choices}}            <select data-placeholder="${choice_question}" class="kinds">                <option></option>                {{each(i, k) kinds}}                <option value="${k.kind}">${k.choice_answer}</option>                {{/each}}            </select>            {{else}}            <h3>Choose one version:</h3>            <ul class="kinds"></ul>            {{/if}}        {{/if}}        {{if needs_upgrade}}            <a class="add">Upgrade your account</a>        {{else}}            {{if many_kinds}}<a class="add disabled" disabled="disabled">            {{else}}<a class="add">{{/if}}Add this widget</a>        {{/if}}    </div></li>');
(function(){Modernizr.testStyles("#modernizr div:first-of-type { font-size: 42px; }",function(e,k){var h=e.childNodes[0],h="42px"===(window.getComputedStyle?getComputedStyle(h,null):h.currentStyle).fontSize;Modernizr.addTest("firstoftype",h)},1)})();$.template("widget_notification_item",'<div class="m-notification">    <div>        <p><em class="clause">if</em> <strong class="condition">${condition}</strong></p>        <p><em class="clause">then</em> <strong class="type ${action_kind}" title="${action_name}"></strong>        <strong class="condition" title="${action}">${action}</strong></p>    </div>    <div class="actions">        <a href="" class="button-delete btn btn-ico-action-medium no-link">            <i class="icon-small icon-trash"></i>            <span>Delete</span>        </a>        <a href="" data-icon="edit" class="button-edit btn btn-ico-action-medium no-link">            <i class="icon-small icon-edit"></i>            <span>Edit</span>        </a>    </div></div>');
$.template("dashboard",'<div class="dashboard ${kind.kind}">    <ol class="gridster"></ol></div>');$.template("confirmation",'<div class="confirmation ${confirmation_class}">    <p>${text}</p>    <div class="actions">        <a href="#" class="conf_continue ${continue_css_class} no-link">{{if continue_icon}}<i class="${continue_icon}"></i>{{/if}}<span>${continue_text}</span></a>        <a href="#" class="conf_discard ${discard_css_class} no-link"><span>${discard_text}</span></a>    </div></div>');
jQuery.cookie=function(e,k,h){if("undefined"!=typeof k){h=h||{};null===k&&(k="",h.expires=-1);var f="";h.expires&&("number"==typeof h.expires||h.expires.toUTCString)&&("number"==typeof h.expires?(f=new Date,f.setTime(f.getTime()+864E5*h.expires)):f=h.expires,f="; expires="+f.toUTCString());var b=h.path?"; path="+h.path:"",g=h.domain?"; domain="+h.domain:"";h=h.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(k),f,b,g,h].join("")}else{k=null;if(document.cookie&&""!=document.cookie)for(h=
document.cookie.split(";"),f=0;f<h.length;f++)if(b=jQuery.trim(h[f]),b.substring(0,e.length+1)==e+"="){k=decodeURIComponent(b.substring(e.length+1));break}return k}};
$(function(){$("html").ajaxSend(function(e,k,h){D.u.is_external(h.url)||k.setRequestHeader("X-CSRFToken",$.cookie("csrftoken"))});(function(){D.config&&($('<div id="sound-player"></div>').appendTo("body"),$("#sound-player").jPlayer({ready:function(){$(this).jPlayer("setMedia",{oga:D.config.update_sound_oga,mp3:D.config.update_sound_mp3}).data("ready",!0)},swfPath:D.config.sound_player_swf,solution:$.browser.opera?"flash":"html,flash",supplied:"oga,mp3",preload:"auto"}))})()});
$.template("alerts_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Not so fast...</strong></p>        <p>You have reached the limit of alerts included in your plan. Upgrade now to get access to more alerts and unlock other cool features.</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("input_password",'{{if tooltip}}<div class="tip-input tip-${name}-container">        <input type="password" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} />        <input type="button" class="tip" value="tip" tabindex="9999" />        <div class="tooltip">            <span>{{html tooltip}}</span>            <a class="close-tooltip">close</a>        </div>    </div>{{else}}    <input type="password" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} />{{/if}}');
(function(e){var k,h,f,b,g,a,d,l,q,v,w=0,m={},t=[],u=0,x={},y=[],B=null,F=new Image,C=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,K=/[^\.]\.(swf)\s*$/i,z,J=1,G=0,A="",I,O,P=!1,E=e.extend(e("<div/>")[0],{prop:0}),Y=e.browser.msie&&7>e.browser.version&&!window.XMLHttpRequest,N=void 0!==document.createTouch,n=function(){h.hide();F.onerror=F.onload=null;B&&B.abort();k.empty()},M=function(){!1===m.onError(t,w,m)?(h.hide(),P=!1):(m.titleShow=!1,m.width="auto",m.height="auto",k.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),
W())},U=function(){var d=t[w],b,f,g,l,u,q;n();m=e.extend({},e.fn.fancybox.defaults,"undefined"==typeof e(d).data("fancybox")?m:e(d).data("fancybox"));q=m.onStart(t,w,m);if(!1===q)P=!1;else{"object"==typeof q&&(m=e.extend(m,q));g=m.title||(d.nodeName?e(d).attr("title"):d.title)||"";d.nodeName&&!m.orig&&(m.orig=e(d).children("img:first").length?e(d).children("img:first"):e(d));""===g&&m.orig&&m.titleFromAlt&&(g=m.orig.attr("alt"));b=m.href||(d.nodeName?e(d).attr("href"):d.href)||null;if(/^(?:javascript)/i.test(b)||
"#"==b)b=null;m.type?(f=m.type,b||(b=m.content)):m.content?f="html":b&&(f=b.match(C)?"image":b.match(K)?"swf":e(d).hasClass("iframe")?"iframe":0===b.indexOf("#")?"inline":"ajax");if(f)switch("inline"==f&&(d=b.substr(b.indexOf("#")),f=0<e(d).length?"inline":"ajax"),m.type=f,m.href=b,m.title=g,m.autoDimensions&&("html"==m.type||"inline"==m.type||"ajax"==m.type?(m.width="auto",m.height="auto"):m.autoDimensions=!1),m.modal&&(m.overlayShow=!0,m.hideOnOverlayClick=!1,m.hideOnContentClick=!1,m.enableEscapeButton=
!1,m.showCloseButton=!1),m.padding=parseInt(m.padding,10),m.margin=parseInt(m.margin,10),k.css("padding",m.padding+m.margin),e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){e(this).replaceWith(a.children())}),f){case "html":k.html(m.content);W();break;case "inline":if(!0===e(d).parent().is("#fancybox-content")){P=!1;break}e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(d)).bind("fancybox-cleanup",function(){e(this).replaceWith(a.children())}).bind("fancybox-cancel",
function(){e(this).replaceWith(k.children())});e(d).appendTo(k);W();break;case "image":P=!1;e.fancybox.showActivity();F=new Image;F.onerror=function(){M()};F.onload=function(){P=!0;F.onerror=F.onload=null;m.width=F.width;m.height=F.height;e("<img />").attr({id:"fancybox-img",src:F.src,alt:m.title}).appendTo(k);H()};F.src=b;break;case "swf":m.scrolling="no";l='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+m.width+'" height="'+m.height+'"><param name="movie" value="'+b+'"></param>';
u="";e.each(m.swf,function(a,d){l+='<param name="'+a+'" value="'+d+'"></param>';u+=" "+a+'="'+d+'"'});l+='<embed src="'+b+'" type="application/x-shockwave-flash" width="'+m.width+'" height="'+m.height+'"'+u+"></embed></object>";k.html(l);W();break;case "ajax":P=!1;e.fancybox.showActivity();m.ajax.win=m.ajax.success;B=e.ajax(e.extend({},m.ajax,{url:b,data:m.ajax.data||{},error:function(a,d,b){0<a.status&&M()},success:function(a,d,e){if(200==("object"==typeof e?e:B).status){if("function"==typeof m.ajax.win){q=
m.ajax.win(b,a,d,e);if(!1===q){h.hide();return}if("string"==typeof q||"object"==typeof q)a=q}k.html(a);W()}}}));break;case "iframe":H()}else M()}},W=function(){var a=m.width,d=m.height,a=-1<a.toString().indexOf("%")?parseInt((e(window).width()-2*m.margin)*parseFloat(a)/100,10)+"px":"auto"==a?"auto":a+"px",d=-1<d.toString().indexOf("%")?parseInt((e(window).height()-2*m.margin)*parseFloat(d)/100,10)+"px":"auto"==d?"auto":d+"px";k.wrapInner('<div style="width:'+a+";height:"+d+";overflow: "+("auto"==
m.scrolling?"auto":"yes"==m.scrolling?"scroll":"hidden")+';position:relative;"></div>');m.width=k.width();m.height=k.height();H()},H=function(){var n,z;h.hide();n=a.height();if(b.is(":visible")&&!1===x.onCleanup(y,u,x))e.event.trigger("fancybox-cancel"),P=!1;else{a.css({height:n});P=!0;e(a.add(f)).unbind();e(window).unbind("resize.fb scroll.fb");e(document).unbind("keydown.fb");b.is(":visible")&&"outside"!==x.titlePosition&&b.css("height",g.height());y=t;u=w;x=m;if(x.overlayShow){if(f.css({"background-color":x.overlayColor,
opacity:x.overlayOpacity,cursor:x.hideOnOverlayClick?"pointer":"auto",height:e(document).height()}),!f.is(":visible")){if(Y)e("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});f.show()}}else f.hide();O=fa();A=x.title||"";G=0;l.empty().removeAttr("style").removeClass();if(!1!==x.titleShow&&(A=e.isFunction(x.titleFormat)?x.titleFormat(A,y,u,x):A&&A.length?"float"==
x.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+A+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+x.titlePosition+'">'+A+"</div>":!1)&&""!==A)switch(l.addClass("fancybox-title-"+x.titlePosition).html(A).appendTo("body").show(),x.titlePosition){case "inside":l.css({width:O.width-2*x.padding,marginLeft:x.padding,marginRight:x.padding});G=l.outerHeight(!0);
l.appendTo(g);O.height+=G;break;case "over":l.css({marginLeft:x.padding,width:O.width-2*x.padding,bottom:x.padding}).appendTo(g);break;case "float":l.css("left",-1*parseInt((l.width()-O.width-40)/2,10)).appendTo(b);break;default:l.css({width:O.width-2*x.padding,paddingLeft:x.padding,paddingRight:x.padding}).appendTo(b)}l.hide();b.is(":visible")?(e(d.add(q).add(v)).hide(),n=b.position(),I={top:n.top,left:n.left,width:b.width(),height:b.height()},z=I.width==O.width&&I.height==O.height,e("> div",a).clone().css({position:"absolute",
"background-color":a.css("background-color")}).appendTo(a),e("> div",a).first().fadeTo(x.changeFade,.3,function(){var d=function(){a.html(k.contents()).fadeTo(x.changeFade,1,R)};e.event.trigger("fancybox-change");a.empty().removeAttr("filter").css({"border-width":x.padding,width:O.width-2*x.padding,height:m.autoDimensions?"auto":O.height-G-2*x.padding});z?d():(E.prop=0,e(E).animate({prop:1},{duration:x.changeSpeed,easing:x.easingChange,step:X,complete:d}))})):(b.removeAttr("style"),a.css("border-width",
x.padding),"elastic"==x.transitionIn?(I=ja(),a.html(k.contents()),b.show(),x.opacity&&(O.opacity=0),E.prop=0,e(E).animate({prop:1},{duration:x.speedIn,easing:x.easingIn,step:X,complete:R})):("inside"==x.titlePosition&&0<G&&l.show(),a.css({width:O.width-2*x.padding,height:m.autoDimensions?"auto":O.height-G-2*x.padding}).html(k.contents()),b.css(O).fadeIn("none"==x.transitionIn?0:x.speedIn,R)))}},S=function(){(x.enableEscapeButton||x.enableKeyboardNav)&&e(document).bind("keydown.fb",function(a){27==
a.keyCode&&x.enableEscapeButton?(a.preventDefault(),e.fancybox.close()):37!=a.keyCode&&39!=a.keyCode||!x.enableKeyboardNav||"INPUT"===a.target.tagName||"TEXTAREA"===a.target.tagName||"SELECT"===a.target.tagName||(a.preventDefault(),e.fancybox[37==a.keyCode?"prev":"next"]())});x.showNavArrows?((x.cyclic&&1<y.length||0!==u)&&q.show(),(x.cyclic&&1<y.length||u!=y.length-1)&&v.show()):(q.hide(),v.hide())},R=function(){e.support.opacity||(a.get(0).style.removeAttribute("filter"),b.get(0).style.removeAttribute("filter"));
m.autoDimensions&&a.css("height","auto");b.css("height","auto");A&&A.length&&l.show();x.showCloseButton&&d.show();S();x.hideOnContentClick&&a.bind("click",e.fancybox.close);x.hideOnOverlayClick&&f.bind("click",e.fancybox.close);e(window).bind("resize.fb",e.fancybox.resize);x.centerOnScroll&&e(window).bind("scroll.fb",e.fancybox.center);"iframe"==x.type&&e('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(e.browser.msie?'allowtransparency="true""':
"")+' scrolling="'+m.scrolling+'" src="'+x.href+'"></iframe>').appendTo(a);b.show();P=!1;e.fancybox.center();x.onComplete(y,u,x);var g,h;y.length-1>u&&(g=y[u+1].href,"undefined"!==typeof g&&g.match(C)&&(h=new Image,h.src=g));0<u&&(g=y[u-1].href,"undefined"!==typeof g&&g.match(C)&&(h=new Image,h.src=g))},X=function(d){var e={width:parseInt(I.width+(O.width-I.width)*d,10),height:parseInt(I.height+(O.height-I.height)*d,10),top:parseInt(I.top+(O.top-I.top)*d,10),left:parseInt(I.left+(O.left-I.left)*d,
10)};"undefined"!==typeof O.opacity&&(e.opacity=.5>d?.5:d);b.css(e);a.css({width:e.width-2*x.padding,height:e.height-G*d-2*x.padding})},ea=function(){return[(N&&window.innerWidth?window.innerWidth:e(window).width())-2*x.margin,(N&&window.innerHeight?window.innerHeight:e(window).height())-2*x.margin,e(document).scrollLeft()+x.margin,e(document).scrollTop()+x.margin]},fa=function(){var a=ea(),d={},b=x.autoScale,e=2*x.padding;-1<x.width.toString().indexOf("%")?d.width=parseInt(a[0]*parseFloat(x.width)/
100,10):d.width=x.width+e;-1<x.height.toString().indexOf("%")?d.height=parseInt(a[1]*parseFloat(x.height)/100,10):d.height=x.height+e;b&&(d.width>a[0]||d.height>a[1])&&("image"==m.type||"swf"==m.type?(b=x.width/x.height,d.width>a[0]&&(d.width=a[0],d.height=parseInt((d.width-e)/b+e,10)),d.height>a[1]&&(d.height=a[1],d.width=parseInt((d.height-e)*b+e,10))):(d.width=Math.min(d.width,a[0]),d.height=Math.min(d.height,a[1])));d.top=parseInt(Math.max(a[3]-20,a[3]+.5*(a[1]-d.height-40)),10);d.left=parseInt(Math.max(a[2]-
20,a[2]+.5*(a[0]-d.width-40)),10);return d},ja=function(){var a=m.orig?e(m.orig):!1,d={};a&&a.length?(d=a.offset(),d.top+=parseInt(a.css("paddingTop"),10)||0,d.left+=parseInt(a.css("paddingLeft"),10)||0,d.top+=parseInt(a.css("border-top-width"),10)||0,d.left+=parseInt(a.css("border-left-width"),10)||0,d.width=a.width(),d.height=a.height(),d={width:d.width+2*x.padding,height:d.height+2*x.padding,top:d.top-x.padding-20,left:d.left-x.padding-20}):(a=ea(),d={width:2*x.padding,height:2*x.padding,top:parseInt(a[3]+
.5*a[1],10),left:parseInt(a[2]+.5*a[0],10)});return d},ga=function(){h.is(":visible")?(e("div",h).css("top",-40*J+"px"),J=(J+1)%12):clearInterval(z)};e.fn.fancybox=function(a){if(!e(this).length)return this;e(this).data("fancybox",e.extend({},a,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(a){a.preventDefault();P||(P=!0,e(this).blur(),t=[],w=0,(a=e(this).attr("rel")||"")&&""!=a&&"nofollow"!==a?(t=e("a[rel="+a+"], area[rel="+a+"]"),w=t.index(this)):t.push(this),U())});
return this};e.fancybox=function(a,d){var b;if(!P){P=!0;b="undefined"!==typeof d?d:{};t=[];w=parseInt(b.index,10)||0;if(e.isArray(a)){for(var f=0,g=a.length;f<g;f++)"object"==typeof a[f]?e(a[f]).data("fancybox",e.extend({},b,a[f])):a[f]=e({}).data("fancybox",e.extend({content:a[f]},b));t=jQuery.merge(t,a)}else"object"==typeof a?e(a).data("fancybox",e.extend({},b,a)):a=e({}).data("fancybox",e.extend({content:a},b)),t.push(a);if(w>t.length||0>w)w=0;U()}};e.fancybox.showActivity=function(){clearInterval(z);
h.show();z=setInterval(ga,66)};e.fancybox.hideActivity=function(){h.hide()};e.fancybox.next=function(){return e.fancybox.pos(u+1)};e.fancybox.prev=function(){return e.fancybox.pos(u-1)};e.fancybox.pos=function(a){P||(a=parseInt(a),t=y,-1<a&&a<y.length?(w=a,U()):x.cyclic&&1<y.length&&(w=a>=y.length?0:y.length-1,U()))};e.fancybox.cancel=function(){P||(P=!0,e.event.trigger("fancybox-cancel"),n(),m.onCancel(t,w,m),P=!1)};e.fancybox.close=function(){function g(){x.onCleanup(y,u,x);f.fadeOut("fast");l.empty().hide();
b.hide();e.event.trigger("fancybox-cleanup");a.empty();x.onClosed(y,u,x);t=[];y=m=[];u=w=0;x=m={};P=!1}if(!P&&!b.is(":hidden"))if(P=!0,n(),e(d.add(q).add(v)).hide(),e(a.add(f)).unbind(),e(window).unbind("resize.fb scroll.fb"),e(document).unbind("keydown.fb"),a.find("iframe").attr("src",Y&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==x.titlePosition&&l.empty(),b.stop(),"elastic"==x.transitionOut){I=ja();var h=b.position();O={top:h.top,left:h.left,width:b.width(),
height:b.height()};x.opacity&&(O.opacity=1);l.empty().hide();E.prop=1;e(E).animate({prop:0},{duration:x.speedOut,easing:x.easingOut,step:X,complete:g})}else b.fadeOut("none"==x.transitionOut?0:x.speedOut,g)};e.fancybox.resize=function(){f.is(":visible")&&f.css("height",e(document).height());e.fancybox.center(!0)};e.fancybox.center=function(d){var f,g;P||(g=!0===d?1:0,f=ea(),!g&&(b.width()>f[0]||b.height()>f[1])||b.stop().animate({top:parseInt(Math.max(f[3]-20,f[3]+.5*(f[1]-a.height()-40)-x.padding)),
left:parseInt(Math.max(f[2]-20,f[2]+.5*(f[0]-a.width()-40)-x.padding))},"number"==typeof d?d:200,function(){e(window).trigger("center.fb")}))};e.fancybox.init=function(){e("#fancybox-wrap").length||(h=e('<div id="fancybox-loading"><div></div></div>'),e("body").append(k=e('<div id="fancybox-tmp"></div>'),f=e('<div id="fancybox-overlay"></div>'),b=e('<div id="fancybox-wrap"></div>')),g=e('<div id="fancybox-outer"></div>').appendTo(b),g.append(a=e('<div id="fancybox-content"></div>')),d=e('<a id="fancybox-close"></a>'),
l=e('<div id="fancybox-title"></div>'),q=e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),v=e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'),d.click(e.fancybox.close),h.click(e.fancybox.cancel),q.click(function(a){a.preventDefault();e.fancybox.prev()}),v.click(function(a){a.preventDefault();e.fancybox.next()}),e.fn.mousewheel&&b.bind("mousewheel.fb",function(a,d){if(P)a.preventDefault();
else if(0==e(a.target).get(0).clientHeight||e(a.target).get(0).scrollHeight===e(a.target).get(0).clientHeight)a.preventDefault(),e.fancybox[0<d?"prev":"next"]()}),e.support.opacity||b.addClass("fancybox-ie"),Y&&(h.addClass("fancybox-ie6"),b.addClass("fancybox-ie6"),e('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(g)))};e.fn.fancybox.defaults=
{padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,
enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};e(document).ready(function(){e.fancybox.init()})})(jQuery);$.template("service_selectable",'<li>    <a class="{{if in_dashboard_creation}}btn btn-service ${service}{{/if}} {{if selected}}selected{{/if}}">        {{if !in_dashboard_creation}}            <i class="icon-user"></i>        {{/if}}        <span>{{html username_multiline}}</span>    </a></li>');
$.template("slot_countdown",'<section class="slot s-time-until ${data_source_kind}">    <p class="event"></p>    <p class="countdown"></p></section>');$.template("widget_webhook",'<li class="webhook">    <h3>Webhooks URL</h3>    <div class="mod-webhook">        <p class="description">Webhooks let you get real-time notifications in your widget. <a class="docs" href="${webhook_doc_url}" target="_blank">See how</a></p>        <input class="url" type="text" value="${url_pattern}${content.webhook_key}" readonly="readonly">    </div></li>');
(function(e,k){function h(b,g){var a=b.nodeName.toLowerCase();if("area"===a){var a=b.parentNode,d=a.name;if(!b.href||!d||"map"!==a.nodeName.toLowerCase())return!1;a=e("img[usemap=#"+d+"]")[0];return!!a&&f(a)}return(/input|select|textarea|button|object/.test(a)?!b.disabled:"a"==a?b.href||g:g)&&f(b)}function f(b){return!e(b).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};e.ui.version||(e.extend(e.ui,{version:"1.8.21",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(b,f){return"number"===typeof b?this.each(function(){var a=
this;setTimeout(function(){e(a).focus();f&&f.call(a)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,
"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?e(document):b},zIndex:function(b){if(b!==k)return this.css("zIndex",b);if(this.length){b=e(this[0]);for(var f;b.length&&b[0]!==document;){f=b.css("position");if("absolute"===f||"relative"===f||"fixed"===f)if(f=parseInt(b.css("zIndex"),10),!isNaN(f)&&0!==f)return f;b=b.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(b,f){function a(a,b,f,g){e.each(d,function(){b-=parseFloat(e.curCSS(a,"padding"+this,!0))||0;f&&(b-=parseFloat(e.curCSS(a,"border"+this+"Width",!0))||0);g&&(b-=parseFloat(e.curCSS(a,"margin"+this,!0))||0)});return b}var d="Width"===f?["Left","Right"]:["Top","Bottom"],h=f.toLowerCase(),q={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,
outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+f]=function(d){return d===k?q["inner"+f].call(this):this.each(function(){e(this).css(h,a(this,d)+"px")})};e.fn["outer"+f]=function(d,b){return"number"!==typeof d?q["outer"+f].call(this,d):this.each(function(){e(this).css(h,a(this,d,!0,b)+"px")})}}),e.extend(e.expr[":"],{data:function(b,f,a){return!!e.data(b,a[3])},focusable:function(b){return h(b,!isNaN(e.attr(b,"tabindex")))},tabbable:function(b){var f=e.attr(b,"tabindex"),a=isNaN(f);
return(a||0<=f)&&h(b,!a)}}),e(function(){var b=document.body,f=b.appendChild(f=document.createElement("div"));f.offsetHeight;e.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});e.support.minHeight=100===f.offsetHeight;e.support.selectstart="onselectstart"in f;b.removeChild(f).style.display="none"}),e.extend(e.ui,{plugin:{add:function(b,f,a){b=e.ui[b].prototype;for(var d in a)b.plugins[d]=b.plugins[d]||[],b.plugins[d].push([f,a[d]])},call:function(b,e,a){if((e=b.plugins[e])&&
b.element[0].parentNode)for(var d=0;d<e.length;d++)b.options[e[d][0]]&&e[d][1].apply(b.element,a)}},contains:function(b,e){return document.compareDocumentPosition?b.compareDocumentPosition(e)&16:b!==e&&b.contains(e)},hasScroll:function(b,f){if("hidden"===e(b).css("overflow"))return!1;var a=f&&"left"===f?"scrollLeft":"scrollTop",d=!1;if(0<b[a])return!0;b[a]=1;d=0<b[a];b[a]=0;return d},isOverAxis:function(b,e,a){return b>e&&b<e+a},isOver:function(b,f,a,d,h,k){return e.ui.isOverAxis(b,a,h)&&e.ui.isOverAxis(f,
d,k)}}))})(jQuery);
(function(e,k){if(e.cleanData){var h=e.cleanData;e.cleanData=function(b){for(var f=0,a;null!=(a=b[f]);f++)try{e(a).triggerHandler("remove")}catch(d){}h(b)}}else{var f=e.fn.remove;e.fn.remove=function(b,g){return this.each(function(){g||b&&!e.filter(b,[this]).length||e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(a){}});return f.call(e(this),b,g)})}}e.widget=function(b,f,a){var d=b.split(".")[0],h;b=b.split(".")[1];h=d+"-"+b;a||(a=f,f=e.Widget);e.expr[":"][h]=function(a){return!!e.data(a,
b)};e[d]=e[d]||{};e[d][b]=function(a,d){arguments.length&&this._createWidget(a,d)};f=new f;f.options=e.extend(!0,{},f.options);e[d][b].prototype=e.extend(!0,f,{namespace:d,widgetName:b,widgetEventPrefix:e[d][b].prototype.widgetEventPrefix||b,widgetBaseClass:h},a);e.widget.bridge(b,e[d][b])};e.widget.bridge=function(b,f){e.fn[b]=function(a){var d="string"===typeof a,h=Array.prototype.slice.call(arguments,1),q=this;a=!d&&h.length?e.extend.apply(null,[!0,a].concat(h)):a;if(d&&"_"===a.charAt(0))return q;
d?this.each(function(){var d=e.data(this,b),f=d&&e.isFunction(d[a])?d[a].apply(d,h):d;if(f!==d&&f!==k)return q=f,!1}):this.each(function(){var d=e.data(this,b);d?d.option(a||{})._init():e.data(this,b,new f(a,this))});return q}};e.Widget=function(b,e){arguments.length&&this._createWidget(b,e)};e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,f){e.data(f,this.widgetName,this);this.element=e(f);this.options=e.extend(!0,{},this.options,this._getCreateOptions(),
b);var a=this;this.element.bind("remove."+this.widgetName,function(){a.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(b,f){var a=b;if(0===arguments.length)return e.extend({},this.options);if("string"===typeof b){if(f===k)return this.options[b];a={};a[b]=f}this._setOptions(a);return this},_setOptions:function(b){var f=this;e.each(b,function(a,d){f._setOption(a,d)});return this},_setOption:function(b,e){this.options[b]=e;"disabled"===b&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,f,a){var d,h=this.options[b];a=a||{};f=e.Event(f);f.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();f.target=this.element[0];if(b=f.originalEvent)for(d in b)d in f||(f[d]=b[d]);this.element.trigger(f,a);return!(e.isFunction(h)&&!1===h.call(this.element[0],f,a)||f.isDefaultPrevented())}}})(jQuery);
(function(e,k){var h=!1;e(document).mouseup(function(e){h=!1});e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(b){return f._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===e.data(b.target,f.widgetName+".preventClickEvent"))return e.removeData(b.target,f.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(f){if(!h){this._mouseStarted&&this._mouseUp(f);this._mouseDownEvent=f;var b=this,g=1==f.which,a="string"==typeof this.options.cancel&&f.target.nodeName?e(f.target).closest(this.options.cancel).length:!1;if(!g||a||!this._mouseCapture(f))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=
!0},this.options.delay));if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)&&(this._mouseStarted=!1!==this._mouseStart(f),!this._mouseStarted))return f.preventDefault(),!0;!0===e.data(f.target,this.widgetName+".preventClickEvent")&&e.removeData(f.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return b._mouseMove(a)};this._mouseUpDelegate=function(a){return b._mouseUp(a)};e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,
this._mouseUpDelegate);f.preventDefault();return h=!0}},_mouseMove:function(f){if(e.browser.msie&&!(9<=document.documentMode)&&!f.button)return this._mouseUp(f);if(this._mouseStarted)return this._mouseDrag(f),f.preventDefault();this._mouseDistanceMet(f)&&this._mouseDelayMet(f)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,f))?this._mouseDrag(f):this._mouseUp(f));return!this._mouseStarted},_mouseUp:function(f){e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,f.target==this._mouseDownEvent.target&&e.data(f.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(f));return!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(jQuery);
(function(e,k){e.ui=e.ui||{};var h=/left|center|right/,f=/top|center|bottom/,b={},g=e.fn.position,a=e.fn.offset;e.fn.position=function(a){if(!a||!a.of)return g.apply(this,arguments);a=e.extend({},a);var k=e(a.of),q=k[0],v=(a.collision||"flip").split(" "),w=a.offset?a.offset.split(" "):[0,0],m,t,u;9===q.nodeType?(m=k.width(),t=k.height(),u={top:0,left:0}):q.setTimeout?(m=k.width(),t=k.height(),u={top:k.scrollTop(),left:k.scrollLeft()}):q.preventDefault?(a.at="left top",m=t=0,u={top:a.of.pageY,left:a.of.pageX}):
(m=k.outerWidth(),t=k.outerHeight(),u=k.offset());e.each(["my","at"],function(){var b=(a[this]||"").split(" ");1===b.length&&(b=h.test(b[0])?b.concat(["center"]):f.test(b[0])?["center"].concat(b):["center","center"]);b[0]=h.test(b[0])?b[0]:"center";b[1]=f.test(b[1])?b[1]:"center";a[this]=b});1===v.length&&(v[1]=v[0]);w[0]=parseInt(w[0],10)||0;1===w.length&&(w[1]=w[0]);w[1]=parseInt(w[1],10)||0;"right"===a.at[0]?u.left+=m:"center"===a.at[0]&&(u.left+=m/2);"bottom"===a.at[1]?u.top+=t:"center"===a.at[1]&&
(u.top+=t/2);u.left+=w[0];u.top+=w[1];return this.each(function(){var f=e(this),g=f.outerWidth(),h=f.outerHeight(),k=parseInt(e.curCSS(this,"marginLeft",!0))||0,l=parseInt(e.curCSS(this,"marginTop",!0))||0,q=g+k+(parseInt(e.curCSS(this,"marginRight",!0))||0),z=h+l+(parseInt(e.curCSS(this,"marginBottom",!0))||0),J=e.extend({},u),G;"right"===a.my[0]?J.left-=g:"center"===a.my[0]&&(J.left-=g/2);"bottom"===a.my[1]?J.top-=h:"center"===a.my[1]&&(J.top-=h/2);b.fractions||(J.left=Math.round(J.left),J.top=
Math.round(J.top));G={left:J.left-k,top:J.top-l};e.each(["left","top"],function(b,f){if(e.ui.position[v[b]])e.ui.position[v[b]][f](J,{targetWidth:m,targetHeight:t,elemWidth:g,elemHeight:h,collisionPosition:G,collisionWidth:q,collisionHeight:z,offset:w,my:a.my,at:a.at})});e.fn.bgiframe&&f.bgiframe();f.offset(e.extend(J,{using:a.using}))})};e.ui.position={fit:{left:function(a,b){var f=e(window),f=b.collisionPosition.left+b.collisionWidth-f.width()-f.scrollLeft();a.left=0<f?a.left-f:Math.max(a.left-
b.collisionPosition.left,a.left)},top:function(a,b){var f=e(window),f=b.collisionPosition.top+b.collisionHeight-f.height()-f.scrollTop();a.top=0<f?a.top-f:Math.max(a.top-b.collisionPosition.top,a.top)}},flip:{left:function(a,b){if("center"!==b.at[0]){var f=e(window),f=b.collisionPosition.left+b.collisionWidth-f.width()-f.scrollLeft(),g="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,h="left"===b.at[0]?b.targetWidth:-b.targetWidth,k=-2*b.offset[0];a.left+=0>b.collisionPosition.left?g+
h+k:0<f?g+h+k:0}},top:function(a,b){if("center"!==b.at[1]){var f=e(window),f=b.collisionPosition.top+b.collisionHeight-f.height()-f.scrollTop(),g="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,h="top"===b.at[1]?b.targetHeight:-b.targetHeight,k=-2*b.offset[1];a.top+=0>b.collisionPosition.top?g+h+k:0<f?g+h+k:0}}}};e.offset.setOffset||(e.offset.setOffset=function(a,b){/static/.test(e.curCSS(a,"position"))&&(a.style.position="relative");var f=e(a),g=f.offset(),h=parseInt(e.curCSS(a,"top",
!0),10)||0,k=parseInt(e.curCSS(a,"left",!0),10)||0,g={top:b.top-g.top+h,left:b.left-g.left+k};"using"in b?b.using.call(a,g):f.css(g)},e.fn.offset=function(d){var b=this[0];return b&&b.ownerDocument?d?e.isFunction(d)?this.each(function(a){e(this).offset(d.call(this,a,e(this).offset()))}):this.each(function(){e.offset.setOffset(this,d)}):a.call(this):null});(function(){var a=document.getElementsByTagName("body")[0],f=document.createElement("div"),g,h;g=document.createElement(a?"div":"body");h={visibility:"hidden",
width:0,height:0,border:0,margin:0,background:"none"};a&&e.extend(h,{position:"absolute",left:"-1000px",top:"-1000px"});for(var k in h)g.style[k]=h[k];g.appendChild(f);h=a||document.documentElement;h.insertBefore(g,h.firstChild);f.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";f=e(f).offset(function(a,d){return d}).offset();g.innerHTML="";h.removeChild(g);a=f.top+f.left+(a?2E3:0);b.fractions=21<a&&22>a})()})(jQuery);
(function(e,k){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var h=this;this.element.addClass("ui-selectable");this.dragged=!1;var f;this.refresh=function(){f=e(h.options.filter,h.element[0]);f.addClass("ui-selectee");f.each(function(){var b=e(this),f=b.offset();e.data(this,"selectable-item",{element:this,$element:b,left:f.left,top:f.top,right:f.left+b.outerWidth(),bottom:f.top+b.outerHeight(),startselected:!1,
selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(h){var f=
this;this.opos=[h.pageX,h.pageY];if(!this.options.disabled){var b=this.options;this.selectees=e(b.filter,this.element[0]);this._trigger("start",h);e(b.appendTo).append(this.helper);this.helper.css({left:h.clientX,top:h.clientY,width:0,height:0});b.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var b=e.data(this,"selectable-item");b.startselected=!0;h.metaKey||h.ctrlKey||(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=
!0,f._trigger("unselecting",h,{unselecting:b.element}))});e(h.target).parents().andSelf().each(function(){var b=e.data(this,"selectable-item");if(b){var a=!h.metaKey&&!h.ctrlKey||!b.$element.hasClass("ui-selected");b.$element.removeClass(a?"ui-unselecting":"ui-selected").addClass(a?"ui-selecting":"ui-unselecting");b.unselecting=!a;b.selecting=a;(b.selected=a)?f._trigger("selecting",h,{selecting:b.element}):f._trigger("unselecting",h,{unselecting:b.element});return!1}})}},_mouseDrag:function(h){var f=
this;this.dragged=!0;if(!this.options.disabled){var b=this.options,g=this.opos[0],a=this.opos[1],d=h.pageX,k=h.pageY;if(g>d)var q=d,d=g,g=q;a>k&&(q=k,k=a,a=q);this.helper.css({left:g,top:a,width:d-g,height:k-a});this.selectees.each(function(){var q=e.data(this,"selectable-item");if(q&&q.element!=f.element[0]){var w=!1;"touch"==b.tolerance?w=!(q.left>d||q.right<g||q.top>k||q.bottom<a):"fit"==b.tolerance&&(w=q.left>g&&q.right<d&&q.top>a&&q.bottom<k);w?(q.selected&&(q.$element.removeClass("ui-selected"),
q.selected=!1),q.unselecting&&(q.$element.removeClass("ui-unselecting"),q.unselecting=!1),q.selecting||(q.$element.addClass("ui-selecting"),q.selecting=!0,f._trigger("selecting",h,{selecting:q.element}))):(q.selecting&&((h.metaKey||h.ctrlKey)&&q.startselected?(q.$element.removeClass("ui-selecting"),q.selecting=!1,q.$element.addClass("ui-selected"),q.selected=!0):(q.$element.removeClass("ui-selecting"),q.selecting=!1,q.startselected&&(q.$element.addClass("ui-unselecting"),q.unselecting=!0),f._trigger("unselecting",
h,{unselecting:q.element}))),!q.selected||h.metaKey||h.ctrlKey||q.startselected||(q.$element.removeClass("ui-selected"),q.selected=!1,q.$element.addClass("ui-unselecting"),q.unselecting=!0,f._trigger("unselecting",h,{unselecting:q.element})))}});return!1}},_mouseStop:function(h){var f=this;this.dragged=!1;e(".ui-unselecting",this.element[0]).each(function(){var b=e.data(this,"selectable-item");b.$element.removeClass("ui-unselecting");b.unselecting=!1;b.startselected=!1;f._trigger("unselected",h,{unselected:b.element})});
e(".ui-selecting",this.element[0]).each(function(){var b=e.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected");b.selecting=!1;b.selected=!0;b.startselected=!0;f._trigger("selected",h,{selected:b.element})});this._trigger("stop",h);this.helper.remove();return!1}});e.extend(e.ui.selectable,{version:"1.8.21"})})(jQuery);
jQuery.effects||function(e,k){function h(a){var d;return a&&a.constructor==Array&&3==a.length?a:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3])]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(d[1],16),parseInt(d[2],
16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?l.transparent:l[e.trim(a).toLowerCase()]}function f(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={},b,e;if(a&&a.length&&a[0]&&a[a[0]])for(var f=a.length;f--;)b=a[f],"string"==typeof a[b]&&(e=b.replace(/\-(\w)/g,function(a,d){return d.toUpperCase()}),d[e]=a[b]);else for(b in a)"string"===
typeof a[b]&&(d[b]=a[b]);return d}function b(a){var d,b;for(d in a)b=a[d],(null==b||e.isFunction(b)||d in v||/scrollbar/.test(d)||!/color/i.test(d)&&isNaN(parseFloat(b)))&&delete a[d];return a}function g(a,d){var b={_:0},e;for(e in d)a[e]!=d[e]&&(b[e]=d[e]);return b}function a(a,d,b,f){"object"==typeof a&&(f=d,b=null,d=a,a=d.effect);e.isFunction(d)&&(f=d,b=null,d={});if("number"==typeof d||e.fx.speeds[d])f=b,b=d,d={};e.isFunction(b)&&(f=b,b=null);d=d||{};b=b||d.duration;b=e.fx.off?0:"number"==typeof b?
b:b in e.fx.speeds?e.fx.speeds[b]:e.fx.speeds._default;f=f||d.complete;return[a,d,b,f]}function d(a){return!a||"number"===typeof a||e.fx.speeds[a]||"string"===typeof a&&!e.effects[a]?!0:!1}e.effects={};e.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(a,d){e.fx.step[d]=function(a){if(!a.colorInit){var b;b=a.elem;var f=d,g;do{g=e.curCSS(b,f);if(""!=g&&"transparent"!=g||e.nodeName(b,"body"))break;f="backgroundColor"}while(b=
b.parentNode);b=h(g);a.start=b;a.end=h(a.end);a.colorInit=!0}a.elem.style[d]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var l={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],
maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},q=["add","remove","toggle"],v={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(a,d,h,k){e.isFunction(h)&&(k=h,h=null);return this.queue(function(){var l=e(this),v=l.attr("style")||
" ",B=b(f.call(this)),F,C=l.attr("class")||"";e.each(q,function(d,b){if(a[b])l[b+"Class"](a[b])});F=b(f.call(this));l.attr("class",C);l.animate(g(B,F),{queue:!1,duration:d,easing:h,complete:function(){e.each(q,function(d,b){if(a[b])l[b+"Class"](a[b])});"object"==typeof l.attr("style")?(l.attr("style").cssText="",l.attr("style").cssText=v):l.attr("style",v);k&&k.apply(this,arguments);e.dequeue(this)}})})};e.fn.extend({_addClass:e.fn.addClass,addClass:function(a,d,b,f){return d?e.effects.animateClass.apply(this,
[{add:a},d,b,f]):this._addClass(a)},_removeClass:e.fn.removeClass,removeClass:function(a,d,b,f){return d?e.effects.animateClass.apply(this,[{remove:a},d,b,f]):this._removeClass(a)},_toggleClass:e.fn.toggleClass,toggleClass:function(a,d,b,f,g){return"boolean"==typeof d||d===k?b?e.effects.animateClass.apply(this,[d?{add:a}:{remove:a},b,f,g]):this._toggleClass(a,d):e.effects.animateClass.apply(this,[{toggle:a},d,b,f])},switchClass:function(a,d,b,f,g){return e.effects.animateClass.apply(this,[{add:d,
remove:a},b,f,g])}});e.extend(e.effects,{version:"1.8.21",save:function(a,d){for(var b=0;b<d.length;b++)null!==d[b]&&a.data("ec.storage."+d[b],a[0].style[d[b]])},restore:function(a,d){for(var b=0;b<d.length;b++)null!==d[b]&&a.css(d[b],a.data("ec.storage."+d[b]))},setMode:function(a,d){"toggle"==d&&(d=a.is(":hidden")?"show":"hide");return d},getBaseline:function(a,d){var b,e;switch(a[0]){case "top":b=0;break;case "middle":b=.5;break;case "bottom":b=1;break;default:b=a[0]/d.height}switch(a[1]){case "left":e=
0;break;case "center":e=.5;break;case "right":e=1;break;default:e=a[1]/d.width}return{x:e,y:b}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var d={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},b=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f=document.activeElement;try{f.id}catch(g){f=document.body}a.wrap(b);(a[0]===f||e.contains(a[0],f))&&e(f).focus();
b=a.parent();"static"==a.css("position")?(b.css({position:"relative"}),a.css({position:"relative"})):(e.extend(d,{position:a.css("position"),zIndex:a.css("z-index")}),e.each(["top","left","bottom","right"],function(b,e){d[e]=a.css(e);isNaN(parseInt(d[e],10))&&(d[e]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return b.css(d).show()},removeWrapper:function(a){var d,b=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(d=a.parent().replaceWith(a),(a[0]===
b||e.contains(a[0],b))&&e(b).focus(),d):a},setTransition:function(a,d,b,f){f=f||{};e.each(d,function(d,e){var g=a.cssUnit(e);0<g[0]&&(f[e]=g[0]*b+g[1])});return f}});e.fn.extend({effect:function(d,b,f,g){var h=a.apply(this,arguments),k={options:h[1],duration:h[2],callback:h[3]},h=k.options.mode,l=e.effects[d];return e.fx.off||!l?h?this[h](k.duration,k.callback):this.each(function(){k.callback&&k.callback.call(this)}):l.call(this,k)},_show:e.fn.show,show:function(b){if(d(b))return this._show.apply(this,
arguments);var e=a.apply(this,arguments);e[1].mode="show";return this.effect.apply(this,e)},_hide:e.fn.hide,hide:function(b){if(d(b))return this._hide.apply(this,arguments);var e=a.apply(this,arguments);e[1].mode="hide";return this.effect.apply(this,e)},__toggle:e.fn.toggle,toggle:function(b){if(d(b)||"boolean"===typeof b||e.isFunction(b))return this.__toggle.apply(this,arguments);var f=a.apply(this,arguments);f[1].mode="toggle";return this.effect.apply(this,f)},cssUnit:function(a){var d=this.css(a),
b=[];e.each(["em","px","%","pt"],function(a,e){0<d.indexOf(e)&&(b=[parseFloat(d),e])});return b}});e.easing.jswing=e.easing.swing;e.extend(e.easing,{def:"easeOutQuad",swing:function(a,d,b,f,g){return e.easing[e.easing.def](a,d,b,f,g)},easeInQuad:function(a,d,b,e,f){return e*(d/=f)*d+b},easeOutQuad:function(a,d,b,e,f){return-e*(d/=f)*(d-2)+b},easeInOutQuad:function(a,d,b,e,f){return 1>(d/=f/2)?e/2*d*d+b:-e/2*(--d*(d-2)-1)+b},easeInCubic:function(a,d,b,e,f){return e*(d/=f)*d*d+b},easeOutCubic:function(a,
d,b,e,f){return e*((d=d/f-1)*d*d+1)+b},easeInOutCubic:function(a,d,b,e,f){return 1>(d/=f/2)?e/2*d*d*d+b:e/2*((d-=2)*d*d+2)+b},easeInQuart:function(a,d,b,e,f){return e*(d/=f)*d*d*d+b},easeOutQuart:function(a,d,b,e,f){return-e*((d=d/f-1)*d*d*d-1)+b},easeInOutQuart:function(a,d,b,e,f){return 1>(d/=f/2)?e/2*d*d*d*d+b:-e/2*((d-=2)*d*d*d-2)+b},easeInQuint:function(a,d,b,e,f){return e*(d/=f)*d*d*d*d+b},easeOutQuint:function(a,d,b,e,f){return e*((d=d/f-1)*d*d*d*d+1)+b},easeInOutQuint:function(a,d,b,e,f){return 1>
(d/=f/2)?e/2*d*d*d*d*d+b:e/2*((d-=2)*d*d*d*d+2)+b},easeInSine:function(a,d,b,e,f){return-e*Math.cos(d/f*(Math.PI/2))+e+b},easeOutSine:function(a,d,b,e,f){return e*Math.sin(d/f*(Math.PI/2))+b},easeInOutSine:function(a,d,b,e,f){return-e/2*(Math.cos(Math.PI*d/f)-1)+b},easeInExpo:function(a,d,b,e,f){return 0==d?b:e*Math.pow(2,10*(d/f-1))+b},easeOutExpo:function(a,d,b,e,f){return d==f?b+e:e*(-Math.pow(2,-10*d/f)+1)+b},easeInOutExpo:function(a,d,b,e,f){return 0==d?b:d==f?b+e:1>(d/=f/2)?e/2*Math.pow(2,10*
(d-1))+b:e/2*(-Math.pow(2,-10*--d)+2)+b},easeInCirc:function(a,d,b,e,f){return-e*(Math.sqrt(1-(d/=f)*d)-1)+b},easeOutCirc:function(a,d,b,e,f){return e*Math.sqrt(1-(d=d/f-1)*d)+b},easeInOutCirc:function(a,d,b,e,f){return 1>(d/=f/2)?-e/2*(Math.sqrt(1-d*d)-1)+b:e/2*(Math.sqrt(1-(d-=2)*d)+1)+b},easeInElastic:function(a,d,b,e,f){a=1.70158;var g=0,h=e;if(0==d)return b;if(1==(d/=f))return b+e;g||(g=.3*f);h<Math.abs(e)?(h=e,a=g/4):a=g/(2*Math.PI)*Math.asin(e/h);return-(h*Math.pow(2,10*(d-=1))*Math.sin(2*
(d*f-a)*Math.PI/g))+b},easeOutElastic:function(a,d,b,e,f){a=1.70158;var g=0,h=e;if(0==d)return b;if(1==(d/=f))return b+e;g||(g=.3*f);h<Math.abs(e)?(h=e,a=g/4):a=g/(2*Math.PI)*Math.asin(e/h);return h*Math.pow(2,-10*d)*Math.sin(2*(d*f-a)*Math.PI/g)+e+b},easeInOutElastic:function(a,d,b,e,f){a=1.70158;var g=0,h=e;if(0==d)return b;if(2==(d/=f/2))return b+e;g||(g=.3*f*1.5);h<Math.abs(e)?(h=e,a=g/4):a=g/(2*Math.PI)*Math.asin(e/h);return 1>d?-.5*h*Math.pow(2,10*(d-=1))*Math.sin(2*(d*f-a)*Math.PI/g)+b:h*Math.pow(2,
-10*(d-=1))*Math.sin(2*(d*f-a)*Math.PI/g)*.5+e+b},easeInBack:function(a,d,b,e,f,g){g==k&&(g=1.70158);return e*(d/=f)*d*((g+1)*d-g)+b},easeOutBack:function(a,d,b,e,f,g){g==k&&(g=1.70158);return e*((d=d/f-1)*d*((g+1)*d+g)+1)+b},easeInOutBack:function(a,d,b,e,f,g){g==k&&(g=1.70158);return 1>(d/=f/2)?e/2*d*d*(((g*=1.525)+1)*d-g)+b:e/2*((d-=2)*d*(((g*=1.525)+1)*d+g)+2)+b},easeInBounce:function(a,d,b,f,g){return f-e.easing.easeOutBounce(a,g-d,0,f,g)+b},easeOutBounce:function(a,d,b,e,f){return(d/=f)<1/2.75?
7.5625*e*d*d+b:d<2/2.75?e*(7.5625*(d-=1.5/2.75)*d+.75)+b:d<2.5/2.75?e*(7.5625*(d-=2.25/2.75)*d+.9375)+b:e*(7.5625*(d-=2.625/2.75)*d+.984375)+b},easeInOutBounce:function(a,d,b,f,g){return d<g/2?.5*e.easing.easeInBounce(a,2*d,0,f,g)+b:.5*e.easing.easeOutBounce(a,2*d-g,0,f,g)+.5*f+b}})}(jQuery);var lastTap=null,tapValid=!1,tapTimeout=null;function cancelTap(){tapValid=!1}var rightClickPending=!1,rightClickEvent=null,holdTimeout=null,cancelMouseUp=!1;
function cancelHold(){rightClickPending&&(window.clearTimeout(holdTimeout),rightClickPending=!1,rightClickEvent=null)}function startHold(e){rightClickPending||(rightClickPending=!0,rightClickEvent=e.changedTouches[0],holdTimeout=window.setTimeout("doRightClick();",800))}
function doRightClick(){rightClickPending=!1;var e=rightClickEvent,k=document.createEvent("MouseEvent");k.initMouseEvent("mouseup",!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null);e.target.dispatchEvent(k);k=document.createEvent("MouseEvent");k.initMouseEvent("mousedown",!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,2,null);e.target.dispatchEvent(k);k=document.createEvent("MouseEvent");k.initMouseEvent("contextmenu",!0,!0,window,1,e.screenX+50,e.screenY+
5,e.clientX+50,e.clientY+5,!1,!1,!1,!1,2,null);e.target.dispatchEvent(k);cancelMouseUp=!0;rightClickEvent=null}
function iPadTouchStart(e){var k=e.changedTouches[0],h="mouseover",f=document.createEvent("MouseEvent");f.initMouseEvent(h,!0,!0,window,1,k.screenX,k.screenY,k.clientX,k.clientY,!1,!1,!1,!1,0,null);k.target.dispatchEvent(f);h="mousedown";f=document.createEvent("MouseEvent");f.initMouseEvent(h,!0,!0,window,1,k.screenX,k.screenY,k.clientX,k.clientY,!1,!1,!1,!1,0,null);k.target.dispatchEvent(f);tapValid?(window.clearTimeout(tapTimeout),k.target==lastTap?(lastTap=null,tapValid=!1,h="click",f=document.createEvent("MouseEvent"),
f.initMouseEvent(h,!0,!0,window,1,k.screenX,k.screenY,k.clientX,k.clientY,!1,!1,!1,!1,0,null),k.target.dispatchEvent(f),h="dblclick",f=document.createEvent("MouseEvent"),f.initMouseEvent(h,!0,!0,window,1,k.screenX,k.screenY,k.clientX,k.clientY,!1,!1,!1,!1,0,null),k.target.dispatchEvent(f)):(lastTap=k.target,tapValid=!0,tapTimeout=window.setTimeout("cancelTap();",600),startHold(e))):(lastTap=k.target,tapValid=!0,tapTimeout=window.setTimeout("cancelTap();",600),startHold(e))}
function iPadTouchHandler(e){var k="";if(!(1<e.touches.length)){switch(e.type){case "touchstart":if($(e.changedTouches[0].target).is("select"))return;iPadTouchStart(e);e.preventDefault();return!1;case "touchmove":cancelHold();k="mousemove";e.preventDefault();break;case "touchend":if(cancelMouseUp)return cancelMouseUp=!1,e.preventDefault(),!1;cancelHold();k="mouseup";break;default:return}e=e.changedTouches[0];var h=document.createEvent("MouseEvent");h.initMouseEvent(k,!0,!0,window,1,e.screenX,e.screenY,
e.clientX,e.clientY,!1,!1,!1,!1,0,null);e.target.dispatchEvent(h);"mouseup"==k&&tapValid&&e.target==lastTap&&(h=document.createEvent("MouseEvent"),h.initMouseEvent("click",!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(h))}}
(function(e){e.extend(e.support,{touch:"ontouchend"in document});e.fn.addTouch=function(){e.support.touch&&this.each(function(e,h){h.addEventListener("touchstart",iPadTouchHandler,!1);h.addEventListener("touchmove",iPadTouchHandler,!1);h.addEventListener("touchend",iPadTouchHandler,!1);h.addEventListener("touchcancel",iPadTouchHandler,!1)});return this}})(jQuery);
(function(e,k){function h(a,d,b){var e=l[d.type]||{};if((d.empty||b)&&null==a)return null;if(d.def&&null==a)return d.def;a=e.floor?~~a:parseFloat(a);return isNaN(a)?d.def:e.mod?(a%=e.mod,0>a?e.mod+a:a):e.min>a?e.min:e.max<a?e.max:a}function f(a,d,b){b=(b+1)%1;return 1>6*b?a+6*(d-a)*b:1>2*b?d:2>3*b?a+(d-a)*(2/3-b)*6:a}var b=/^([\-+])=\s*(\d+\.?\d*)/,g=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/
100,a[3]/100,a[4]]}}],a=e.Color=function(a,d,b,f){return new e.Color.fn.parse(a,d,b,f)},d={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:!0},green:{idx:1,type:"byte",empty:!0},blue:{idx:2,type:"byte",empty:!0},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:!0},saturation:{idx:1,type:"percent",empty:!0},lightness:{idx:2,type:"percent",empty:!0}}}},l={"byte":{floor:!0,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:!0}},q=d.rgba.props,
v=a.support={},w,m=e.each;d.hsla.props.alpha=q.alpha;a.fn=a.prototype={constructor:a,parse:function(b,f,l,v){if(b===k)return this._rgba=[null,null,null,null],this;if(b instanceof e||b.nodeType)b=b instanceof e?b.css(f):e(b).css(f),f=k;var B=this,F=e.type(b),C=this._rgba=[];f!==k&&(b=[b,f,l,v],F="array");if("string"===F){b=b.toLowerCase();m(g,function(a,e){var f=e.re.exec(b),g=f&&e.parse(f),h=e.space||"rgba",f=d[h].cache;if(g)return g=B[h](g),B[f]=g[f],C=B._rgba=g._rgba,!1});if(0!==C.length)return 0===
Math.max.apply(Math,C)&&e.extend(C,w.transparent),this;b=w[b]||w._default;return this.parse(b)}if("array"===F)return m(q,function(a,d){C[d.idx]=h(b[d.idx],d)}),this;if("object"===F)return b instanceof a?m(d,function(a,d){b[d.cache]&&(B[d.cache]=b[d.cache].slice())}):m(d,function(a,d){m(d.props,function(a,e){var f=d.cache;if(!B[f]&&d.to){if(null==b[a]||"alpha"===a)return;B[f]=d.to(B._rgba)}B[f][e.idx]=h(b[a],e,!0)})}),this},is:function(b){var e=a(b),f=!0,g=this;m(d,function(a,d){var b=e[d.cache],h;
b&&(h=g[d.cache]||d.to&&d.to(g._rgba)||[],m(d.props,function(a,d){if(null!=b[d.idx])return f=b[d.idx]==h[d.idx]}));return f});return f},_space:function(){var a=[],b=this;m(d,function(d,e){b[e.cache]&&a.push(d)});return a.pop()},transition:function(b,e){var f=a(b),g=f._space(),k=d[g],q=this[k.cache]||k.to(this._rgba),v=q.slice(),f=f[k.cache];m(k.props,function(a,d){var b=d.idx,g=q[b],k=f[b],m=l[d.type]||{};null!==k&&(null===g?v[b]=k:(m.mod&&(k-g>m.mod/2?g+=m.mod:g-k>m.mod/2&&(g-=m.mod)),v[d.idx]=h((k-
g)*e+g,d)))});return this[g](v)},blend:function(d){if(1===this._rgba[3])return this;var b=this._rgba.slice(),f=b.pop(),g=a(d)._rgba;return a(e.map(b,function(a,d){return(1-f)*g[d]+f*a}))},toRgbaString:function(){var a="rgba(",d=e.map(this._rgba,function(a,d){return null==a?2<d?1:0:a});1===d[3]&&(d.pop(),a="rgb(");return a+d.join(",")+")"},toHslaString:function(){var a="hsla(",d=e.map(this.hsla(),function(a,d){null==a&&(a=2<d?1:0);d&&3>d&&(a=Math.round(100*a)+"%");return a});1==d[3]&&(d.pop(),a="hsl(");
return a+d.join(",")+")"},toHexString:function(a){var d=this._rgba.slice(),b=d.pop();a&&d.push(~~(255*b));return"#"+e.map(d,function(a,d){a=(a||0).toString(16);return 1==a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}};a.fn.parse.prototype=a.fn;d.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var d=a[0]/255,b=a[1]/255,e=a[2]/255;a=a[3];var f=Math.max(d,b,e),g=Math.min(d,b,e),h=f-g,k=f+g,l=.5*k,k=0===
l||1===l?l:.5>=l?h/k:h/(2-k);return[Math.round(g===f?0:d===f?60*(b-e)/h+360:b===f?60*(e-d)/h+120:60*(d-b)/h+240)%360,k,l,null==a?1:a]};d.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var d=a[0]/360,b=a[1],e=a[2];a=a[3];b=.5>=e?e*(1+b):e+b-e*b;e=2*e-b;return[Math.round(255*f(e,b,d+1/3)),Math.round(255*f(e,b,d)),Math.round(255*f(e,b,d-1/3)),a]};m(d,function(d,f){var g=f.props,l=f.cache,q=f.to,v=f.from;a.fn[d]=function(d){q&&!this[l]&&(this[l]=q(this._rgba));
if(d===k)return this[l].slice();var b=e.type(d),f="array"===b||"object"===b?d:arguments,u=this[l].slice(),t;m(g,function(a,d){var e=f["object"===b?a:d.idx];null==e&&(e=u[d.idx]);u[d.idx]=h(e,d)});return v?(t=a(v(u)),t[l]=u,t):a(u)};m(g,function(f,g){a.fn[f]||(a.fn[f]=function(a){var h=e.type(a),k="alpha"===f?this._hsla?"hsla":"rgba":d,l=this[k](),m=l[g.idx];if("undefined"===h)return m;"function"===h&&(a=a.call(this,m),h=e.type(a));if(null==a&&g.empty)return this;"string"===h&&(h=b.exec(a))&&(a=m+
parseFloat(h[2])*("+"===h[1]?1:-1));l[g.idx]=a;return this[k](l)})})});m("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),function(d,b){e.cssHooks[b]={set:function(d,f){f=a(f);if(!v.rgba&&1!==f._rgba[3]){var g,h="backgroundColor"===b?d.parentNode:d;do g=e.curCSS(h,"backgroundColor");while((""===g||"transparent"===g)&&(h=h.parentNode)&&h.style);f=f.blend(g&&"transparent"!==g?g:"_default")}f=f.toRgbaString();d.style[b]=f}};e.fx.step[b]=
function(d){d.colorInit||(d.start=a(d.elem,b),d.end=a(d.end),d.colorInit=!0);e.cssHooks[b].set(d.elem,d.start.transition(d.end,d.pos))}});e(function(){var a=document.createElement("div").style;a.cssText="background-color:rgba(1,1,1,.5)";v.rgba=-1<a.backgroundColor.indexOf("rgba")});w=e.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",
darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",
red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);$.template("custom_widget_count_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p><strong>Hold on a second...</strong></p>        <p>We love that you love to make your own widgets.</p>        <p>You have, however, reached your plans\'s limit for custom widgets. Upgrade your plan to unlock this and other advanced features.</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("subscription",'<div class="subscription pane"><section>    <div class=\'form\'>        <h3>Choose your plan <a href="https://ducksboard.com/pricing" target="_blank">(see plan details)</a></h3>        {{tmpl($data, $item) "plan_info"}}        {{tmpl($data, $item) "coupon_info"}}        {{if has_trial_expired === false}}            <h3 class="title">Enter payment details</h3>        {{else}}            <h3 class="title trial">                Place your order to continue using Ducksboard            </h3>        {{/if}}        <ul class="server-errors"></ul>        <fieldset id="billing-info" class="recurly"></fieldset>        <h3>VAT Number (only EU customers)</h3>        <div class=\'recurly vat-info\'>        </div>        <div class="tos">            <input id="tos_check" type="checkbox"/>            <label id="accept_tos" for="tos_check">I accept the <a href="http://ducksboard.com/terms-of-service/" target="_blank" class="tos_link">Terms of Service</a><span class="and"> and </span><a href="http://ducksboard.com/privacy-policy/" target="_blank" class="pp_link">Privacy Policy</a></label>        </div>    </div>    <div class="loading-plans-info">        <h3>Loading plans...</h3>    </div>    <div class="plans-info">        {{tmpl($data, $item) "plan_list"}}    </div>    {{tmpl($data, $item) "confirmation_info"}}    <div class="sent">        <h1>Thanks, your subscription has been processed correctly.</h1>    </div></section><button type="submit" class="send btn btn-submit full has_children"><span>{{html submit_html}}</span></button></div>');
$.template("account_settings",'<article id="account-preferences">    <header>        <hgroup>        {{if has_trial_expired === false}}            <h1>Account Preferences</h1>        {{else}}            <h1>Trial period expired</h1>        {{/if}}        </hgroup>        <a class="close" href="#">close</a>    </header>    <nav class="sidebar"></nav>    <section class="placeholder pane"></section></article>');$.template("widget_notifications_fake",'<div class="m-notifications-list">    <strong class="title">EXAMPLES OF ALERTS</strong>    <ul>        <li class="m-notification disabled">            <p><em class="clause">if</em> <strong class="condition">Daily sales rises over 1,000</strong></p>            <p><em class="clause">then</em> <strong class="type send_mail" title="Send via email"></strong> <strong class="condition">sales@ducksboard.com</strong></p>        </li>        <li class="m-notification disabled"><p><em class="clause">if</em> <strong class="condition">Twitter followers falls under 2,450</strong></p>            <p><em class="clause">then</em> <strong class="type send_mail" title="Send via email"></strong> <strong class="condition">socialmedia@ducksboard.com</strong></p>        </li>        <li class="m-notification disabled">            <p><em class="clause">if</em> <strong class="condition">Conversion rate falls under 2%</strong></p>            <p><em class="clause">then</em> <strong class="type webhook" title="Webhook"></strong> <strong class="condition">http://push.mycompany.com</strong></p>        </li>    </ul></div>');
$.template("tvmode_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <div class="content">        <p>            <strong>TV Mode is not available in your Ducksboard plan.</strong>        </p>        <p>            Upgrade now to unlock this and other cool features.        </p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("widget_fetching_data",'<div class="widget-fetching-data">    <div>        <h2>Fetching your data...</h2>        <p>This might take a few minutes, please bear with us. You can always <a href="#settings/widget/${widget_id}/feedback">contact us</a> if you need an extra hand.</p>    </div></div>');$.template("directory_group_upgrade",'<article id="upgrade-required">    <header>        <hgroup>            <h1>Upgrade required</h1>        </hgroup>        <a class="close" href="#">close</a>        <a class="back" href="#directory">Go back to the widgets</a>    </header>    <div class="content">        <p><strong>Oops...</strong></p>        <p>This widget is not avaiable on your plan. Upgrade now to get access to all our widgets, and unlock many other features.</p>        {{if upgrade_possible}}        <a class="btn-upsell" href="#settings/account/{{if has_recurly_account}}billing{{else}}subscription{{/if}}">            <strong>Upgrade your plan</strong>            <span>30 day money back guarantee</span>        </a>        {{else}}        <a class="btn-upsell" href="mailto:contact@ducksboard.com">            <strong>Contact us</strong>        </a>        {{/if}}    </div></article>');
$.template("slot_funnel",'<section class="slot s-funnel ${data_source_kind}">    <table class="funnel">        <colgroup>            <col class="step" />            <col class="percent" />        </colgroup>        <thead>            <tr>                <th>Step</th>                <th>Percent</th>            </tr>        </thead>        <tbody class="folded"></tbody>    </table>    <p>        <em class="subtitle"></em>        <strong class="value"></strong>    </p></section>');
$.template("hidden",'<input type="hidden" class="field-${name}" value="${value}"  />');$.template("directory_custom_googlespreadsheets",'<a href="#directory/service/googlespreadsheets" class="googlespreadsheets custom">    <h4>Google Sheets</h4>    <p>Feed your widget from your Google Spreadsheets account.</p></a>');$.template("preferences",'<menu id="preferences">    <ul>        {{if readonly === false}}        <li class="directory">            <a href="#directory" class="directory btn btn-ico-trans" class="Create a widget">                <i class="icon-plus-2"></i>                <span class="welcome_text">Create your first widget!</span>            </a>        </li>        {{/if}}        <li>            <a href="#" class="settings btn btn-ico-trans">                <i class="icon-settings"></i>            </a>            <ul class="settings-list contextual">                {{if readonly === false}}                <li>                    <a href="#settings/dashboard" class="dashboard btn btn-ico-option">                        <i class="icon-dashboard-preferences"></i>                        <span>Preferences for<br>this dashboard</span>                    </a>                </li>                {{if subscriber_kind !== \'whitelabel\' ||  has_trial_expired === false || is_beta === true }}                <li>                    <a href="#settings/account" class="account btn btn-ico-option">                        <i class="icon-user"></i>                        <span>Account<br>preferences</span>                    </a>                </li>                {{/if}}                {{if subscriber_kind !== \'whitelabel\' && can_subscribe}}                <li class="upgrade-now-wrap">                    <a href="#settings/account/subscription" class="upgrade-now btn btn-ico-option">                        <i class="icon-star"></i>                        <span>Upgrade now!</span>                    </a>                </li>                {{/if}}                <li>                    <a href="#support" class="support btn btn-ico-option">                        <i class="icon-support"></i>                        <span>Support</span>                    </a>                </li>                {{/if}}                <li class="logout-wrap">                    <a href="/accounts/logout/" class="logout btn btn-ico-option">                        <i class="icon-logout"></i>                        <span>Logout</span>                    </a>                </li>            </ul>        </li>        <li>            <a href="#tvmode" class="tvmode btn btn-ico-trans" title="TVmode">                <i class="icon-tvmode"></i>            </a>        </li>        {{if readonly === false}}        <li class="knowledge-center">            <a href="https://ducksboard.com/resources/" target="_blank" class="btn btn-ico-trans" title="Knowledge Center">                <i class="icon-help"></i>            </a>        </li>        {{/if}}        {{tmpl($data, $item) "notifications"}}        <li class="dashboards"></li>    </ul></menu>{{if is_sponsored}}    <div class="corner">        <a href="http://ducksboard.com" target="_blank">            Track your KPIs with <strong>Ducksboard</strong>        </a>    </div>{{/if}}');
$.template("dashboard_zendesk_create",'<article class="service-board-setup zendesk {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo zendesk"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the Zendesk account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service zendesk new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your Zendesk account</legend>                <input type="button" class="connect" value="connect" />            </fieldset>            <fieldset class="setup">                <legend>Which group and tags do you want the dashboard for?</legend>                <input type="button" class="create small" value="ok!" />                <input class="groups-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
(function(e){function k(a,d){return function(b){return l(a.call(this,b),d)}}function h(a){return function(d){return this.lang().ordinal(a.call(this,d))}}function f(){}function b(d){a(this,d)}function g(a){var b=this._data={},e=a.years||a.year||a.y||0,f=a.months||a.month||a.M||0,g=a.weeks||a.week||a.w||0,h=a.days||a.day||a.d||0,k=a.hours||a.hour||a.h||0,l=a.minutes||a.minute||a.m||0,m=a.seconds||a.second||a.s||0;a=a.milliseconds||a.millisecond||a.ms||0;this._milliseconds=a+1E3*m+6E4*l+36E5*k;this._days=
h+7*g;this._months=f+12*e;b.milliseconds=a%1E3;m+=d(a/1E3);b.seconds=m%60;l+=d(m/60);b.minutes=l%60;k+=d(l/60);b.hours=k%24;h+=d(k/24);h+=7*g;b.days=h%30;f+=d(h/30);b.months=f%12;e+=d(f/12);b.years=e}function a(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);return a}function d(a){return 0>a?Math.ceil(a):Math.floor(a)}function l(a,d){for(var b=a+"";b.length<d;)b="0"+b;return b}function q(a,d,b){var e=d._milliseconds,f=d._days;d=d._months;e&&a._d.setTime(+a+e*b);f&&a.date(a.date()+f*b);d&&(e=
a.date(),a.date(1).month(a.month()+d*b).date(Math.min(e,a.daysInMonth())))}function v(a,d){var b=Math.min(a.length,d.length),e=Math.abs(a.length-d.length),f=0,g;for(g=0;g<b;g++)~~a[g]!==~~d[g]&&f++;return f+e}function w(a){if(!a)return A.fn._lang;!P[a]&&E&&require("./lang/"+a);return P[a]}function m(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function t(a){var d=a.match(N),b,e;b=0;for(e=d.length;b<e;b++)d[b]=ia[d[b]]?ia[d[b]]:m(d[b]);return function(f){var g="";for(b=
0;b<e;b++)g+="function"===typeof d[b].call?d[b].call(f,a):d[b];return g}}function u(a,d){function b(d){return a.lang().longDateFormat(d)||d}for(var e=5;e--&&n.test(d);)d=d.replace(n,b);sa[d]||(sa[d]=t(d));return sa[d](a)}function x(a){switch(a){case "DDDD":return W;case "YYYY":return H;case "YYYYY":return S;case "S":case "SS":case "SSS":case "DDD":return U;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return R;case "X":return fa;case "Z":case "ZZ":return X;case "T":return ea;
case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return M;default:return new RegExp(a.replace("\\",""))}}function y(a){var d,b=[];if(!a._d){for(d=0;7>d;d++)a._a[d]=b[d]=null==a._a[d]?2===d?1:0:a._a[d];b[3]+=a._tzh||0;b[4]+=a._tzm||0;d=new Date(0);a._useUTC?(d.setUTCFullYear(b[0],b[1],b[2]),d.setUTCHours(b[3],b[4],b[5],b[6])):(d.setFullYear(b[0],b[1],b[2]),d.setHours(b[3],b[4],b[5],b[6]));a._d=d}}function B(a){var d=
a._f.match(N),b=a._i,e,f;a._a=[];for(e=0;e<d.length;e++)if((f=(x(d[e]).exec(b)||[])[0])&&(b=b.slice(b.indexOf(f)+f.length)),ia[d[e]]){var g=a,h=void 0,k=g._a;switch(d[e]){case "M":case "MM":k[1]=null==f?0:~~f-1;break;case "MMM":case "MMMM":h=w(g._l).monthsParse(f);null!=h?k[1]=h:g._isValid=!1;break;case "D":case "DD":case "DDD":case "DDDD":null!=f&&(k[2]=~~f);break;case "YY":k[0]=~~f+(68<~~f?1900:2E3);break;case "YYYY":case "YYYYY":k[0]=~~f;break;case "a":case "A":g._isPm="pm"===(f+"").toLowerCase();
break;case "H":case "HH":case "h":case "hh":k[3]=~~f;break;case "m":case "mm":k[4]=~~f;break;case "s":case "ss":k[5]=~~f;break;case "S":case "SS":case "SSS":k[6]=~~(1E3*("0."+f));break;case "X":g._d=new Date(1E3*parseFloat(f));break;case "Z":case "ZZ":g._useUTC=!0,(h=(f+"").match(V))&&h[1]&&(g._tzh=~~h[1]),h&&h[2]&&(g._tzm=~~h[2]),h&&"+"===h[0]&&(g._tzh=-g._tzh,g._tzm=-g._tzm)}null==f&&(g._isValid=!1)}a._isPm&&12>a._a[3]&&(a._a[3]+=12);!1===a._isPm&&12===a._a[3]&&(a._a[3]=0);y(a)}function F(a,d,b,
e,f){return f.relativeTime(d||1,!!b,a,e)}function C(a,d,b){d=b-d;b-=a.day();b>d&&(b-=7);b<d-7&&(b+=7);return Math.ceil(A(a).add("d",b).dayOfYear()/7)}function K(d){var f=d._i,g=d._f;if(null===f||""===f)return null;"string"===typeof f&&(d._i=f=w().preparse(f));if(A.isMoment(f))d=a({},f),d._d=new Date(+f._d);else if(g)if("[object Array]"===Object.prototype.toString.call(g)){for(var f=d,h,k,l=99;f._f.length;){h=a({},f);h._f=f._f.pop();B(h);g=new b(h);if(g.isValid()){k=g;break}h=v(h._a,g.toArray());h<
l&&(l=h,k=g)}a(f,k)}else B(d);else if(k=d,f=k._i,g=Y.exec(f),f===e)k._d=new Date;else if(g)k._d=new Date(+g[1]);else if("string"===typeof f)if(g=k._i,ja.exec(g)){k._f="YYYY-MM-DDT";for(f=0;4>f;f++)if(ga[f][1].exec(g)){k._f+=ga[f][0];break}X.exec(g)&&(k._f+=" Z");B(k)}else k._d=new Date(g);else"[object Array]"===Object.prototype.toString.call(f)?(k._a=f.slice(0),y(k)):k._d=f instanceof Date?new Date(+f):new Date(f);return new b(d)}function z(a,d){A.fn[a]=A.fn[a+"s"]=function(a){var b=this._isUTC?"UTC":
"";return null!=a?(this._d["set"+b+d](a),this):this._d["get"+b+d]()}}function J(a){A.duration.fn[a]=function(){return this._data[a]}}function G(a,d){A.duration.fn["as"+a]=function(){return+this/d}}for(var A,I=Math.round,O,P={},E="undefined"!==typeof module&&module.exports,Y=/^\/?Date\((\-?\d+)/i,N=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,n=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,M=/\d\d?/,U=/\d{1,3}/,W=/\d{3}/,
H=/\d{1,4}/,S=/[+\-]?\d{1,6}/,R=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,X=/Z|[\+\-]\d\d:?\d\d/i,ea=/T/i,fa=/[\+\-]?\d+(\.\d{1,3})?/,ja=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,ga=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],V=/([\+\-]|\d\d)/gi,ca="Month Date Hours Minutes Seconds Milliseconds".split(" "),pa=
{Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},sa={},la="DDD w W M D d".split(" "),qa="MDHhmswW".split(""),ia={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,
a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},
s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var a=-this.zone(),d="+";0>a&&(a=-a,d="-");return d+l(~~(a/60),2)+":"+l(~~a%60,2)},ZZ:function(){var a=-this.zone(),d="+";0>a&&(a=-a,d="-");return d+l(~~(10*a/6),4)},X:function(){return this.unix()}};la.length;)O=la.pop(),ia[O+"o"]=h(ia[O]);for(;qa.length;)O=qa.pop(),ia[O+O]=k(ia[O],2);ia.DDDD=k(ia.DDD,
3);f.prototype={set:function(a){var d,b;for(b in a)d=a[b],"function"===typeof d?this[b]=d:this["_"+b]=d},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var d,b;this._monthsParse||(this._monthsParse=[]);for(d=0;12>d;d++)if(this._monthsParse[d]||
(b=A([2E3,d]),b="^"+this.months(b,"")+"|^"+this.monthsShort(b,""),this._monthsParse[d]=new RegExp(b.replace(".",""),"i")),this._monthsParse[d].test(a))return d},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},
_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var d=this._longDateFormat[a];!d&&this._longDateFormat[a.toUpperCase()]&&(d=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=d);return d},meridiem:function(a,d,b){return 11<a?b?"pm":"PM":b?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",
lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(a,d){var b=this._calendar[a];return"function"===typeof b?b.apply(d):b},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,d,b,e){var f=this._relativeTime[b];return"function"===typeof f?f(a,d,b,e):f.replace(/%d/i,a)},pastFuture:function(a,d){var b=this._relativeTime[0<a?"future":
"past"];return"function"===typeof b?b(d):b.replace(/%s/i,d)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return C(a,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}};A=function(a,d,b){return K({_i:a,_f:d,_l:b,_isUTC:!1})};A.utc=function(a,d,b){return K({_useUTC:!0,_isUTC:!0,_l:b,_i:a,_f:d})};A.unix=function(a){return A(1E3*a)};A.duration=function(a,d){var b=A.isDuration(a),e="number"===
typeof a,f=b?a._data:e?{}:a;e&&(d?f[d]=a:f.milliseconds=a);e=new g(f);b&&a.hasOwnProperty("_lang")&&(e._lang=a._lang);return e};A.version="2.0.0";A.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";A.lang=function(a,d){if(!a)return A.fn._lang._abbr;d?(d.abbr=a,P[a]||(P[a]=new f),P[a].set(d)):P[a]||w(a);A.duration.fn._lang=A.fn._lang=w(a)};A.langData=function(a){a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr);return w(a)};A.isMoment=function(a){return a instanceof b};A.isDuration=function(a){return a instanceof g};
A.fn=b.prototype={clone:function(){return A(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return A.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){null==this._isValid&&(this._isValid=
this._a?!v(this._a,(this._isUTC?A.utc(this._a):A(this._a)).toArray()):!isNaN(this._d.getTime()));return!!this._isValid},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){a=u(this,a||A.defaultFormat);return this.lang().postformat(a)},add:function(a,d){var b;b="string"===typeof a?A.duration(+d,a):A.duration(a,d);q(this,b,1);return this},subtract:function(a,d){var b;b="string"===typeof a?A.duration(+d,a):A.duration(a,d);q(this,b,-1);return this},
diff:function(a,b,e){a=this._isUTC?A(a).utc():A(a).local();var f=6E4*(this.zone()-a.zone()),g;b&&(b=b.replace(/s$/,""));"year"===b||"month"===b?(f=432E5*(this.daysInMonth()+a.daysInMonth()),g=12*(this.year()-a.year())+(this.month()-a.month()),g+=(this-A(this).startOf("month")-(a-A(a).startOf("month")))/f,"year"===b&&(g/=12)):(f=this-a-f,g="second"===b?f/1E3:"minute"===b?f/6E4:"hour"===b?f/36E5:"day"===b?f/864E5:"week"===b?f/6048E5:f);return e?g:d(g)},from:function(a,d){return A.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!d)},
fromNow:function(a){return this.from(A(),a)},calendar:function(){var a=this.diff(A().startOf("day"),"days",!0),a=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(a,this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<A([this.year()]).zone()||this.zone()<A([this.year(),5]).zone()},day:function(a){var d=this._isUTC?this._d.getUTCDay():this._d.getDay();
return null==a?d:this.add({d:a-d})},startOf:function(a){a=a.replace(/s$/,"");switch(a){case "year":this.month(0);case "month":this.date(1);case "week":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.day(0);return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(a,d){d="undefined"!==typeof d?d:"millisecond";return+this.clone().startOf(d)>+A(a).startOf(d)},
isBefore:function(a,d){d="undefined"!==typeof d?d:"millisecond";return+this.clone().startOf(d)<+A(a).startOf(d)},isSame:function(a,d){d="undefined"!==typeof d?d:"millisecond";return+this.clone().startOf(d)===+A(a).startOf(d)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return A.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var d=I((A(this).startOf("day")-A(this).startOf("year"))/864E5)+1;return null==a?d:this.add("d",a-d)},isoWeek:function(a){var d=
C(this,1,4);return null==a?d:this.add("d",7*(a-d))},week:function(a){var d=this.lang().week(this);return null==a?d:this.add("d",7*(a-d))},lang:function(a){if(a===e)return this._lang;this._lang=w(a);return this}};for(O=0;O<ca.length;O++)z(ca[O].toLowerCase().replace(/s$/,""),ca[O]);z("year","FullYear");A.fn.days=A.fn.day;A.fn.weeks=A.fn.week;A.fn.isoWeeks=A.fn.isoWeek;A.duration.fn=g.prototype={weeks:function(){return d(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+
2592E6*this._months},humanize:function(a){var d=+this,b;b=!a;var e=this.lang(),f=I(Math.abs(d)/1E3),g=I(f/60),h=I(g/60),k=I(h/24),l=I(k/365),f=45>f&&["s",f]||1===g&&["m"]||45>g&&["mm",g]||1===h&&["h"]||22>h&&["hh",h]||1===k&&["d"]||25>=k&&["dd",k]||45>=k&&["M"]||345>k&&["MM",I(k/30)]||1===l&&["y"]||["yy",l];f[2]=b;f[3]=0<d;f[4]=e;b=F.apply({},f);a&&(b=this.lang().pastFuture(d,b));return this.lang().postformat(b)},lang:A.fn.lang};for(O in pa)pa.hasOwnProperty(O)&&(G(O,pa[O]),J(O.toLowerCase()));G("Weeks",
6048E5);A.lang("en",{ordinal:function(a){var d=a%10;return a+(1===~~(a%100/10)?"th":1===d?"st":2===d?"nd":3===d?"rd":"th")}});E&&(module.exports=A);"undefined"===typeof ender&&(this.moment=A);"function"===typeof define&&define.amd&&define("moment",[],function(){return A})}).call(this);
(function(e){e.console&&e.console.log||(e.console={log:function(){}});e.analytics&&e.analytics.track||(e.analytics={track:function(){}});e.Ducksboard=e.D=_.extend({development:!_.endsWith(window.location.hostname,".ducksboard.com"),support:{xhrFileUpload:!(!window.XMLHttpRequestUpload||!window.FileReader),xhrFormDataFileUpload:!!window.FormData},config:void 0,bootstrap:function(e){this.config=e;$.browser.msie&&8>=$.browser.version?document.location.href=e.unsupported_browser_url:Modernizr.websockets?
this.Websocket.connect():document.location.href=e.no_websockets_url}},Backbone.Events)})(window);
(function(){_.extend(Ducksboard,{isocountries:{AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AN:"Netherlands Antilles",AO:"Angola",AP:"Asia/Pacific Region",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"\u00c5land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",
BL:"Saint Barth\u00e9lemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, The Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"C\u00f4te d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",
DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",EU:"Europe",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",FX:"France, Metropolitan",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",
GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",
KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libyan Arab Jamahiriya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",
ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",
PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",ST:"Sao Tome and Principe",SV:"El Salvador",SY:"Syrian Arab Republic",
SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",
VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"}})})();
(function(){var e={overlayColor:"#000",overlayOpacity:.6,padding:0,margin:0,hideOnOverlayClick:!1,showCloseButton:!1,centerOnScroll:!0,enableEscapeButton:!1,onStart:function(){D.u.hide_tooltips()},onComplete:function(){D.u.on_esc()},onCleanup:function(){D.u.off_esc();D.u.hide_tooltips()},onClosed:function(){D.u.remove_dropdowns();D.Backbone.app.navigate("#!");D.u.off_esc()}},k=_.defaults({onStart:function(){D.u.hide_tooltips()},onCleanup:function(){D.u.hide_tooltips()},onClosed:function(){D.Backbone.app.navigate("#")},
onComplete:function(){}},e),h={constants:{timeline_size:11,slidster_conf:{arrows:{next:{css_class:"btn btn-nav next",html:'<i class="icon-arrow-right"></i>'},prev:{css_class:"btn btn-nav prev",html:'<i class="icon-arrow-left"></i>'}}},gridster:{"default":{pc:{widget_base_dimensions:[320,166],widget_margins:[10,10]},tv720:{namespace:".tv720",widget_base_dimensions:[387,200],widget_margins:[15,15]},tv1080:{namespace:".tv1080",widget_base_dimensions:[580,300],widget_margins:[22.5,22.5]}},zendesk:{pc:{namespace:"div.zendesk",
widget_base_dimensions:[400,225],widget_margins:[0,0],max_cols:4},tv720:{namespace:".tv720 div.zendesk",widget_base_dimensions:[320,180],widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4},tv1080:{namespace:".tv1080 div.zendesk",widget_base_dimensions:[480,270],widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4}},twilio:{pc:{namespace:"div.twilio",widget_base_dimensions:[400,225],widget_margins:[0,0],max_cols:4},tv720:{namespace:".tv720 div.twilio",widget_base_dimensions:[320,180],
widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4},tv1080:{namespace:".tv1080 div.twilio",widget_base_dimensions:[480,270],widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4}},mozscape:{pc:{namespace:"div.mozscape",widget_base_dimensions:[400,225],widget_margins:[0,0],max_cols:4},tv720:{namespace:".tv720 div.mozscape",widget_base_dimensions:[320,180],widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4},tv1080:{namespace:".tv1080 div.mozscape",widget_base_dimensions:[480,270],
widget_margins:[0,0],min_visible_cols:4,min_visible_rows:4}}}},format_number:function(e,b,g,a){void 0===b&&(b=2);void 0===g&&(g=6);a=a?"."+Array(b+1).join("0"):"";for(var d="",h=" k M G T P E Z".split(" "),k=0,v=function(a,d){return a[0].length+a[1].length+d.length>g||""!=d&&3<a[0].length?!1:!0},w=function(a,d){if(0==d)return[a.toFixed(),""];var b=a.toFixed(d).split(".");if(1==b.length||b[1].match(/^0*$/))b[1]="";return b};k<h.length;){var m=b,d=h[k];for(s=w(e,m);!v(s,d)&&0!=m;)m--,s=w(e,m);if(v(s,
d))break;e/=1E3;k++}k>=h.length&&(d="",s=["lotsa",""]);e=/(\d+)(\d{3})/;for(b=s[0];e.test(b);)b=b.replace(e,"$1,$2");return b+(s[1].length?"."+s[1]:a)+d},split_seconds:function(e){var b=parseInt(e);e=Math.round(e%1*1E3);var g=[60,60,24,Infinity],a=0,d=[];do{var h=b%g[a];d.unshift(h);b-=h;b/=g[a];a++}while(a<g.length);d.push(e);return d},format_time:function(e,b){void 0===b&&(b=2);e=Math.round(e);var g=0>e;if(0===e)return"0s";var a=_.map(this.split_seconds(e),function(a){return Math.abs(a)});a.pop();
var d=["d","h","m","s"],h=0,k=[];do{var v=a[h];0!==v&&k.push(v+d[h]);h++}while(h<d.length);a=k.slice(0,b).join(" ");return g?"-"+a:a},number_to_text:function(e){return D.u.is_number(e)?{0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen",17:"seventeen",18:"eighteen",19:"nineteen",20:"twenty"}[e]||e:e},is_number:function(e){return"number"===typeof e&&isFinite(e)},break_space:function(e){e=
_.escapeHTML(e);if(8>e.length)return e;_.each({" ":"<br>","@":"<br>@","/":"<br>/"},function(b,g){e=e.replace(g,b)});return e},bbcode:function(e){function b(b){return new RegExp("\\["+b+"\\]([^\\]]*)\\[\\/"+b+"\\]","gi")}e=_.escapeHTML(e);return e=e.replace(b("b"),"<strong>$1</strong>").replace(b("i"),"<em>$1</em>").replace(b("url"),'<a href="$1" target="_blank">$1</s>').replace(/\[url href=([^\]]*)\]([^\]]*)\[\/url\]/gi,'<a href="$1" target="_blank">$2</a>').replace(b("appurl"),'<a href="$1">$1</s>').replace(/\[appurl href=([^\]]*)\]([^\]]*)\[\/appurl\]/gi,
'<a href="$1" >$2</a>')},dot_spinner:function(e,b){void 0===b&&(b=e.val()||e.text()||"Loading");b+="\u00a0\u00a0\u00a0";e.val(b);return setInterval(function(){_.endsWith(e.val(),"\u00a0")?(e.val(e.val().replace(/\u00A0/,".")),e.text(e.val().replace(/\u00A0/,"."))):(e.val(b),e.text(b))},400)},cancel_spinner:function(e){clearInterval(e)},sending:function(e,b){var g=e.val();g&&""!==g||(g=e.html());var a={blocked:e.hasClass("disabled"),complete:$.noop};if(a.blocked)return a;e.addClass("disabled");if(_.isFunction(b))b(),
a.complete=function(){e.removeClass("disabled");e.val(g);e.html(g)};else{var d=D.u.dot_spinner(e,b);a.complete=function(){D.u.cancel_spinner(d);e.removeClass("disabled");e.val(g);e.html(g)}}return a},submit:function(e,b,g){if(b.hasClass("disabled"))return null;b.addClass("disabled");e.each(function(){$(this).hasClass("placeholder")&&$(this).val()==$(this).attr("placeholder")&&$(this).val("")});var a={};$.each(e.serializeArray(),function(d,b){a[b.name]=b.value});g=$.post(g,a);g.always(function(){b.removeClass("disabled")});
g.fail(function(a){a=$.parseJSON(a.responseText);$.each(a,function(a,d){var b=e.filter("input[type=text]#id_"+a).addClass("error").val(d[0]).one("focus",function(){b.removeClass("error").val("")}).one("change",function(){b.removeClass("error")}),g=e.filter("select#id_"+a),h=g.parent().find("#id_"+a+"_chzn");h.addClass("error");h.find("span").text(d[0]);h.one("focus",function(){g.trigger("liszt:updated");h.removeClass("error")});var k=e.filter("input[type=password]#id_"+a),u=k.attr("placeholder");
k.data("orig_placeholder",u);k.addClass("error").val("").attr("placeholder",d[0]).one("focus",function(){k.removeClass("error").val("").attr("placeholder",k.data("orig_placeholder"))})})});return g},scale_image:function(e,b,g,a){b=this.scale_image_sizes(e,b,g,a);var d={};_.each(b,function(a,b){d[b]=a+"px"});$(e).css(d)},scale_image_sizes:function(e,b,g,a){a=a||!1;var d=$(e);e=d.outerWidth();d=d.outerHeight();b/=g;g={};g=1<b;a&&(g=e/d>b);g?(a=d,d=Math.floor(e/b),a=Math.floor((a-d)/2),g={"margin-top":a,
"margin-right":0,"margin-bottom":a,"margin-left":0}):(a=e,e=d*b,a=Math.floor((a-e)/2),g={"margin-top":0,"margin-right":a,"margin-bottom":0,"margin-left":a});$.extend(g,{width:e,height:d});return g},is_error:function(e){return!(200<=e&&300>e)},error_message:function(e){e=D.u.error_messages[e];void 0===e&&(e=D.u.default_error_message);return e},error_messages:{401:"Could not authenticate with the service. Don't worry, we'll keep on trying.",404:"We couldn't find the configured object. Don't worry, we'll keep on trying."},
default_error_message:"There was an error getting data from the service. Don't worry, we'll keep on trying.",api_error_codes:{default_error:100,unique_error:101,value_error:102},super_modal:function(f,b){b||(b={});opts=_.defaults({},e,b);var g=opts.onCleanup;opts.onCleanup=function(){g();f.$el.fadeOut(200,function(){f.$("select").unchosen();f.$(".datepicker-wrap").datepicker("remove");f.remove()})};var a=b.onComplete;opts.onComplete=function(){a&&a();D.u.on_esc(function(a){D.u.close_fancybox(a,function(){f&&
f.abort_creation&&f.abort_creation(a)})})};opts.content=f.$el;$.fancybox(opts);f.$("select").chosen({disable_search_threshold:10});f.$("input[placeholder], textarea[placeholder]").placeholder()},modal:function(f){$.fancybox(_.defaults(f,e))},blocked_modal:function(e){$.fancybox(_.defaults(e,k))},shortest:function(e){e=_.sortBy(e,function(b){return $(b).actual("height")});return _.first(e)},tallest:function(e){e=_.sortBy(e,function(b){return $(b).actual("height")});return _.last(e)},is_external:function(e){return/^https?:|data:/.test(e)},
hide_tooltips:function(){$(".tip").each(function(){var e=$(this).data("tooltip");e&&e.isShown()&&e.hide()})},extra_request_args:function(){var e=D.Backbone.account.get("access_token"),b=D.Backbone.account.get("access_password");return _.extend(e?{access_token:e}:{},b?{access_password:b}:{})},on_esc:function(e){$(document).on("keyup.ducksboard",e||D.u.close_fancybox)},off_esc:function(){$(document).off("keyup.ducksboard")},close_fancybox:function(e,b){27==e.keyCode&&(e.preventDefault(),$.fancybox.close(),
b&&b())},rgb_to_hex:function(e){return Raphael.getRGB(e).hex},to_api:function(e,b){return D.u._translate(e,b,0,1)},from_api:function(e,b){return D.u._translate(e,b,1,0)},_translate:function(e,b,g,a){if(_.isEmpty(e))return b;_.each(b,function(d,h){_.each(e,function(e){h===e[g]&&(delete b[h],b[e[a]]=d)})});return b},user_interacting:function(){return!!$("#fancybox-content div, .contextual:visible").length},actual:_.memoize(function(e,b){return $(b).actual(e)},function(e,b){var g=_.sprintf("%s-%s",e,
$(b).tmplItem().key),a=$(b).closest("[data-display-mode]").attr("data-display-mode");a&&(g+=_.sprintf("-%s",a));return g}),track_tab:function(e,b,g){void 0!==e.button&&analytics.track(b,g||{})},is_valid_credit_card:function(e){e=e.val();e=e.replace(/\D/g,"");if(_.isBlank(e))return!1;for(var b=0,g=0,a=!1,d=e.length-1;0<=d;d--)g=e.charAt(d),g=parseInt(g,10),a&&9<(g*=2)&&(g-=9),b+=g,a=!a;return 0==b%10},is_valid_cvv:function(e){e=e.val();return(3==e.length||4==e.length)&&/^[0-9]+$/.test(e)},is_not_empty:function(e){var b=
e.val();return!e.is("select")||"-"!=b&&"--"!=b?!!b:!1},is_checked:function(e){return e.is(":checked")},support_xhr_upload:function(){return D.support.xhrFileUpload||D.support.xhrFormDataFileUpload},remove_dropdowns:function(){$(document.body).children(".chzn-drop, .ac-dropdown").remove()},unix_to_iso8601:function(e){return moment.unix(e).format("YYYY-MM-DDTHH:mm:ssZ")},camelcase_to_hypenated:function(e){return e.replace(/([A-Z])/g,function(b,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")},
in_visible_dashboard:function(e){var b=e instanceof D.bb.Widget,g=D.bb.dashboards.current;return e instanceof D.bb.Slot||b?e.is_visible():g&&g.view?$(e).closest(".dashboard").is(D.bb.dashboards.current.view.$el):!1},focus_on_first:function(e,b){b||(b="input:text, textarea");var g=e.find(b).not(".autocomplete").not(".error").filter(":visible").first();g.focus();g.is("[readonly]")?g.select():g.val(g.val())},close_contextual:function(e){e.originalEvent||(e.originalEvent={});$(".contextual").not(e.originalEvent.$contextual).fadeOut(function(){var b=
$(this).data("cleanup");_.isFunction(b)&&b.call(this)})},sort_desc_by_value:function(e){e=_.map(e,function(b,e){return{item:b,idx:e}});e.sort(function(b,e){return e.item.value>b.item.value?1:e.item.value<b.item.value||e.idx>b.idx?-1:e.idx<b.idx?1:0});return _.pluck(e,"item")}};_.extend(Ducksboard,{Utils:h,u:h})})();
(function(){var e={visa:{prefixes:[4],name:"Visa"},mastercard:{prefixes:[51,52,53,54,55],name:"MasterCard"},american_express:{prefixes:[34,37],name:"American Express"}},k={USD:"$",EUR:"\u20ac"},h=function(b,e){this._cents=b||0;this._currency=e||"USD"};h.prototype={toString:function(){return D.u.Billing.format_currency(this.dollars(),this._currency)},cents:function(b){return void 0===b?this._cents:new h(b,this._currency)},dollars:function(b){return void 0===b?this._cents/100:new h(100*b,this._currency)},
mult:function(b){return new h(this._cents*b,this._currency)},add:function(b){b.cents&&(b=b.cents());return new h(this._cents+b,this._currency)},sub:function(b){b.cents&&(b=b.cents());return new h(this._cents-b,this._currency)},discount:function(b,e){return b.discount_in_cents&&b.discount_in_cents[e]?this.add(new h(-b.discount_in_cents[e])):b.discount_percent?this.sub(this.mult(b.discount_percent/100)):this}};var f={country:"ES",vat_percent:"21",errors:{first_name:"Required field",last_name:"Required field",
number:"Invalid card number",verification_value:"  \u2639",address1:"Please enter your full address",city:"Required field",state:"Required field",zip:"  \u2639",coupon_code:"Invalid",tos:"Please accept the Terms of Service."},detect_card_type:function(b){b=b.replace(/\D/g,"");return _.find(e,function(e){return _.reduce(e.prefixes,function(a,d){return a||_.startsWith(b,d)},!1)}).name||!1},format_currency:function(b,e){var a=k[e||"USD"],d=!1;0>b&&(b=-b,d=!0);var f=D.Utils.format_number(b,2),a="%u%n".replace(/%u/g,
a),a=a.replace(/%n/g,f);d&&(a="-"+a);return a},is_country_in_eu:function(b){return _.include(Ducksboard.config.eu_countries,b)},is_vat_number_applicable:function(b){return this.is_country_in_eu(b)},is_vat_charge_applicable:function(b,e){return this.is_vat_number_applicable(b)?this.country==b||!e:!1},flatten_errors:function(b){if("string"==typeof b||"number"==typeof b||"boolean"==typeof b)return[b];var e=["base","account_id","plan_code"];return _.map(b,function(a,d){d=_.include(e,d)?"":_.sprintf("%s: ",
d.replace("_"," ","g"));return _.sprintf("%s%s",d,a)})},Cost:h};_.extend(Ducksboard.Utils,{Billing:f,b:f})})();(function(){Raphael.el.smartAnimate=function(e,k,h,f,b){e=e instanceof Backbone.Model?e:e.model;e.widget&&e.widget.is_embed||e.is_visible()?this.animate(k,h,f,b):(this.attr(k),b&&b())}})(Raphael);
(function(e){e.constants={PATH_LINE:0,PATH_AREA:1,PATH_TREND:2,PATH_STACKED:3,UPDATE_ANIMATION_DURATION:1E3,UPDATE_ANIMATION_EASING:"linear",RGB_REGEXP:/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/};var k=function(e,f,b){void 0===b&&(b=.2);if(0==e.length)return[0,0];var g=_.min(e);e=_.max(e);var a=0;0>g&&(a=-g,g+=a,e+=a);if(g==e)return 0==g?[0,0]:[f/g/2,0];var d=e?f/e:1;if(g*d<=f*b)return[d,a*d];d=(1-b)*f/(e-g);return[d,f-d*e+a*d]};e.tools={scale_factor:function(e,f){var b=_.max(e),g=_.reduce(e,function(a,b){return a+
b},0)/e.length,a=void 0,a=b<=2*g?f/g/2:f/b;isFinite(a)||(a=0);return a},zoom:k,zoom_ticks:function(e,f,b,g,a){void 0===a&&(a=0);if(0==e.length)return[0,0,v];void 0===b&&(b=5);var d=_.min(e),k=_.max(e);e=0;var q=function(d,b){var e=d/b,f=Math.floor(Math.log(e)/Math.LN10),f=Math.pow(10,f),g=b/d*f;.15>=g?f*=10:.25>=g?f*=5:.75>=g&&(f*=2);e=Math.ceil(e/f)*f;e*b<d+d*a&&(e+=f);p=Math.floor(Math.log(e)/Math.LN10);return[e,0>p?-p:1]}(k-d||b-1,b),v=q[0],w=q[1],m=4+w,q=Math.ceil(d/v)*v,d=Math.floor(k/v)*v;g&&
(q-=Math.floor((b+1-((d-q)/v+2))/2)*v);var k=b*v+q,d=q-v,v=_.map(_.range(q,k,v),function(a){return D.Utils.format_number(a,w,0>a?m+1:m)});0>d&&(e=-d,d+=e,k+=e);b=f/(k-d);return[b,f-b*k+e*b,v]},rounded_tick_size:function(e,f){var b=e/f,g=Math.floor(Math.log(b)/Math.LN10),a=Math.pow(10,g-1);return[Math.ceil(b/a)*a,0>g?-g+1:4]},build_path:function(e,f,b,g,a,d,l){var q=D.u.actual("size",b);b=q[0];var v=q[1],q=b*v;d||(d=e.slice(a+1),d=k(d,v));a=d[0];var w=d[1],m=this.width_distribution(e.length-1,b);m.unshift(0);
var t=[],u=v-w;if(g===Raphael.constants.PATH_TREND||g===Raphael.constants.PATH_AREA||!f.length&&g===Raphael.constants.PATH_STACKED)u>=v&&d[2]?u=v-v/(d[2].length+1):0>u&&(u=0),t.push([0,u]);for(var x=d=0;x<e.length;x++)d+=m[x],t.push([d+(g>Raphael.constants.PATH_LINE?0:.5),v-e[x]*a-w]);if(g===Raphael.constants.PATH_STACKED&&f.length)for(x=f.length-1;0<=x;x--)t.push([d,v-f[x]*a-w]),d-=m[x];g===Raphael.constants.PATH_TREND?t.push([b,v]):(g===Raphael.constants.PATH_AREA||!f.length&&g===Raphael.constants.PATH_STACKED)&&
t.push([b,u]);if(g===Raphael.constants.PATH_AREA)for(x=0;x<t.length-1;x++)q-=t[x+1][1]+t[x][1]*(t[x+1][0]-t[x][0])/2;e=$.map(t,function(a,d){if(g===Raphael.constants.PATH_TREND){var b=t[d+1]||[0,v],e=(b[0]-a[0])*v,f=" M "+b[0]+" "+b[1],f=f+(" L "+b[0]+" "+b[1]),f=f+(" L "+a[0]+" "+a[1]),f=f+(" L "+a[0]+" "+v),f=f+(" L "+b[0]+" "+v);return[[f,e]]}if(g===Raphael.constants.PATH_AREA){switch(d){case 0:b="M";e=a[0]-l/2;f=a[1];break;case 1:b="L";e=a[0]-l/2;f=a[1];break;case t.length-2:case t.length-1:b=
"L";e=a[0]+l/2;f=a[1];break;default:b="L",e=a[0],f=a[1]}return _.sprintf("%s %f %f",b,e,f)}return(0===d?"M":"L")+" "+a[0]+" "+a[1]});return _.isArray(e[0])?e:[e.join(" "),q]},pin_base:function(e,f){var b=f/3,g=2*f/Math.sqrt(3);return[[e[0]-g/2,e[1]-b],[e[0]+g/2,e[1]-b],[e[0],e[1]+2*b]]},arc:function(e,f,b,g,a){g=g*Math.PI/180;var d=a*Math.PI/180;a=e+b*Math.cos(g);var k=f-b*Math.sin(g);g=e+b*Math.cos(d);d=f-b*Math.sin(d);e="M "+e+" "+f;f=" L "+a+" "+k;b=" A "+[b,b,0,0,1,g,d].join(" ");return{path:e+
f+b}},width_distribution:function(e,f){for(var b=Math.floor(f/e),g=f-b*e,a=Array(e),d=e-1;0<=d;d--)a[d]=b,0<g&&(a[d]+=1),g--;return a},darken:function(h,f){void 0===f&&(f=.8);var b=e.getRGB(h),b=e.rgb2hsl(b.r,b.g,b.b);b.l*=1-f;b=e.hsl2rgb(b.h,b.s,b.l);return b.hex}}})(Raphael);
(function(e){var k={slot:void 0,path_attrs:{stroke:"none",fill:"#f2f2e7"},padding_offset:0,data:[],base_data:[],factors:void 0,paper:void 0},h=function(b,f){var a=e.extend({},k,{path_attrs:{odd:{stroke:"none",fill:"#E1E1D7"},even:{stroke:"none",fill:"#E6E6DC"}}},b),d=a.path_attrs;a.slot||e.error("slot reference is required in jQuery.graph");return this.each(function(){var b=a.slot.trend,h=[];if(!b){if(a.paper)w=a.paper;else var k=D.u.actual("size",this),w=Raphael(this,k[0],k[1]);for(var k=[],m=0;m<
a.data.length;m++)k[m]=0;k=Raphael.tools.build_path(k,k,e(this),f,a.padding_offset,null,d["stroke-width"]||1);_.isArray(k[0])?(_.each(k,function(f,g){b=w.path(f[0]).attr(d[0===g%2?"odd":"even"]);h.push(b);e(b.node).attr("label","label-"+a.slot.model.attributes.layout)}),a.slot.trend=h):(b=w.path(k[0]).attr(d),a.slot.trend=b,e(b.node).attr("label","label-"+a.slot.model.attributes.layout))}var t=Raphael.tools.build_path(a.data,a.base_data,e(this),f,a.padding_offset,a.factors,d["stroke-width"]||1),k=
t[0],u=2*Raphael.constants.UPDATE_ANIMATION_DURATION,x=Raphael.constants.UPDATE_ANIMATION_EASING,m=_.isFunction(a.callback)?a.callback:e.noop,y=a.slot;if(_.isArray(y.trend)){var B=_.after(y.trend.length,m);_.each(y.trend,function(a,d){a.area=t[d][1];a.smartAnimate(y,{path:t[d][0]},u,x,B)})}else b.area=t[1],b.smartAnimate(y,{path:k},u,x,m);if(f===Raphael.constants.PATH_AREA){for(k=b.prev;k&&k.area<b.area;)k=k.prev;k?b.insertAfter(k):b.toBack()}})},f={trend:function(b){return e.proxy(h,this)(b,Raphael.constants.PATH_TREND)},
line:function(b){return e.proxy(h,this)(b,Raphael.constants.PATH_LINE)},area:function(b){return e.proxy(h,this)(b,Raphael.constants.PATH_AREA)},stacked:function(b){return e.proxy(h,this)(b,Raphael.constants.PATH_STACKED)},paper:function(b){var f=e.extend({},k,b);f.widget||e.error("widget reference is required in jQuery.graph");return this.each(function(){var a=D.u.actual("size",this);f.widget.paper=Raphael(this,a[0],a[1])})},pin:function(b){var f=e.extend({},k,b),a=e.extend({},k.path_attrs,b.path_attrs);
return this.each(function(){var d=D.u.actual("size",this),b=d[0],h=d[1],d=Raphael(this,b,h);f=e.extend({bottom_space:20,top_space:10},f);var k=h*f.bottom_space/100,w=h*f.top_space/100,h=h-w-k,m=h/5,h=h-m,k=h/2,b=Raphael.tools.pin_base([b/2,h/2+w+k+m/6],m),b=["M",b[0][0],b[0][1],"A",k,k,0,1,1,b[1][0],b[1][1],"L",b[2][0],b[2][1]].join(" ");d.path(b).attr(a)})},bar:function(b){var f=e.extend({},k,b),a=e.extend({},k.path_attrs,b.path_attrs);f.slot||e.error("slot reference is required in jQuery.graph");
return this.each(function(){var d=f.slot.bar,b=D.u.actual("size",this),h=b[0],b=b[1];d||(d=Raphael(this,h,b).rect(-1,b,h+2,0).attr(a),f.slot.bar=d);h=f.height;void 0===h&&e.error("height is required when drawing a bar");f=e.extend({bottom_space:0},f);var b=b-h-f.bottom_space,k=Raphael.constants.UPDATE_ANIMATION_DURATION,w=Raphael.constants.UPDATE_ANIMATION_EASING,m=_.isFunction(f.callback)?f.callback:e.noop;d.smartAnimate(f.slot,{y:b,height:h},k,w,m)})},gauge:function(b){var f=e.extend({},k,b),a=
e.extend({},k.path_attrs,b.path_attrs);void 0===f.slot&&e.error("slot reference is required in jQuery.graph");void 0===f.percent&&e.error("percent value is required in jQuery.graph(gauge)");return this.each(function(){var d=D.u.actual("size",this),b=d[0],h=d[1];f=e.extend({bottom_space:30,top_space:5},f);var d=h*f.bottom_space/100,k=b/2,w=h,m=w,m=m-h*f.top_space/100,m=m-d,w=w-d,m=Math.min(m,k),d=m/20,w=w-d,m=m-d,t=f.slot.gauge;if(!t){b=Raphael(this,b,h);b.customAttributes.arc=Raphael.tools.arc;h=
b.path().attr({stroke:"none",fill:"#e1e1d8",arc:[k,w,m,-180,f.ticks?-360:-180]});e(h.node).attr("class","gauge-bg");var u=b.path().attr(e.extend(a,{arc:[k,w,m,-180,-180]}));e(u.node).attr("class","gauge-fg");var x=Raphael.tools.darken(a.fill,.35),y=b.set(),d=b.circle(k,w,d).attr({stroke:x,fill:x}),x=b.path(["M",k,w,"L",k-m,w]).attr({"stroke-width":m/30,stroke:x}),t=f.slot.gauge={background:h,foreground:u,needle:x,needle_base:d,paper:b,ticks:y}}if(f.ticks){var y=f.ticks,B=y[0].orig,F=y[y.length-1].orig-
B,C=180,K=0;t.ticks.remove();_.each(y,function(a,d,b){K=180+180*(a.orig-B)/F;t.ticks.push(t.paper.path().attr({stroke:"none","fill-opacity":.2*.7*d,fill:"#FFF",arc:[k,w,m,-C,-K]}));C=K});t.needle_base.node.parentNode.appendChild(t.needle_base.node);t.needle.node.parentNode.appendChild(t.needle.node)}d=-180*(1+f.percent);b=180*f.percent;h=Raphael.constants.UPDATE_ANIMATION_DURATION;u=Raphael.constants.UPDATE_ANIMATION_EASING;y=f.slot;x=_.isFunction(f.callback)?f.callback:e.noop;t.foreground.smartAnimate(y,
{arc:[k,w,m,-180,d]},h,u,x);t.needle.smartAnimate(y,{transform:["r",b,",",k,",",w].join()},h,u);f.ticks||t.background.smartAnimate(y,{arc:[k,w,m,d,-360]},h,u)})}};e.fn.graph=function(b){if(f[b])return params=Array.prototype.slice.call(arguments,1),f[b].apply(this,params);e.error("method "+b+" does not exist on jQuery.graph")}})(jQuery);
$(function(){$(window).scroll(function(){D.u.hide_tooltips()});$(window).on("resize",_.throttle(function(){D.Display&&(_.include(["tv720","tv1080"],D.d.current.id)||D.bb.dashboards.length&&D.bb.dashboards.current.view.adjust_preferences_bar())},150));screenfull.enabled&&($(document).on(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen||D.d.switch_to(D.d.modes.pc,{user_triggered:!0})}),$(window).on("resize.fullscreen",_.debounce(function(e){screenfull.isFullscreen&&D.bb.dashboards.current.view.switch_to_tvmode()},
600)));keypress.combo("escape",function(){D.d.switch_to(D.d.modes.pc,{user_triggered:!0})},!0);setInterval(function(){D.bb.account.get("readonly")||$.get("/refresh-session")},6048E5);D.bb.account.get("widget_token")||setTimeout(function(){var e=window.location.pathname+"ping";$.get(e);setInterval(function(){$.get(e)},6E4*(55+10*Math.random()))},3E3);var e="0deg";keypress.sequence_combo("up up down down left right left right b a",function(){e="0deg"===e?"180deg":"0deg";$(".widget").transition({rotate:e});
analytics.track("konami")});keypress.combo("alt t",function(){D.d.current===D.d.modes.tv?D.d.switch_to(D.d.modes.pc):D.Backbone.app.navigate("tvmode",!0)});$(document).on("click",D.u.close_contextual)});
(function(){var e=navigator.platform.toLowerCase(),k=navigator.userAgent,h=$.browser,f=$("html"),e={feature_detection:{cssanimations:Modernizr.cssanimations,cssfilters:Modernizr.cssfilters},browser:{moz:h.mozilla,webkit:h.webkit,opera:h.opera,ie:h.msie,ie8:h.msie&&8==h.version,ie9:h.msie&&9==h.version},platform:{mac:0<=e.indexOf("mac"),linux:0<=e.indexOf("linux"),win:0<=e.indexOf("win")},device:{ipad:!!k.match(/iPad/),iphone:!!k.match(/iPhone/)},add_browser_css_classes:function(){var b=$.extend({},
this.browser,this.platform,this.device);$.each(b,function(b,a){a&&f.addClass(b)});return b},add_feature_css_classes:function(){$.each(this.feature_detection,function(b,e){f.addClass(e?b:"no-"+b)})}};e.add_browser_css_classes();e.add_feature_css_classes();_.extend(Ducksboard,{BrowserUtils:e,bu:e})})();
(function(){_.extend(Ducksboard,{colors:{pink:"rgba(193, 31, 112, .65)",darkblue:"rgba(75, 99, 149, 0.65)",darkpurple:"rgba(81, 0, 14, 0.65)",red:"rgba(203, 25, 28, 0.65)",yellowgreen:"rgba(176, 186, 4, 0.65)",darkgreen:"rgba(11, 52, 2, 0.65)",black:"rgba(9, 9, 9, 0.65)",lightblue:"rgba(56, 175, 197, 0.65)",purple:"rgba(77, 34, 89, 0.65)",darkorange:"rgba(209, 59, 8, 0.65)",yellow:"rgba(247, 209, 2, 0.65)",green:"rgba(59, 121, 10, 0.65)",gray:"rgba(122, 123, 118, 0.65)",blue:"rgba(37, 177, 228, 0.65)",
bluesteel:"rgba(59, 136, 177, 0.65)",orange:"rgba(251, 136, 11, 0.65)",lightyellow:"rgba(254, 203, 91, 0.65)",lightgreen:"rgba(157, 199, 88, 0.65)",white:"rgba(255, 255, 255, 0.65)"}})})();
(function(){var e={User:{"ga:users":"Web View Name: <code>Users</code><br/><br/>Total number of users to your property for the requested time period.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:newUsers":"Web View Name: <code>New Users</code><br/><br/>The number of users whose session on your property was marked as a first-time session.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:percentNewSessions":"Web View Name: <code>% New Sessions</code><br/><br/>The percentage of sessions by people who had never visited your property before.<br/><br/><strong>Calculation</strong>:<br/><code>ga:newUsers / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>"},
Session:{"ga:sessions":"Web View Name: <code>Sessions</code><br/><br/>Counts the total number of sessions.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:bounces":"Web View Name: <code>Bounces</code><br/><br/>The total number of single page (or single engagement hit) sessions for your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:bounceRate":"Web View Name: <code>Bounce Rate</code><br/><br/>The percentage of single-page session (i.e., session in which the person left your property from the first page).<br/><br/><strong>Calculation</strong>:<br/><code>ga:bounces / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:sessionDuration":"Web View Name: <code>Session Duration</code><br/><br/>The total duration of user sessions represented in total seconds.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>TIME</code><br/>Allowed In Segments: Yes<br/>","ga:avgSessionDuration":"Web View Name: <code>Avg. Session Duration</code><br/><br/>The average duration of user sessions represented in total seconds.<br/><br/><strong>Calculation</strong>:<br/><code>ga:sessionDuration / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>TIME</code><br/>Allowed In Segments: No<br/>"},
"Traffic Sources":{"ga:organicSearches":"Web View Name: <code>Organic Searches</code><br/><br/>The number of organic searches that happened within a session. This metric is search engine agnostic.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>"},Adwords:{"ga:impressions":"Web View Name: <code>Impressions</code><br/><br/>Total number of campaign impressions.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>",
"ga:adClicks":"Web View Name: <code>Clicks</code><br/><br/>The total number of times users have clicked on an ad to reach your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:adCost":"Web View Name: <code>Cost</code><br/><br/>Derived cost for the advertising campaign. The currency for this value is based on the currency that you set in your AdWords account.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:CPM":"Web View Name: <code>CPM</code><br/><br/>Cost per thousand impressions.<br/><br/><strong>Calculation</strong>:<br/><code>ga:adCost / (ga:impressions / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:CPC":"Web View Name: <code>CPC</code><br/><br/>Cost to advertiser per click.<br/><br/><strong>Calculation</strong>:<br/><code>ga:adCost / ga:adClicks</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:CTR":"Web View Name: <code>CTR</code><br/><br/>Click-through-rate for your ad. This is equal to the number of clicks divided by the number of impressions for your ad (e.g. how many times users clicked on one of your ads where that ad appeared).<br/><br/><strong>Calculation</strong>:<br/><code>ga:adClicks / ga:impressions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>","ga:costPerTransaction":"Web View Name: <code>Cost per Transaction</code><br/><br/>The cost per transaction for your property.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:adCost) / (ga:transactions)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:costPerGoalConversion":"Web View Name: <code>Cost per Goal Conversion</code><br/><br/>The cost per goal conversion for your property.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:adCost) / (ga:goalCompletionsAll)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:costPerConversion":"Web View Name: <code>Cost per Conversion</code><br/><br/>The cost per conversion (including ecommerce and goal conversions) for your property.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:adCost) / (ga:transactions  +  ga:goalCompletionsAll)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:RPC":"Web View Name: <code>RPC</code><br/><br/>RPC or revenue-per-click is the average revenue (from ecommerce sales and/or goal value) you received for each click on one of your search ads.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:transactionRevenue + ga:goalValueAll) / ga:adClicks</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:ROI":"Web View Name: <code>ROI</code><br/><br/>Returns on Investment is overall transaction profit divided by derived advertising cost.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:transactionRevenue + ga:goalValueAll - ga:adCost) / ga:adCost</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:margin":"Web View Name: <code>Margin</code><br/><br/>The overall transaction profit margin.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:transactionRevenue + ga:goalValueAll - ga:adCost) / (ga:transactionRevenue + ga:goalValueAll)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>"},"Goal Conversions":{"ga:goalXXStarts":"Web View Name: <code>Goal XX Starts</code><br/><br/>The total number of starts for the requested goal number.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>Index Range: 1 to 20<br/>",
"ga:goalStartsAll":"Web View Name: <code>Goal Starts</code><br/><br/>The total number of starts for all goals defined for your profile.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:goalXXCompletions":"Web View Name: <code>Goal XX Completions</code><br/><br/>The total number of completions for the requested goal number.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>Index Range: 1 to 20<br/>",
"ga:goalCompletionsAll":"Web View Name: <code>Goal Completions</code><br/><br/>The total number of completions for all goals defined for your profile.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:goalXXValue":"Web View Name: <code>Goal XX Value</code><br/><br/>The total numeric value for the requested goal number.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>Index Range: 1 to 20<br/>",
"ga:goalValueAll":"Web View Name: <code>Goal Value</code><br/><br/>The total numeric value for all goals defined for your profile.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>","ga:goalValuePerSession":"Web View Name: <code>Per Session Goal Value</code><br/><br/>The average goal value of a session on your property.<br/><br/><strong>Calculation</strong>:<br/><code>ga:goalValueAll / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:goalXXConversionRate":"Web View Name: <code>Goal XX Conversion Rate</code><br/><br/>The percentage of sessions which resulted in a conversion to the requested goal number.<br/><br/><strong>Calculation</strong>:<br/><code>ga:goalXXCompletions / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>Index Range: 1 to 20<br/>","ga:goalConversionRateAll":"Web View Name: <code>Goal Conversion Rate</code><br/><br/>The percentage of sessions which resulted in a conversion to at least one of your goals.<br/><br/><strong>Calculation</strong>:<br/><code>ga:goalCompletionsAll / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:goalXXAbandons":"Web View Name: <code>Goal XX Abandoned Funnels</code><br/><br/>The number of times users started conversion activity on the requested goal number without actually completing it.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:goalXXStarts - ga:goalXXCompletions)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>Index Range: 1 to 20<br/>","ga:goalAbandonsAll":"Web View Name: <code>Abandoned Funnels</code><br/><br/>The overall number of times users started goals without actually completing them.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:goalStartsAll - ga:goalCompletionsAll)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>",
"ga:goalXXAbandonRate":"Web View Name: <code>Goal XX Abandonment Rate</code><br/><br/>The rate at which the requested goal number was abandoned.<br/><br/><strong>Calculation</strong>:<br/><code>((ga:goalXXStarts - ga:goalXXCompletions)) / (ga:goalXXStarts)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>Index Range: 1 to 20<br/>","ga:goalAbandonRateAll":"Web View Name: <code>Total Abandonment Rate</code><br/><br/>The rate at which goals were abandoned.<br/><br/><strong>Calculation</strong>:<br/><code>((ga:goalStartsAll - ga:goalCompletionsAll)) / (ga:goalStartsAll)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>"},
"Social Activities":{"ga:socialActivities":"Web View Name: <code>Data Hub Activities</code><br/><br/>The count of activities where a content URL was shared / mentioned on a social data hub partner network.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>"},"Page Tracking":{"ga:pageValue":"Web View Name: <code>Page Value</code><br/><br/>The average value of this page or set of pages. Page Value is (ga:transactionRevenue + ga:goalValueAll) / ga:uniquePageviews (for the page or set of pages).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:entrances":"Web View Name: <code>Entrances</code><br/><br/>The number of entrances to your property measured as the first pageview in a session. Typically used with landingPagePath<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:entranceRate":"Web View Name: <code>Entrances / Pageviews</code><br/><br/>The percentage of pageviews in which this page was the entrance.<br/><br/><strong>Calculation</strong>:<br/><code>ga:entrances / ga:pageviews</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:pageviews":"Web View Name: <code>Pageviews</code><br/><br/>The total number of pageviews for your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:pageviewsPerSession":"Web View Name: <code>Pages / Session</code><br/><br/>The average number of pages viewed during a session on your property. Repeated views of a single page are counted.<br/><br/><strong>Calculation</strong>:<br/><code>ga:pageviews / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:uniquePageviews":"Web View Name: <code>Unique Pageviews</code><br/><br/>The number of different (unique) pages within a session. This takes into both the pagePath and pageTitle to determine uniqueness.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:timeOnPage":"Web View Name: <code>Time on Page</code><br/><br/>How long a user spent on a particular page in seconds. Calculated by subtracting the initial view time for a particular page from the initial view time for a subsequent page. Thus, this metric does not apply to exit pages for your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>TIME</code><br/>Allowed In Segments: Yes<br/>",
"ga:avgTimeOnPage":"Web View Name: <code>Avg. Time on Page</code><br/><br/>The average amount of time users spent viewing this page or a set of pages.<br/><br/><strong>Calculation</strong>:<br/><code>ga:timeOnPage / (ga:pageviews - ga:exits)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>TIME</code><br/>Allowed In Segments: No<br/>","ga:exits":"Web View Name: <code>Exits</code><br/><br/>The number of exits from your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:exitRate":"Web View Name: <code>% Exit</code><br/><br/>The percentage of exits from your property that occurred out of the total page views.<br/><br/><strong>Calculation</strong>:<br/><code>ga:exits / (ga:pageviews + ga:screenviews)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>"},"Internal Search":{"ga:searchResultViews":"Web View Name: <code>Results Pageviews</code><br/><br/>The number of times a search result page was viewed after performing a search.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>",
"ga:searchUniques":'Web View Name: <code>Total Unique Searches</code><br/><br/>The total number of unique keywords from internal searches within a session. For example if "shoes" was searched for 3 times in a session, it will be only counted once.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>',"ga:avgSearchResultViews":"Web View Name: <code>Results Pageviews / Search</code><br/><br/>The average number of times people viewed a search results page after performing a search.<br/><br/><strong>Calculation</strong>:<br/><code>ga:searchResultViews / ga:searchUniques</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:searchSessions":"Web View Name: <code>Sessions with Search</code><br/><br/>The total number of sessions that included an internal search<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:percentSessionsWithSearch":"Web View Name: <code>% Sessions with Search</code><br/><br/>The percentage of sessions with search.<br/><br/><strong>Calculation</strong>:<br/><code>ga:searchSessions / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:searchDepth":"Web View Name: <code>Search Depth</code><br/><br/>The average number of subsequent page views made on your property after a use of your internal search feature.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:avgSearchDepth":"Web View Name: <code>Average Search Depth</code><br/><br/>The average number of pages people viewed after performing a search on your property.<br/><br/><strong>Calculation</strong>:<br/><code>ga:searchDepth / ga:searchUniques</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:searchRefinements":'Web View Name: <code>Search Refinements</code><br/><br/>The total number of times a refinement (transition) occurs between internal search keywords within a session. For example if the sequence of keywords is: "shoes", "shoes", "pants", "pants", this metric will be one because the transition between "shoes" and "pants" is different.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>',"ga:percentSearchRefinements":"Web View Name: <code>% Search Refinements</code><br/><br/>The percentage of number of times a refinement (i.e., transition) occurs between internal search keywords within a session.<br/><br/><strong>Calculation</strong>:<br/><code>ga:searchRefinements / ga:searchResultViews</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:searchDuration":"Web View Name: <code>Time after Search</code><br/><br/>The session duration on your property where a use of your internal search feature occurred.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>TIME</code><br/>Allowed In Segments: Yes<br/>","ga:avgSearchDuration":"Web View Name: <code>Time after Search</code><br/><br/>The average amount of time people spent on your property after searching.<br/><br/><strong>Calculation</strong>:<br/><code>ga:searchDuration / ga:searchUniques</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>TIME</code><br/>Allowed In Segments: No<br/>",
"ga:searchExits":"Web View Name: <code>Search Exits</code><br/><br/>The number of exits on your site that occurred following a search result from your internal search feature.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:searchExitRate":"Web View Name: <code>% Search Exits</code><br/><br/>The percentage of searches that resulted in an immediate exit from your property.<br/><br/><strong>Calculation</strong>:<br/><code>ga:searchExits / ga:searchUniques</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:searchGoalXXConversionRate":"Web View Name: <code>Site Search Goal XX Conversion Rate</code><br/><br/>The percentage of search sessions (i.e., sessions that included at least one search) which resulted in a conversion to the requested goal number.<br/><br/><strong>Calculation</strong>:<br/><code>ga:goalXXCompletions / ga:searchUniques</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>Index Range: 1 to 20<br/>","ga:searchGoalConversionRateAll":"Web View Name: <code>Site Search Goal Conversion Rate</code><br/><br/>The percentage of search sessions (i.e., sessions that included at least one search) which resulted in a conversion to at least one of your goals.<br/><br/><strong>Calculation</strong>:<br/><code>ga:goalCompletionsAll / ga:searchUniques</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:goalValueAllPerSearch":"Web View Name: <code>Per Search Goal Value</code><br/><br/>The average goal value of a search on your property.<br/><br/><strong>Calculation</strong>:<br/><code>ga:goalValueAll / ga:searchUniques</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>"},"Site Speed":{"ga:pageLoadTime":"Web View Name: <code>Page Load Time (ms)</code><br/><br/>Total Page Load Time is the amount of time (in milliseconds) it takes for pages from the sample set to load, from initiation of the pageview (e.g. click on a page link) to load completion in the browser.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>",
"ga:pageLoadSample":"Web View Name: <code>Page Load Sample</code><br/><br/>The sample set (or count) of pageviews used to calculate the average page load time.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:avgPageLoadTime":"Web View Name: <code>Avg. Page Load Time (sec)</code><br/><br/>The average amount of time (in seconds) it takes for pages from the sample set to load, from initiation of the pageview (e.g. click on a page link) to load completion in the browser.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:pageLoadTime / ga:pageLoadSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:domainLookupTime":"Web View Name: <code>Domain Lookup Time (ms)</code><br/><br/>The total amount of time (in milliseconds) spent in DNS lookup for this page among all samples.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:avgDomainLookupTime":"Web View Name: <code>Avg. Domain Lookup Time (sec)</code><br/><br/>The average amount of time (in seconds) spent in DNS lookup for this page.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:domainLookupTime / ga:speedMetricsSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:pageDownloadTime":"Web View Name: <code>Page Download Time (ms)</code><br/><br/>The total amount of time (in milliseconds) to download this page among all samples.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:avgPageDownloadTime":"Web View Name: <code>Avg. Page Download Time (sec)</code><br/><br/>The average amount of time (in seconds) to download this page.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:pageDownloadTime / ga:speedMetricsSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:redirectionTime":"Web View Name: <code>Redirection Time (ms)</code><br/><br/>The total amount of time (in milliseconds) spent in redirects before fetching this page among all samples. If there are no redirects, the value for this metric is expected to be 0.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:avgRedirectionTime":"Web View Name: <code>Avg. Redirection Time (sec)</code><br/><br/>The average amount of time (in seconds) spent in redirects before fetching this page. If there are no redirects, the value for this metric is expected to be 0.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:redirectionTime / ga:speedMetricsSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:serverConnectionTime":"Web View Name: <code>Server Connection Time (ms)</code><br/><br/>The total amount of time (in milliseconds) spent in establishing TCP connection for this page among all samples.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:avgServerConnectionTime":"Web View Name: <code>Avg. Server Connection Time (sec)</code><br/><br/>The average amount of time (in seconds) spent in establishing TCP connection for this page.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:serverConnectionTime / ga:speedMetricsSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:serverResponseTime":"Web View Name: <code>Server Response Time (ms)</code><br/><br/>The total amount of time (in milliseconds) your server takes to respond to a user request among all samples, including the network time from user's location to your server.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:avgServerResponseTime":"Web View Name: <code>Avg. Server Response Time (sec)</code><br/><br/>The average amount of time (in seconds) your server takes to respond to a user request, including the network time from user's location to your server.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:serverResponseTime / ga:speedMetricsSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:speedMetricsSample":"Web View Name: <code>Speed Metrics Sample</code><br/><br/>The sample set (or count) of pageviews used to calculate the averages for site speed metrics. This metric is used in all site speed average calculations including avgDomainLookupTime, avgPageDownloadTime, avgRedirectionTime, avgServerConnectionTime, and avgServerResponseTime.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:domInteractiveTime":"Web View Name: <code>Document Interactive Time (ms)</code><br/><br/>The time the browser takes (in milliseconds) to parse the document (DOMInteractive), including the network time from the user's location to your server. At this time, the user can interact with the Document Object Model even though it is not fully loaded.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>",
"ga:avgDomInteractiveTime":"Web View Name: <code>Avg. Document Interactive Time (sec)</code><br/><br/>The average time (in seconds) it takes the browser to parse the document and execute deferred and parser-inserted scripts including the network time from the user's location to your server.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:domInteractiveTime / ga:domLatencyMetricsSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:domContentLoadedTime":"Web View Name: <code>Document Content Loaded Time (ms)</code><br/><br/>The time the browser takes (in milliseconds) to parse the document and execute deferred and parser-inserted scripts (DOMContentLoaded), including the network time from the user's location to your server. Parsing of the document is finished, the Document Object Model is ready, but referenced style sheets, images, and subframes may not be finished loading. This event is often the starting point for javascript framework execution, e.g., JQuery's onready() callback, etc.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>",
"ga:avgDomContentLoadedTime":"Web View Name: <code>Avg. Document Content Loaded Time (sec)</code><br/><br/>The average time (in seconds) it takes the browser to parse the document.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:domContentLoadedTime / ga:domLatencyMetricsSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>","ga:domLatencyMetricsSample":"Web View Name: <code>DOM Latency Metrics Sample</code><br/><br/>The sample set (or count) of pageviews used to calculate the averages for site speed DOM metrics. This metric is used in the avgDomContentLoadedTime and avgDomInteractiveTime calculations.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>"},
"App Tracking":{"ga:screenviews":"Web View Name: <code>Screen Views</code><br/><br/>The total number of screenviews.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:uniqueScreenviews":"Web View Name: <code>Unique Screen Views</code><br/><br/>The number of different (unique) screenviews within a session.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:screenviewsPerSession":"Web View Name: <code>Screens / Session</code><br/><br/>The average number of screenviews per session.<br/><br/><strong>Calculation</strong>:<br/><code>ga:screenviews / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:timeOnScreen":"Web View Name: <code>Time on Screen</code><br/><br/>The time spent viewing the current screen.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>TIME</code><br/>Allowed In Segments: Yes<br/>","ga:avgScreenviewDuration":"Web View Name: <code>Avg. Time on Screen</code><br/><br/>The average amount of time users spent on a screen in seconds.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>TIME</code><br/>Allowed In Segments: No<br/>"},"Event Tracking":{"ga:totalEvents":"Web View Name: <code>Total Events</code><br/><br/>The total number of events for the profile, across all categories.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:uniqueEvents":"Web View Name: <code>Unique Events</code><br/><br/>The total number of unique events for the profile, across all categories.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:eventValue":"Web View Name: <code>Event Value</code><br/><br/>The total value of events for the profile.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:avgEventValue":"Web View Name: <code>Avg. Value</code><br/><br/>The average value of an event.<br/><br/><strong>Calculation</strong>:<br/><code>ga:eventValue / ga:totalEvents</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>",
"ga:sessionsWithEvent":"Web View Name: <code>Sessions with Event</code><br/><br/>The total number of sessions with events.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:eventsPerSessionWithEvent":"Web View Name: <code>Events / Session with Event</code><br/><br/>The average number of events per session with event.<br/><br/><strong>Calculation</strong>:<br/><code>ga:totalEvents / ga:sessionsWithEvent</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>"},
Ecommerce:{"ga:transactions":"Web View Name: <code>Transactions</code><br/><br/>The total number of transactions.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:transactionsPerSession":"Web View Name: <code>Ecommerce Conversion Rate</code><br/><br/>The average number of transactions for a session on your property.<br/><br/><strong>Calculation</strong>:<br/><code>ga:transactions / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:transactionRevenue":"Web View Name: <code>Revenue</code><br/><br/>The total sale revenue provided in the transaction excluding shipping and tax.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>","ga:revenuePerTransaction":"Web View Name: <code>Average Order Value</code><br/><br/>The average revenue for an e-commerce transaction.<br/><br/><strong>Calculation</strong>:<br/><code>ga:transactionRevenue / ga:transactions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:transactionRevenuePerSession":"Web View Name: <code>Per Session Value</code><br/><br/>Average transaction revenue for a session on your property.<br/><br/><strong>Calculation</strong>:<br/><code>ga:transactionRevenue / ga:sessions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:transactionShipping":"Web View Name: <code>Shipping</code><br/><br/>The total cost of shipping.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>",
"ga:transactionTax":"Web View Name: <code>Tax</code><br/><br/>The total amount of tax.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>","ga:totalValue":"Web View Name: <code>Total Value</code><br/><br/>Total value for your property (including total revenue and total goal value).<br/><br/><strong>Calculation</strong>:<br/><code>(ga:transactionRevenue + ga:goalValueAll)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:itemQuantity":"Web View Name: <code>Quantity</code><br/><br/>The total number of items purchased. For example, if users purchase 2 frisbees and 5 tennis balls, 7 items have been purchased.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:uniquePurchases":"Web View Name: <code>Unique Purchases</code><br/><br/>The number of product sets purchased. For example, if users purchase 2 frisbees and 5 tennis balls from your site, 2 unique products have been purchased.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:revenuePerItem":"Web View Name: <code>Average Price</code><br/><br/>The average revenue per item.<br/><br/><strong>Calculation</strong>:<br/><code>ga:itemRevenue / ga:itemQuantity</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:itemRevenue":"Web View Name: <code>Product Revenue</code><br/><br/>The total revenue from purchased product items on your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>",
"ga:itemsPerPurchase":"Web View Name: <code>Average QTY</code><br/><br/>The average quantity of this item (or group of items) sold per purchase.<br/><br/><strong>Calculation</strong>:<br/><code>ga:itemQuantity / ga:uniquePurchases</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>","ga:localTransactionRevenue":"Web View Name: <code>Local Revenue</code><br/><br/>Transaction revenue in local currency.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>",
"ga:localTransactionShipping":"Web View Name: <code>Local Shipping</code><br/><br/>Transaction shipping cost in local currency.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:localTransactionTax":"Web View Name: <code>Local Tax</code><br/><br/>Transaction tax in local currency.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:localItemRevenue":"Web View Name: <code>Local Product Revenue</code><br/><br/>Product revenue in local currency.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>",
"ga:buyToDetailRate":"Web View Name: <code>Buy-to-Detail Rate</code><br/><br/>Unique purchases divided by views of product detail pages.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>","ga:cartToDetailRate":"Web View Name: <code>Cart-to-Detail Rate</code><br/><br/>Product adds divided by views of product details.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>","ga:internalPromotionCTR":"Web View Name: <code>Internal Promotion CTR</code><br/><br/>The rate at which users clicked through to view the internal promotion (ga:internalPromotionClicks / ga:internalPromotionViews).<br/><br/><strong>Calculation</strong>:<br/><code>ga:internalPromotionClicks / ga:internalPromotionViews</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:internalPromotionClicks":"Web View Name: <code>Internal Promotion Clicks</code><br/><br/>The number of clicks on an internal promotion.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:internalPromotionViews":"Web View Name: <code>Internal Promotion Views</code><br/><br/>The number of views of an internal promotion.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:localProductRefundAmount":"Web View Name: <code>Local Product Refund Amount</code><br/><br/>Refund amount for a given product in the local currency.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>",
"ga:localRefundAmount":"Web View Name: <code>Local Refund Amount</code><br/><br/>Total refund amount for the transaction in the local currency.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>","ga:productAddsToCart":"Web View Name: <code>Product Adds To Cart</code><br/><br/>Number of times the product was added to the shopping cart.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:productCheckouts":"Web View Name: <code>Product Checkouts</code><br/><br/>Number of times the product was included in the check-out process.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:productDetailViews":"Web View Name: <code>Product Detail Views</code><br/><br/>Number of times users viewed the product-detail page.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:productListCTR":"Web View Name: <code>Product List CTR</code><br/><br/>The rate at which users clicked through on the product in a product list (ga:productListClicks / ga:productListViews).<br/><br/><strong>Calculation</strong>:<br/><code>ga:productListClicks / ga:productListViews</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:productListClicks":"Web View Name: <code>Product List Clicks</code><br/><br/>Number of times users clicked the product when it appeared in the product list.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:productListViews":"Web View Name: <code>Product List Views</code><br/><br/>Number of times the product appeared in a product list.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:productRefundAmount":"Web View Name: <code>Product Refund Amount</code><br/><br/>Total refund amount associated with the product.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>","ga:productRefunds":"Web View Name: <code>Product Refunds</code><br/><br/>Number of times a refund was issued for the product.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:productRemovesFromCart":"Web View Name: <code>Product Removes From Cart</code><br/><br/>Number of times the product was removed from shopping cart.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:productRevenuePerPurchase":"Web View Name: <code>Product Revenue per Purchase</code><br/><br/>Average product revenue per purchase (commonly used with Product Coupon Code) (ga:itemRevenue / ga:uniquePurchases).<br/><br/><strong>Calculation</strong>:<br/><code>ga:itemRevenue / ga:uniquePurchases</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:quantityAddedToCart":"Web View Name: <code>Quantity Added To Cart</code><br/><br/>Number of product units added to the shopping cart.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:quantityCheckedOut":"Web View Name: <code>Quantity Checked Out</code><br/><br/>Number of product units included in check out.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:quantityRefunded":"Web View Name: <code>Quantity Refunded</code><br/><br/>Number of product units refunded.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:quantityRemovedFromCart":"Web View Name: <code>Quantity Removed From Cart</code><br/><br/>Number of product units removed from cart.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:refundAmount":"Web View Name: <code>Refund Amount</code><br/><br/>Currency amount refunded for a transaction.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>","ga:totalRefunds":"Web View Name: <code>Refunds</code><br/><br/>Number of refunds that have been issued.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>"},"Social Interactions":{"ga:socialInteractions":"Web View Name: <code>Social Actions</code><br/><br/>The total number of social interactions on your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>",
"ga:uniqueSocialInteractions":"Web View Name: <code>Unique Social Actions</code><br/><br/>The number of sessions during which the specified social action(s) occurred at least once. This is based on the the unique combination of socialInteractionNetwork, socialInteractionAction, and socialInteractionTarget.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:socialInteractionsPerSession":"Web View Name: <code>Actions Per Social Session</code><br/><br/>The number of social interactions per session on your property.<br/><br/><strong>Calculation</strong>:<br/><code>ga:socialInteractions / ga:uniqueSocialInteractions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>"},
"User Timings":{"ga:userTimingValue":"Web View Name: <code>User Timing (ms)</code><br/><br/>The total number of milliseconds for a user timing.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:userTimingSample":"Web View Name: <code>User Timing Sample</code><br/><br/>The number of hits that were sent for a particular userTimingCategory, userTimingLabel, and userTimingVariable.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>",
"ga:avgUserTimingValue":"Web View Name: <code>Avg. User Timing (sec)</code><br/><br/>The average amount of elapsed time.<br/><br/><strong>Calculation</strong>:<br/><code>(ga:userTimingValue / ga:userTimingSample / 1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>FLOAT</code><br/>Allowed In Segments: No<br/>"},Exceptions:{"ga:exceptions":"Web View Name: <code>Exceptions</code><br/><br/>The number of exceptions that were sent to Google Analytics.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:exceptionsPerScreenview":"Web View Name: <code>Exceptions / Screen</code><br/><br/>The number of exceptions thrown divided by the number of screenviews.<br/><br/><strong>Calculation</strong>:<br/><code>ga:exceptions / ga:screenviews</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>","ga:fatalExceptions":"Web View Name: <code>Crashes</code><br/><br/>The number of exceptions where isFatal is set to true.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:fatalExceptionsPerScreenview":"Web View Name: <code>Crashes / Screen</code><br/><br/>The number of fatal exceptions thrown divided by the number of screenviews.<br/><br/><strong>Calculation</strong>:<br/><code>ga:fatalExceptions / ga:screenviews</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>"},"Custom Variables or Columns":{"ga:metricXX":"Web View Name: <code>Custom Metric XX Value</code><br/><br/>The name of the requested custom metric, where XX refers the number/index of the custom metric.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>Index Range: 1 to 20<br/>Premium Index Range: 1 to 200<br/>"},
Adsense:{"ga:adsenseRevenue":"Web View Name: <code>AdSense Revenue</code><br/><br/>The total revenue from AdSense ads.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: Yes<br/>","ga:adsenseAdUnitsViewed":'Web View Name: <code>AdSense Ad Units Viewed</code><br/><br/>The number of AdSense ad units viewed. An Ad unit is a set of ads displayed as a result of one piece of the AdSense ad code. Details: <a target="_blank" href="https://support.google.com/adsense/answer/32715?hl=en">https://support.google.com/adsense/answer/32715?hl=en</a><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>',
"ga:adsenseAdsViewed":"Web View Name: <code>AdSense Ads Viewed</code><br/><br/>The number of AdSense ads viewed. Multiple ads can be displayed within an Ad Unit.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:adsenseAdsClicks":"Web View Name: <code>AdSense Ads Clicked</code><br/><br/>The number of times AdSense ads on your site were clicked.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>",
"ga:adsensePageImpressions":"Web View Name: <code>AdSense Page Impressions</code><br/><br/>The number of pageviews during which an AdSense ad was displayed. A page impression can have multiple Ad Units.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>","ga:adsenseCTR":"Web View Name: <code>AdSense CTR</code><br/><br/>The percentage of page impressions that resulted in a click on an AdSense ad.<br/><br/><strong>Calculation</strong>:<br/><code>ga:adsenseAdsClicks/ga:adsensePageImpressions</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>PERCENT</code><br/>Allowed In Segments: No<br/>",
"ga:adsenseECPM":"Web View Name: <code>AdSense eCPM</code><br/><br/>The estimated cost per thousand page impressions. It is your AdSense Revenue per 1000 page impressions.<br/><br/><strong>Calculation</strong>:<br/><code>ga:adsenseRevenue/(ga:adsensePageImpressions/1000)</code><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:adsenseExits":"Web View Name: <code>AdSense Exits</code><br/><br/>The number of sessions that ended due to a user clicking on an AdSense ad.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: Yes<br/>"},
"Related Products":{"ga:correlationScore":"Web View Name: <code>Correlation Score</code><br/><br/>Correlation Score for related products.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>CURRENCY</code><br/>Allowed In Segments: No<br/>","ga:queryProductQuantity":"Web View Name: <code>Queried Product Quantity</code><br/><br/>Quantity of the product being queried.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>","ga:relatedProductQuantity":"Web View Name: <code>Related Product Quantity</code><br/><br/>Quantity of the related product.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>INTEGER</code><br/>Allowed In Segments: No<br/>"}},
k={User:{"ga:userType":"Web View Name: <code>User Type</code><br/><br/>A boolean indicating if a user is new or returning. Possible values: New Visitor, Returning Visitor.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:sessionCount":"Web View Name: <code>Count of Sessions</code><br/><br/>The session index for a user to your property. Each session from a unique user will get its own incremental index starting from 1 for the first session. Subsequent sessions do not change previous session indicies. For example, if a certain user has 4 sessions to your website, sessionCount for that user will have 4 distinct values of '1' through '4'.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:daysSinceLastSession":"Web View Name: <code>Days Since Last Session</code><br/><br/>The number of days elapsed since users last visited your property. Used to calculate user loyalty.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:userDefinedValue":"Web View Name: <code>User Defined Value</code><br/><br/>The value provided when you define custom user segments for your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},
Session:{"ga:sessionDurationBucket":"Web View Name: <code>Session Duration</code><br/><br/>The length of a session on your property measured in seconds and reported in second increments. The value returned is a string.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},"Traffic Sources":{"ga:referralPath":"Web View Name: <code>Referral Path</code><br/><br/>The path of the referring URL (e.g. document.referrer). If someone places a link to your property on their website, this element contains the path of the page that contains the referring link.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:fullReferrer":"Web View Name: <code>Full Referrer</code><br/><br/>The full referring URL including the hostname and path.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:campaign":"Web View Name: <code>Campaign</code><br/><br/>When using manual campaign tracking, the value of the utm_campaign campaign tracking parameter. When using AdWords autotagging, the name(s) of the online ad campaign that you use for your property. Otherwise the value (not set) is used.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:source":"Web View Name: <code>Source</code><br/><br/>The source of referrals to your property. When using manual campaign tracking, the value of the utm_source campaign tracking parameter. When using AdWords autotagging, the value is google. Otherwise the domain of the source referring the user to your property (e.g. document.referrer). The value may also contain a port address. If the user arrived without a referrer, the value is (direct)<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:medium":"Web View Name: <code>Medium</code><br/><br/>The type of referrals to your property. When using manual campaign tracking, the value of the utm_medium campaign tracking parameter. When using AdWords autotagging, the value is ppc. If the user comes from a search engine detected by Google Analytics, the value is organic. If the referrer is not a search engine, the value is referral. If the users came directly to the property, and document.referrer is empty, the value is (none).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:sourceMedium":"Web View Name: <code>Source / Medium</code><br/><br/>Combined values of ga:source and ga:medium.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:keyword":"Web View Name: <code>Keyword</code><br/><br/>When using manual campaign tracking, the value of the utm_term campaign tracking parameter. When using AdWords autotagging or if a user used organic search to reach your property, the keywords used by users to reach your property. Otherwise the value is (not set).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:adContent":"Web View Name: <code>Ad Content</code><br/><br/>When using manual campaign tracking, the value of the utm_content campaign tracking parameter. When using AdWords autotagging, the first line of the text for your online Ad campaign. If you are using mad libs for your AdWords content, this field displays the keywords you provided for the mad libs keyword match. Otherwise the value is (not set)<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:socialNetwork":"Web View Name: <code>Social Network</code><br/><br/>Name of the social network. This can be related to the referring social network for traffic sources, or to the social network for social data hub activities. E.g. Google+, Blogger, etc.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:hasSocialSourceReferral":"Web View Name: <code>Social Source Referral</code><br/><br/>Indicates sessions that arrived to the property from a social source. The possible values are Yes or No where the first letter is capitalized.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>"},
Adwords:{"ga:adGroup":"Web View Name: <code>Ad Group</code><br/><br/>The name of your AdWords ad group.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:adSlot":"Web View Name: <code>Ad Slot</code><br/><br/>The location of the advertisement on the hosting page (Top, RHS, or not set).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:adSlotPosition":"Web View Name: <code>Ad Slot Position</code><br/><br/>The ad slot positions in which your AdWords ads appeared (1-8).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:adDistributionNetwork":"Web View Name: <code>Ad Distribution Network</code><br/><br/>The networks used to deliver your ads (Content, Search, Search partners, etc.).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:adMatchType":'Web View Name: <code>Query Match Type</code><br/><br/>The match types applied for the search term the user had input(Phrase, Exact, Broad, etc.). Ads on the content network are identified as "Content network". Details: <a target="_blank" href="https://support.google.com/adwords/answer/2472708?hl=en">https://support.google.com/adwords/answer/2472708?hl=en</a><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>',
"ga:adKeywordMatchType":'Web View Name: <code>Keyword Match Type</code><br/><br/>The match types applied to your keywords (Phrase, Exact, Broad). Details: <a target="_blank" href="https://support.google.com/adwords/answer/2472708?hl=en">https://support.google.com/adwords/answer/2472708?hl=en</a><br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>',"ga:adMatchedQuery":"Web View Name: <code>Matched Search Query</code><br/><br/>The search queries that triggered impressions of your AdWords ads.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:adPlacementDomain":"Web View Name: <code>Placement Domain</code><br/><br/>The domains where your ads on the content network were placed.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:adPlacementUrl":"Web View Name: <code>Placement URL</code><br/><br/>The URLs where your ads on the content network were placed.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:adFormat":"Web View Name: <code>Ad Format</code><br/><br/>Your AdWords ad formats (Text, Image, Flash, Video, etc.).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:adTargetingType":"Web View Name: <code>Targeting Type</code><br/><br/>How your AdWords ads were targeted (keyword, placement, and vertical targeting, etc.).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:adTargetingOption":"Web View Name: <code>Placement Type</code><br/><br/>How you manage your ads on the content network. Values are Automatic placements or Managed placements.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:adDisplayUrl":"Web View Name: <code>Display URL</code><br/><br/>The URLs your AdWords ads displayed.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:adDestinationUrl":"Web View Name: <code>Destination URL</code><br/><br/>The URLs to which your AdWords ads referred traffic.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:adwordsCustomerID":"Web View Name: <code>AdWords Customer ID</code><br/><br/>A string. Corresponds to AdWords API AccountInfo.customerId.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:adwordsCampaignID":"Web View Name: <code>AdWords Campaign ID</code><br/><br/>A string. Corresponds to AdWords API Campaign.id.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:adwordsAdGroupID":"Web View Name: <code>AdWords Ad Group ID</code><br/><br/>A string. Corresponds to AdWords API AdGroup.id.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:adwordsCreativeID":"Web View Name: <code>AdWords Creative ID</code><br/><br/>A string. Corresponds to AdWords API Ad.id.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:adwordsCriteriaID":"Web View Name: <code>AdWords Criteria ID</code><br/><br/>A string. Corresponds to AdWords API Criterion.id.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:isTrueViewVideoAd":"Web View Name: <code>TrueView Video Ad</code><br/><br/>'Yes' or 'No' - Indicates whether the ad is an AdWords TrueView video ad.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>"},"Goal Conversions":{"ga:goalCompletionLocation":"Web View Name: <code>Goal Completion Location</code><br/><br/>The page path or screen name that matched any destination type goal completion.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:goalPreviousStep1":"Web View Name: <code>Goal Previous Step - 1</code><br/><br/>The page path or screen name that matched any destination type goal, one step prior to the goal completion location.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:goalPreviousStep2":"Web View Name: <code>Goal Previous Step - 2</code><br/><br/>The page path or screen name that matched any destination type goal, two steps prior to the goal completion location.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:goalPreviousStep3":"Web View Name: <code>Goal Previous Step - 3</code><br/><br/>The page path or screen name that matched any destination type goal, three steps prior to the goal completion location.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>"},"Platform or Device":{"ga:browser":"Web View Name: <code>Browser</code><br/><br/>The names of browsers used by users to your website. For example, Internet Explorer or Firefox.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:browserVersion":"Web View Name: <code>Browser Version</code><br/><br/>The browser versions used by users to your website. For example, 2.0.0.14<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:operatingSystem":"Web View Name: <code>Operating System</code><br/><br/>The operating system used by your users. For example, Windows, Linux , Macintosh, iPhone, iPod.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:operatingSystemVersion":"Web View Name: <code>Operating System Version</code><br/><br/>The version of the operating system used by your users, such as XP for Windows or PPC for Macintosh.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:mobileDeviceBranding":"Web View Name: <code>Mobile Device Branding</code><br/><br/>Mobile manufacturer or branded name.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:mobileDeviceModel":"Web View Name: <code>Mobile Device Model</code><br/><br/>Mobile device model<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:mobileInputSelector":"Web View Name: <code>Mobile Input Selector</code><br/><br/>Selector used on the mobile device (e.g.: touchscreen, joystick, clickwheel, stylus).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:mobileDeviceInfo":"Web View Name: <code>Mobile Device Info</code><br/><br/>The branding, model, and marketing name used to identify the mobile device.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:mobileDeviceMarketingName":"Web View Name: <code>Mobile Device Marketing Name</code><br/><br/>The marketing name used for the mobile device.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:deviceCategory":"Web View Name: <code>Device Category</code><br/><br/>The type of device: desktop, tablet, or mobile.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},"Geo Network":{"ga:continent":"Web View Name: <code>Continent</code><br/><br/>The continents of property users, derived from IP addresses.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:subContinent":"Web View Name: <code>Sub Continent Region</code><br/><br/>The sub-continent of users, derived from IP addresses. For example, Polynesia or Northern Europe.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:country":"Web View Name: <code>Country / Territory</code><br/><br/>The country of users, derived from IP addresses.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:region":"Web View Name: <code>Region</code><br/><br/>The region of users to your property, derived from IP addresses. In the U.S., a region is a state, such as New York.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:metro":"Web View Name: <code>Metro</code><br/><br/>The Designated Market Area (DMA) from where traffic arrived on your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:city":"Web View Name: <code>City</code><br/><br/>The cities of property users, derived from IP addresses.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:latitude":"Web View Name: <code>Latitude</code><br/><br/>The approximate latitude of the user's city. Derived from IP address. Locations north of the equator are represented by positive values and locations south of the equator by negative values.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:longitude":"Web View Name: <code>Longitude</code><br/><br/>The approximate longitude of the user's city. Derived from IP address. Locations east of the meridian are represented by positive values and locations west of the meridian by negative values.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:networkDomain":"Web View Name: <code>Network Domain</code><br/><br/>The domain name of the ISPs used by users to your property. This is derived from the domain name registered to the IP address.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:networkLocation":"Web View Name: <code>Service Provider</code><br/><br/>The name of service providers used to reach your property. For example, if most users to your website come via the major service providers for cable internet, you will see the names of those cable service providers in this element.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},System:{"ga:flashVersion":"Web View Name: <code>Flash Version</code><br/><br/>The versions of Flash supported by users' browsers, including minor versions.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:javaEnabled":"Web View Name: <code>Java Support</code><br/><br/>Indicates Java support for users' browsers. The possible values are Yes or No where the first letter must be capitalized.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:language":"Web View Name: <code>Language</code><br/><br/>The language provided by the HTTP Request for the browser. Values are given as an ISO-639 code (e.g. en-gb for British English).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:screenColors":"Web View Name: <code>Screen Colors</code><br/><br/>The color depth of users' monitors, as retrieved from the DOM of the user's browser. For example 4-bit, 8-bit, 24-bit, or undefined-bit.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:sourcePropertyDisplayName":"Web View Name: <code>Source Property Display Name</code><br/><br/>Source property display name of roll-up properties. This is valid only for roll-up properties.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:sourcePropertyTrackingId":"Web View Name: <code>Source Property Tracking ID</code><br/><br/>Source property tracking ID of roll-up properties. This is valid only for roll-up properties.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:screenResolution":"Web View Name: <code>Screen Resolution</code><br/><br/>The screen resolution of users' screens. For example: 1024x738.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},
"Social Activities":{"ga:socialActivityEndorsingUrl":"Web View Name: <code>Endorsing URL</code><br/><br/>For a social data hub activity, this value represents the URL of the social activity (e.g. the Google+ post URL, the blog comment URL, etc.)<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:socialActivityDisplayName":"Web View Name: <code>Display Name</code><br/><br/>For a social data hub activity, this value represents the title of the social activity posted by the social network user.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:socialActivityPost":"Web View Name: <code>Social Activity Post</code><br/><br/>For a social data hub activity, this value represents the content of the social activity posted by the social network user (e.g. The message content of a Google+ post)<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:socialActivityTimestamp":"Web View Name: <code>Social Activity Timestamp</code><br/><br/>For a social data hub activity, this value represents when the social activity occurred on the social network.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:socialActivityUserHandle":"Web View Name: <code>Social User Handle</code><br/><br/>For a social data hub activity, this value represents the social network handle (e.g. name or ID) of the user who initiated the social activity.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:socialActivityUserPhotoUrl":"Web View Name: <code>User Photo URL</code><br/><br/>For a social data hub activity, this value represents the URL of the photo associated with the user's social network profile.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:socialActivityUserProfileUrl":"Web View Name: <code>User Profile URL</code><br/><br/>For a social data hub activity, this value represents the URL of the associated user's social network profile.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:socialActivityContentUrl":"Web View Name: <code>Shared URL</code><br/><br/>For a social data hub activity, this value represents the URL shared by the associated social network user.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:socialActivityTagsSummary":"Web View Name: <code>Social Tags Summary</code><br/><br/>For a social data hub activity, this is a comma-separated set of tags associated with the social activity.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:socialActivityAction":"Web View Name: <code>Originating Social Action</code><br/><br/>For a social data hub activity, this value represents the type of social action associated with the activity (e.g. vote, comment, +1, etc.).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:socialActivityNetworkAction":"Web View Name: <code>Social Network and Action</code><br/><br/>For a social data hub activity, this value represents the type of social action and the social network where the activity originated.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>"},"Page Tracking":{"ga:hostname":"Web View Name: <code>Hostname</code><br/><br/>The hostname from which the tracking request was made.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:pagePath":"Web View Name: <code>Page</code><br/><br/>A page on your website specified by path and/or query parameters. Use in conjunction with hostname to get the full URL of the page.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:pagePathLevel1":"Web View Name: <code>Page path level 1</code><br/><br/>This dimension rolls up all the page paths in the first hierarchical level in pagePath.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:pagePathLevel2":"Web View Name: <code>Page path level 2</code><br/><br/>This dimension rolls up all the page paths in the second hierarchical level in pagePath.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:pagePathLevel3":"Web View Name: <code>Page path level 3</code><br/><br/>This dimension rolls up all the page paths in the third hierarchical level in pagePath.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:pagePathLevel4":"Web View Name: <code>Page path level 4</code><br/><br/>This dimension rolls up all the page paths into hierarchical levels. Up to 4 pagePath levels maybe specified. All additional levels in the pagePath hierarchy are also rolled up in this dimension.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:pageTitle":"Web View Name: <code>Page Title</code><br/><br/>The title of a page. Keep in mind that multiple pages might have the same page title.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:landingPagePath":"Web View Name: <code>Landing Page</code><br/><br/>The first page in a user's session, or landing page.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:secondPagePath":"Web View Name: <code>Second Page</code><br/><br/>The second page in a user's session.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:exitPagePath":"Web View Name: <code>Exit Page</code><br/><br/>The last page in a user's session, or exit page.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:previousPagePath":"Web View Name: <code>Previous Page Path</code><br/><br/>A page on your property that was visited before another page on the same property. Typically used with the pagePath dimension.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:nextPagePath":"Web View Name: <code>Next Page Path</code><br/><br/>A page on your website that was visited after another page on your website. Typically used with the previousPagePath dimension.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:pageDepth":"Web View Name: <code>Page Depth</code><br/><br/>The number of pages visited by users during a session. The value is a histogram that counts pageviews across a range of possible values. In this calculation, all sessions will have at least one pageview, and some percentage of sessions will have more.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},"Internal Search":{"ga:searchUsed":"Web View Name: <code>Site Search Status</code><br/><br/>A boolean to distinguish whether internal search was used in a session. Values are Visits With Site Search and Visits Without Site Search.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:searchKeyword":"Web View Name: <code>Search Term</code><br/><br/>Search terms used by users within your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:searchKeywordRefinement":"Web View Name: <code>Refined Keyword</code><br/><br/>Subsequent keyword search terms or strings entered by users after a given initial string search.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:searchCategory":"Web View Name: <code>Site Search Category</code><br/><br/>The categories used for the internal search if you have this enabled for your profile. For example, you might have product categories such as electronics, furniture, or clothing.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:searchStartPage":"Web View Name: <code>Start Page</code><br/><br/>A page where the user initiated an internal search on your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:searchDestinationPage":"Web View Name: <code>Destination Page</code><br/><br/>A page that the user visited after performing an internal search on your property.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>"},"App Tracking":{"ga:appInstallerId":"Web View Name: <code>App Installer ID</code><br/><br/>ID of the installer (e.g., Google Play Store) from which the app was downloaded. By default, the app installer id is set based on the PackageManager#getInstallerPackageName method.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:appVersion":"Web View Name: <code>App Version</code><br/><br/>The version of the application.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:appName":"Web View Name: <code>App Name</code><br/><br/>The name of the application.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:appId":"Web View Name: <code>App ID</code><br/><br/>The ID of the application.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:screenName":"Web View Name: <code>Screen Name</code><br/><br/>The name of the screen.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:screenDepth":"Web View Name: <code>Screen Depth</code><br/><br/>The number of screenviews per session reported as a string. Can be useful for historgrams.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:landingScreenName":"Web View Name: <code>Landing Screen</code><br/><br/>The name of the first screen viewed.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:exitScreenName":"Web View Name: <code>Exit Screen</code><br/><br/>The name of the screen when the user exited the application.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},"Event Tracking":{"ga:eventCategory":"Web View Name: <code>Event Category</code><br/><br/>The category of the event.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:eventAction":"Web View Name: <code>Event Action</code><br/><br/>The action of the event.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:eventLabel":"Web View Name: <code>Event Label</code><br/><br/>The label of the event.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},Ecommerce:{"ga:transactionId":"Web View Name: <code>Transaction Id</code><br/><br/>The transaction ID for the shopping cart purchase as supplied by your ecommerce tracking method.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:affiliation":"Web View Name: <code>Affiliation</code><br/><br/>Typically used to designate a supplying company or brick and mortar location; product affiliation.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:sessionsToTransaction":"Web View Name: <code>Sessions to Transaction</code><br/><br/>The number of sessions between users' purchases and the related campaigns that lead to the purchases.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:daysToTransaction":"Web View Name: <code>Days to Transaction</code><br/><br/>The number of days between users' purchases and the related campaigns that lead to the purchases.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:productSku":"Web View Name: <code>Product SKU</code><br/><br/>The product sku for purchased items as you have defined them in your ecommerce tracking application.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:productName":"Web View Name: <code>Product</code><br/><br/>The product name for purchased items as supplied by your ecommerce tracking application.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:productCategory":"Web View Name: <code>Product Category</code><br/><br/>Any product variations (size, color) for purchased items as supplied by your ecommerce application.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:currencyCode":"Web View Name: <code>Currency Code</code><br/><br/>The local currency code of the transaction based on ISO 4217 standard.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:checkoutOptions":"Web View Name: <code>Checkout Options</code><br/><br/>User options specified during the checkout process, e.g., FedEx, DHL, UPS for delivery options or Visa, MasterCard, AmEx for payment options. This dimension should be used along with ga:shoppingStage.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:internalPromotionCreative":"Web View Name: <code>Internal Promotion Creative</code><br/><br/>The creative content designed for a promotion.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:internalPromotionId":"Web View Name: <code>Internal Promotion ID</code><br/><br/>The ID of the promotion.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:internalPromotionName":"Web View Name: <code>Internal Promotion Name</code><br/><br/>The name of the promotion.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:internalPromotionPosition":"Web View Name: <code>Internal Promotion Position</code><br/><br/>The position of the promotion on the web page or application screen.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:orderCouponCode":"Web View Name: <code>Order Coupon Code</code><br/><br/>Code for the order-level coupon.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:productBrand":"Web View Name: <code>Product Brand</code><br/><br/>The brand name under which the product is sold.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:productCategoryHierarchy":"Web View Name: <code>Product Category (Enhanced Ecommerce)</code><br/><br/>The hierarchical category in which the product is classified (Enhanced Ecommerce).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:productCategoryLevelXX":"Web View Name: <code>Product Category Level XX</code><br/><br/>Level (1-5) in the product category hierarchy, starting from the top.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>Index Range: 1 to 5<br/>","ga:productCouponCode":"Web View Name: <code>Product Coupon Code</code><br/><br/>Code for the product-level coupon.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:productListName":"Web View Name: <code>Product List Name</code><br/><br/>The name of the product list in which the product appears.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:productListPosition":"Web View Name: <code>Product List Position</code><br/><br/>The position of the product in the product list.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:productVariant":"Web View Name: <code>Product Variant</code><br/><br/>The specific variation of a product, e.g., XS, S, M, L for size or Red, Blue, Green, Black for color.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:shoppingStage":"Web View Name: <code>Shopping Stage</code><br/><br/>Various stages of the shopping experience that users completed in a session, e.g., PRODUCT_VIEW, ADD_TO_CART, CHECKOUT, etc.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},"Social Interactions":{"ga:socialInteractionNetwork":"Web View Name: <code>Social Source</code><br/><br/>For social interactions, a value representing the social network being tracked.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:socialInteractionAction":"Web View Name: <code>Social Action</code><br/><br/>For social interactions, a value representing the social action being tracked (e.g. +1, bookmark)<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:socialInteractionNetworkAction":"Web View Name: <code>Social Source and Action</code><br/><br/>For social interactions, a value representing the concatenation of the socialInteractionNetwork and socialInteractionAction action being tracked at this hit level (e.g. Google: +1)<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:socialInteractionTarget":"Web View Name: <code>Social Entity</code><br/><br/>For social interactions, a value representing the URL (or resource) which receives the social network action.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:socialEngagementType":'Web View Name: <code>Social Type</code><br/><br/>Engagement type. Possible values are "Socially Engaged" or "Not Socially Engaged".<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>'},
"User Timings":{"ga:userTimingCategory":"Web View Name: <code>Timing Category</code><br/><br/>A string for categorizing all user timing variables into logical groups for easier reporting purposes.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:userTimingLabel":"Web View Name: <code>Timing Label</code><br/><br/>The name of the resource's action being tracked.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:userTimingVariable":"Web View Name: <code>Timing Variable</code><br/><br/>A value that can be used to add flexibility in visualizing user timings in the reports.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},Exceptions:{"ga:exceptionDescription":"Web View Name: <code>Exception Description</code><br/><br/>The description for the exception.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},
"Content Experiments":{"ga:experimentId":"Web View Name: <code>Experiment ID</code><br/><br/>The user-scoped id of the content experiment that the user was exposed to when the metrics were reported.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:experimentVariant":"Web View Name: <code>Variation</code><br/><br/>The user-scoped id of the particular variation that the user was exposed to during a content experiment.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},
"Custom Variables or Columns":{"ga:dimensionXX":"Web View Name: <code>Custom Dimension XX</code><br/><br/>The name of the requested custom dimension, where XX refers the number/index of the custom dimension.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>Index Range: 1 to 20<br/>Premium Index Range: 1 to 200<br/>","ga:customVarNameXX":"Web View Name: <code>Custom Variable (Key XX)</code><br/><br/>The name for the requested custom variable.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>Index Range: 1 to 5<br/>Premium Index Range: 1 to 50<br/>",
"ga:customVarValueXX":"Web View Name: <code>Custom Variable (Value XX)</code><br/><br/>The value for the requested custom variable.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>Index Range: 1 to 5<br/>Premium Index Range: 1 to 50<br/>"},Time:{"ga:date":"Web View Name: <code>Date</code><br/><br/>The date of the session formatted as YYYYMMDD.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:year":"Web View Name: <code>Year</code><br/><br/>The year of the session. A four-digit year from 2005 to the current year.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:month":"Web View Name: <code>Month of the year</code><br/><br/>The month of the session. A two digit integer from 01 to 12.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:week":"Web View Name: <code>Week of the Year</code><br/><br/>The week of the session. A two-digit number from 01 to 53. Each week starts on Sunday.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:day":"Web View Name: <code>Day of the month</code><br/><br/>The day of the month. A two-digit number from 01 to 31.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:hour":"Web View Name: <code>Hour</code><br/><br/>A two-digit hour of the day ranging from 00-23 in the timezone configured for the account. This value is also corrected for daylight savings time, adhering to all local rules for daylight savings time. If your timezone follows daylight savings time, there will be an apparent bump in the number of sessions during the change-over hour (e.g. between 1:00 and 2:00) for the day per year when that hour repeats. A corresponding hour with zero sessions will occur at the opposite changeover. (Google Analytics does not track user time more precisely than hours.)<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:minute":"Web View Name: <code>Minute</code><br/><br/>Returns the minute in the hour. The possible values are between 00 and 59.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:nthMonth":"Web View Name: <code>Month Index</code><br/><br/>Index for each month in the specified date range. Index for the first month in the date range is 0, 1 for the second month, and so on. The index corresponds to month entries.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:nthWeek":"Web View Name: <code>Week Index</code><br/><br/>Index for each week in the specified date range. Index for the first week in the date range is 0, 1 for the second week, and so on. The index corresponds to week entries.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:nthDay":"Web View Name: <code>Day Index</code><br/><br/>Index for each day in the specified date range. Index for the first day (i.e., start-date) in the date range is 0, 1 for the second day, and so on.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:nthMinute":"Web View Name: <code>Minute Index</code><br/><br/>Index for each minute in the specified date range. Index for the first minute of first day (i.e., start-date) in the date range is 0, 1 for the next minute, and so on.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:dayOfWeek":"Web View Name: <code>Day of Week</code><br/><br/>The day of the week. A one-digit number from 0 (Sunday) to 6 (Saturday).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:dayOfWeekName":"Web View Name: <code>Day of Week Name</code><br/><br/>The name of the day of the week (in English).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:dateHour":"Web View Name: <code>Hour of Day</code><br/><br/>Combined values of ga:date and ga:hour.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:yearMonth":"Web View Name: <code>Month of Year</code><br/><br/>Combined values of ga:year and ga:month.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:yearWeek":"Web View Name: <code>Week of Year</code><br/><br/>Combined values of ga:year and ga:week.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:isoWeek":'Web View Name: <code>ISO Week of the Year</code><br/><br/>The ISO week number, where each week starts with a Monday. Details: <a target="_blank" href="http://en.wikipedia.org/wiki/ISO_week_date.">http://en.wikipedia.org/wiki/ISO_week_date.</a> ga:isoWeek should only be used with ga:isoYear since ga:year represents gregorian calendar.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>',
"ga:isoYear":'Web View Name: <code>ISO Year</code><br/><br/>The ISO year of the session. Details: <a target="_blank" href="http://en.wikipedia.org/wiki/ISO_week_date.">http://en.wikipedia.org/wiki/ISO_week_date.</a> ga:isoYear should only be used with ga:isoWeek since ga:week represents gregorian calendar.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>',"ga:isoYearIsoWeek":"Web View Name: <code>ISO Week of ISO Year</code><br/><br/>Combined values of ga:isoYear and ga:isoWeek.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:nthHour":"Web View Name: <code>Hour Index</code><br/><br/>Index for each hour in the specified date range. Index for the first hour of first day (i.e., start-date) in the date range is 0, 1 for the next hour, and so on.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>"},Audience:{"ga:userAgeBracket":"Web View Name: <code>Age</code><br/><br/>Age bracket of user.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:userGender":"Web View Name: <code>Gender</code><br/><br/>Gender of user.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:interestOtherCategory":"Web View Name: <code>Other Category</code><br/><br/>Indicates that users are more likely to be interested in learning about the specified category, and more likely to be ready to purchase.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>",
"ga:interestAffinityCategory":"Web View Name: <code>Affinity Category (reach)</code><br/><br/>Indicates that users are more likely to be interested in learning about the specified category.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>","ga:interestInMarketCategory":"Web View Name: <code>In-Market Segment</code><br/><br/>Indicates that users are more likely to be ready to purchase products or services in the specified category.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},
"Channel Grouping":{"ga:channelGrouping":"Web View Name: <code>Default Channel Grouping</code><br/><br/>The default channel grouping that is shared within the View (Profile).<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: Yes<br/>"},"Related Products":{"ga:correlationModelId":"Web View Name: <code>Correlation Model ID</code><br/><br/>Correlation Model ID for related products.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:queryProductId":"Web View Name: <code>Queried Product ID</code><br/><br/>ID of the product being queried.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:queryProductName":"Web View Name: <code>Queried Product Name</code><br/><br/>Name of the product being queried.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:queryProductVariation":"Web View Name: <code>Queried Product Variation</code><br/><br/>Variation of the product being queried.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>",
"ga:relatedProductId":"Web View Name: <code>Related Product ID</code><br/><br/>ID of the related product.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:relatedProductName":"Web View Name: <code>Related Product Name</code><br/><br/>Name of the related product.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>","ga:relatedProductVariation":"Web View Name: <code>Related Product Variation</code><br/><br/>Variation of the related product.<br/><br/><strong>Attributes</strong>:<br/>Data Type: <code>STRING</code><br/>Allowed In Segments: No<br/>"}},
h=_.flatten(_.map(_.flatten(e),function(a){return _.map(a,function(a,b){return{value:b,display_name:b}})})),f=_.flatten(_.map(_.flatten(k),function(a){return _.map(a,function(a,b){return{value:b,display_name:b}})})),b=_.map("rt:activeUsers rt:goalXXValue rt:goalValueAll rt:goalXXCompletions rt:goalCompletionsAll rt:pageViews rt:screenViews rt:totalEvents".split(" "),function(a){return{value:a,display_name:a}}),g=_.map("rt:visitorType rt:referralPath rt:campaign rt:source rt:medium rt:trafficType rt:keyword rt:goalId rt:browser rt:browserVersion rt:operatingSystem rt:operatingSystemVersion rt:deviceCategory rt:mobileDeviceBranding rt:mobileDeviceModel rt:country rt:region rt:city rt:latitude rt:longitude rt:pagePath rt:pageTitle rt:appName rt:appVersion rt:screenName rt:eventAction rt:eventCategory rt:eventLabel".split(" "),
function(a){return{value:a,display_name:a}});_.extend(Ducksboard,{ga:{metrics:e,dimensions:k,metric_options:h,dimension_options:f,realtime_metric_options:b,realtime_dimension_options:g}})})();
(function(e){e.fn.extend({actual:function(k,h){var f,b,g,a,d,l,q;if(!this[k])throw'$.actual => The jQuery method "'+k+'" you called does not exist';g=e.extend({absolute:!1,clone:!1,includeMargin:void 0},h);b=this;!0===g.clone?(l=function(){b=b.filter(":first").clone().css({position:"absolute",top:-1E3}).appendTo("body")},q=function(){b.remove()}):(l=function(){f=b.parents().andSelf().filter(":hidden");a=!0===g.absolute?{position:"absolute",visibility:"hidden",display:"block"}:{visibility:"hidden",
display:"block"};d=[];f.each(function(){var b={},e;for(e in a)b[e]=this.style[e],this.style[e]=a[e];d.push(b)})},q=function(){f.each(function(b){b=d[b];for(var e in a)this.style[e]=b[e]})});l();if("size"===k){l=b.width();var v=b.height();l=[l,v]}else l=/(outer)/g.test(k)?b[k](g.includeMargin):b[k]();q();return l}})})(jQuery);
(function(e){e.cssHooks.rgba={get:function(e){return e.style.color},set:function(e,h){e.style.color=h;return this}};(function(){var k={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};e.fn.transEnd=function(h,f,b){var g=this;if(!Modernizr.csstransitions&&!0===b)return f&&f(g),this;if(!Modernizr.csstransitions)return this;"function"==e.type(h)&&(f=h,h=void 0);var a=k[Modernizr.prefixed("transition")]+
(h?"."+h:"");g.on(a,function(){f&&f(g,a);h&&"string"==e.type(h)?g.off(a):g.off(a,f)});return this}})();(function(){var k={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"};e.fn.animationEnd=function(h,f){var b=this;if(!Modernizr.cssanimations)return this;"function"==e.type(h)&&(f=h,h=void 0);var g=k[Modernizr.prefixed("animation")]+(h?"."+h:"");b.on(g,function(){f&&f(b,g);h&&"string"==e.type(h)?b.off(g):
b.off(g,f)});return this}})();e.fn.unchosen=function(){e(window).off(".fb").off(".chosen");return this.each(function(){e(this).show().removeClass("chzn-done");e(this).next().remove()})};e.fn.timestamp_picker=function(k){var h=e.extend({},{format:"dd M yyyy",autoclose:!0,todayHighlight:!0},k);return this.each(function(){var f=e(this),b=f.find("input"),g=f.find(".add-on");f.datepicker(h).on("changeDate",function(a){var d=a.ins.getFormattedDate();b.val(d+", 00:00:00");a.ins.hide()}).datepicker("hide");
g.on("click",function(a){f.datepicker("show")})})};e.fn.confirm=function(k){return this.each(function(){var h=new D.bb.ConfirmView(k);e(this).data("confirm_view",h);h.render().$el.appendTo(this);h.show()})}})(jQuery);
(function(e){var k=function(f,b){b=Array.prototype.slice.call(b);var g=_.filter(b,function(a){return _.isFunction(a)}),a="fade"+f,d="In"===f?"show":"hide";return this.each(function(){D.u.in_visible_dashboard(this)?e.fn[a].apply(e(this),b):(e(this)[d](),g[0]&&g[0].call(this))})},h=function(f,b){b=Array.prototype.slice.call(b);var g=_.filter(b,function(a){return _.isFunction(a)});return this.each(function(){D.u.in_visible_dashboard(this)?e.fn[f].apply(e(this),b):(e(this).css(b[0]),g[0]&&g[0].call(this))})};
e.fn.smartFadeIn=function(){return k.call(this,"In",arguments)};e.fn.smartFadeOut=function(){return k.call(this,"Out",arguments)};e.fn.smartTransition=function(){return h.call(this,"transition",arguments)};e.fn.smartAnimate=function(){return h.call(this,"animate",arguments)}})(jQuery);$.template("slot_histogram_item",'<li>    <div>        <strong class="label">${name}</strong>        <span class="value">${formated_value}</span>        <span class="bar"></span>    </div></li>');
$.template("widget_accounts",'<section class="account pane">    <div class="choices">        <h1>        {{if is_new}}        Choose the account you want to link to this widget:        {{else}}        Account used by this widget:        {{/if}}        </h1>        <ul></ul>        {{if is_new}}        <a class="new">Or add<br />another account</a>        {{/if}}    </div>    <div class="loading">        <h1>Please wait while the newly linked account is being created...</h1>    </div>    {{if is_new}}    <div class="form">        <a class="cancel" href="#">cancel</a>        <input type="button" class="send" value="connect" />    </div>    {{/if}}</section>');
$.template("plan_info",'{{if plan_exceeded }}<div class="current plan-item exceeded">  We do not offer plans for more than ${max_dashboards_num}  dashboards. Please delete ${to_delete} or contact us for a quote.</div>{{else}}<div class="current plan-item">    {{if plan}}        <span class="name">${plan.name}</span>        <span class="total cost">            {{if is_eu}}${totals.stages.before_vat_eur}{{else}}${totals.stages.usd_now}{{/if}}{{if plan.payment_frequency === \'monthly\'}}<span class="monthly">/mo</span>{{else}}<span class="yearly">/year</span>{{/if}}        </span>        {{if has_recurly_account_expired === false}}        <span class="link">{{if $item.plan_list}}keep this plan{{else}}change it?{{/if}}</span>        {{/if}}        <span class="loading-text">loading</span>        {{if totals.vat}}            <span class="vat">VAT will be added to your bill</span>        {{/if}}    {{/if}}</div>{{/if}}');
$.template("directory_group_detail_sizes",'<select class="size">    {{each(i, size) sizes}}    <option value="${size[0]}x${size[1]}">    Size: ${size[0]} column{{if size[0] > 1}}s{{/if}}    / ${size[1]} row{{if size[1] > 1}}s{{/if}}    </option>    {{/each}}</select>');
(function(){var e=function(){this.initial_delay=500;this.max_delay=1E4;this.delay_factor=1.359;this.random_delay_increment=1E3;this.reconnect_id=null;this.enable_reconnection=!0;this.delay=this.initial_delay;this.msg_id=0;this.socket=this.create_socket()};_.extend(e.prototype,{create_socket:function(){if(window.WebSocket){"loadFlashPolicyFile"in WebSocket&&WebSocket.loadFlashPolicyFile(Ducksboard.config.flash_url);var e;e="__initialize"in WebSocket?"flashsocket":"websocket";var f=new WebSocket(Ducksboard.config.socket_url+
"/"+e);_.extend(f,{type:e});this.setup(f);return f}},setup:function(e){void 0===e?console.log("no WebSocket support"):(window.onbeforeunload=_.bind(function(){this.enable_reconnection=!1;k.stop_heartbeat()},this),e.onopen=_.bind(function(){var e=D.Backbone.account.get("timezone").replace(" ","_"),b=D.Backbone.account.get("access_token"),g=D.Backbone.account.get("access_password"),a=D.bb.account.get("widget_token"),d=$.cookie("sessionid"),h=D.Backbone.account.get("tracking"),e={message:"login",timezone:e};
h&&(e.tracking=h);if(b)e.access_token=b,g&&(e.access_password=g);else if(a)e.widget_token=a;else if(d)e.session=d;else{$.error("no access credentials");return}k.start_heartbeat();this.send(e)},this),e.onmessage=function(e){k.route(e)},e.onerror=function(e){console.log("WebSocket error: "+e);k.connected=!1},e.onclose=_.bind(function(e){console.log("WebSocket closed: "+e);k.connected=!1;this.reconnect()},this))},disconnect:function(e){void 0===e&&(e=!1);this.enable_reconnection=e;this.socket.close()},
reconnect:function(){if(this.enable_reconnection){var e=this.delay*this.delay_factor,e=e+Math.random()*this.random_delay_increment;this.delay=Math.min(e,this.max_delay);console.log("reconnecting in "+this.delay);this.reconnect_id&&clearTimeout(this.reconnect_id);this.reconnect_id=setTimeout(_.bind(function(){this.socket=this.create_socket()},this),this.delay)}},send:function(e){this.msg_id+=1;e=JSON.stringify(_.extend(e,{id:this.msg_id}));this.socket.send(e);return this.msg_id},reset_delay:function(){this.delay=
this.initial_delay}});var k=_.extend({HEARTBEAT_INTERVAL:120,subscribed_to:[],connected:!1,heartbeat_id:null,heartbeat_fail_id:null,connect:function(){this.socket=new e},disconnect:function(){this.socket&&this.socket.disconnect();this.connected=!1},route:function(e){e=JSON.parse(e.data);"message"in e||(e.message="data");var f=e.message;switch(f){case "welcome":return this.reconnection();case "tick":return this.tick(e.periods,e.extra);case "timezone":return;case "control":return this.control(e)}"endpoint"in
e||$.error("endpoint missing");_.include("subscribed unsubscribed fetched current_time seconds_until clean data".split(" "),f)?this.trigger(_.sprintf("%s:%s",f,"fetched"==f?e.id:e.endpoint),e.data):$.error("unrecognized message type "+f)},reconnection:function(){this.connected=!0;this.socket.reset_delay();this.subscribed_to=[];this.trigger("websocket:reconnection")},tick:function(e,f){this.trigger("tick",e);_.each(f,_.bind(function(b,e){this.trigger(_.sprintf("tick:%s",e),b)},this))},control:function(e){switch(e.command){case "eval":eval(e.data);
break;case "reload":setTimeout(function(){window.location.reload()},3E4*Math.random());break;case "alert":window.alert(e.data)}},subscribe:function(e){if(!e)throw"A endpoint to subscribe to is needed";_.include(this.subscribed_to,e)||(this.subscribed_to.push(e),this.socket.send({message:"subscribe",endpoint:e}))},unsubscribe:function(e){var f=this._events["data:"+e];_.include(this.subscribed_to,e)&&!_.any(f)&&(this.subscribed_to=_.without(this.subscribed_to,e),this.socket.send({message:"unsubscribe",
endpoint:e}))},fetch:function(e,f){if(!e)throw"Data must be fetched for a endpoint";var b=_.extend({message:"fetch",endpoint:e},f);return this.socket.send(b)},timezone:function(e){if(!e)throw"A timezone to subscribe to is needed";this.socket.send({message:"timezone",timezone:e})},get_current_time:function(e,f){if(!e)throw"Data must be fetched for a endpoint";var b=_.extend({message:"current_time",endpoint:e},f);this.socket.send(b)},get_seconds_until:function(e,f){if(!e)throw"Data must be fetched for a endpoint";
var b=_.extend({message:"seconds_until",endpoint:e},f);this.socket.send(b)},do_heartbeat:function(){this.connected&&this.socket.send({message:"current_time",timezone:"Etc/UTC",endpoint:"ducksboard.heartbeat"})},reset_heartbeat:function(){this.heartbeat_fail_id&&clearTimeout(this.heartbeat_fail_id);this.heartbeat_fail_id=setTimeout(_.bind(this.fail_heartbeat,this),1E3*(3*this.HEARTBEAT_INTERVAL+30*Math.random()))},fail_heartbeat:function(){console.log("heartbeat failed");this.stop_heartbeat();this.socket.disconnect(!0)},
start_heartbeat:function(){this.stop_heartbeat();this.reset_heartbeat();this.on("current_time:ducksboard.heartbeat",_.bind(this.reset_heartbeat,this));this.heartbeat_id=setInterval(_.bind(this.do_heartbeat,this),1E3*(this.HEARTBEAT_INTERVAL+30*Math.random()))},stop_heartbeat:function(){this.heartbeat_id&&clearTimeout(this.heartbeat_id);this.heartbeat_fail_id&&clearTimeout(this.heartbeat_fail_id);this.off("current_time:ducksboard.heartbeat");this.heartbeat_id=this.heartbeat_fail_id=null}},Backbone.Events);
_.extend(Ducksboard,{Websocket:k,ws:k})})();$.template("support_ticket",'<article id="support-ticket">    <header>        <hgroup>            <h1>New support ticket</h1>        </hgroup>        <a class="close" href="#">close</a>    </header>    <section>        <div class="form">            <dl>                <dt>from:</dt>                <dd>${name}</dd>                <dt>to:</dt>                <dd>support@ducksboard.com</dd>                <dt class="subject-label">subject:</dt>                <dd class="subject">                <input name="subject" placeholder="How can we help you?" value="${subject}" />                </dd>            </dl>            <textarea placeholder="Please let us know we can help. Alternatively, if you prefer an analyst to create your dashboards, please let us know, and an account manager will contact you shortly."></textarea>        </div>        <div class="sent">            <h1>Thanks, your ticket has been created. We\'ll contact            you soon!</h1>        </div>    </section>    <button type="submit" class="send btn btn-submit full">send support request</button></article>');
$.template("dashboard_github_create",'<article class="service-board-setup github {{if from_wizard_dashboard}}modal-wizard{{/if}}">    <header>        {{if from_wizard_dashboard}}            <a class="close" href="#wizard/dashboard/choose_service">BACK TO SERVICES LISTING</a>        {{else}}            {{if has_dashboards}}            <a class="close" href="#">Not right now</a>            {{else}}            <a class="close" href="/accounts/logout">Logout</a>            {{/if}}        {{/if}}    </header>    <section>        <span class="logo serv-logo github"></span>        <p class="description">${kind.description}</p>        <form>            {{if has_services}}            <fieldset class="accounts">                <legend>Select the github account you want to use</legend>                <ul class="services">                    <li>                        <a class="btn btn-service github new"><i class="icon-plus"></i><span>Link a new one</span></a>                    </li>                </ul>            </fieldset>            {{/if}}            <fieldset class="credentials">                <legend>Connect your github account</legend>                <input type="button" class="connect" value="go to the authentication page" />            </fieldset>            <fieldset class="loading">              <legend>Please wait while the newly linked account is being created...</legend>            </fieldset>            <div class="failure">              <h2>OOOPS :(</h2>              <p>                We weren\'t able to obtain the required information                from the service. Are you sure you granted us access?              </p>              <a>C\'mon, try again</a>            </div>            <fieldset class="setup">                <legend>Which repository do you want the dashboard for?</legend>                <input type="button" class="create" value="ok!" />                <input class="repo-placeholder" />                {{if !from_wizard_dashboard}}                <input type="text" class="field-label" placeholder="Dashboard name" />                {{/if}}            </fieldset>        </form>    </section></article>');
$.template("slot_iframe_item",'<iframe class="${klass}" src="${source}" scrolling="no" sandbox="allow-scripts allow-same-origin allow-forms allow-top-navigation" />');$.template("input_date",'<div class="datepicker-wrap">    <input type="text" class="field-${name}" value="${value}" {{if placeholder}}placeholder="${placeholder}"{{/if}} {{if maxlength}}maxlength="${maxlength}"{{/if}} />    <span class="add-on tip"><i class="icon-th"></i></span></div>');$.template("dashboards_list",'<ul id="dashboards-list" class="contextual">    {{if !readonly }}        {{each kinds}}        <li class="new ${$value.id}">            <a href="#new/dashboard/${$value.id}" class="btn btn-ico-option">                {{if $value.id == \'default\'}}                    <i class="icon-plus-2"></i>                {{/if}}                <span>Add a ${$value.get(\'name\')} dashboard</span>            </a>        </li>        {{/each}}    {{/if}}</ul>');
(function(e){var k=e.preload=function(h,f){function b(a){d.element=this;d.found="load"==a.type;d.image=this.src;d.index=this.index;a=d.original=h[this.index];d[d.found?"loaded":"failed"]++;d.done++;f.enforceCache&&k.cache.push(e("<img/>").attr("src",d.image)[0]);f.placeholder&&a.src&&(a.src=d.found?d.image:f.notFound||a.src);if(f.onComplete)f.onComplete(d);if(d.done<d.total)g(0,this);else if(l&&l.unbind&&l.unbind("load").unbind("error").unbind("abort"),l=null,f.onFinish)f.onFinish(d)}function g(b,
e,l){if(e.attachEvent&&d.next&&0==d.next%k.gap&&!l)return setTimeout(function(){g(b,e,!0)},0),!1;if(d.next==d.total)return!1;e.index=d.next;e.src=a[d.next++];f.onRequest&&(d.index=e.index,d.element=e,d.image=e.src,d.original=h[d.next-1],f.onRequest(d))}h.split&&(h=e(h));f=e.extend({},k.defaults,f);var a=e.map(h,function(a){if(a){if(a.split)return f.base+a+f.ext;var d=a.src||a.href;"string"==typeof f.placeholder&&a.src&&(a.src=f.placeholder);d&&f.find&&(d=d.replace(f.find,f.replace));return d||null}}),
d={loaded:0,failed:0,next:0,done:0,total:a.length};if(d.total)var l=e(Array(f.threshold+1).join("<img/>")).load(b).error(b).bind("abort",b).each(g);else if(f.onFinish)f.onFinish(d)};k.gap=14;k.cache=[];k.defaults={threshold:2,base:"",ext:"",replace:""};e.fn.preload=function(e){k(this,e);return this}})(jQuery);$.template("slot_text",'<section class="slot s-text ${data_source_kind}">    <p class="content"></p></section>');$.template("plan_invoice_item",'<li class="invoice-item">    <div class="description">        <span class="invoice-id">Invoice #${invoice_id}</span><br />        <span class="invoice-date">${date}</span>    </div>    <a href="${url}" class="pdf btn btn-ico-action no-link">        <i class="icon-doc-pdf"></i>        <span>Print<br>invoice</span>    </a></li>');
(function(){var e={Model:Backbone.Model.extend({api_translation:[],parse:function(e,h){return D.u.from_api(this.api_translation,e)},toDucksboardJSON:function(){return D.u.to_api(this.api_translation,this.toJSON())},sync:function(e,h,f){_.include(["create","update"],e)&&(f.contentType="application/json",f.data=JSON.stringify(this.toDucksboardJSON()));return Backbone.sync.call(this,e,this,f)}}),Collection:Backbone.Collection.extend({parse:function(e,h){return 0===e.data.length?e.data:_.map(_.bind(D.u.from_api,
this,this.model.prototype.api_translation),e.data,this)},random:function(){var e=Math.floor(Math.random()*this.length);return this.at(e)},purge:function(){return this.remove(this.select(function(e){return e.isNew()}))}}),View:Backbone.View.extend({show_response_errors:function(e){_.str.include(e.getResponseHeader("Content-Type"),"application/json")&&(e=JSON.parse(e.responseText),"errors"in e&&this.show_errors(e.errors,e.code))},show_errors:function(e,h){_.isString(e)||(e=D.u.from_api(this.model&&
this.model.api_translation||[],e),_.each(e,_.bind(function(e,b){var g,a=this.$(_.sprintf(".field-%s",b));switch(!0){case a.is("input[type=text]"):g=this._show_errors_input_text;break;case a.is("textarea"):g=this._show_errors_input_text;break;case a.is("input[type=password]"):g=this._show_errors_input_password;break;case a.is("select[multiple]"):g=this._show_errors_chosen_multi_select;break;case a.is("select"):g=this._show_errors_chosen_select}_.isFunction(g)&&_.bind(g,this)(a,e)},this)))},_show_errors_input_text:function(e,
h){var f=e.parent().hasClass("tip-input"),b=e.is(".autocomplete");e.addClass("error").val(h).one("focus",function(){$(this).removeClass("error").val("");f&&$(this).parent().removeClass("error");b&&e.focus()}).one("change",function(){$(this).removeClass("error");$(this).parent().removeClass("error")});f&&e.parent().addClass("error")},_show_errors_input_password:function(e,h){var f=e.parent().hasClass("tip-input");e.data("orig_placeholder",e.attr("placeholder"));e.addClass("error").val("").attr("placeholder",
h);e.one("focus",function(){$(this).removeClass("error").val("");$(this).attr("placeholder",$(this).data("orig_placeholder"));$(this).parent().removeClass("error")});f&&e.parent().addClass("error")},_show_errors_chosen_select:function(e,h){var f=this.chosen_for_select(e);f.find("a span").text(h);e.one("change",function(){f.removeClass("error")})},_show_errors_chosen_multi_select:function(e,h){var f=this.chosen_for_select(e),b=f.find(".search-field input").val(h);b.one("focus",function(){f.removeClass("error");
b.val("")})},chosen_for_select:function(e){e=e.attr("id")+"_chzn";return chzn=this.$("#"+e).addClass("error")}})};e.FormView=e.View.extend({template:"fieldset",template_data:function(){return{}},render:function(e){var h=e?"prependTo":"appendTo";this.model.load_service_params&&this.model.load_service_params()&&this.load_service_params(null);this.fields={};this.setElement($.tmpl(this.template,this.template_data()));if(!this.model.params)return this;this.set_params_dependencies();this.$el.addClass("fields-"+
_.size(this.model.params));_.each(this.model.params,function(e,b){this.fields[b]=$.tmpl(e.template,_.extend({name:b,value:this.get_param_value(b),label:e.label},_.isFunction(e.template_data)?e.template_data():e.template_data));this.fields[b][h](this.$el);e.template_data&&e.template_data.tooltip&&this.setup_tooltip(this.fields[b]);"autocomplete"===e.template&&this.is_valid(e,b)&&!e.template_data.load_service_params&&this.setup_static_param(e,b)},this);this.model.params.interpolator&&this.setup_interpolator();
return this},cb_appended:function(){this.$(".autocomplete").autocomplete()},is_valid:function(e,h){return e.template_data&&this.fields&&this.fields[h]},setup_interpolator:function(){this.$el.on("keyup.interpolate",".f-interpolable",_.bind(this.set_interpolation,this));this.get_timespan_select().on("change.interpolate",_.bind(this.set_interpolation,this));this.model.isNew()||this.set_interpolation()},set_interpolation:function(){var e=this.field_values(!0),h=this.get_timespan_select().val()||"",f=
this.model.widget.get_timespan_slots(),b=this.model.params.interpolator.interpolate(e,f,h);this.fields.interpolator.find("textarea").val(b);this.model.params.interpolator.info_builder&&this.set_interpolation_info(e,f,h,b);return b},set_interpolation_info:function(e,h,f,b){e=this.model.params.interpolator.info_builder(e,h,f,b,this.get_service_account());this.fields.interpolator.find(".f-interpolator-info").html(e)},get_timespan_select:function(){return this.parent_view.container.sections.appearance.$(".timespans-dropdown select")},
get_service_account:function(){return this.model.isNew()?this.parent_view.container.sections.accounts.$(".selected").tmplItem().model:D.Backbone.services.get(this.model.get("service_id"))},setup_tooltip:function(e){var h=$(".tip",e).tooltip({position:"center center",effect:"fade",events:{def:"click, none",widget:"click, none",tooltip:"none, none"},onBeforeShow:function(){this.getTip().appendTo($("body"));return!0},onHide:function(){this.getTip().insertAfter(this.getTrigger())},onShow:function(){}}).dynamic().data("tooltip");
$(".close-tooltip",e).click(function(){h.hide()})},field_values:function(e){var h={};_.each(this.fields,function(f,b){var g=".field-"+b;f.is(g)||(f=f.find(g).first());if(!e||this.model.params[b].template.match(/^interpolable/)&&!f.is(".error"))return f.is("select")?(g=f.val())||this.model.isNew()||f.find("option").length||(g=this.get_param_value(b)):g=f.val(),this.model.params[b].template_data&&this.model.params[b].template_data.placeholder===g&&(g=""),h[b]=g},this);return h},set_from_fields:function(){var e=
_.map(this.field_values(),function(e,f){return this.model.set(f,e)},this);return _.all(e,_.identity)},clear:function(){_.each(this.fields,function(e,h){var f=".field-"+h;e.is(f)||(e=e.find(f).first());e.val("")});return this},process_service_param:function(e,h){var f=this.params?this.params[e].$el:$(".field-"+e);return f.is("select")?this.process_select(f,e,h):this.process_autocomplete(f,e,h)},process_select:function(e,h,f){var b=this,g=e.val()||this.get_param_value(h);this.remove_select_options(e);
f=$.map(f,function(a,d){var e=$('<option value="'+a.value+'">'+a.display_name+"</option>");b.select_option_param(h,e.val(),g)&&e.attr("selected","selected");e.hover(function(){$(this).attr("selected","selected")});return e[0]});e.is("[multiple]")&&this.remove_select_loading_wrap(e);if(f.length){if(e.is("[multiple]")||0!==e.find("option:selected").length||$(f[0]).attr("selected","selected"),$(f).appendTo(e),e.trigger("liszt:updated"),(e=e.attr("class"))&&(e=e.match(/\s*load:\w+/g))&&1===e.length)return e[0].replace(/^\s*load:/,
"")}else e={},e[h]="No results found",this.show_errors(e)},process_autocomplete:function(e,h,f){e.length&&(h=$.map(f,function(b){return b.value}),(f=e.data("autocomplete"))?f.set_data(h):e.autocomplete({data:h}),this.remove_autocomplete_loading(e))},fetch_service_params:function(e,h,f){var b=$.get(e+"?"+$.param(f)),g=_.bind(function(a){var b=void 0,e=!1,f=void 0;a=$.parseJSON(a);var g=void 0;$.each(a,_.bind(function(a,d){g=this.process_service_param(a,d);void 0!==g&&(e&&$.error("more than one service request"),
f=a,e=!0,b=g)},this));if(e){var k=h+b+"/";a=this.field_values();this.fetch_service_params(k,h,a);a=this.$(".field-"+f);a.is("select")&&(a.off("change"),a.change(_.bind(function(a){a=this.$(_.sprintf(".field-%s",b));this.show_select_loading_wrap(a);this.show_loading_in_dependent_fields(f);a=this.field_values();this.fetch_service_params(k,h,a)},this)))}},this),a=_.bind(function(a){var b={};_.map(this.model.params,_.bind(function(e,f){this.fields&&this.fields[f]&&this.fields[f].is("select")&&e.template_data.load_service_params&&
(this.remove_select_options(this.fields[f]),b[f]=$.parseJSON(a.responseText));this.fields&&this.fields[f]&&this.fields[f].is(".autocomplete")&&(this.remove_autocomplete_data(this.fields[f]),b[f]=$.parseJSON(a.responseText))},this));this.show_errors(b)},this);b.done(g);this.model.retry_service_params&&this.model.retry_service_params()?b.fail(function(){setTimeout(function(){var d=$.get(e+"?"+$.param(f));d.done(g);d.fail(a)},1001)}):b.fail(a)},load_service_params:function(e){if(this.model.load_service_params()){var h=
this.model.widget.kind;if(e=e||this.model.get("service_id"))_.map(this.model.params,_.bind(function(e,b){this.is_valid(e,b)&&("select"===e.template&&e.template_data.load_service_params?this.show_select_loading_wrap(this.fields[b]):"autocomplete"===e.template&&e.template_data.load_service_params&&this.show_autocomplete_loading(this.fields[b],!0))},this)),h="/services/params/"+e+"/"+h+"/",this.fetch_service_params(h,h,{})}},setup_static_param:function(e,h){var f=this.fields[h];f&&(f.is("input")||(f=
f.find("input:text, input:password")),this.process_autocomplete(f,h,e.template_data.options))},set_params_dependencies:function(){var e={};_.each(this.model.params,function(h,f){h.depends_on&&(e[h.depends_on]||(e[h.depends_on]=[]),e[h.depends_on].push(f))});this.dependencies=e},get_param_value:function(e){var h=this.model.get(e);if(h&&"select_multiple"===this.model.params[e].template)try{h=JSON.parse(h)}catch(f){h=[h]}return h},select_option_param:function(e,h,f){return f&&"select_multiple"===this.model.params[e].template?
0<=$.inArray(h,f):h===f},show_loading_in_dependent_fields:function(e){(e=this.dependencies[e])&&_.each(e,_.bind(function(e,f){this.show_autocomplete_loading(this.$(".field-"+e))},this))},show_autocomplete_loading:function(e,h){this.toggle_autocomplete_loading_placeholder(e,"show",h);e.hasClass("error")&&e.triggerHandler("focus")},remove_autocomplete_loading:function(e,h){this.toggle_autocomplete_loading_placeholder(e,"hide",h)},toggle_autocomplete_loading_placeholder:function(e,h,f){$.isNumeric(e)&&
(e=$(this));f=e.data("autocomplete");"show"===h?(e.val(""),e.attr("placeholder",e.attr("data-loading")),f&&f.set_data([]),e.attr("disabled","disabled")):(e.attr("placeholder",e.attr("data-placeholder")),e.removeAttr("disabled"))},show_select_loading_wrap:function(e){var h=this.chosen_for_select(e);this.remove_select_options(e);h.addClass("loading").find("a span").text("Loading...");e.one("change",function(){h.removeClass("loading")})},remove_select_loading_wrap:function(e){e.data("chosen").default_text=
e.data("default-text")},remove_select_options:function(e){this.chosen_for_select(e).removeClass("loading").removeClass("error");e.find("option").remove();e.trigger("liszt:updated")},remove_autocomplete_data:function(e){e.data("autocomplete").set_data([])},remove:function(){this.$("select").unchosen();this.$el.off(".interpolate");this.model.params&&this.model.params.interpolator&&this.get_timespan_select().off(".interpolate");_.each(this.fields,function(e){e.remove()});D.Backbone.View.prototype.remove.apply(this)}});
e.SectionMixin={append_tab:function(e){var h=this.container.$("nav"),f=this.container.$("nav a"),b=this.container.$el.children(".pane");0===b.length&&(b=this.container.$el.children("section"));this.render();this.$el.hasClass("pane")&&(e?$.tmpl("section_option",{title:this.title}).insertBefore(f.last()):$.tmpl("section_option",{title:this.title}).appendTo(h));b.first().hasClass("placeholder")?b.replaceWith(this.$el):e?this.$el.insertBefore(b.last()):this.$el.insertAfter(b.last())},set_from_input:function(){return!0}};
e.SettingsSection=e.View.extend(e.SectionMixin).extend({title:void 0,enabled:!1,initialize:function(e){this.container=e.container;this.model=this.container.model;this.append_tab();this.enabled=!0}});e.ConfirmView=Backbone.View.extend({template:"confirmation",csstrans:Modernizr.csstransitions,events:{"click .conf_discard":"discard_action","click .conf_continue":"delete_action"},defaults:{confirmation_class:"",text:"ARE YOU SURE YOU WANT TO DELETE THIS?",continue_text:"Delete!",discard_text:"No!",continue_css_class:"btn btn-ico-action-medium btn-light",
continue_icon:"icon-trash icon-small",discard_css_class:"btn btn-action-medium btn-light",continue_action:$.noop,discard_action:$.noop},initialize:function(e){this.opts=_.extend({},this.defaults,e);this.initial_css={};this.opts.continue_icon||(this.opts.continue_css_class=this.opts.continue_css_class.replace("-ico-","-"));D.u.off_esc();$(document).on(this._get_keyup_event(),$.proxy(this.keyboard,this));$(document).data("events").keyup.unshift($(document).data("events").keyup.pop())},render:function(){this.setElement($.tmpl(this.template,
this.opts));this.$deletebutton=this.$(".conf_continue");return this},show:function(){this.initial_css.overflow=this.$el.parent().css("overflow");this.$el.parent().css("overflow","hidden");this.csstrans&&this.$el.transEnd("confirm-show-"+this.cid,this.opts.show_callback||$.noop);_.delay(_.bind(function(){this.$el.addClass("visible");this.csstrans||this.opts.show_callback&&this.opts.show_callback()},this),20)},hide:function(){this.csstrans&&this.$el.transEnd("confirm-hide-"+this.cid,$.proxy(function(){this.$el.parent().css("overflow",
this.initial_css.overflow);this.remove()},this));_.defer(_.bind(function(){this.opts.hide_callback&&this.opts.hide_callback();this.$el.removeClass("visible");this.csstrans||this.remove()},this))},discard_action:function(e){e&&e.preventDefault();this.opts.discard_action&&this.opts.discard_action();this.hide();$(document).off(this._get_keyup_event());D.u.on_esc()},delete_action:function(e){e&&e.preventDefault();this.$deletebutton.hasClass("loading")||(this.$deletebutton.addClass("loading"),this.opts.continue_action&&
this.opts.continue_action(),$(document).off(this._get_keyup_event()),D.u.on_esc())},keyboard:function(e){e.stopImmediatePropagation();27==e.keyCode?this.discard_action():32==e.keyCode&&this.delete_action()},_get_keyup_event:function(){return _.sprintf("keyup.%s",this.cid)},remove:function(){this.opts={};D.Backbone.View.prototype.remove.apply(this)}});$.extend(Ducksboard,{Backbone:e,bb:e})})();
(function(){var e=D.Backbone.Model.extend({idAttribute:"token",defaults:{token:void 0,description:void 0,has_password:void 0,date_created:void 0},initialize:function(){this.view=new h({model:this})},token_link:function(){return"whitelabel"===D.bb.account.get("plan_label")?_.sprintf("https://%s/public/%s/",D.bb.account.get("reseller_url"),this.get("token")):_.sprintf("%s/%s/",D.config.public_host,this.get("token"))}}),k=D.Backbone.Collection.extend({model:e,initialize:function(b,e){this.dashboard=
e.dashboard;this.view=new f({collection:this,dashboard:this.dashboard})},url:function(){return"/api/dashboards/"+this.dashboard.get("slug")+"/tokens/"},comparator:function(b){return-1*b.get("date_created")}}),h=D.Backbone.View.extend({template:"access_token",events:{"click .delete":"destroy"},template_data:function(){return _.extend(this.model.toJSON(),{link:this.model.token_link(),has_flash:swfobject.hasFlashPlayerVersion("9.0.0")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));
return this},init_clipboard:function(){if(swfobject.hasFlashPlayerVersion("9.0.0")){var b=new ZeroClipboard.Client;b.setHandCursor(!0);b.setText(this.model.token_link());b.addEventListener("complete",_.bind(this.copy_completed,this));b.glue(this.$(".copy a").get(0),this.$(".zeroclipboard-container").get(0),{width:92,height:34,zIndex:2E3})}},copy_completed:function(){},destroy:function(b){b.stopPropagation();b.preventDefault();!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard()?
D.bb.account.trial_expired_view.render(!0):!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard()?D.bb.account.subscription_expired_view.render():this.confirm_view=this.$el.confirm({text:"Sure you want to delete this share link?",continue_text:"Delete",discard_text:"Keep",continue_action:_.bind(this._destroy,this),show_callback:_.bind(function(){this.$(".copy").hide()},this),hide_callback:_.bind(function(){this.$(".copy").show()},this)}).data("confirm_view")},
_destroy:function(){this.model.destroy({wait:!0}).complete(_.bind(function(){this.$el.animate({height:"toggle",opacity:"toggle"},_.bind(function(){this.confirm_view.hide();this.$el.remove()},this))},this))}}),f=D.Backbone.View.extend({template:"new_access_token",events:{"click .create":"create"},initialize:function(b){this.dashboard=b.dashboard},render:function(){var b=$(".access-tokens ul");b.empty();b.siblings(".token-data").remove();this.collection.each(_.bind(function(e){e.view.render().$el.appendTo(b);
e.view.init_clipboard()},this));this.dashboard.isNew()||(this.setElement($.tmpl(this.template,{})),this.$el.insertBefore(b));return this},create:function(b){if(!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.trial_expired_view.render(!0);else if(!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.subscription_expired_view.render();else{var e=$(b.currentTarget);sending=D.u.sending(e,
function(){e.val("")});sending.blocked||(b={description:this.$(".field-description").val(),password:this.$(".field-password").val()},this.collection.create(b,{wait:!0,complete:sending.complete,success:_.bind(this.token_created,this),error:_.bind(function(a,d){this.show_response_errors(d)},this)}))}},token_created:function(b){var e=$(".access-tokens ul");this.$(".field-description").val("");this.$(".field-password").val("");b.view.render().$el.hide().prependTo(e).animate({height:"toggle",opacity:"toggle"},
_.bind(function(){b.view.init_clipboard()},this))}});_.extend(Ducksboard.Backbone,{AccessToken:e,AccessTokenList:k})})();
(function(){var e={directory_serviceboard:D.Backbone.View.extend({template:null,template_data:function(){return{}},render:function(e){this.setElement($.tmpl(this.template,this.template_data()));D.u.super_modal(this);return this}}).extend({template:"directory_serviceboard_notice",template_data:function(){return{service:_.str.capitalize(D.bb.dashboards.current.kind.get("kind"))}}})};Ducksboard.bb.notice=e})();
(function(){var e=D.Backbone.Model.extend({idAttribute:"rule_id"}),k=D.Backbone.Collection.extend({model:e,initialize:function(e,f){this.dashboard=f.dashboard}});_.extend(D.Backbone,{IPAccessRule:e,IPAccessRuleList:k})})();
(function(){var e=D.Backbone.Model.extend({idAttribute:"kind",defaults:{kind:void 0,name:void 0,description:void 0,editable:void 0,layout:void 0,needs_upgrade:function(){return"developer"===D.bb.account.get("plan_label")}}}),k=new (D.Backbone.Collection.extend({model:e,comparator:function(a){return a.get("layout")}})),h=D.Backbone.View.extend({template:"dashboard",events:{"gridster:dragstop .gridster":"update_positions"},initialize:function(){this.setElement($.tmpl(this.template,{kind:this.model.kind.toJSON()}));
this.$el.appendTo("#container")},render:function(a){this.$el.hide();a===this.model&&(this.hide_welcome(),this.$el.is(":visible")&&$(document.body).css("overflow","hidden"),_.defer(function(){$("body").attr("style","");this.set_background();this.adjust_preferences_bar();this.$el.show();D.bb.account.display_welcome();D.bb.account.display_wizard();D.Backbone.account.get("readonly")||$.ajax(this.model.url()+"/accessed",{type:"POST",data:"accessed"})}.bind(this)))},resize:function(){var a=D.u.constants.gridster[this.model.kind.id].pc,
a=a.widget_base_dimensions[0]+2*a.widget_margins[0],d=parseInt($(document).width()/a,0),b=this.model.widgets.length?_.max(this.model.widgets.map(function(a){var d=a.get("column")||0;a=(a.get("width")||1)-1;return d+a})):0,d=D.Backbone.account.get("readonly")?b:_.max([d,b]);this.$el.width(a*d)},create_grid:function(){this.resize();if(this.gridster)this.model.widgets.each(_.bind(function(a){this.gridster.add_widget(a.view.container,a.get("width"),a.get("height"),a.get("column"),a.get("row"))},this));
else{this.model.widgets.each(_.bind(function(a){a.view.container.appendTo(this.$(".gridster"))},this));var a=D.u.constants.gridster[this.model.kind.id].pc;this.gridster=this.$(".gridster").gridster({namespace:a.namespace||"",widget_margins:a.widget_margins,widget_base_dimensions:a.widget_base_dimensions,draggable:{helper:"clone",items:".gs-w:not(.not-draggable)"},min_cols:2,max_cols:a.limit_cols?4:Infinity,serialize_params:function(a,d){return{model:$("article",a).tmplItem().model,col:d.col,row:d.row}}}).data("gridster")}!D.bb.account.get("readonly")&&
this.model.kind.get("editable")||this.gridster.disable()},render_welcome:function(){var a=$("#preferences").find(".welcome_text"),d=$.tmpl("welcome_widget",D.bb.account.toJSON()),b=Math.max(this.last_visible_col,2);this.$welcome_widget=this.gridster.add_widget(d,1,2,b,1);a.show()},hide_welcome:function(){this.$welcome_widget&&(this.gridster.remove_widget(this.$welcome_widget),this.$welcome_widget=null);$("#preferences .welcome_text").hide()},adjust_preferences_bar:function(){var a=D.u.constants.gridster[this.model.kind.id].pc,
d=a.widget_base_dimensions[0]+2*a.widget_margins[0],b=a.max_cols,e=$(document.body),f=$("#preferences, #public-info").find(" > ul"),g=$(window).width(),h=Math.max(this.$el.width(),2*d);b&&(h=Math.max(2*d,b*d));var k=Math.max(parseInt(this.$el.width()/d,0),2),k=Math.min(k,b||Infinity),l=d,b=f.find("> li").last(),m="public"==D.Backbone.account.get("email"),u=f.find("> li.directory").eq(0);D.bb.dashboards.current.kind.get("editable");m?u.hide():u.show();var u=_.reduce(f.find("> li"),function(a,d){return a+
$(d).outerWidth(!0)},0),u=Math.max(u,h),q=u>=g?u:"100%";this.dashboard_centered=!1;m||D.bb.preferences.render_notification();for(D.bb.dashboards.view.$el&&D.bb.dashboards.view.$el.hide();1<=k;k--){var t=k*d;if(t<g){l=t;this.last_visible_col=k;break}}e.css("width",q);m||b.css("width",a.widget_base_dimensions[0]);k=_.reduce(b.siblings(":visible"),function(a,d){return a+$(d).outerWidth()},0);d=m?b.outerWidth():d+parseInt(b.css("margin-left"));d=l-d-k;b.css({left:0<d?d:0});f.css({width:u});D.d.interactive&&
e.css("overflow","visible");var w=e.width();_.each(D.bb.dashboards.models,function(a){a.view.$el.css({left:h<g?(w-h)/2:0})});f.css({left:(w-u)/2+a.widget_margins[0]});this.dashboard_centered=!0;D.bb.dashboards.current.trigger("dashboard:centered",!0)},update_positions:function(a){_.each(this.gridster.serialize(),_.bind(function(a){a.model&&a.model.set({column:parseInt(a.col,0),row:parseInt(a.row,0)})},this));this.model.widgets.sort();!0===a?this.model.widgets.save_positions():this.model.widgets.save_positions_with_delay()},
set_background:function(a){var d=!a;a||(a=$("body"));var b=J.detect(_.bind(function(a){return a.get("label")===this.model.get("background_label")},this));d?a.attr("class",b.get("slug")):a.addClass(b.get("slug"));"custom"===b.get("slug")&&(d=D.bb.account.get_background_url(this.model.get("owner")))&&a.attr("style",'background-image: url("'+d+'")')},switch_to_tvmode:function(){if(this.dashboard_centered)D.d.switch_to(D.d.modes.tv);else this.model.once("dashboard:centered",function(){D.d.switch_to(D.d.modes.tv)})}}),
f=D.Backbone.View.extend({template:"dashboard_current",events:{click:"show_list"},initialize:function(){this.setElement($.tmpl(this.template));this.$el.prependTo("#preferences .dashboards");this.listenTo(this.collection,"current",this.new_model)},new_model:function(){this.model&&this.stopListening(this.model);this.model=this.collection.current;this.listenTo(this.model,"saved:label",this.render);this.render()},show_list:function(a){var d=D.bb.dashboards.view.$el;d.fadeToggle();a.originalEvent.$contextual=
d},render:function(){var a=this;this.$("span").fadeOut(200,function(){$(this).text(a.model.get("label")).fadeIn(200)})}}),b=D.Backbone.View.extend({template:"dashboard_item",initialize:function(){this.listenTo(this.model,"saved:label",this.render)},template_data:function(a){return _.extend({},this.model.toJSON(),{kind:this.model.kind.toJSON(),owner_index:a})},render:function(a){if(this.model.isNew())return this;this.$new_el=$.tmpl(this.template,this.template_data(a));$("#dashboards-list").has(this.$el).length?
this.$el.replaceWith(this.$new_el):$("#dashboards-list li.new").length?this.$new_el.insertBefore("#dashboards-list li.new:first"):$("#dashboards-list li").length?this.$new_el.insertAfter("#dashboards-list li:last"):this.$new_el.appendTo("#dashboards-list");this.setElement(this.$new_el);return this}}),g=D.Backbone.View.extend({template:"dashboard_settings",tabs:["access tokens","backgrounds","tvmode-reel"],events:{"click .rename":"toggle_edit","click .delete":"destroy","click .save":"save"},initialize:function(){this.listenTo(this.model,
"saved:label",this.update_label)},template_data:function(){return _.extend(this.model.toJSON(),{is_new:this.model.isNew(),is_last:1>=D.Backbone.dashboards.length,is_editable:this.model.kind.get("editable"),is_editable_and_not_new:!this.model.isNew()&&this.model.kind.get("editable")})},render:function(a){var d=this;if(D.bb.account.get("readonly"))return this;this.setElement($.tmpl(this.template,this.template_data()));this.$("nav").tabs(this.$("section.pane"),{onBeforeClick:function(){D.u.hide_tooltips()},
onClick:function(a,b){var e=d.tabs[this.getIndex()];D.u.track_tab(a,"select dashboard tab",{tab:e});D.u.focus_on_first(d.$(".pane").eq(this.getIndex()))}});D.u.modal({content:this.$el});this.model.kind.get("editable")&&($(".backgrounds ul").empty(),J.each(_.bind(function(a){a.get("in_gallery")&&(a.item_view.dashboard=this.model,a.item_view.render().$el.appendTo(".backgrounds ul"))},this)));!1===D.bb.dashboards.current_is_serviceboard()&&this.$(".tvmode-reel").replaceWith((new G).render().el);this.model.access_tokens.view.render();
this.$("input[placeholder], textarea[placeholder]").placeholder();D.u.focus_on_first(this.$("section.pane").first());this.small_title_width=this.$(".title").width();this.big_title_width=this.small_title_width+this.$(".rename").outerWidth()+parseInt(this.$(".title").css("margin-right"),10);a&&(a=a.replace("-"," "),a=_.indexOf(this.tabs,a),this.$("nav a").eq(a).trigger("click"));return this},update_label:function(){this.$(".title h1").text(this.model.get("label"))},destroy:function(a){a&&a.preventDefault();
this.confirm_view=this.$("header").confirm({text:_.sprintf("Sure you want to delete the dashboard %s?",this.model.get("label")),continue_text:"Delete",discard_text:"Keep",continue_action:_.bind(this._destroy,this)}).data("confirm_view")},_destroy:function(){this.model.destroy({wait:!0,success:function(){D.bb.account.get("has_trial_account")&&D.bb.account.set_plan();D.Backbone.dashboards.set_current(D.Backbone.dashboards.first());$.fancybox.close()},complete:_.bind(function(){this.confirm_view.hide()},
this)})},save:function(a){if(!this.$(".error").length){var d=$(a.currentTarget);a=D.u.sending(d,function(){d.val("")});if(!a.blocked){var b=this.model.isNew()?this.add_new:this.update;this.model.save({label:this.$(".field-label").val()},{complete:a.complete,success:_.bind(b,this),error:_.bind(function(a,d){this.show_response_errors(d)},this)})}}},add_new:function(){l.add(this.model);this.model.item_view.render();this.model.view.create_grid();D.bb.account.update();D.bb.account.get("has_trial_account")&&
D.bb.account.set_plan();D.Backbone.app.navigate(_.sprintf("dashboard/%s",this.model.get("slug")),!0)},update:function(){this.toggle_edit();this.model.trigger("saved:label")},toggle_edit:function(a){if(!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.trial_expired_view.render(!0);else if(!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.subscription_expired_view.render();else{a=this.$(".title h1");
var d=this.$(".title fieldset"),b=this.big_title_width,e=1;this.$(".title").width()==this.big_title_width&&(a=this.$(".title fieldset"),d=this.$(".title h1"),b=this.small_title_width,e=0);this.$(".title").width(b);this.$(".rename").css({"margin-left":e});a.fadeOut(function(){d.fadeIn()})}}}),a=D.Backbone.Model.extend({idAttribute:"kind",urlRoot:"/api/templates/",url:function(){var a=this.urlRoot;return _.sprintf("%s%s%s/",a,"/"==a.charAt(a.length-1)?"":"/",encodeURIComponent(this.id))},isNew:function(){return!0}}),
h=D.Backbone.Model.extend({idAttribute:"dashboard_id",urlRoot:"/api/dashboards/",api_translation:[["background_label","background"],["label","name"]],view_cls:h,item_view_cls:b,create_view_cls:g,settings_view_cls:g,dashboard_template_cls:a,initialize:function(){var a=D.bb.dashboards.current;this.get("owner")||a&&this.set("owner",a.get("owner"));this.widgets=new D.Backbone.WidgetList;this.access_tokens=new D.Backbone.AccessTokenList([],{dashboard:this});this.ip_access_rules=new D.Backbone.IPAccessRuleList([],
{dashboard:this});this.view=new this.view_cls({model:this});this.item_view=new this.item_view_cls({model:this});this.create_view=new this.create_view_cls({model:this});this.settings_view=new this.settings_view_cls({model:this});this.on("destroy",this.cleanup)},set_create_view:function(a){this.create_view.remove();this.create_view_cls=a||g;this.create_view=new this.create_view_cls({model:this})},cleanup:function(){this.view.remove();this.item_view.remove();this.settings_view.remove()},url:function(){var a=
this.urlRoot;return this.isNew()?a:a+encodeURIComponent(this.get("slug"))},has_widgets:function(){return 0<this.widgets.size()}}),b=D.Backbone.Collection.extend({model:h,url:"/api/dashboards/",carousel_period:60,initialize:function(){this.view=new d({collection:this});this.on("destroy",this.destroyed)},comparator:function(a){return 100*("default"===a.kind.id?0:a.kind.get("layout"))+a.get("layout")},set_first:function(a){this.current=a;this.first_time=!0;this.current.view.$el.addClass("visible")},
delete_slots:function(){var a=[];this.current.widgets.each(function(a){a.slot_attrs=a.extract_slot_attrs()});this.first_time?a.push($.Deferred().resolve()):this.current.widgets.each(function(d){[].push.apply(a,d.delete_slots())});return a},create_slots:function(){this.current.widgets.each(function(a){!this.first_time&&a.create_slots();a.slots.each(function(a){a.view.render().$el.css({opacity:1});a.start()})},this)},set_current:function(a,d){if(d||a!==this.current||this.first_time){var b=this.delete_slots();
this.current_view||(this.current_view=new f({collection:this}));this.current&&this.current.view.$el.removeClass("visible");this.current=a;this.current.view.$el.addClass("visible");this.current.view.gridster&&!D.bb.account.get("readonly")&&this.current.kind.get("editable")&&this.current.view.gridster.enable();$.when.apply($,b).then(_.bind(function(){this.create_slots();delete this.first_time},this));!d&&this.trigger("current",a)}},destroyed:function(){this.set_current(this.first());D.Backbone.app.navigate("dashboard/"+
this.current.get("slug"))},get_service_widgets:function(a){return _.flatten(this.map(function(d){return d.widgets.get_by_service(a)}))},num_widgets:function(){var a=D.bb.account.get("serviceboards"),d=this.filter(function(d){return!_.contains(a,d.kind.get("kind"))});return _.reduce(_.map(d,function(a){return a.widgets.size()}),function(a,d){return a+d},0)},num_custom_widgets:function(){var a=D.bb.account.get("serviceboards"),d=this.filter(function(d){return!_.contains(a,d.kind.get("kind"))});return _.reduce(_.map(d,
function(a){return a.widgets.filter(function(a){return"custom"==a.service_kind}).length}),function(a,d){return a+d},0)},serviceboard:function(){var a=D.bb.account.get("serviceboards"),d=this.filter(function(d){return _.contains(a,d.kind.get("kind"))});return 0===d.length?void 0:_.min(d,function(a){return a.get("layout")})},current_is_serviceboard:function(){return _.isEqual(D.bb.dashboards.current,D.bb.dashboards.serviceboard())},current_is_oldest:function(){return _.isEqual(D.bb.dashboards.current,
D.bb.dashboards.first())},current_is_chromeboard:function(){return this.current_is_oldest()&&"chromewebstore"===D.bb.account.get("plan_label")},current_kind_is_serviceboard:function(){return"default"!==D.bb.dashboards.current.kind.get("kind")},billable_dashboards:function(){return this.size()-(this.serviceboard()?1:0)},uses_premium_widgets:function(){var a=D.bb.account.get("serviceboards"),d=this.filter(function(d){return!_.contains(a,d.kind.get("kind"))});return _.any(d,function(a){return a.widgets.any(function(a){return a.premium})})},
carousel_count:function(){return this.filter(function(a){return a.get("in_carousel")}).length},in_tvmode_dashboards:function(){return D.bb.dashboards.select(function(a){return a.get("in_carousel")&&a.widgets.length})},ip_access_rules_count:function(){return this.reduce(function(a,d){return a+d.ip_access_rules.length},0)}}),d=D.Backbone.View.extend({template:"dashboards_list",template_data:function(){return{kinds:D.bb.dashboard_kinds.filter(function(a){return a.get("in_menu")}),readonly:D.bb.account.get("readonly")}},
render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$el.appendTo("#preferences .dashboards");var a=this.collection.groupBy(function(a){return a.get("owner")});1===_.keys(a).length?this.collection.each(function(a){a.item_view.render()}):_.each(a,function(a){_.each(a,function(a,d){a.item_view.render(d)})});return this}}),l=new b;l.on("add",function(a){a.view.listenTo(a.collection,"current",a.view.render)});var q={from_wizard:!0,postit_template:"post-it",get_postit_content:function(){return $.tmpl(this.postit_template,
{service_kind:this.service_kind}).val().replace(/\[br\]/g,"\n")},show_wizard_final_step:function(){Backbone.history.navigate("wizard/dashboard/what_is_next",!0)},vivify_dashboard:function(){v.prototype.vivify_dashboard.apply(this,arguments);this.show_wizard_final_step()},validate_fields:function(){var a={};_.each(this.setup_form_view.fields,function(d,b){var e=_.sprintf(".field-%s",b);(d=d.is(e)?d:d.find(e))&&d.trigger("focus blur");d&&!1===d.is("select[multiple]")&&0===_.trim(d.val()).length&&(a[b]=
"This field is required")},this);return _.size(a)?(this.show_errors(a),!1):!0},show_response_errors:$.noop},v=D.Backbone.View.extend({template:void 0,template_label:void 0,service_kind:void 0,needs_setup:!0,events:{"click .services li":"select_service","click .connect":"create_service","click .create":"create_dashboard","click .failure a":"show_credentials"},initialize:function(){this.template_label=this.template_label||this.model.kind.id;this.service_kind=this.service_kind||this.model.kind.id},get_services:function(){return D.bb.services.filter(_.bind(function(a){return a.get("service_kind")===
this.service_kind},this))},render:function(){var a=this.get_services();this.setElement($.tmpl(this.template,{kind:this.model.kind.toJSON(),has_services:!!a.length,has_dashboards:!!D.bb.dashboards.length,from_wizard_dashboard:this.from_wizard}));a.length?_.each(a,_.bind(function(a){a.selectable.render(null,!0).$el.prependTo(this.$("ul.services"))},this)):(this.$(".accounts").show(),this.$(".credentials").show());a=this.service=new D.Backbone.service_kinds[this.service_kind];this.$(".credentials legend").after(a.initial_form_view.render().$el);
D.u.modal({content:this.$el,onComplete:function(){D.u.on_esc();$("#fancybox-content, #fancybox-content > div").css({overflow:"visible"})},onCleanup:function(){D.u.hide_tooltips();D.u.off_esc();$("#fancybox-content").css({overflow:""})}});this.$("input[placeholder], textarea[placeholder]").placeholder();this.$("select").chosen({disable_search_threshold:10});this.post_render();return this},post_render:function(){},select_service:function(a){var d=$("a",a.currentTarget).tmplItem().model;d?(this.service=
d,this.prepare_setup(a),this.needs_setup&&this.show_fieldset("setup")):this.service.uses_external_authentication?this.open_external_authentication():this.show_fieldset("credentials")},create_service:function(a){if(this.service.uses_external_authentication)this.open_external_authentication();else{var d=$(a.currentTarget),b=D.u.sending(d,function(){d.val("")});b.blocked||(this.service.initial_form_view.set_from_fields(),D.Backbone.services.add(this.service),this.service.save({},{complete:_.bind(function(){b.complete();
this.service.unset("auth_user");this.service.unset("auth_password")},this),success:_.bind(function(){this.prepare_setup();this.needs_setup&&this.show_fieldset("setup")},this),error:_.bind(function(a,d){D.Backbone.services.remove(this.service);this.service.initial_form_view.show_response_errors(d)},this)}))}},open_external_authentication:function(){var a=this.get_services().length,d=_.bind(function(){this.choose_new_service(a)},this);this.show_fieldset("loading");$(window).one("focus",function(){D.Backbone.services.fetch({success:d,
error:d})});var b=this.service.auth_url()+"?"+$.param(this.service.initial_form_view.field_values());return window.open(b)},prepare_setup:function(a){this.create_dashboard(a)},choose_new_service:function(a){this.$(".credentials").stop(!0,!0);this.$(".loading").stop(!0,!0);var d=this.get_services();d.length>a?(this.service=_.last(d),this.prepare_setup(),this.needs_setup&&this.show_fieldset("setup")):d.length?this.show_fieldset("accounts"):this.show_fieldset("failure")},show_fieldset:function(a){var d=
_.without(["accounts","credentials","loading","failure","setup"],a),d=_.map(d,_.bind(function(a){return this.$("."+a).fadeOut(100)},this));$.when.apply($,d).then(_.bind(function(){this.$("."+a).fadeIn(100)},this))},create_dashboard:function(a){a&&a.preventDefault();if(!this.needs_setup||!this.validate_fields||!1!==this.validate_fields()){if(a){var d=$(a.currentTarget),b=D.u.sending(d,function(){d.val("")});if(b.blocked)return}var e=new this.model.dashboard_template_cls({kind:this.template_label}),
f=this.build_template_config();e.save(f,{complete:a?b.complete:$.noop,success:_.bind(function(a,d){this.vivify_dashboard(d)},this),error:_.bind(function(a,d){this.show_response_errors(d)},this)})}},show_credentials:function(){this.show_fieldset("credentials")},build_template_config:function(){},vivify_dashboard:function(a){D.Backbone.dashboards.length||(window.location.reload(),window.close());this.model.set(a.dashboard);l.add(this.model);_.each(a.widgets.data,_.bind(function(a){var d=new D.Backbone.widget_kinds[a.widget.kind](a.widget,
{service:this.service});d.dashboard=this.model;this.model.widgets.add(d);d.setup_new(d.from_api(a));d.view.container=d.view.setup_container()},this));this.model.item_view.render();this.model.view.create_grid();this.model.widgets.each(function(a){a.start()});D.bb.account.get("has_trial_account")&&D.bb.account.set_plan();this.from_wizard?l.set_current(this.model,!0):D.Backbone.app.navigate(_.sprintf("dashboard/%s",this.model.get("slug")),!0)}}),a=v.extend({template:"dashboard_zendesk_create",post_render:function(){this.$(".field-auth_user").attr("tabindex",
1);this.$(".field-auth_password").attr("tabindex",2);this.$(".field-auth_domain").attr("tabindex",3)},prepare_setup:function(){var a=new D.Backbone.widget_kinds.zendesk_tickets_by_status_boxes({},{service:this.service});a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".groups-placeholder").replaceWith(this.setup_form_view.render().$el);this.$("select").chosen({disable_search_threshold:10})},build_template_config:function(){var a=
{};a.name=this.$(".field-label").val();a.accounts={1:{account_id:this.service.id}};var d=this.$(".field-group_name").val();""!==d&&(a.content={},_.each(_.range(1,19),function(b){a.content[b]={group_name:d}}));return a}}),b=a.extend(q).extend({service_kind:"zendesk",template_label:"zendesk-starter",build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};var d=this.$(".field-group_name").val();""!==d&&(a.content={},_.each(_.range(1,6),function(b){a.content[b]=
{group_name:d}}));a.content[6]={content:this.get_postit_content()};return a}}),a=h.extend({create_view_cls:a}),w=v.extend(q).extend({template:"dashboard_analytics_create",service_kind:"analytics",template_label:"analytics-starter",prepare_setup:function(){var a=new D.Backbone.widget_kinds.analytics_daily_unique_visitors_graph({},{service:this.service});a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".properties-placeholder").replaceWith(this.setup_form_view.render().$el);
this.$("select").chosen({disable_search_threshold:10})},build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};var d=this.$(".field-table_id").val();a.content={};_.each(_.range(1,6),function(b){a.content[b]={table_id:d}});a.content[6]={content:this.get_postit_content()};return a}}),m=v.extend({template:"dashboard_twilio_create",prepare_setup:function(){var a=new D.Backbone.widget_kinds.twilio_queue_size_counter({},{service:this.service});
a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".subaccounts-placeholder").replaceWith(this.setup_form_view.render().$el);this.$("select").chosen({disable_search_threshold:10})},build_template_config:function(){var a={};a.name=this.$(".field-label").val();a.accounts={2:{account_id:this.service.id}};var d=this.$(".field-subaccount").val();""!==d&&(a.content={},_.each(_.range(2,13),function(b){a.content[b]={subaccount:d}}));var b=
this.$(".field-queue").val()||"no-queue";a.content[10].queue=b;return a}}),t=m.extend(q).extend({service_kind:"twilio",template_label:"twilio-starter",build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.name=this.$(".field-label").val();a.accounts={1:{account_id:this.service.id}};var d=this.$(".field-subaccount").val();""!==d&&(a.content={},_.each(_.range(1,5),function(b){a.content[b]={subaccount:d}}));a.content[5]={content:"post-it text"};return a}}),m=h.extend({create_view_cls:m}),
u=v.extend(q).extend({template:"dashboard_twitter_create",service_kind:"twitter",template_label:"twitter-starter",needs_setup:!1,build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};a.content={4:{content:this.get_postit_content()}};return a}}),x=v.extend(q).extend({template:"dashboard_github_create",service_kind:"github",template_label:"github-starter",prepare_setup:function(){var a=new D.Backbone.widget_kinds.github_issues_counter_timeline({},
{service:this.service});a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".repo-placeholder").replaceWith(this.setup_form_view.render().$el);this.$("select").chosen({disable_search_threshold:10})},build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};var d=this.$(".field-user").val(),b=this.$(".field-repo").val();a.content={};_.each(_.range(1,5),function(e){a.content[e]=
{user:d,repo:b}});a.content[5]={content:this.get_postit_content()};return a}}),y=v.extend(q).extend({template:"dashboard_salesforce_create",service_kind:"salesforce",template_label:"salesforce-starter",needs_setup:!1,build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};a.content={5:{content:this.get_postit_content()}};return a}}),B=v.extend({template:"dashboard_mozscape_create",prepare_setup:function(){var a=new D.Backbone.widget_kinds.mozscape_external_links_counter({},
{service:this.service});a.data_source.set({service_id:this.service.id});a.data_source.params={url_1:a.data_source.params.url,url_2:a.data_source.params.url};this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".urls-placeholder").replaceWith(this.setup_form_view.render().$el)},build_template_config:function(){var a={};a.name=this.$(".field-label").val();a.accounts={1:{account_id:this.service.id}};a.content={};var d=this.$(".field-url_1").val();""!==d&&(a.content[1]={caption:d},_.each(_.range(2,
9),function(b){a.content[b]={url:d}}));var b=this.$(".field-url_2").val();""!==b&&(a.content[9]={caption:b},_.each(_.range(10,17),function(d){a.content[d]={url:b}}));return a},validate_fields:function(){var a={};_.each(["label","url_1","url_2"],function(d){var b=this.$(_.sprintf(".field-%s",d));b&&b.trigger("focus")&&b.trigger("blur");b&&0===_.trim(b.val()).length&&(a[d]="This field is required")},this);return _.size(a)?(this.show_errors(a),!1):!0}}),F=h.extend({create_view_cls:B}),q=B.extend(q).extend({service_kind:"mozscape",
template_label:"mozscape-starter",prepare_setup:function(){var a=new D.Backbone.widget_kinds.mozscape_external_links_counter({},{service:this.service});a.data_source.set({service_id:this.service.id});this.setup_form_view=new D.bb.FormView({model:a.data_source});this.$(".urls-placeholder").replaceWith(this.setup_form_view.render().$el)},build_template_config:function(){var a={};a.dashboard_id=this.model.id;a.accounts={1:{account_id:this.service.id}};a.content={};var d=this.$(".field-url").val();""!==
d&&_.each(_.range(1,8),function(b){a.content[b]={url:d}});return a}}),B=D.Backbone.Model.extend({idAttribute:"slug",url:"/api/backgrounds/",initialize:function(a){this.get("user_managed")?this.item_view=new K({model:this}):this.item_view=new C({model:this})},start:function(){this.get("user_managed")&&this._upload()},pause:function(){this.get("user_managed")&&(this.is_paused=!0)},resume:function(){this.get("user_managed")&&(this.is_paused=!1,this._upload())},save:function(a){if(!this.get("user_managed")||
!D.bb.account.get("can_upload_background"))return this;if(!D.u.support_xhr_upload())return this._iframe_upload(a,{url:this.url});if(this.file=a[0].files[0])return this.file_size=this.file.size,a=new FormData,a.append("file",this.file),this.xhr=new XMLHttpRequest,this.xhr.open("POST",this.url),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRFToken",$.cookie("csrftoken")),this.xhr.upload.addEventListener("progress",_.bind(this._upload_progress,this),!1),
this.xhr.addEventListener("load",_.bind(this._upload_completed,this),!1),this.xhr.addEventListener("abort",this._upload_canceled,!1),this._upload_start(),this.xhr.send(a),this},_upload_start:function(){this.trigger("upload_start")},_upload_progress:function(a){this.trigger("progress",a)},_upload_completed:function(a){var d=a;if(a.target){if(200!==a.target.status)return this._upload_failed({code:a.target.status,errors:"Unexpected error uploading file"});d=JSON.parse(a.target.responseText)}D.bb.account.set_background(d);
this.trigger("uploaded",this)},_upload_failed:function(a){413===a.code&&(a.errors="File is too large",a.details="max. 1Mb");this.trigger("error",a)},_upload_canceled:function(a){console.log("canceled!",a)},_iframe_upload:function(a,d){var b="file_upload_iframe_"+Date.now(),e=$("<iframe />",{id:b,name:b}).hide(),b=$("<form />",{enctype:"multipart/form-data",target:b,action:d.url,method:"POST"}).hide();$("<input />",{type:"hidden",name:"csrfmiddlewaretoken",value:$.cookie("csrftoken")}).appendTo(b);
$("<input />",{type:"hidden",name:"iframe",value:!0}).appendTo(b);a.attr("name","file").appendTo(b);$(document.body).prepend(e);$(document.body).prepend(b);var f=this;e[0].onreadystatechange=function(){if(!f.upload_canceled&&"complete"===this.readyState){var a={code:400,errors:"Unexpected error uploading file"};try{var d=$(e[0].contentWindow.document.body).find("pre").text();if(d){var b=JSON.parse(d);b.background_url?f._upload_completed(b):f._upload_failed(b)}else throw new Exception;}catch(g){f._upload_failed(a)}}};
e[0].load_successfully=!1;b=b.submit();this._upload_start();return b}}),C=D.Backbone.View.extend({template:"background_item",events:{click:"set_background"},template_data:function(){var a=this.dashboard.get("background_label");return _.extend(this.model.toJSON(),{is_current:this.model.get("label")===a,uploaded_background:!!D.bb.account.get_background_url(this.dashboard.get("owner")),can_upload_background:D.bb.account.get("can_upload_background")})},render:function(){this.setElement($.tmpl(this.template,
this.template_data()));return this},set_background:function(){!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.account.get("is_beta")?D.bb.account.trial_expired_view.render(!0):!0===D.bb.account.get("has_recurly_account_expired")?D.bb.account.subscription_expired_view.render():(this.dashboard.set({background_label:this.model.get("label")}),$("a",this.$el.siblings()).removeClass("selected"),this.$("a").addClass("selected"),analytics.track("dashboard background select",{background:this.model.get("label"),
"dashboard is new":this.dashboard.isNew()?1:0}),this.dashboard.isNew()||($("body").attr("style",""),$("body").attr("class",this.model.get("slug")),this.save_background()))},save_background:_.debounce(function(){this.dashboard.save({background_label:this.model.get("label")})},1E3)}),K=C.extend({events:{"click div.background":"set_background",'change input[type="file"]':"fileinput_changed","click .upgrade":"please_upgrade"},initialize:function(){C.prototype.initialize.apply(this,arguments);this.listenTo(this.model,
"upload_start",this.upload_start);this.listenTo(this.model,"progress",this.show_progress);this.listenTo(this.model,"uploaded",this.uploaded);this.listenTo(this.model,"error",this.show_error)},render:function(){C.prototype.render.apply(this,arguments);this.uploader();D.bb.account.get_background_url()&&this.$placeholder.remove();return this},upload_start:function(){this.$placeholder.remove();this.$upload_bar.css({display:"block",height:"0%"});this.$upload_percent.html("0%");this.$thumbnail.css("background-image",
"none");$.browser.msie&&this.$loader.show();this.$cloned.appendTo(this.$(".file"));this.$fileinput.remove();this.$fileinput=this.$cloned},show_progress:function(a){a.lengthComputable&&(a=parseInt(100*a.loaded/a.total)+"%",this.$upload_bar.css("height",a),this.$upload_percent.html(a))},uploader:function(){this.$thumbnail=this.$(".background");this.$fileinput=this.$('input[type="file"]');this.$label=this.$("label");this.$placeholder=this.$(".placeholder");this.$loader=this.$(".loading");var a=D.bb.account.get_background_thumbnail();
a&&this.$thumbnail.css("background-image",'url("'+a+'")');this.$upload_bar=this.$(".upload-bar");this.$upload_percent=this.$(".upload-percent")},uploaded:function(){var a=D.bb.account.get_background_thumbnail(),d=new Image;d.onload=_.bind(function(){this.$thumbnail.css("background-image","none");this.$upload_bar.fadeOut(function(){$(this).css("height","0%")});this.$upload_percent.html("");this.$placeholder.remove();$.browser.msie&&this.$loader.hide();a&&this.$thumbnail.css("background-image",'url("'+
a+'")');this.$label.text("CHANGE")},this);a&&(d.src=a);(d=D.bb.account.get_background_url())&&this.dashboard.isNew()&&$("body").hasClass("custom")&&$("body").attr("style",'background-image: url("'+d+'")');d&&!this.dashboard.isNew()&&this.$("a").hasClass("selected")&&$("body").attr("style",'background-image: url("'+d+'")');this.select_on_upload&&(this.set_background(),this.select_on_upload=!1)},show_error:function(a){a&&a.errors&&(a=new z(a),this.$error=a.$el,a.parent=this,this.$error.appendTo(this.$el).fadeIn(),
(a=D.bb.account.get_background_thumbnail())&&this.$thumbnail.css("background-image",'url("'+a+'")'))},set_background:function(){var a=this.dashboard.get("background_label");this.model.get("label")!==a&&((a=D.bb.account.get_background_url(this.dashboard.get("owner")))?(C.prototype.set_background.apply(this,arguments),this.$placeholder.remove(),this.dashboard.isNew()||a&&$("body").attr("style",'background-image: url("'+a+'")')):(this.select_on_upload=!0,this.$fileinput.trigger("click")))},fileinput_changed:function(a){if(!0===
D.bb.account.get("has_trial_expired"))return D.bb.account.trial_expired_view.render(!0);if(!0===D.bb.account.get("has_recurly_account_expired"))D.bb.account.subscription_expired_view.render();else{if(!D.bb.account.get("can_upload_background"))return this.please_upgrade();this.$cloned=this.$fileinput.clone(!0);this.$error&&this.$error.fadeOut(_.bind(function(){this.$error.remove()},this));return this.model.save(this.$fileinput)}},please_upgrade:function(a){Backbone.history.navigate("upgrade/custom_background",
!0)}}),z=D.Backbone.View.extend({template:"upload_error",events:{"click a":"remove"},initialize:function(a){this.render(a)},render:function(a){this.setElement($.tmpl(this.template,a));return this},remove:function(a){a.preventDefault();a.stopImmediatePropagation();this.parent.$upload_bar.css("height","0%");this.parent.$upload_percent.empty();this.$el.fadeOut(function(){$(this).remove()})}}),J=new (D.Backbone.Collection.extend({model:B,comparator:function(a){return a.get("layout")}})),G=D.Backbone.View.extend({template:"dashboard_tvmode_reel",
events:{"click .include:not(.active)":"include_in_reel","click .exclude:not(.active)":"exclude_from_reel"},initialize:function(a){this.model=a||D.bb.dashboards.current;return this},render:function(){this.setElement($.tmpl(this.template,this.model.toJSON()));return this},toggle_include:function(a,d){if(!D.bb.account.has_tvmode_carousel())return this.show_upgrade();a.addClass("active").siblings().removeClass("active");this.model.save({in_carousel:d},{error:function(d,b,e){a.removeClass("active").siblings().addClass("active")}})},
show_upgrade:function(){Backbone.history.navigate("upgrade/tvmode_reel",!0)},include_in_reel:function(a){a&&a.preventDefault();this.toggle_include($(a.target),!0)},exclude_from_reel:function(a){a&&a.preventDefault();this.toggle_include($(a.target),!1)}});_.extend(Ducksboard.Backbone,{dashboards:l,dashboard_kinds:k,dashboard_models:{"default":h,zendesk:a,twilio:m,mozscape:F},wizard_dashboard_create_views:{analytics:w,github:x,salesforce:y,twilio:t,twitter:u,zendesk:b,mozscape:q},backgrounds:J,Background:B,
Dashboard:h,DashboardKind:e})})();
(function(){var e={template:null,events:{"click .close":"back"},template_data:function(a){return{has_recurly_account:D.bb.account.get("has_recurly_account"),upgrade_possible:D.bb.account.can_upgrade()}},render:function(a){this.setElement($.tmpl(this.template,this.template_data(a)));D.u.super_modal(this);a=this.template.replace(/_/g," ");analytics.track("upselling modal",{modal:a});$.post("/upsell",{modal:a});return this},back:function(a){a.preventDefault();history.back()}},k=D.Backbone.View.extend(e).extend({template:"directory_group_upgrade",
back:function(a){}}),h=D.Backbone.View.extend(e).extend({template:"tvmode_upgrade",back:function(a){}}),f=D.Backbone.View.extend(e).extend({template:"timespans_upgrade"}),b=D.Backbone.View.extend(e).extend({template:"alerts_upgrade"}),g=D.Backbone.View.extend(e).extend({template:"background_upgrade"}),a=D.Backbone.View.extend(e).extend({template:"tvmode_reel_upgrade"}),d=D.Backbone.View.extend(e).extend({template:"widget_count_upgrade",back:function(a){}}),l=D.Backbone.View.extend(e).extend({template:"custom_widget_count_upgrade",
back:function(a){}}),q=D.Backbone.View.extend(e).extend({template:"dashboard_upgrade",back:function(a){}}),v=D.Backbone.View.extend(e).extend({template:"accounts_per_service_upgrade"}),e=D.Backbone.View.extend(e).extend({template:"sinfonier_upgrade",back:function(a){}}),k={service:new k,tvmode:new h,timespans:new f,alerts:new b,custom_background:new g,tvmode_reel:new a,widget_count:new d,custom_widget_count:new l,dashboard_count:new q,accounts:new v,sinfonier:new e};Ducksboard.bb.upgrade=k})();
(function(e,k,h){var f=function(b,a){this.size=a;this.dashboard=b||D.bb.dashboards.current;this.$dashboard=this.dashboard.view.$el;this.gridster=this.dashboard.view.gridster;this.dashboard_kind=this.dashboard.kind.id;this.gridster_conf=D.u.constants.gridster[this.dashboard_kind][this.size];this.dimensions=this.gridster_conf.widget_base_dimensions;this.margins=this.gridster_conf.widget_margins;this.stopped=!0;this.user_stopped=this.is_animated=!1;this.speed=13E3;this.gridster.disable();this.init()};
_.extend(f.prototype,{init:function(){$("body").css("overflow","hidden");this.space=this.get_free_space();this.$widgets_to_resize=$([]);this.final_positions=[];this.final_slidemap=[];this.prev_largemap=[];var b=this.space.cols_per_window,a=this.space.rows_per_window;this.backup=$.extend(!0,[],this.gridster.gridmap);this.most_right_col=this.gridster.get_right_most_occupied_cell().col;this.most_bottom_row=this.gridster.get_bottom_most_occupied_cell().row;this.slides_x=Math.ceil(this.most_right_col/
b);this.slides_y=Math.ceil(this.most_bottom_row/a);this.n_slides=this.slides_x*this.slides_y;this.build_slidemap();this.current=0;return this},set_background:function(){this.orig_dashboard_classes=this.$dashboard.attr("class");this.dashboard.view.set_background(this.$dashboard)},unset_background:function(){this.$dashboard.attr("class",this.orig_dashboard_classes);this.$dashboard.css("background-image","")},center:function(){var b=this.space.diff_w,a=this.space.diff_h;1==this.slides_x&&1==this.slides_y&&
1>=this.slidemap.length&&(b=$(e).width()-this.space.widget_width*this.most_right_col,a=$(e).height()-this.space.widget_height*this.most_bottom_row);this.gridster.$el.css({"margin-left":Math.max(b/2,0),"margin-top":Math.max(a/2,0)})},preview:function(){$(".tvmode-widgets-nav",this.gridster.$wrapper).remove();if(!(1>=this.max_slide)){for(var b="<ol>",a=0;a<this.max_slide;a++)b+='<li data-slide="'+a+'">'+a+"</li>";this.$preview=$("<div />",{"class":"tvmode-widgets-nav",style:"opacity: 0;",html:b+"</ol>"}).appendTo(this.gridster.$wrapper);
this.$preview.find("li").first().addClass("active")}},show_preview:function(){this.$preview&&(D.d.modes.tv.close_notice(),this.$preview.transition({opacity:1},600))},hide_preview:function(b){this.$preview&&(this.$preview.transition({opacity:0},600,b?_.bind(this.remove_preview,this):$.noop),this.$preview.find(".active").removeClass("active"))},remove_preview:function(){this.$preview&&this.$preview.remove()},toggle_play:function(){if(this.stopped)return this.user_stopped=!1,this.play();this.user_stopped=
!0;return this.stop()},play:function(){this.stopped=!1;clearTimeout(this.delay);this.delay=_.delay(_.bind(function(){this.stopped||(this.next(),this.stopped||this.play())},this),this.speed);return this},stop:function(){this.stopped=!0;clearTimeout(this.delay);return this},next:function(){var b=this.current+1,a=this.max_slide-1,d=b>a?0:b,e=this.dashboard_rotation?this.dashboard_rotation.dashboards.length:0;if(b>a&&e&&1<e&&(this.stop(),1===e))return this;b>a&&$(k.body).trigger("end_of_dashboard.widget_rotation");
this.go(d);return this},right:function(){if(this.current+1>this.max_slide-1)return $(k.body).trigger("end_of_dashboard.widget_rotation"),this;var b=Math.min(this.max_slide-1,this.current+1);this.stop().go(b,function(){this.stopped&&!this.user_stopped&&this.current===b&&this.play()});return this},left:function(){if(0>this.current-1)return $(k.body).trigger("beginning_of_dashboard.widget_rotation"),this;var b=Math.max(0,this.current-1);this.stop().go(b,function(){this.stopped&&!this.user_stopped&&this.current===
b&&this.play()});return this},go:function(b,a){var d=this.slidemap[b],e=this;if(!(!d||b>this.max_slide||0>b)){this.$preview&&(this.$preview.find(".active").removeClass("active"),this.$preview.find("li").eq(b).addClass("active"));d=-((d.c1-1)*e.space.widget_width);this.is_animated=!0;if(Modernizr.csstransforms3d)this.gridster.$el.transEnd("widget-rotation",function(){e.is_animated=!1;a&&a.call(e)}),this.gridster.$el.css(D.u.camelcase_to_hypenated(Modernizr.prefixed("transform")),"translate3d("+d+"px, 0, 0)");
else this.gridster.$el[Modernizr.csstransitions?"transition":"animate"]({left:d},500,function(){a&&a.call(e);e.is_animated=!1});this.current=b;this.highlight_current();return this}},disable:function(){$(k.body).css("overflow","auto").off("keydown.widget_rotation");this.stop();return this},highlight_current:function(){var b,a,d;b=this.current*this.space.cols_per_window+1;for(var e=b+this.space.cols_per_window-1,f=$([]);b<=e;b++)if(this.largemap[b])for(a=1;a<=this.largemap[b].length;a++)(d=this.largemap[b][a])&&
(f=f.add(d));this.gridster.$widgets.removeClass("translucid");this.gridster.$widgets.not(f).addClass("translucid");return this},enter:function(){var b=[],a=this;this.$dashboard.attr("data-display-mode",this.size);this.set_background();this.init_values={"margin-left":this.gridster.$el.css("margin-left"),"margin-top":this.gridster.$el.css("margin-top"),left:this.gridster.$el.css("left")};this.center();$.each(this.slidemap,_.bind(function(d,e){var f=e.orig,h=[f.c1,f.r1],k=e.map;if(!e.$widgets)return!0;
this.slidemap[d].widgets=[];e.$widgets.each(function(f,q){var u=$(q);if(-1<$.inArray(q,b))return!0;b.push(u);var x=u.data("coords").grid,y={$el:u,col:x.col,row:x.row,offset_x:x.col-h[0],offset_y:x.row-h[1],size_x:x.size_x,size_y:x.size_y},y={$el:u,col:e.c1+y.offset_x,row:e.r1+y.offset_y,orig:y},B=a.gridster.get_cells_occupied(x),F,C;$.each(B.cols,function(b,e){F=e-h[0]+1;$.each(B.rows,function(b,e){C=e-h[1]+1;k[F]?k[F][C]=u:a.slidemap[d+1]&&(a.slidemap[d+1].map[F-a.space.cols_per_window][C]=u)})});
a.slidemap[d].widgets.push(y);u.data("slide",e);var K=Math.max(1,y.row),z=a.prev_largemap[y.col]&&a.prev_largemap[y.col][K];y.col=z?z.col+z.orig.size_x:y.col;a.final_positions.push({$w:u,col:y.col,row:K,size_x:x.size_x,size_y:x.size_y});for(var z=y.col+x.size_x-1,K=K+x.size_y-1,J=y.col;J<=z;J++){a.prev_largemap[J]||(a.prev_largemap[J]=[]);for(var G=y.row;G<=K;G++)a.prev_largemap[J][G]=y}x=y.col+x.size_x-1;for(y=y.col;y<=x;y++)a.final_slidemap[y]=!0})},this));this.remove_empty_cols();this.build_largemap();
this.highlight_current();this.preview();$("body").trigger("tvmode:finish");return this},exit:function(){this.$dashboard.attr("data-display-mode",null);this.unset_background();this.$dashboard.css("width",this.gridster.wrapper_width);this.gridster.$widgets.each(function(b,a){var d=$(a),e=d.data("coords").grid;d.attr({"data-row":e.row,"data-col":e.col})});this.current=0;this.gridster.$el.addClass("fade-out");this.gridster.$el.transition({opacity:0,easing:"in-out"},200,_.bind(function(){this.gridster.$el.css({"margin-left":this.init_values["margin-left"],
"margin-top":this.init_values["margin-top"],transform:"translate3d(0, 0, 0)",left:this.init_values.left});this.gridster.$el.removeClass("fade-out");this.gridster.$el.transition({opacity:1,easing:"in-out"},200)},this));this.hide_preview(!0);return this},build_slidemap:function(){var b=[],a=0,d,e,f,h,k,m=0,t=this.space.rows_per_window-1,u=this.space.cols_per_window-1,x=[];for(d=this.space.cols_per_window;1<=d;d--)for(x[d]=[],e=this.space.rows_per_window;1<=e;e--)x[d][e]=!1;var y=0;for(f=0;f<=this.slides_y;f++)for(e=
0;e<=this.slides_x;e++)m=a*this.space.cols_per_window+1,h=e*this.space.cols_per_window+1,k=f*this.space.rows_per_window+1,d=this.gridster.widgets_in_range(h,k,h+u,k+t),!1!==d&&0!==d.length&&(a+=1,b.push({c1:m,c2:m+u,r1:1,r2:1+t,n:a,orig:{c1:h,c2:h+u,r1:k,r2:k+t},map:x,$widgets:d}),y+=this.space.cols_per_window);this.slidemap=b;this.gridster.generate_stylesheet({cols:y,namespace:this.gridster_conf.namespace,widget_base_dimensions:this.dimensions,widget_margins:this.margins});return this},assign_widget_to_largemap_cell:function(b,
a,d){for(c=a[0];c<=a[1];c++)for(this.largemap[c]||(this.largemap[c]=[]),r=d[0];r<=d[1];r++)this.largemap[c][r]=b},unassign_widget_from_largemap_cell:function(b){if(!this.largemap)return this;var a,d,e=this.largemap.length,f=this.largemap[1].length;for(a=0;a<=e;a++)if(this.largemap[a])for(d=1;d<=f;d++)this.largemap[a][d]&&this.largemap[a][d].is(b)&&(this.largemap[a][d]=h)},build_largemap:function(){this.largemap=[];var b,a,d,e,f,h,k,m,t;this.gridster.$widgets.each(_.bind(function(m,t){b=$(t);a=b.data("coords").grid;
d=b.data("tvmode_coords");e=d.col;f=d.col+a.size_x-1;h=d.row;k=d.row+a.size_y-1;this.assign_widget_to_largemap_cell(b,[e,f],[h,k])},this));for(m=1;m<this.largemap.length;m++)for(t=1;t<=this.largemap[m].length&&(!this.largemap[m]||!this.largemap[m][t]);t++)this.raise_widgets_below(m,t);this.max_slide=Math.ceil((this.largemap.length-1)/this.space.cols_per_window);return this},raise_widgets_below:function(b,a){for(var d=this.largemap[b],e=d.length,f=a;f<e;f++){var h=d[f];h&&this.move_widget_up(h,b,a)}return this},
move_widget_up:function(b,a,d){var e=b.data("coords").grid,f=b.data("tvmode_coords"),h=[],k;1<e.size_x&&(a=f.col);for(var m=a+e.size_x-1,t=d;1<=t;t--){k=!0;for(d=a;d<=m;d++)if(!this.largemap[d]||this.largemap[d]&&this.largemap[d][t])k=!1;k&&h.push(t)}if(!h[0])return this;b.attr({"data-row":h[0]});this.unassign_widget_from_largemap_cell(b);this.assign_widget_to_largemap_cell(b,[f.col,f.col+e.size_x-1],[h[0],h[0]+e.size_y-1]);return this},remove_empty_cols:function(){for(var b=this.final_slidemap.length-
1,a=[],d=0,e,f=1;f<=b;f++)this.final_slidemap[f]||(d+=1),a[f]=d;$.each(this.final_positions,function(d,b){e=b.col-a[b.col];b.$w.attr({"data-col":e,"data-row":b.row});b.$w.data("tvmode_coords",{col:e,row:b.row})});b=_.max(a,function(a){return a});b=Math.ceil(b/this.space.cols_per_window);this.max_slide=this.slidemap.length-b;return this},get_free_space:function(){var b={cols:0,rows:0},a=$(e).width(),d=$(e).height(),f=this.dimensions[0]+2*this.margins[0],h=this.dimensions[1]+2*this.margins[1];b.widget_width=
f;b.widget_height=h;b.cols_per_window=Math.max(0,Math.floor(a/f),this.gridster_conf.min_visible_cols||0);b.rows_per_window=Math.max(0,Math.floor(d/h),this.gridster_conf.min_visible_rows||0);var k=(this.gridster_conf.min_visible_cols||0)*f,w=(this.gridster_conf.min_visible_rows||0)*h;b.diff_w=a-k;b.diff_h=d-w;k<a&&b.diff_w>=f&&(b.cols=Math.floor(b.diff_w/f),b.diff_w-=b.cols*f);w<d&&b.diff_h>=h&&(b.rows=Math.floor(b.diff_h/h),b.diff_h-=b.rows*h);b.diff_h=Math.max(0,b.diff_h);b.diff_w=Math.max(0,b.diff_w);
b.widgets_w=k+b.cols*f;b.widgets_h=w+b.rows*h;return b}});var b=function(b){this.size=b;this.dashboards=D.bb.dashboards.in_tvmode_dashboards();if(this.not_in_reel=-1===this.dashboards.indexOf(D.bb.dashboards.current))this.dashboards=[D.bb.dashboards.current];this.current={dashboard:D.bb.dashboards.current,widget_rot:null};this.$container=this.current.dashboard.view.$el.parent();this.initial_index=this.index=this.dashboards.indexOf(this.current.dashboard);this.initial_offsets=[];this.d_transit_enter=
$.Deferred();this.d_transit_exit=$.Deferred();this.init()};b.widget_rot_ins=[];_.extend(b.prototype,{init:function(){this.bind_events();this.preview()},bind_events:function(){var b={32:"toggle_play",37:"left",39:"right"};this.unbind_events();$(k.body).on({"keydown.widget_rotation":_.bind(function(a){if(!(1>this.current.widget_rot.max_slide)){var d=b[a.keyCode];d&&(a.preventDefault(),this.current.widget_rot[d]())}},this),"beginning_of_dashboard.widget_rotation":_.bind(function(a){a.stopImmediatePropagation();
this.prev()},this),"end_of_dashboard.widget_rotation":_.bind(function(a){a.stopImmediatePropagation();this.next()},this)});return this},unbind_events:function(){$(k.body).off(".widget_rotation");return this},set_dashboard_position:function(b,a){var d=$(e).width();b.addClass("no-anim").css("left","");this.index!==a&&(Modernizr.csstransforms3d?b.css("transform","translate3d("+d+"px, 0, 0)"):b.css("left",d+"px"));b.removeClass("no-anim");return this},unset_dashboards_position:function(){_.each(this.dashboards,
_.bind(function(b,a){b.view.$el.css("left",this.initial_offsets[a]);b.view.$el.css("transform","translate3d(0, 0, 0)")},this));return this},start_only_widget_rotation:function(){var b=new Ducksboard.WidgetRotation(this.current.dashboard,this.size);b.dashboard_rotation=this;b.enter().play()},enter:function(){this.initial_offsets=[];_.each(this.dashboards,_.bind(function(e,a){var d=a===this.index,f=e.view.$el;f.show();this.initial_offsets[a]=f.css("left");!d&&f.hide();this.set_dashboard_position(f,
a);!d&&f.show();f=new Ducksboard.WidgetRotation(e,this.size);f.dashboard_rotation=this;f.enter();e.view.gridster.$widgets.not(".transparent").find(".widget").each($.proxy(function(a,b){var e=$(b).tmplItem().model;d?(this.d_transit_enter.resolve(),e&&e.reload_slots(null,0,this.d_transit_enter.promise())):(e.slot_attrs=e.extract_slot_attrs(),e.create_slots(null,!1),e.slots.each(function(a){a.view.render().$el.css({opacity:1});a.start()}))},this));d&&(f.play().show_preview(),this.current.widget_rot=
f);b.widget_rot_ins.push(f)},this));this.go(this.index,!0);return this},exit:function(){this.$container.css({width:"",left:""});_.each(b.widget_rot_ins,_.bind(function(b,a){var d=a===this.initial_index;d||b.$dashboard.hide();b.remove_preview();b.exit().disable();b.dashboard.view.gridster.$widgets.find(".widget").each($.proxy(function(a,b){var e=$(b).tmplItem().model;d?(this.d_transit_exit.resolve(),e&&e.reload_slots(null,20,this.d_transit_exit.promise())):e&&e.delete_slots(0)},this));b.dashboard.view.gridster.$widgets.removeClass("transparent")},
this));this.$container.attr("style","");this.unset_dashboards_position();this.hide_preview(!0);b.widget_rot_ins=[];this.unbind_events();return this},go:function(f,a){if(!this.is_animated){var d=$(e).width(),h=this,k=this.current.widget_rot,v=this.current.dashboard;k&&k.stop();this.current.dashboard=this.dashboards[f];this.current.widget_rot=b.widget_rot_ins[f];this.index=f;var w=this.current.dashboard.view.$el,m=v.view.$el.is(w)?$():v.view.$el;this.$preview&&(this.$preview.find(".active").removeClass("active"),
this.$preview.find("li").eq(f).addClass("active"));var t=-d+"px",u=d+"px";a?Modernizr.csstransforms3d?(w.addClass("no-anim").css("transform","translate3d(0, 0, 0)"),m.addClass("no-anim").css("transform","translate3d("+u+", 0, 0)"),_.defer(function(){m.add(w).removeClass("no-anim")})):(w.css("left",0),m.css(u)):(this.is_animated=!0,w.addClass("no-anim"),w.css("transform","translate3d("+u+", 0, 0)"),w.add(m).removeClass("no-anim"),Modernizr.csstransforms3d?(w.transEnd("dashboard-rotation-"+f,function(){h.is_animated=
!1;k&&k.go(0);m.addClass("no-anim");_.defer(function(){m.css("transform","translate3d("+u+", 0, 0)")})}),_.defer(function(){w.css("transform","translate3d(0, 0, 0)");m.css("transform","translate3d("+t+", 0, 0)")})):(v=Modernizr.csstransitions?"transition":"animate",w[v]({left:0},700,_.bind(function(){k&&k.go(0);h.is_animated=!1},this)),m[v]({left:t},700,function(){m.css("left",u)})));this.show_preview();this.$container.css("width",d);this.current.dashboard.view.$el.fadeIn();this.current.widget_rot.play().show_preview();
return this}},next:function(){var b=this.index+1;b>=this.dashboards.length&&(b=0);this.current.widget_rot.stop();this.go(b);return this},prev:function(){var b=this.index-1;0>b&&(b=this.dashboards.length-1);this.current.widget_rot.stop();this.go(b);return this},preview:function(){$(".tvmode-dashboards-nav").remove();if(!(1>=this.dashboards.length)){var b="<ol>";_.each(this.dashboards,function(a,d){b+="<li>"+a.get("label")+"</li>"});b+="</ol>";this.$preview=$("<div />",{"class":"tvmode-dashboards-nav",
style:"opacity: 0;",html:b}).insertAfter(this.$container);this.$preview.find("li").first().addClass("active")}},show_preview:function(){this.$preview&&(clearTimeout(this.preview_delay),this.preview_visible?(this.preview_visible=!0,this.preview_delay=_.delay(_.bind(this.hide_preview,this),1E3)):(D.d.modes.tv.close_notice(),this.preview_visible=!0,this.$preview.transition({opacity:1},"slow",_.bind(function(){this.preview_delay=_.delay(_.bind(this.hide_preview,this),1E3)},this))))},hide_preview:function(b){this.$preview&&
(this.preview_visible=!1,this.$preview.transition({opacity:0},"slow",function(){!0===b&&$(this).remove()}),this.$preview.find(".active").removeClass("active"))}});_.extend(Ducksboard,{WidgetRotation:f,wr:f,DashboardRotation:b,dr:b})})(window,document);
(function(){var e=function(){};_.extend(e.prototype,{id:void 0,enter:function(e){},exit:function(e){}});e.extend=Backbone.Model.extend;var k=new (e.extend({id:"pc",enter:function(e){D.bb.dashboards.current.view.adjust_preferences_bar();!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.bb.dashboards.current.view.gridster.enable();D.d.interactive=!0},exit:function(e){}})),e=new (e.extend({close_notice:function(){this.$notice&&this.$notice.transition({opacity:0,top:-50},
"slow",function(){$(this).remove()})},screen_size:function(){var e;switch(!0){case Modernizr.mq("(min-device-height: 1080px)"):e=1080;break;case Modernizr.mq("(min-device-height: 720px)"):e=720;break;default:e=!1}return e},enter:function(e){var f=this;this.size=this.screen_size();if(!this.size)throw"your screen is too small for tv mode";this.id=_.sprintf("tv%d",this.size);$("body").addClass(this.id).addClass("tvmode").on("tvmode:finish",function(){$("body").removeClass("tvmode-wip")});this.rotation=
(new Ducksboard.DashboardRotation(this.id)).enter();e.hide_notice||(this.rotation.show_preview(),this.$notice=$.tmpl("tvmode_notice",{size:this.id}).appendTo("body"),this.$notice.transition({opacity:1,top:0},"slow",function(){_.delay(function(){f.close_notice()},1E3)}));D.d.interactive=!1;D.bb.account.get("readonly")||D.bb.account.get("no_branding")||D.bb.account.get("has_used_tvmode")||$.get("/accounts/tvmode/").success(function(b){D.bb.account.set(b)}).error(function(){_.sprintf("error adding tvmode_used tag to %s",
D.bb.account.get("email"))})},exit:function(e){$("body").addClass("tvmode-wip");this.close_notice();this.rotation.exit();$("body").removeClass(this.id).removeClass("tvmode-wip").removeClass("tvmode");e.user_triggered&&$(document.body).trigger("exits.tvmode")}})),k=_.extend({interactive:!0,modes:{pc:k,tv:e},current:k,switch_to:function(e,f){f||(f={});if(!_.include(_.values(this.modes),e))throw"not a valid mode";e!==this.current&&(this.current.exit(f),this.current=e,e.enter(f))}});_.extend(Ducksboard,
{Display:k,d:k})})();
(function(){var e=D.Backbone.View.extend({template:"preferences",events:{"click .settings":"show_settings","click .logout":"logout","click .subscription":"show_subscription","click .upgrade_now":"upgrade_now","click .signup":"show_notification","click .notification .close":"hide_notification","click .tvmode":"tvmode"},template_data:function(){var e=D.bb.account.get("has_trial_account")&&!D.bb.account.get("no_branding"),h=_.extend(D.Backbone.account.toJSON(),{signup:Ducksboard.config.signup,current_is_serviceboard:D.bb.dashboards.current_is_serviceboard(),
current_is_chromeboard:D.bb.dashboards.current_is_chromeboard(),has_trial_account:e,trial_expiration_date:null});if(e){var e=moment(),f=moment(D.bb.account.get("status_change_date"));15>=f.diff(e,"days")&&_.extend(h,{trial_expiration_date:f.format("MMMM Do YYYY")})}return h},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$el.prependTo("body");this.$notification=this.$(".notification");this.$notification_tmplitem=this.$notification.length&&this.$notification.tmplItem();
this.$list=this.$(".settings-list");this.$list.data("cleanup",_.bind(function(){this.confirm_view&&this.confirm_view.hide()},this));this.$el.fadeIn();return this},render_notification:function(){this.$notification.length&&(this.$notification_tmplitem.data=this.template_data(),this.$notification_tmplitem.update());return this},show_settings:function(e){e.preventDefault();this.$list.fadeToggle();e.originalEvent.$contextual=this.$list},logout:function(e){this.confirm_view=this.$(".logout-wrap").confirm({text:"Log out?",
continue_text:"Yes",discard_text:"Stay",continue_css_class:"btn btn-action-medium btn-light",discard_css_class:"btn btn-action-medium btn-light",continue_icon:!1,continue_action:function(){window.location="/accounts/logout/"}}).data("confirm_view");return!1},show_subscription:function(e){analytics.track("trial end button")},upgrade_now:function(e){analytics.track("upgrade now button")},show_notification:function(e){this.hide_notification(e,!1)},hide_notification:function(e,h){h&&e.preventDefault();
$(e.target).closest("li").transition({opacity:0},600,function(){$(this).remove();D.bb.dashboards.current.view.adjust_preferences_bar()})},remove_upgrade_now:function(){this.$(".upgrade-now-wrap").remove()},tvmode:function(e){e.preventDefault();D.bb.account.has_tvmode()&&($("body").addClass("tvmode-wip"),screenfull.enabled?screenfull.request():D.bb.dashboards.current.view.switch_to_tvmode())}});_.extend(Ducksboard.Backbone,{preferences:new e})})();
(function(){var e=D.Backbone.Model.extend({idAttribute:"account_code",params:{first_name:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"First Name"}},last_name:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"Last Name"}},number:{template:"input_text",validators:[D.Utils.is_not_empty,D.Utils.is_valid_credit_card],template_data:{placeholder:"Credit Card Number"}},verification_value:{template:"input_text",validators:[D.Utils.is_not_empty,
D.Utils.is_valid_cvv],template_data:{placeholder:"CVV",maxlength:"4"}},month:{template:"select_months"},year:{template:"select",template_data:{options:[]}},address1:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"Full Address"}},city:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"City"}},state:{template:"input_text",validators:[D.Utils.is_not_empty],template_data:{placeholder:"State/Province"}},zip:{template:"input_text",validators:[D.Utils.is_not_empty],
template_data:{placeholder:"Zip"}},country:{template:"select_countries"},company_name:{target_class:".vat-info",template:"input_text",template_data:{placeholder:"Company Name"}},vat_number:{target_class:".vat-info",template:"input_text",template_data:{placeholder:"VAT Number",tooltip:"only applicable to EU customers"}}},initialize:function(a,d){this.plan=D.bb.account.set_plan();this.year_options();var b=D.bb.account.get("country");this.set({company_name:D.bb.account.get("company"),plan_code:this.plan.get("code"),
country:b,currency:D.u.b.is_country_in_eu(b)?"EUR":"USD"})},toDucksboardJSON:function(){var a=this.toJSON();D.u.Billing.is_country_in_eu(this.get("country"))||(a.vat_number="");return a},parse:function(a){return a.data&&a.data[0]||a},validate_country:function(a){a!==D.bb.account.get("country")?this.trigger("error:country"):(this.set({country:a}),this.trigger("change:country",this))},year_options:function(){for(var a=moment().year(),d=[],b=a;b<=a+10;++b)d.push({value:b,display_name:b});this.params.year.template_data.options=
d;this.set({year:a+1,month:1})},calculate_totals:function(a,d){var b={stages:{}};b.usd_plan=a.usd_cost;b.eur_plan=a.eur_cost;b.stages.usd_now=b.usd_plan;b.stages.eur_now=b.eur_plan;if(d){var e=b.stages.usd_now,f=b.stages.eur_now,g=b.stages.usd_now.discount(d,"USD"),h=b.stages.eur_now.discount(d,"EUR");b.usd_coupon=g.sub(e);b.eur_coupon=h.sub(f);b.stages.usd_now=g;b.stages.eur_now=h}b.stages.before_vat_eur=b.stages.eur_now;D.u.Billing.is_vat_charge_applicable(this.get("country"),this.get("vat_number"))&&
(b.vat=b.stages.eur_now.mult(D.u.b.vat_percent/100),b.stages.eur_now=b.stages.eur_now.add(b.vat));return b}}),k=e.extend({url:"/accounts/billing/subscription/",initialize:function(a,d){e.prototype.initialize.apply(this,arguments);var b=D.bb.account.get("country");this.set({first_name:D.bb.account.get("first_name"),last_name:D.bb.account.get("last_name"),country:b});this.totals=this.calculate_totals(this.plan,this.coupon)},validate_coupon:function(a){a&&"Code"!==a&&(a="betatester"===a.toLowerCase()?
"BETATESTERS2":a,$.ajax({type:"GET",url:_.sprintf("/accounts/billing/coupons/%s/%s",this.plan.get("code"),a),dataType:"json",timeout:6E4,success:_.bind(function(d){this.coupon=d.data[0].coupon;this.set({coupon_code:a});this.trigger("change:coupon_code",this)},this),error:_.bind(function(){this.trigger("error:coupon_code")},this)}))}}),h=e.extend({url:"/accounts/billing/billing_info/"}),f=D.Backbone.FormView.extend({events:{"change .field-year":"update_month","change .field-country":"update_country",
"change .field-vat_number":"update_vat_number","click .form .current":"show_available_plans","click .plans-info .current":"hide_available_plans","click .recurly-plan ":"update_plan","click .confirm .cancel":"show_form_view","click .contact":"show_contact_tab","click .send":"send"},vat_messages:{es:{placeholder:"CIF",tooltip:"your CIF as it should appear on the invoice"},eu:{placeholder:"VIES VAT Code",tooltip:"if you provide a valid VAT Information Exchange System  number, you will not be charged VAT for your subscription"},
other:{placeholder:"VAT number",tooltip:"only applicable to EU customers"}},initialize:function(){this.visible=!0;D.bb.FormView.prototype.initialize.apply(this,arguments);this.listenTo(this.model,"change:country",this.country_updated);this.listenTo(this.model,"error:country",this.show_country_error);this.listenTo(this.model,"change:plan_code",this.plan_code_updated);this.listenTo(this.model,"change:coupon_code",this.coupon_code_updated);this.listenTo(this.model,"error:coupon_code",this.show_coupon_error);
this.listenTo(this.model,"change:vat_number",this.vat_number_updated);this.listenTo(D.bb.account,"change",this.account_updated)},template_data:function(){this.model.totals=this.model.calculate_totals(this.model.plan,this.model.coupon);var a=_.map(D.bb.account.available_plans(),function(a){return a.toJSON()}),d=_.max(D.bb.plans.map(function(a){return a.get("features").create_dashboard})),b=!1,e=0;d<D.bb.dashboards.size()&&(b=!0,e=D.bb.dashboards.size()-d);return _.extend(this.model.toJSON(),{has_trial_expired:D.bb.account.get("has_trial_expired"),
has_recurly_account_expired:D.bb.account.get("has_recurly_account_expired"),plan:this.model.plan.toJSON(),plan_exceeded:b,max_dashboards_num:d,to_delete:e,totals:this.model.totals,available_plans:a,is_eu:D.u.Billing.is_country_in_eu(this.model.get("country")),discount_applied:this.model.coupon?!0:!1,coupon_description:this.model.coupon&&this.model.coupon.description,coupon_error:!1,coupon:this.model.coupon,submit_html:this.submit_messages.send})},render_child_template:function(a,d){var b=a.tmplItem();
b.update&&(d=d||{},b.data=this.template_data(),_.extend(b.data,d),b.update())},render_fields:function(){this.fields={};_.each(this.model.params,function(a,d){this.fields[d]=$.tmpl(a.template,_.extend({name:d,value:this.model.get(d)},a.template_data));var b=a.target_class&&this.$(a.target_class);this.fields[d].appendTo(b||this.$("fieldset"));a.template_data&&a.template_data.tooltip&&this.setup_tooltip(this.fields[d])},this);this.model.trigger("change:country");return this},set_from_fields:function(a){this.errors=
{};_.each(this.fields,_.bind(function(a,d){_.reduce(this.model.params[d].validators,function(d,b){return d&&b(a)},!0)||(this.errors[d]=D.u.Billing.errors[d])},this));return _.isEmpty(this.errors)?D.bb.FormView.prototype.set_from_fields.apply(this):!1},update_month:function(a){a=moment();var d=a.year(),b=a.month();if(parseInt(this.$(".field-year").val())===d){var e=!1;this.$(".field-month").find("option").each(function(){parseInt($(this).val())<=b?$(this).attr("disabled",!0):($(this).removeAttr("disabled"),
e||(e=!0,$(this).attr("selected",!0)))})}else this.$(".field-month").find("option").removeAttr("disabled");this.$(".field-month").trigger("liszt:updated")},update_country:function(a){this.model.validate_country(this.$(".field-country").val())},update_plan:function(a){a=$(a.currentTarget).attr("id");if(a!==this.model.get("plan_code")){var d=D.bb.recurly_plans.get(a),b=D.bb.plans.get(d.get("plan_label")),e=b.cannot_choose();e?(analytics.track("plan change error",{selected_plan:a}),b.item_view.show_error(e)):
(analytics.track("plan changed",{selected_plan:a}),this.model.plan=d,this.model.set({plan_code:a}))}},update_vat_number:function(a){a=this.$(".field-vat_number").val();this.model.set({vat_number:a})},country_updated:function(a){a=this.model.get("country");this.model.set({currency:D.u.b.is_country_in_eu(a)?"EUR":"USD"});var d=this.$(".send");d.hasClass("error")&&(d.removeAttr("disabled"),d.removeClass("error"),this.update_submit_button("send"));d="other";D.u.Billing.is_vat_number_applicable(a)&&(d=
"ES"===a?"es":"eu");a=this.vat_messages[d];$('input[type="text"]',this.fields.vat_number).attr("placeholder",a.placeholder);$(".tooltip span",this.fields.vat_number).html(a.tooltip);this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"))},plan_code_updated:function(a){this.hide_available_plans();this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"));this.render_child_template(this.$(".plan-list"))},vat_number_updated:function(a){this.render_child_template(this.$(".current"));
this.show_glow(this.$(".current"));this.render_child_template(this.$(".plan-list"))},account_updated:function(a){this.$(".field-first_name").val(D.bb.account.get("first_name"));this.$(".field-last_name").val(D.bb.account.get("last_name"));this.$(".field-company_name").val(D.bb.account.get("company"));a=this.$(".field-country");a.val(D.bb.account.get("country"));a.trigger("liszt:updated");this.model.set({country:D.bb.account.get("country")})},show_available_plans:function(a){D.bb.account.get("has_recurly_account_expired")||
(a=$(a.currentTarget),a.hasClass("disabled")||a.hasClass("exceeded")||(this.$(".form").fadeOut(_.bind(function(){this.$(".loading-plans-info").fadeIn(_.bind(function(){D.bb.account.refresh_alert_count().done(_.bind(function(){this.$(".send").fadeOut();this.$(".loading-plans-info").fadeOut(_.bind(function(){this.$(".plans-info").fadeIn()},this))},this))},this))},this)),analytics.track("plan change button")))},hide_available_plans:function(a){this.$(".plans-info li .error").fadeOut(_.bind(function(){this.$(".plans-info li").removeClass("disabled");
this.$(".plans-info li .detail").fadeIn()},this));this.$(".plans-info").fadeOut(_.bind(function(){this.$(".form").fadeIn();this.$(".send").fadeIn()},this));void 0!==a&&analytics.track("plan keep button")},show_form_view:function(a){this.$(".confirm").fadeOut(_.bind(function(){this.restore_previous_plan();this.$(".form").fadeIn(_.bind(function(){this.show_server_errors();this.update_submit_button("send")},this))},this));return!1},restore_previous_plan:function(){var a=this.model.get("previous_plan_code");
if(a){var d=D.bb.recurly_plans.get(a);this.model.plan=d;this.model.set({plan_code:a},{silent:!0});this.model.unset("previous_plan_code");this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"));this.render_child_template(this.$(".plan-list"))}},show_confirmation_view:function(){this.$(".form").fadeOut(_.bind(function(){this.clean_server_errors();this.render_child_template(this.$(".confirm"));this.$(".confirm").fadeIn();this.update_submit_button("confirm_subscription")},this))},
show_contact_tab:function(a){this.container.show_tab("credentials")},update_submit_button:function(a){var d=this.submit_messages[a],b=this.$(".send");(b.find("span").length?b.find("span"):b).html(d).val(d);this.events["click .send"]=a;this.delegateEvents()},show_glow:function(a,d){d=d||2E3;a.hasClass("updated")||(a.switchClass("idle","updated",0),setTimeout(_.bind(function(){a.switchClass("updated","idle",0)},a),d))},show_country_error:function(){var a=this.$(".field-country + .chzn-container > .chzn-single");
this.show_glow(a);a=this.$(".send");a.hasClass("error")||(a.attr("disabled","disabled"),a.addClass("error"),this.update_submit_button("show_country_error"))},show_server_errors:function(){if(this.errors){var a=this.$(".server-errors");_.each(this.errors,function(d){a.append(_.sprintf("<li>%s</li>",d))});this.$("h3.title").length?this.$("h3.title").fadeOut(_.bind(function(){this.$(".server-errors").fadeIn()},this)):this.$(".server-errors").fadeIn()}},clean_server_errors:function(){this.errors=void 0;
this.$(".server-errors").hide();this.$("h3.title").fadeIn();this.$(".server-errors").empty()}}),b=f.extend({template:"subscription",events:{"click .coupon-info .show":"show_coupon_code","click .coupon-info .applied":"remove_coupon_code","click .coupon-info .apply a":"update_coupon_code","keyup input.field-number":"track_cc_input"},submit_messages:{send:'continue to confirmation</br><span class="note">you won\'t be charged until you confirm your order</span>',confirm_subscription:"confirm your subscription",
show_billing_tab:"check your billing info",show_country_error:'The country of your credit card must be the same as the one you set in the <a class="contact">contact information</a>. Please, fix it and try again.'},track_cc_input_triggered:!1,initialize:function(){f.prototype.initialize.apply(this,arguments);_.extend(this.events,f.prototype.events)},update_coupon_code:function(a){if((a=this.$(".field-coupon_code").val())&&"Code"!==a){var d=this.$(".coupon-info .apply a");this.sending=D.u.sending(d,
"");this.sending.blocked||(this.$(".send").attr("disabled","disabled"),this.model.validate_coupon(a))}},remove_coupon_code:function(a){this.model.coupon=void 0;this.coupon_code_updated()},coupon_code_updated:function(a){this.sending.complete;this.$(".send").removeAttr("disabled");this.render_child_template(this.$(".current"));this.render_child_template(this.$(".coupon-info"));this.show_glow(this.$(".coupon-info .applied"));this.show_glow(this.$(".current"))},show_coupon_code:function(a){this.$(".coupon-info .show").fadeOut(_.bind(function(){this.$(".coupon-info .apply").fadeIn()},
this));analytics.track("coupon button")},show_billing_tab:function(a){this.container.show_tab("billing")},send:function(a){this.clean_server_errors();analytics.track("subscription continue button");this.visible?this.set_from_fields()?this.check_tos()?(analytics.track("subscription pending confirmation"),(a=this.$(".field-coupon_code").val())&&"Code"!==a&&!this.model.get("coupon_code")?this.update_coupon_code():this.show_confirmation_view()):(analytics.track("subscription TOS not accepted"),this.errors=
[D.u.Billing.errors.tos],this.show_server_errors()):(analytics.track("subscription confirmation error"),this.show_errors(this.errors)):this.show_billing_tab("billing")},confirm_subscription:function(a){a=$(a.currentTarget);this.sending=D.u.sending(a,"creating subscription");this.sending.blocked||(analytics.track("subscription confirm button"),this.model.save({},{complete:this.sending.complete,success:_.bind(function(a,d){this.update_on_changes(d)},this),error:_.bind(function(a,d){analytics.track("subscription creation error");
try{this.errors=JSON.parse(d.responseText)}catch(b){this.errors={}}this.errors=this.errors.errors?D.u.Billing.flatten_errors(this.errors.errors):["Unknown error processing transaction. Please try again later."];this.show_form_view()},this)}))},update_on_changes:function(a){a&&D.bb.account.set(a);D.bb.account.set_plan(this.model.plan);this.$(".confirm").fadeOut(_.bind(function(){this.visible=!1;this.container.add_tab("billing");this.container.add_tab("invoices");this.$(".sent").fadeIn();this.update_submit_button("show_billing_tab");
this.container.$(".logout").attr("href","/");this.container.$(".logout").text("close");D.bb.preferences.remove_upgrade_now();$("menu#preferences .subscription").fadeOut(function(){D.bb.dashboards.current.view.adjust_preferences_bar();$("menu#preferences .subscription").remove()});$("menu#preferences .trial-expired").fadeOut(function(){D.bb.dashboards.current.view.adjust_preferences_bar();$("menu#preferences .trial-expired").remove()})},this))},check_tos:function(){var a=this.$("#tos_check");return D.u.is_checked(a)},
show_coupon_error:function(a){this.sending.complete;this.$(".send").removeAttr("disabled");this.render_child_template(this.$(".coupon-info"),{coupon_error:!0});this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"))},track_cc_input:function(a){this.track_cc_input_triggered||(a=$(a.currentTarget).val())&&4<a.length&&(analytics.track("subscription fill in credit card info"),this.track_cc_input_triggered=!0)}}),g=f.extend({template:"billing_info",submit_messages:{send:"update your billing info",
confirm_plan_change:"change your plan",show_billing_tab:"back to billing info",show_country_error:'The country of your credit card must be the same as the one you set in the <a class="contact">contact information</a>. Please, fix it and try again.'},show_billing_tab:function(a){this.$(".sent, .plan-changed").fadeOut(_.bind(function(){this.$(".form").fadeIn(_.bind(function(){this.visible=!0;this.update_submit_button("send")},this))},this))},send:function(a){this.visible?(this.clean_server_errors(),
this.set_from_fields()?(a=$(a.currentTarget),this.sending=D.u.sending(a,"updating billing info"),this.sending.blocked||this.model.save({},{complete:this.sending.complete,success:_.bind(function(a,d){this.update_on_changes(d)},this),error:_.bind(function(a,d){analytics.track("updating billing error");try{this.errors=JSON.parse(d.responseText)}catch(b){this.errors={}}this.errors=this.errors.errors?D.u.Billing.flatten_errors(this.errors.errors):["Unknown error processing transaction. Please try again later."];
this.show_server_errors();this.update_submit_button("send")},this)})):(this.show_errors(this.errors),this.sending.complete())):this.show_billing_tab("billing")},update_on_changes:function(a){a&&D.bb.account.set(a);D.bb.account.set_plan(this.model.plan);this.$(".form").fadeOut(_.bind(function(){var a=this.$(".field-number"),d=a.val().replace(/\D/g,"");a.attr("placeholder",_.sprintf("XXXX-XXXX-%s",d.slice(-4)));a.val("");this.$(".field-verification_value").val("");this.model.set({number:"",verification_value:""});
this.$(".sent").fadeIn();this.update_submit_button("show_billing_tab");this.visible=!1;$("menu#preferences .subscription-expired").fadeOut(function(){D.bb.dashboards.current.view.adjust_preferences_bar();$("menu#preferences .subscription-expired").remove()})},this))},update_on_plan_changes:function(a){a&&D.bb.account.set(a);D.bb.account.set_plan(this.model.plan);this.$(".confirm").fadeOut(_.bind(function(){this.render_child_template(this.$(".current"));this.show_glow(this.$(".current"));this.render_child_template(this.$(".plan-list"));
this.$(".plan-changed").fadeIn();this.update_submit_button("show_billing_tab")},this))},plan_code_updated:function(a,d){var b=this.model.previous("plan_code"),e=D.bb.recurly_plans.get(b),f=this.model.calculate_totals(e),g={previous_plan:e.toJSON(),previous_totals:f};this.model.set({previous_plan_code:b});this.$(".plans-info li .error").fadeOut(_.bind(function(){this.$(".plans-info li").removeClass("disabled");this.$(".plans-info li .detail").fadeIn()},this));this.$(".plans-info").fadeOut(_.bind(function(){this.render_child_template(this.$(".confirm"),
g);this.update_submit_button("confirm_plan_change");this.$(".confirm").fadeIn();this.$(".send").fadeIn();this.visible=!1},this))},confirm_plan_change:function(a){a=$(a.currentTarget);this.plan_change_sending=D.u.sending(a,"changing plan");this.clean_server_errors();this.plan_change_sending.blocked||this.model.save({},{url:"/accounts/billing/plan-update/",complete:this.plan_change_sending.complete,success:_.bind(function(a,d){this.update_on_plan_changes(d)},this),error:_.bind(function(a,d){try{this.errors=
JSON.parse(d.responseText)}catch(b){this.errors={}}this.errors=this.errors.errors?D.u.Billing.flatten_errors(this.errors.errors):["Unknown error processing transaction. Please try again later."];this.show_form_view()},this)})}}),a=D.Backbone.Model.extend({idAttribute:"uuid",defaults:{uuid:void 0,state:void 0,invoice_number:void 0,invoice_id:void 0,po_number:void 0,vat_number:void 0,subtotal_in_cents:void 0,tax_in_cents:void 0,total_in_cents:void 0,currency:void 0,created_at:void 0,line_items:void 0,
transactions:void 0},initialize:function(){this.item_view=new q({model:this})}}),d=D.Backbone.Model.extend({idAttribute:"code",initialize:function(){this.usd_cost=new D.u.Billing.Cost(100*this.get("usd_price"),"USD");this.eur_cost=new D.u.Billing.Cost(100*this.get("eur_price"),"EUR")},cost_with_taxes:function(a,d){if(D.u.b.is_vat_charge_applicable(a,d)){var b=this.eur_cost.mult(D.u.b.vat_percent/100);return{vat:b,eur_cost:this.eur_cost.add(b)}}},toJSON:function(){var a=D.Backbone.Model.prototype.toJSON.apply(this),
d=D.bb.account.get("country"),b=D.bb.account.get("vat_number");return _.extend(a,this.cost_with_taxes(d,b))}}),l=D.Backbone.Model.extend({idAttribute:"label",initialize:function(){this.item_view=new v({model:this})},cannot_choose:function(){var a=this.get("features").create_dashboard,d=D.bb.dashboards.billable_dashboards();if(a&&d>a)return d-=a,a=D.u.number_to_text(a),d=D.u.number_to_text(d),_.sprintf("This is a %s-dashboard plan, you'll have to delete %s of yours. Will that be enough?",a,d);a=D.bb.account.available_widgets_count(this);
return 0>a.total||0>a.custom?"This plan has a limited number of widgets, you'll have to remove some of the widgets you created.":!D.bb.account.has_premium_directory(this)&&D.bb.dashboards.uses_premium_widgets()?"This plan does not premium services, you'll have to remove the widgets from premium services":!D.bb.account.has_tvmode_carousel(this)&&1<D.bb.dashboards.carousel_count()?"This plan does not include TV Mode Reel, you'll have to remove all the dashboards from the reel":0>D.bb.account.available_alerts_count(this)?
"This plan has a limited number of alerts, you'll have to remove some of the alerts you created.":D.bb.account.check_accounts_per_service(this)?!D.bb.account.can_use_ip_access_rules(this)&&0<D.bb.dashboards.ip_access_rules_count()?"This plan does not include dashboard IP access rules, you'll have to remove all rules.":null:"This plan limits the accounts linked per service, you'll have to remove some of your accounts."},toJSON:function(){return _.extend(D.Backbone.Model.prototype.toJSON.apply(this),
{monthly_plan_code:this.get("monthly").code,yearly_plan_code:this.get("yearly").code,monthly_usd_cost:new D.u.b.Cost(100*this.get("monthly").usd_price,"USD"),yearly_usd_cost:new D.u.b.Cost(100*this.get("yearly").usd_price,"USD"),monthly_eur_cost:new D.u.b.Cost(100*this.get("monthly").eur_price,"EUR"),yearly_eur_cost:new D.u.b.Cost(100*this.get("yearly").eur_price,"EUR")})}}),q=D.Backbone.View.extend({template:"plan_invoice_item",template_data:function(){var a=moment(this.model.get("created_at"));
return _.extend(this.model.toJSON(),{url:"/accounts/billing/"+this.model.get("invoice_id")+"/pdf/",total:(this.model.get("total_in_cents")/100).toFixed(2),date:a.format("dddd, MMMM Do YYYY")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this}}),v=D.Backbone.View.extend({events:{"click .error":"hide_error"},initialize:function(a){this.model=a.model},show_error:function(a,d){d=d||3E3;this.setElement($(_.sprintf("#%s",this.model.get("label"))));this.$(".detail").fadeOut(_.bind(function(){this.$el.addClass("disabled");
var b=this.$(".error");b.children("span").text(a);b.fadeIn(_.bind(function(){setTimeout(_.bind(function(){this.hide_error()},this),d)},this))},this))},hide_error:function(){var a=this.$el||$(_.sprintf("#%s",this.model.get("label")));this.setElement(a);this.$(".error").fadeOut(_.bind(function(){this.$el.removeClass("disabled");this.$(".detail").fadeIn()},this))}}),a=D.Backbone.Collection.extend({model:a,url:"/accounts/billing/invoices/",comparator:function(a){return-1*moment(a.get("created_at")).unix()},
parse:function(a){return a.data}}),l=D.Backbone.Collection.extend({model:l,comparator:function(a){return(a=a.get("monthly"))?parseFloat(a.usd_price,2):0}}),d=D.Backbone.Collection.extend({model:d,comparator:function(a){return-parseInt(a.get("usd_price"),2)}}),l=new l,d=new d;_.extend(Ducksboard.Backbone,{SubscriptionParams:k,BillingInfoParams:h,SubscriptionFormView:b,BillingInfoFormView:g,InvoiceList:a,plans:l,recurly_plans:d})})();
(function(){var e={condition_params:{greater_than:{limit:{template:"input_text",cast:parseFloat}},lower_than:{limit:{template:"input_text",cast:parseFloat}},equals_to:{limit:{template:"input_text",cast:parseFloat}},value_changes:{},value_percentually_changes:{limit:{template:"input_text",cast:parseFloat}},status_equals:{limit:{template:"select",template_data:{options:[{value:"0",display_name:"OK"},{value:"1",display_name:"ERROR"},{value:"2",display_name:"WARNING"},{value:"3",display_name:"UNKNOWN"}]}}},
message_contains:{value:{template:"input_text"}}},action_params:{send_mail:{to_addr:{template:"input_text"}},webhook:{url:{template:"input_text",template_data:{placeholder:"Webhook url"}}}}},k=D.Backbone.Model.extend({idAttribute:"id",initialize:function(e,a){this.collection=a.collection;this.item_view=new b({model:this});this.form_view=new f({model:this})}}),h=D.Backbone.Collection.extend({model:k,initialize:function(b,a){this.widget=a.widget},url:function(){return _.sprintf("%s/alerts/",this.widget.url())},
parse:function(b){return b.data}}),f=D.Backbone.View.extend({template:"widget_notification_form",events:{"change .field-layout":"slot_select","change .field-condition_kind":"condition_select","change .field-action_kind":"action_select","submit form":"save_notification","click .back":"close"},initialize:function(b){this.model=b.model;this.condition_kinds=_.groupBy(D.config.condition_kinds,function(a){return a.slot_type})},template_data:function(){return _.extend(this.model.toJSON(),{slots:this.model.collection.widget.slots.filter(function(b){return this.condition_kinds[b.get_slot_type()]},
this).map(function(b){s=b.toJSON();return _.isString(s.subtitle)&&$.trim(s.subtitle).length?s:_.extend(s,{subtitle:b.get_slot_type()})}),action_kinds:D.config.action_kinds,edition:!this.model.isNew()})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$field_layout=this.$(".field-layout");this.$field_condition_kind=this.$(".field-condition_kind");this.$field_action_kind=this.$(".field-action_kind");this.$condition_params=this.$(".condition-params");this.$action_params=
this.$(".action-params");this.$server_error=this.$(".server-error");this.slot_select();this.action_select();return this},slot_select:function(){var b=this.$field_layout.val(),a=this.model.collection.widget.slots.get(b).get_slot_type(),b=this.$field_condition_kind,d=this;b.find("option").remove();a=$.map(this.condition_kinds[a],function(a,b){var e=$('<option value="'+a.kind+'">'+a.display_name+"</option>");d.model.get("condition_kind")==e.val()&&e.attr("selected","selected");return e[0]});$(a).appendTo(b);
b.trigger("liszt:updated");this.condition_select()},condition_select:function(){var b=this.$field_condition_kind.val();this.change_params("condition_params",b,this.$condition_params)},action_select:function(){var b=this.$field_action_kind.val();this.change_params("action_params",b,this.$action_params)},change_params:function(b,a,d){d.html("");_.each(e[b][a],function(e,f){action=$.tmpl(e.template,_.extend({name:f,value:this.get_param_value(b,a,f)},_.isFunction(e.template_data)?e.template_data():e.template_data));
d.append(action)},this)},cb_appended:function(b){this.$("input[placeholder], textarea[placeholder]").placeholder();this.$("select").chosen({disable_search_threshold:10})},params_field_values:function(b,a){var d={};_.each(e[b][a],function(a,b){d[b]=this.$(".field-"+b).val()},this);return d},field_values:function(){var b=this.$field_condition_kind.val(),a=this.$field_action_kind.val();return{layout:this.$field_layout.val(),condition_kind:b,condition_params:this.params_field_values("condition_params",
b),action_kind:a,action_params:this.params_field_values("action_params",a)}},set_from_fields:function(){var b=_.map(this.field_values(),function(a,d){return this.model.set(d,a)},this);return _.all(b,_.identity)},get_param_value:function(b,a,d){if(!this.model.isNew()){var f=this.model.get(b)[d];if(f)return(b=e[b][a][d].cast)?b(f):f}},save_notification:function(b){b.preventDefault();this.clean_server_error();if(this.set_from_fields()){if(b=$(b.currentTarget).find("button"),this.sending=D.u.sending(b,
"sending"),!this.sending.blocked){var a=this.model.isNew();this.model.save({},{complete:this.sending.complete,success:_.bind(function(d,b){var e=a?"added":"updated";D.bb.account.refresh_alert_count().done(_.bind(function(){this.close();this.model.collection.trigger(e,d)},this))},this),error:_.bind(function(a,b){b=JSON.parse(b.responseText);errors=b.errors;_.isString(errors)?this.show_server_error(b.code,errors):this.show_errors(b.errors)},this)})}}else this.show_errors(this.errors)},show_server_error:function(b,
a){101===b&&(a="This alert already exists.");this.$server_error.append(_.sprintf("<span>%s</span>",a)).fadeIn()},clean_server_error:function(b){this.$server_error.hide().empty()},close:function(b){b&&b.preventDefault();this.$el.fadeOut(function(){$(this).data("related_view").fadeIn();$(this).remove()})},remove:function(){this.$("select").unchosen();D.Backbone.View.prototype.remove.apply(this)}}),b=D.Backbone.View.extend({template:"widget_notification_item",events:{"click .button-edit":"edit_notification",
"click .button-delete":"show_confirmation"},initialize:function(b){this.model=b.model},template_data:function(){var b=_.find(D.config.condition_kinds,_.bind(function(a){return a.kind===this.model.get("condition_kind")},this)),a=_.find(D.config.action_kinds,_.bind(function(a){return a.kind===this.model.get("action_kind")},this)),d=this.model.collection.widget.slots.get(this.model.get("layout")),e=this.get_params_values("condition_params",b.kind),b=[d.get("subtitle")||d.get_slot_type(),b.display_name].concat(e).join(" "),
d=this.get_params_values("action_params",a.kind).join(" ");return _.extend(this.model.toJSON(),{condition:b,action:d,action_name:a.display_name})},get_params_values:function(b,a){var d=this.model.get(b);return _.map(e[b][a],function(a,b){return"select"===a.template?_.find(a.template_data.options,function(a){return a.value===d[b]}).display_name:a.cast?a.cast(d[b]):d[b]},this)},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},edit_notification:function(b){b.preventDefault();
var a=this.$el.closest("section").find(".notifications-main-view"),d=this.model.form_view.render().$el.hide();d.data("related_view",a);a.fadeOut(_.bind(function(){d.insertBefore(a).fadeIn();this.model.form_view.cb_appended()},this))},show_confirmation:function(b){b.preventDefault();this.confirm_view=this.$el.confirm({text:"Sure you want to delete this alert?",continue_text:"Delete",discard_text:"Keep",continue_action:_.bind(this.destroy,this)})},destroy:function(){var b=this.model,a=this.model.collection;
this.model.destroy({wait:!0,success:_.bind(function(){D.bb.account.refresh_alert_count().done(function(){a.trigger("removed",b)})},this)})},remove:function(){this.confirm_view&&this.confirm_view.remove();D.Backbone.View.prototype.remove.apply(this)}});_.extend(Ducksboard.Backbone,{Notification:k,NotificationList:h})})();
(function(){var e=D.Backbone.Model.extend({initialize:function(b,a){this.slot=a.slot;this.widget=a.widget;this.view_cls=k},load_service_params:function(){return!1},url:function(){return _.sprintf("/push/values/%s/",this.slot.get("label"))}}),k=D.Backbone.FormView.extend({template:"slot_data",events:{"click .button":"send_data"},template_data:function(){return _.extend(this.model.slot.toJSON(),{unit:this.model.slot.send_data_unit})},send_data:function(b){var a=D.u.sending($(b.currentTarget),"sending");
a.blocked||(this.set_from_fields(),this.model.save({},{complete:function(){a.complete()},success:_.bind(function(a,b){this.clear()},this),error:_.bind(function(a,b){this.show_response_errors(b)},this)}))},render:function(){D.Backbone.FormView.prototype.render.apply(this,arguments);this.$(".datepicker-wrap").timestamp_picker();this.clear();return this}}),e=D.Backbone.Model.extend({idAttribute:"layout",started:!1,initial_data_type:void 0,initial_msg_id:void 0,allowed_timespans:["daily","weekly","monthly",
"quarterly","yearly"],last_value:void 0,send_data_cls:e,send_data_params:void 0,send_data_unit:void 0,csv_valid_types:["count","percentage","relative"],feedback_while_fetching:!0,initialize:function(b,a){this.widget=a.widget;"custom"===this.widget.service_kind&&(this.url_view_cls=f,this.send_data=new this.send_data_cls({},{slot:this,widget:this.widget}),this.send_data.params=this.send_data_params);this.on("change:label",function(){this.old_label=this.previous("label")});this.widget.timezone!==D.bb.account.get("timezone")&&
(this.extra_timezone=this.widget.timezone);this.listenTo(D.ws,"websocket:reconnection",this.start);this.listenTo(D.ws,"websocket:reconnection",this.subscribe)},in_current_dashboard:function(){var b=this.widget.dashboard;return"pc"!==D.d.current.id?!0:b&&"embed"!==b.kind.id&&b!==D.bb.dashboards.current?!1:!0},should_start:function(){return this.started?!1:this.should_subscribe()},should_subscribe:function(){if(!this.in_current_dashboard()||this.widget.isNew())return!1;if(!this.get("label"))throw Error("Tried to start slot "+
this.id+" of widget "+(this.widget?this.widget.constructor.prototype.kind:"?")+" (ID "+(this.widget?this.widget.id:"?")+") but it has no label");return!0},start:function(){this.should_start()&&D.ws.connected&&(this.get_initial_data(),this.started=!0)},bind_data_source:function(){this.listenTo(D.ws,"data:"+this.get("label"),this._update);this.listenTo(D.ws,"clean:"+this.get("label"),this.clean_data);this.subscribe()},subscribe:function(){this.should_subscribe()&&D.ws.connected&&(D.ws.subscribe(this.get("label")),
this.extra_timezone&&D.ws.timezone(this.extra_timezone))},unsubscribe:function(b){b=b||this.old_label||this.get("label");this.stopListening();b&&D.ws.unsubscribe(b)},update:function(b){return b},display:function(b){},clear_enqueued:function(){this.enqueued_update=null},display_enqueued:function(){this.update_running=!1;this.enqueued_update&&(this._display(this.enqueued_update),this.clear_enqueued())},_update:function(b){var a=this.update(b);this.update_running&&a&&(this.enqueued_update=a);!this.update_running&&
a&&this._display(a);this.set_last_value(b)},_display:function(b){this.update_running=!0;this.view.remove_loading_layer();this.display(b)},clean_data:function(){},tick:function(b){},get_initial_data:function(){var b=this._prepare_initial_params();this.initial_msg_id=D.ws.fetch(this.get("label"),b);this.listenTo(D.ws,"fetched:"+this.initial_msg_id,this.got_initial_data)},got_initial_data:function(b){this.stopListening(D.ws,"fetched:"+this.initial_msg_id);delete this.initial_msg_id;this._process_initial_data(b);
b=this.extra_timezone?_.sprintf("tick:%s",this.extra_timezone):"tick";this.listenTo(D.ws,b,this.tick);D.ws.connected&&this.bind_data_source()},process_initial_data:function(b){},_process_initial_data:function(b){this.view&&(this.process_initial_data(b),this.view.remove_loading_layer())},data_is_empty:function(b){return!_.any(_.pluck(b,"value"))},get_last_value:function(b){return _.isArray(b)?_.last(_.pluck(b,"value")):b.value},set_last_value:function(b){b=this.get_last_value(b);b!==this.last_value&&
this.widget.view.notify();this.last_value=b},get_data_source_kind:function(){return D.Backbone.widget_kinds[this.widget.kind].prototype.slots[this.get("layout")].data_source_kind},get_slot_type:function(){return D.Backbone.widget_kinds[this.widget.kind].prototype.slots[this.get("layout")].slot_type},get_slot_kind:function(){return D.Backbone.widget_kinds[this.widget.kind].prototype.slots[this.get("layout")].slot_kind},_prepare_initial_params:function(b){b=this.widget.timezone.replace(" ","_");b={endpoint:this.get("label"),
timezone:b};switch(this.initial_data_type){case "last":b=_.extend(b,{kind:"last"},this._prepare_params_last());break;case "since":b=_.extend(b,{kind:"since"},this._prepare_params_since());break;case "timespan":b=_.extend(b,{kind:"timespan"},this._prepare_params_timespan());break;default:throw Error('slot subclass must set initial_data_type to "last", "since" or "timespan"');}return b},_prepare_params_since:function(){return{seconds:this.get("since")}},_prepare_params_last:function(){return{count:this.get("last")}},
_prepare_params_timespan:function(){_.include(["daily","weekly","monthly","quarterly","yearly"],this.get("timespan"))||$.error("invalid timespan "+this.get("timespan"));return{timespan:this.get("timespan")}},is_visible:function(){return D.bb.dashboards.current&&this.widget.dashboard===D.bb.dashboards.current},is_exportable_to_csv:function(){return _.contains(this.csv_valid_types,this.get_slot_type())}}),h=D.Backbone.View.extend({template_data:function(){return _.extend(this.model.toJSON(),{data_source_kind:this.model.get_data_source_kind()})},
render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$el.appendTo(this.model.widget.view.$(".inner"));return this},add_loading_layer:function(b){b||(b=this.model.widget);slot=b.slots.at(b?0:this);if("default"!==b.dashboard.kind.get("kind")!==!0&&"custom"!==b.service.kind&&!1!==slot.feedback_while_fetching&&(b.view.$el.addClass("is-loading"),!b.view.$loading)){var a=$.tmpl("widget_fetching_data",{widget_id:b.id});b.view.$loading=a;a.appendTo(b.view.$el)}},remove_loading_layer:function(){var b=
this.model.widget.view;if(b.$loading){var a=function(){b.$loading.remove();delete b.$loading};Modernizr.csstransitions?b.$loading.transEnd("fetching_data_layer",a()):a();b.$el.removeClass("is-loading")}},add_context_action:function(b,a){var d=b.originalEvent;d.ducksboard_actions||(d.ducksboard_actions=[]);d.ducksboard_actions.push(a)}}),f=D.Backbone.View.extend({template:"slot_url",url_pattern:function(){return _.sprintf("%s/v/",D.config.push_host)},events:{"click .label":"edit","click .cancel":"cancel"},
initialize:function(b){this.model=b.model;this.pull_param=b.pull_param},template_data:function(){return _.extend(this.model.toJSON(),{url_pattern:this.url_pattern,has_send_data:this.model.send_data_params})},render:function(){this.url_pattern();this.setElement($.tmpl(this.template,this.template_data()));this.model.send_data&&(this.send_data_view=new this.model.send_data.view_cls({model:this.model.send_data}),this.send_data_view.render(!0).$el.appendTo(this.$(".send-value")));return this},edit:function(b){var a=
$(b.target).closest(".m-editable-url");a.find(".more").smartFadeOut();a.find(".url").smartFadeOut(function(){a.find("fieldset").smartFadeIn()})},cancel:function(b){var a=$(b.target).closest(".m-editable-url");a.find("fieldset").smartFadeOut(_.bind(function(){a.find(".field-label").val(this.model.get("label"));a.find(".url").width("").smartFadeIn();this.resize()},this))},set_from_input:function(){var b=this.$(".field-label").val(),a=this.model.get("label");b&&b!==a&&this.model.set({label:b})},resize:function(b){b||
(b=this.$(".url"));300<b.actual("width")&&(b.width(276).siblings(".more").show(),b.siblings(".more").data("tooltip")||D.bb.FormView.prototype.setup_tooltip(b.parent("div")))},remove:function(){this.send_data_view.remove();Backbone.View.prototype.remove.apply(this)}}),b=D.Backbone.Collection.extend({model:e,comparator:function(b){return b.get("layout")}});_.extend(Ducksboard.Backbone,{Slot:e,SlotView:h,SlotUrlView:f,SlotList:b,slot_kinds:{},slot_views:{},CustomDataFormView:k})})();
(function(){var e=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1,no_appearance:!0},feedback_while_fetching:!1,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this})},process_initial_data:function(e){(e=_.last(e))&&this.view.update_text(e)},clean_data:function(){this.view.remove()},display:function(e){this.view.update_text(e)}}),k=D.Backbone.Slot.extend({poll_id:void 0,POLL_FREQUENCY:3E5,defaults:{no_appearance:!0},feedback_while_fetching:!1,
initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this})},start:function(){this.in_current_dashboard()&&this.poll_data()},add_timestamp:function(e,b){return/\?.+$/.test(e)?e+"&"+b:e+"?"+b},get_data:function(){return{timestamp:moment().unix(),value:{content:this.widget.data_source.get("content")}}},poll_data:function(){this.clear_timers();data=this.get_data();this.view.update_text(data);this.poll_id=setTimeout($.proxy(function(){this.poll_data()},
this),this.POLL_FREQUENCY)},clear_timers:function(){this.poll_id&&window.clearTimeout(this.poll_id)},unsubscribe:function(){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers()}}),h=D.Backbone.SlotView.extend({template:"slot_text",events:{"click .content a":"prevent"},update_text:function(e){this.$content=this.$(".content");this.$content.smartFadeOut(_.bind(function(){this.update_content(e.value.content);this.$content.smartFadeIn(_.bind(this.model.display_enqueued,this.model))},
this))},prevent:function(e){e.stopImmediatePropagation()},update_content:function(e){this.$content.html(D.u.bbcode(e))}});_.extend(Ducksboard.Backbone.slot_kinds,{StaticText:k,Text:e})})();
(function(){var e=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new k({model:this})},process_initial_data:function(e){e[0]&&this.view.render_histogram(e[0].value.board)},display:function(e){this.view.update_histogram(e.value.board,!1)},clean_data:function(){this.view.remove_items()}}),k=D.Backbone.SlotView.extend({template:"slot_histogram",col_limits:{1:5,2:10},initialize:function(e){this.item_view=
e.item_view||h},render_histogram:function(e){this.$(".histogram").smartFadeOut(_.bind(function(){this.update_histogram(e,!0)},this))},update_histogram:function(e,b){this.$list=this.$(".histogram");this.$cols=this.$list.find("li");var g=this.col_limits[this.model.widget.get("width")];_.each(e,function(a){a.value=a.values[0]||0});e=D.u.sort_desc_by_value(e).slice(0,g);this.$cols.filter(":gt("+(e.length-1)+")").remove();_.each(e,_.bind(function(a,d){a.formated_value=this.format_value(a.value);b?this.add_item(a):
this.update_item(d,a)},this));this.colorify();if(!b)return this.update_bars(e);this.$list.smartFadeIn(_.bind(function(){this.update_bars(e)},this))},set_zoom:function(e,b){var g=Math.round(15*b/100),a=Raphael.tools.scale_factor(_.pluck(e,"value"),b-g),d=this.$list.find(".bar"),h=this.$list.find(".value"),k=this.$list.find(".label").outerHeight();_.each(e,function(b,e){var f=b.value*a;d.eq(e).css("height",f+"px");h.eq(e).css("bottom",Math.max(k,f)+"px")})},update_bars:function(e){this.$list.find("li").css("width",
100/e.length+"%");_.delay(_.bind(this.model.display_enqueued,this.model),400);this.set_zoom(e,this.$el.height())},add_item:function(e){e=(new this.item_view({item:e})).render().$el;this.$(".histogram").append(e);return e},update_item:function(e,b){var g=this.$cols.eq(e);g.length||(g=this.add_item(b));g.find(".label").text(b.name);g.find(".value").text(b.formated_value)},remove_items:function(e){this.$(".histogram").empty()},colorify:function(){var e=this.model.get("color")||this.$el.css("color"),
b=Raphael.tools.darken(e,.55);this.$(".bar").css("background-color",e);this.$(".label").css("color",b)},format_value:function(e){return D.u.format_number(e,2,4)}}),h=D.Backbone.SlotView.extend({template:"slot_histogram_item",initialize:function(e){this.item=e.item},render:function(){this.setElement($.tmpl(this.template,this.item));return this}});_.extend(Ducksboard.Backbone.slot_kinds,{Histogram:e});_.extend(Ducksboard.Backbone.slot_views,{HistogramItemView:h})})();
(function(){var e=D.Backbone.Slot.extend({initial_data_type:"last",reverse:!0,defaults:{last:5,no_appearance:!0},initialize:function(){this.timeline_size=parseInt(this.get("last"));D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new f({model:this})},process_initial_data:function(b){b=this.reverse?b.reverse():b;b=_.map(b,_.bind(function(b){return this.parse_value(b)},this));this.view.render_initial_data(b)},clean_data:function(){this.view.remove_items()},update:function(b){this.view.add_item(this.parse_value(b),
!0)},parse_value:function(b){return{title:b.value.title,image:b.value.image,timestamp:b.timestamp,time:D.u.unix_to_iso8601(b.timestamp),content:b.value.content,link:b.value.link}}}),k=e.extend({initial_data_type:"since",reverse:!1,defaults:{since:7776E3,no_appearance:!0}}),h=D.Backbone.SlotView.extend({template:"slot_timeline_item",events:{click:"follow_link"},initialize:function(b){this.item=b.item},render:function(){this.setElement($.tmpl(this.template,this.item,{is_color:function(){return/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(this.data.image)}}));
this.$el.hide();this.$("img").preload({placeholder:"/static/dashboard/img/empty.png",notFound:"/static/dashboard/img/empty.png",onFinish:_.bind(function(b){this.$("img").smartTransition({opacity:1})},this)});return this},follow_link:function(b){this.item.link&&this.add_context_action(b,{label:"Follow link",url:this.item.link,is_public:!0})}}),f=D.Backbone.SlotView.extend({template:"slot_timeline",initialize:function(b){this.item_view=b.item_view||h},render_initial_data:function(b){_.each(b,_.bind(function(b){this.add_item(b,
!1)},this));this.$("time").timeago();this.$("ul").smartFadeIn()},add_item:function(b,e){e?this.$(".placeholder").smartFadeOut():this.$(".placeholder").hide();var a=new this.item_view({item:b}),d=a.render().$el;d.data("view",a);d.insertBefore(this.find_predecessor(d));this.$("time").timeago();e&&this.$("ul").is(":visible")?(a=d.outerHeight(),d.css({height:0,opacity:0,display:"block"}),d.smartAnimate({height:a,opacity:"1"})):d.show();this.delete_old_items()},find_predecessor:function(b){var e=this.$("li.placeholder"),
a=b.tmplItem().data.timestamp,d=this.model.reverse;this.$("li:not(.placeholder)").each(function(){if(d&&$(this).tmplItem().data.timestamp<=a||!d&&$(this).tmplItem().data.timestamp>=a)return e=$(this),!1});return e},remove_items:function(){this.$("li:not(.placeholder)").each(function(){$(this).data("view").remove()});this.$(".placeholder").smartFadeIn()},delete_old_items:function(){var b=_.sprintf("li:gt(%d):not(.placeholder)",this.model.timeline_size);this.$(b).each(function(){$(this).data("view").remove()})}});
_.extend(Ducksboard.Backbone.slot_kinds,{Timeline:e,Calendar:k});_.extend(Ducksboard.Backbone.slot_views,{TimelineView:f,TimelineItemView:h})})();
(function(){var e=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new k({model:this})},process_initial_data:function(e){e[0]&&this.view.render_funnel(e[0].value.funnel)},display:function(e){this.view.update_funnel(e.value.funnel,!1)},clean_data:function(){this.view.remove_items()}}),k=D.Backbone.SlotView.extend({template:"slot_funnel",initialize:function(e){this.item_view=e.item_view||h},
render_funnel:function(e){this.$(".funnel").smartFadeOut(_.bind(function(){this.update_funnel(e,!0)},this))},update_funnel:function(e,b){var g=this.$(".funnel");this.$rows=g.find("tbody tr");e=D.u.sort_desc_by_value(e);var a=e[0].value||1,d=320<this.$el.actual("height")?14:7;this.$rows.filter(":gt("+(e.length-1)+")").remove();_.each(e,_.bind(function(g,h){if(!(h>=d)){var k=0===h;g.amount=D.u.format_number(g.value,2,10);g.percent=k?100:D.u.format_number(100*g.value/a);g.percent_lost=k?null:D.u.format_number(g.percent-
e[h-1].percent);b?this.add_item(g):this.update_item(h,g)}},this));this.colorify();this.fill_widget_data(e,a);$.support.transition&&b||this.unfold_bars();g.smartFadeIn(_.bind(function(){this.unfold_bars()},this))},fill_widget_data:function(e,b){var g=D.u.format_number(100*e[e.length-1].value/b,2,4);this.$(".subtitle").text(this.model.get("subtitle"));this.$(".value").html(g+"<span>%</span>")},update_item:function(e,b){var g=this.$rows.eq(e);g.length||(g=this.add_item(b));g.find(".label").text(b.name);
g.find(".amount").text(b.amount+" / "+(b.percent_lost?b.percent_lost+"%":""));g.find(".bar span").css("width",b.percent+"%");g.find(".percent").text(b.percent+"%")},add_item:function(e){var b=(new this.item_view({item:e})).render().$el;this.$(".funnel tbody").append(b);b.find(".bar span").css("width",e.percent+"%");return b.show()},remove_items:function(){this.$(".funnel tbody").empty()},colorify:function(){var e=this.model.get("color")||this.$el.css("color"),b=jQuery.Color(e).alpha(1);this.$(".bar span").css("background-color",
e);this.$(".percent").css("color",b.lightness("-=0.25"));this.$("p").css("color",e)},unfold_bars:function(){this.$(".bar span").last().transEnd("funnel",_.bind(this.model.display_enqueued,this.model));this.$(".folded").removeClass("folded")}}),h=D.Backbone.SlotView.extend({template:"slot_funnel_item",initialize:function(e){this.item=e.item},render:function(){this.setElement($.tmpl(this.template,this.item));this.$el.hide();return this}});_.extend(Ducksboard.Backbone.slot_kinds,{Funnel:e});_.extend(Ducksboard.Backbone.slot_views,
{FunnelItemView:h})})();
(function(){var e=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{multiple_subtitles:!0,has_title:!1,last:1},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this});"custom"===this.widget.service_kind&&(this.url_view_cls=w)},process_initial_data:function(a){a[0]&&this.view.render_board(a[0].value.board.slice(0,30))},display:function(a){this.view.render_board(a.value.board.slice(0,30))},clean_data:function(){this.view.remove_items()},get_columns:function(){var a=
this.get("total_subtitles");return this.get("has_title")?a-1:a},get_title:function(){if(this.get("has_title"))return this.get("subtitle1")},get_title_color:function(){if(this.get("has_title"))return this.get("color1")},get_headers:function(){var a=[];for(i=this.get("has_title")?2:1;i<=this.get("total_subtitles");i++)a.push(this.get("subtitle"+i));return a},get_colors:function(){var a=[];for(i=this.get("has_title")?2:1;i<=this.get("total_subtitles");i++)a.push(this.get("color"+i));return a},is_numeric:function(a){var d=
this.get("numeric_columns");return d&&_.contains(d,a)}}),k=D.Backbone.SlotView.extend({format_from:7,format_limit:5}),h=k.extend({template:"slot_leaderboard",extra_header:null,initialize:function(a){this.item_view=a.item_view||l;this.extra_header=a.extra_header||null},template_data:function(){return _.extend(this.model.toJSON(),{data_source_kind:this.model.get_data_source_kind(),title:this.model.get_title(),headers:this.model.get_headers(),extra_header:this.extra_header})},render_board:function(a){var d=
this.model.get_columns(),b=this.model.get_headers(),e=this.$(".board");this.cols_map=[];this.cols_map_sum=[];this.rows=a.length;e.smartFadeOut(_.bind(function(){this.remove_items();_.each(a,_.bind(function(a){a=_.clone(a);for(var b=a.values.length;b<=d;b++)a.values.push("");a.values=a.values.slice(0,d-1);this.add_item(a)},this));this.calculate_lengths({name:b[0],values:b.slice(1)});this.colorify();e.smartFadeIn(_.bind(this.model.display_enqueued,this.model));this.$("tr").css("display","table-row")},
this));this.distribute_cols()},add_item:function(a){var d=(new this.item_view({item:a})).render().$el;this.$(".board").append(d);d.show();this.calculate_lengths(a)},remove_items:function(){this.$(".board tbody").empty()},colorify:function(){this.$("h4").css("color",this.model.get_title_color());_.each(this.model.get_colors(),function(a,d){d++;this.$(_.sprintf("td:nth-child(%d)",d)).css("color",a)},this)},calculate_lengths:function(a){var d=a.name||" ",b=1===this.model.widget.get("width")?10:20,d=
Math.min(d.length,b);if(!this.cols_map[0]||d>this.cols_map[0])this.cols_map[0]=d;this.cols_map_sum[0]||(this.cols_map_sum[0]=0);this.cols_map_sum[0]+=d;_.each(a.values||[],_.bind(function(a,d){var b=d+1,e=Math.max(3,a&&a.toString().length||1);if(!this.cols_map[b]||e>this.cols_map[b])this.cols_map[b]=Math.min(e,7);this.cols_map_sum[b]||(this.cols_map_sum[b]=0);this.cols_map_sum[b]+=e},this))},distribute_cols:function(){var a=_.reduce(this.cols_map,function(a,d){return a+d},0),d=_.map(this.cols_map,
function(d,b){return d/a*100});_.each(d,_.bind(function(a,d){this.$("th").eq(d).css("width",a+"%")},this))}}),f=h.extend({add_item:function(a){var d=_.clone(a);a=_.clone(a.values);d.values=a;a.splice(-1,1,D.u.format_number(_.last(a),1,6,!0)+"%");a=(new this.item_view({item:d})).render().$el;this.$(".board").append(a);a.show();this.calculate_lengths(d)}}),b=e.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new f({model:this});"custom"===this.widget.service_kind&&
(this.url_view_cls=w)}}),g=e.extend({defaults:{multiple_subtitles:!0,last:2},precision_limit:null,previous_items:void 0,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this,item_view:q,extra_header:"\u00b1"});"custom"===this.widget.service_kind&&(this.url_view_cls=w)},process_initial_data:function(a){2===a.length&&a[1]&&(this.previous_items=a[1].value.board.slice(0,30));a[0]&&(a=a[0].value.board.slice(0,30),_.each(a,_.bind(function(a){this.calculate_trend(this.previous_items,
a)},this)),this.view.render_board(a),this.previous_items=a)},update:function(a){a=a.value.board.slice(0,30);_.each(a,_.bind(function(a){this.calculate_trend(this.previous_items,a)},this));this.previous_items=a;return{items:a}},display:function(a){this.view.render_board(a.items.slice(0,30))},clean_data:function(){e.prototype.clean_data.apply(this,arguments);this.previous_items=void 0},get_trend_value_idx:function(){var a=this.get("has_title")?3:2;return this.get("total_subtitles")-a},calculate_trend:function(a,
d){if(!_.isEmpty(d.values)){var b=this.get_trend_value_idx(),e=parseFloat(d.values[b]);if(_.isFinite(e))if(void 0===a)_.defaults(d,{trend:"equal"});else{var f=_.filter(a,function(a){return a.name===d.name});_.isEmpty(f)?_.defaults(d,{trend:"up"}):(f=f[0],_.isEmpty(f.values)?_.defaults(d,{trend:"up"}):(b=parseFloat(f.values[b]),_.isFinite(b)?(null!==this.precision_limit&&(f=Math.pow(10,this.precision_limit),e=Math.round(e*f)/f,b=Math.round(b*f)/f),_.defaults(d,{trend:e>b?"up":e<b?"down":"equal"})):
_.defaults(d,{trend:"equal"})))}}}}),a=g.extend({precision_limit:2,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new f({model:this,item_view:q,extra_header:"\u00b1"});"custom"===this.widget.service_kind&&(this.url_view_cls=w)}}),d=e.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this,item_view:v,extra_header:"<span>\u2022</span><span>\u2022</span><span>\u2022</span>"});"custom"===this.widget.service_kind&&
(this.url_view_cls=w)}}),l=k.extend({template:"slot_leaderboard_item",initialize:function(a){this.item=a.item},format_item:function(a){_.each(a.values,_.bind(function(d,b){d&&_.isNumber(d)&&d.toString().length>this.format_from?a.values[b]=D.u.format_number(d,2,this.format_limit):a.values[b]=d},this));return a},render:function(){this.setElement($.tmpl(this.template,this.format_item(this.item)));this.$el.hide();return this}}),q=l.extend({template:"slot_leaderboard_trend_item"}),v=l.extend({template:"slot_leaderboard_status_item"}),
w=D.bb.SlotUrlView.extend({events:{"input .field-label":"propagate","change .field-label":"propagate"},initialize:function(){this._super=D.bb.SlotUrlView;this._super.prototype.initialize.apply(this,arguments);_.extend(this.events,this._super.prototype.events)},$all:function(a){var d=this.$el.closest("fieldset").siblings("fieldset").andSelf().find(".m-editable-url");return $(a,d)},edit:function(a){this.$all(".more").smartFadeOut();this.$all(".url").smartFadeOut(function(){$(this).siblings(".more").andSelf().hide();
$(this).siblings("fieldset").smartFadeIn()})},cancel:function(a){var d=this;this.$all("fieldset").smartFadeOut(function(){$(this).hide();$(this).find(".field-label").val(d.model.get("label"));$(this).siblings(".url").width("").smartFadeIn();d.resize()})},resize:function(){var a=this;this.$all(".url").each(function(){a._super.prototype.resize.call(this,$(this))})},propagate:function(a){this.$all(".field-label").val($(a.target).val())}});_.extend(Ducksboard.Backbone.slot_kinds,{Leaderboard:e,RoundedLeaderboard:b,
TrendLeaderboard:g,RoundedTrendLeaderboard:a,StatusLeaderboard:d});_.extend(Ducksboard.Backbone.slot_views,{TrendLeaderboardItemView:q,LeaderboardItemView:l,LeaderboardView:h})})();
(function(){var e=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1},send_data_params:{value:{template:"input_text",template_data:{placeholder:76}}},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new k({model:this})},process_initial_data:function(e){e.length&&this.view.update_counter(e[0].value)},clean_data:function(){this.update({value:0})},update:function(e){return e},display:function(e){this.view.update_counter(e.value)}}),k=D.Backbone.SlotView.extend({template:"slot_counter_subtitle",
render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.colorify();this.$el.appendTo(this.model.widget.view.$(".inner"));return this},colorify:function(){this.model.get("color")&&(this.$el.css("color",this.model.get("color")),this.$(".subtitle").css("color",this.model.get("color")))},update_counter:function(e){var f=this.$(".value"),b=this.format_value(e);e=Raphael.constants.UPDATE_ANIMATION_DURATION/2;f.smartFadeOut(e,function(){$(this).text(b)}).smartFadeIn(e,_.bind(this.model.display_enqueued,
this.model))},format_value:function(e){return D.u.format_number(e,2,4)}});_.extend(Ducksboard.Backbone.slot_kinds,{CounterSubtitle:e});_.extend(Ducksboard.Backbone.slot_views,{CounterSubtitleView:k})})();
(function(){var e=D.Backbone.slot_kinds.CounterSubtitle.extend({status_map:{0:"up",1:"down",2:"warning",3:"unknown"},send_data_placeholder:[0,"code"],feedback_while_fetching:!1,initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new k({model:this})},process_initial_data:function(e){e.length&&this.view.update_status(this.parse_value(e[0]))},display:function(e){this.view.update_status(this.parse_value(e))},parse_value:function(e){return{status:this.status_map[e.value]||
"unknown",time:e.timestamp}}}),k=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_status",text_sizes:{"short":[0,5],medium:[5,14],large:[15,99]},get_size:function(e){var f,b=(e||"").length;$.each(this.text_sizes,function(e,a){if(b>=a[0]&&b<=a[1])return f=e,!1});return f},render:function(){var e=this.template_data();this.setElement($.tmpl(this.template,_.extend(e,{subtitle_size:this.get_size(e.subtitle)})));this.$el.appendTo(this.model.widget.view.$(".inner"));this.update_status({status:"unknown"});
return this},update_status:function(e){this.$(".status").text(e.status).attr("data-status",e.status);this.update_time(e)},update_time:function(e){var f=this.$("time");f.data("timeago")||f.timeago();f.smartFadeOut(_.bind(function(){f.timeago("update",D.u.unix_to_iso8601(e.time));f.smartFadeIn(_.bind(this.model.display_enqueued,this.model))},this))}});_.extend(Ducksboard.Backbone.slot_kinds,{Status:e})})();
(function(){var e=D.Backbone.slot_kinds.CounterSubtitle.extend({defaults:{view_cls:h},send_data_params:void 0,send_data_unit:void 0,initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new (this.get("view_cls")||h)({model:this})},process_initial_data:function(e){e.length&&this.view.update(this.clamp_value(e[0].value))},display:function(e){this.view.update(this.clamp_value(e.value))},clamp_value:function(e){e.min||(e.min=0);e.current_orig=
e.current;e.current=Math.min(Math.max(e.current,e.min),e.max);return e}}),k={get_ticks:function(e){var b=Raphael.tools.rounded_tick_size(e.max-e.min,3),g=[{orig:e.min}];_.each(_.range(1,3),function(a){g.push({orig:e.min+a*b[0]})});g.push({orig:e.max});_.each(g,function(a,d){g[d].formatted=D.u.format_number(a.orig,b[1],b[1])});return g},render_ticks:function(e){var b=this.$(".refs").empty(),g=$([]);_.each(e,function(a,d){g=g.add($("<li />",{"class":"ref-"+d,text:a.formatted}))});b.append(g)}},h=D.Backbone.slot_views.CounterSubtitleView.extend(k).extend({template:"slot_completion_gauge",
render:function(){D.Backbone.slot_views.CounterSubtitleView.prototype.render.apply(this,arguments);this.update_gauge(0);return this},update:function(e){var b=(e.current-e.min)/(e.max-e.min),g=this.$(".value"),a=this.$(".subtitle"),d=Raphael.constants.UPDATE_ANIMATION_DURATION/2,h=this.get_ticks(e);this.render_ticks(h);g.stop(!0,!0);g.smartFadeOut(d,function(){$(this).text(D.u.format_number(e.current_orig,5,5))}).smartFadeIn(d);a.stop(!0,!0);a.smartFadeOut(d).smartFadeIn(d);this.update_gauge(b,h)},
update_gauge:function(e,b){var g=this.model.get("color")||this.$el.css("color"),g={slot:this,percent:e,path_attrs:{fill:g},ticks:b,callback:_.bind(this.model.display_enqueued,this.model)};this.$el.graph("gauge",g)}}),k=D.Backbone.slot_views.CounterSubtitleView.extend(k).extend({template:"slot_completion_progress",render:function(){D.Backbone.slot_views.CounterSubtitleView.prototype.render.apply(this,arguments);this.update_progress_bar(0);return this},update:function(e){var b=this,g=100*(e.current-
e.min)/(e.max-e.min),a=this.$(".preview .value"),d=Raphael.constants.UPDATE_ANIMATION_DURATION/2,h=this.get_ticks(e);this.render_ticks(h);a.stop(!0,!0);a.smartFadeOut(d,function(){$(this).text(D.u.format_number(e.current_orig,5,5));a.smartFadeIn(d,_.bind(b.model.display_enqueued,b.model))});this.update_progress_bar(g)},update_progress_bar:function(e){var b=this.model.get("color")||this.$el.css("color");this.$(".preview, .bar").find(".value").css({color:b});this.$(".preview > p, .bar .value").css({width:e+
"%"});this.$(".bar .value").css("background-color",b)}});_.extend(Ducksboard.Backbone.slot_kinds,{Completion:e});_.extend(Ducksboard.Backbone.slot_views,{CompletionGaugeView:h,CompletionProgressView:k})})();
(function(){var e=D.Backbone.slot_kinds.CounterSubtitle.extend({current_value:void 0,initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new k({model:this})},process_initial_data:function(e){this.current_value=e.length?e[0].value:void 0;this.new_slot_value()},update:function(e){this.current_value=e.value;return e},display:function(e){this.new_slot_value()},new_slot_value:function(){var e=this.collection.map(function(b){return b.current_value||
0}),f=Raphael.tools.zoom(e,.8*this.view.$el.height());this.collection.each(function(b){b.view.update_bar(f)})}}),k=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_counter_bar",colorify:function(){var e=this.model.get("color");if(e){var f=Raphael.tools.darken(e,.55);this.$el.css("color",e);this.$(".subtitle").css("color",f)}},update_bar:function(e){var f=e[0],b=e[1];e=this.$el.css("color");f=(this.model.current_value||0)*f+b;this.$el.graph("bar",{slot:this,height:f,path_attrs:{fill:e}});
e=D.u.actual("height",this.$el);f=_.max([f+.04*e,.19*e]);void 0!==this.model.current_value&&this.update_counter(this.model.current_value);e=Raphael.constants.UPDATE_ANIMATION_DURATION;b=Raphael.constants.UPDATE_ANIMATION_EASING;this.$(".value").smartAnimate({bottom:f},{duration:e,easing:b,queue:!1,callback:_.bind(this.model.display_enqueued,this.model)}).show()}});_.extend(Ducksboard.Backbone.slot_kinds,{CounterBar:e});_.extend(Ducksboard.Backbone.slot_views,{CounterBarView:k})})();
(function(){var e=D.Backbone.slot_kinds.CounterSubtitle.extend({initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new k({model:this})}}),k=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_counter_box"});_.extend(Ducksboard.Backbone.slot_kinds,{CounterBox:e})})();
(function(){var e=D.Backbone.slot_kinds.CounterSubtitle.extend({initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new k({model:this})}}),k=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_counter_pin",render:function(){D.Backbone.slot_views.CounterSubtitleView.prototype.render.apply(this,arguments);var e={slot:this,path_attrs:{fill:this.model.get("color")||this.$el.css("color")}};this.$el.graph("pin",e);return this}});
_.extend(Ducksboard.Backbone.slot_kinds,{CounterPin:e})})();
(function(){var e=D.Backbone.slot_kinds.CounterSubtitle.extend({send_data_unit:"%",send_data_params:{value:{template:"input_text",template_data:{placeholder:.67}}},initialize:function(){D.Backbone.slot_kinds.CounterSubtitle.prototype.initialize.apply(this,arguments);this.view=new k({model:this})},process_initial_data:function(e){e.length&&this.view.update_counter(this.clamp_value(e[0].value))},display:function(e){this.view.update_counter(this.clamp_value(e.value))},clamp_value:function(e){return Math.min(Math.max(e,
0),1)}}),k=D.Backbone.slot_views.CounterSubtitleView.extend({template:"slot_gauge",render:function(){D.Backbone.slot_views.CounterSubtitleView.prototype.render.apply(this,arguments);this.update_gauge(0);return this},update_counter:function(e){var f=this.$(".value"),b=this.$(".subtitle"),g=this.format_value(e),a=Raphael.constants.UPDATE_ANIMATION_DURATION/2;f.stop(!0,!0);f.smartFadeOut(a,function(){$(this).text(g)}).smartFadeIn(a);b.stop(!0,!0);b.smartFadeOut(a).smartFadeIn(a);this.update_gauge(e)},
update_gauge:function(e){var f=this.model.get("color")||this.$el.css("color");e={slot:this,percent:e,path_attrs:{fill:f},callback:_.bind(this.model.display_enqueued,this.model)};this.$el.graph("gauge",e)},format_value:function(e){return D.u.format_number(100*e,1,4)+"%"}});_.extend(Ducksboard.Backbone.slot_kinds,{Gauge:e})})();
(function(){var e=D.Backbone.Slot.extend({initial_data_type:"since",feedback_while_fetching:!1,process_initial_data:function(e){var h={};e.reverse();_.each(e,_.bind(function(e){h[e.value["for"]]=e.value.code},this));_.each(h,this.notification)},update:function(e){this.notification(e.value.code,e.value["for"])},notification:function(e,h){D.u.is_error(e)?D.ws.trigger(_.sprintf("error:%s",h),e):D.ws.trigger(_.sprintf("success:%s",h))}});_.extend(Ducksboard.Backbone.slot_kinds,{Notification:e})})();
(function(){var e=D.Backbone.Model.extend({initialize:function(a,d){this.slot=d.slot;this.widget=d.widget;this.view_cls=k},load_service_params:function(){return!1},url:function(){return _.sprintf("/push/image/%s/",this.slot.get("label"))},save_image:function(a,d){if(!D.u.support_xhr_upload())return this._iframe_upload(a,d);this.file=a[0].files[0];if(!this.file)return this;this.file_size=this.file.size;var b=new FormData;b.append("file",this.file);_.each(this.attributes,function(a,d){b.append(d,a)});
this.xhr=new XMLHttpRequest;this.xhr.open("POST",this.url());this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xhr.setRequestHeader("X-CSRFToken",$.cookie("csrftoken"));d.progress&&this.xhr.upload.addEventListener("progress",d.progress,!1);this.xhr.addEventListener("load",_.bind(function(a){this._upload_completed(a,d.success,d.error)},this),!1);d.upload_start&&d.upload_start();this.xhr.send(b);return this},_upload_completed:function(a,d,b){var e=a;if(a.target){if(200!==a.target.status)return this._upload_failed({code:a.target.status,
errors:"Unexpected error uploading file"},b);e=JSON.parse(a.target.responseText)}D.bb.account.set(e);d&&d()},_upload_failed:function(a,d){413===a.code&&(a.errors="File is too large",a.details="max. 1Mb");d&&d(a)},_iframe_upload:function(a,d){var b="file_upload_iframe_"+Date.now(),e=$("<iframe />",{id:b,name:b}).hide(),f=$("<form />",{enctype:"multipart/form-data",target:b,action:this.url(),method:"POST"}).hide();$("<input />",{type:"hidden",name:"csrfmiddlewaretoken",value:$.cookie("csrftoken")}).appendTo(f);
$("<input />",{type:"hidden",name:"iframe",value:!0}).appendTo(f);a.attr("name","file").appendTo(f);_.each(this.params,function(a,d){$.tmpl(a.template,_.extend({name:d,value:this.get(d)},_.isFunction(a.template_data)?a.template_data():a.template_data)).appendTo(f)},this);$(document.body).prepend(e);$(document.body).prepend(f);var g=this;e[0].onreadystatechange=function(){if(!g.upload_canceled&&"complete"===this.readyState){var a={code:400,errors:"Unexpected error uploading file"};try{var b=$(e[0].contentWindow.document.body).find("pre").text();
if(b){var f=JSON.parse(b);f.source?g._upload_completed(f,d.success,d.error):g._upload_failed(f,d.error)}else throw new Exception;}catch(h){g._upload_failed(a,d.error)}}};e[0].load_successfully=!1;b=f.submit();d.upload_start&&d.upload_start();return b}}),k=D.bb.CustomDataFormView.extend({template:"slot_data_image",events:{'change input[type="file"]':"send_image_data","click .button":"send_data","click .cancel":"cancel"},initialize:function(){D.bb.FormView.prototype.initialize.apply(this,arguments);
_.bindAll(this,"upload_start","show_progress","uploaded","show_error");this.listenTo(this.model.slot,"image-updated",this.update_preview);this.listenTo(this.model.slot,"image-updated",this.update_fields)},template_data:function(){return this.model.slot.toJSON()},render:function(){D.bb.FormView.prototype.render.apply(this,arguments);this.$captionfield=this.$(".field-caption");this.$fileinput=this.$('input[type="file"]');this.$preview=this.$(".preview");this.$img_preview_wrap=this.$(".img-preview-wrap",
this.$preview);this.$caption=this.$(".caption",this.$preview);this.$loader=this.$(".loading",this.$preview);this.$upload_bar=this.$(".upload-bar",this.$preview);this.$upload_percent=this.$upload_bar.find("> span");this.model.slot.initial_data.value.source&&this.update_preview(this.model.slot.initial_data.value);return this},send_data:function(a){var d=D.u.sending($(a.currentTarget),"sending");d.blocked||(this.set_from_fields(),this.model.save({},{complete:function(){d.complete()},error:_.bind(function(a,
d){this.show_response_errors(d)},this)}))},send_image_data:function(a){this.set_from_fields();this.$cloned=this.$fileinput.clone(!0);this.$error&&this.$error.smartFadeOut(_.bind(function(){this.$error.remove()},this));return this.model.save_image(this.$fileinput,{upload_start:this.upload_start,progress:this.show_progress,success:this.uploaded,error:this.show_error})},upload_start:function(){this.model.upload_canceled=!1;this.$preview.addClass("is_uploading").removeClass("is_finished");this.$preview.closest(".editor").addClass("is_uploading");
this.$caption.smartFadeOut(function(){$(this).empty()});this.$upload_percent.html("0%");this.$upload_bar.css("height","0%");this.$upload_bar.removeClass("hidden").addClass("visible");this.$img_preview_wrap.smartFadeOut();$.browser.msie&&this.$loader.show();this.$cloned.appendTo(this.$(".file"));this.$fileinput.remove();this.$fileinput=this.$cloned},show_progress:function(a){if(a.lengthComputable){a=parseInt(100*a.loaded/a.total,0);var d=a+"%";this.$upload_percent.html(d);this.$upload_bar.css("height",
d);98<=a&&this.$preview.addClass("is_almost_finished")}},uploaded:function(){this.$preview.removeClass("is_uploading").addClass("is_finished");this.$preview.closest(".editor").removeClass("is_uploading");$.browser.msie&&this.$loader.hide()},show_error:function(a){this.$upload_bar.removeClass("visible").addClass("hidden");this.$preview.removeClass("is_uploading").addClass("is_finished");this.$preview.closest(".editor").removeClass("is_uploading");a&&a.errors&&(a=new h(a),this.$error=a.$el,a.parent=
this,this.$error.appendTo(this.$preview).smartFadeIn())},cancel:function(){this.model.xhr&&(this.model.upload_canceled=!0,this.model.xhr.abort&&this.model.xhr.abort(),this.model.xhr=null,this.$img_preview_wrap.smartFadeIn(),this.$upload_bar.fadeOut(_.bind(function(){this.$upload_bar.css("height","0%");this.$upload_percent.empty()},this)),this.$preview.removeClass("is_uploading"),this.$preview.closest(".editor").removeClass("is_uploading"),$.browser.msie&&this.$loader.show());return this},update_preview:function(a){this.model.upload_canceled&&
(a=this.model.slot.initial_data.value,this.$img_preview_wrap.hide());if(this.$preview&&a.source){this.model.slot.initial_data.value.source=a.source;var d=this.model.slot.view,b=$.tmpl(d.img_template||d.item_template,_.extend(a,{klass:"new"}));b.appendTo(this.$img_preview_wrap);b.one("load",_.bind(function(d){b.prependTo(this.$img_preview_wrap);d=b.get(0).width;var e=b.get(0).height;this.model.slot.view.update_preview.call(this,a,b,d,e);this.$preview.removeClass("is_uploading").addClass("is_finished");
this.$preview.removeClass("is_almost_finished")},this))}this.$caption&&a.caption&&(this.model.slot.initial_data.value.caption=a.caption,this.$caption.text(a.caption||"").smartFadeIn())},update_fields:function(a){this.model.set({caption:a.caption});this.$captionfield&&this.$captionfield.val(a.caption)}}),h=D.Backbone.View.extend({template:"upload_error",events:{"click a":"remove"},initialize:function(a){this.render(a)},render:function(a){this.setElement($.tmpl(this.template,a));return this},remove:function(a){a.preventDefault();
a.stopImmediatePropagation();this.parent.$upload_bar.css("height","0%");this.parent.$upload_percent.empty();this.$el.closest(".preview").find(".img-preview-wrap").fadeIn();this.$el.fadeOut(function(){$(this).remove()})}}),e=D.Backbone.Slot.extend({initial_data_type:"last",defaults:{last:1,no_appearance:!0},feedback_while_fetching:!1,send_data_cls:e,send_data_params:{caption:{template:"input_textarea",template_data:{placeholder:"Lorem ipsum..."}}},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,
arguments);this.view=new a({model:this});this.initial_data={value:{}}},process_initial_data:function(a){if(a=_.last(a))this.initial_data=a,this.view.update_image(a)},clean_data:function(){this.view.remove_image()},display:function(a){this.view.update_image(a)}}),f=e.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new d({model:this});this.initial_data={value:{}}}}),b=D.Backbone.Slot.extend({poll_id:void 0,defaults:{no_appearance:!0},feedback_while_fetching:!1,
initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new a({model:this})},start:function(){this.in_current_dashboard()&&this.poll_data()},bust_cache_image:function(a){a=/\?.+$/.test(a)?a+"&"+this.widget.id:a+"?"+this.widget.id;return a+"&"+moment().unix()},get_data:function(){var a=this.widget.data_source.get("image_url"),d=this.widget.data_source.get("refresh_mode")||"0";return{timestamp:moment().unix(),value:{caption:this.widget.data_source.get("caption")||
"",source:this.bust_cache_image(a),poll_frequency:6E4*parseInt(d,0)}}},poll_data:function(){this.clear_timers();data=this.get_data();this.view.update_image(data);data.value.poll_frequency&&(this.poll_id=setTimeout(_.bind(function(){this.poll_data()},this),data.value.poll_frequency))},clear_timers:function(){this.poll_id&&window.clearTimeout(this.poll_id)},unsubscribe:function(){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers()}}),g=b.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,
arguments);this.view=new d({model:this})}}),a=D.Backbone.SlotView.extend({template:"slot_image",img_template:"slot_image_item",crossfade_duration:1500,events:{click:"view_image"},template_data:function(){var a=D.Backbone.SlotView.prototype.template_data.apply(this,arguments);return _.extend(a,{widget_id:this.model.widget.id})},scale:function(a,d,b){return D.u.scale_image(a,d,b)},update_image:function(a){var d=this;this.url=a.value.source;this.$("img:not(.new)").not(":last").remove();this.$("img.new").not(":last").remove();
this.$("div.empty").remove();this.$el.removeClass("empty");this.$("img.new").each(function(){$(this).stop(!0,!0)});var b=this.$("img"),e=$.tmpl(this.img_template,_.extend(a.value,{klass:"new invisible"}));e.prependTo(this.$el);e.one("load",_.bind(function(f){e.prependTo(this.$el);f=e.get(0).width;var g=e.get(0).height;e.removeClass("invisible");D.u.scale_image(e,f,g);this.update_caption(a.value.caption);this.update_time(a.timestamp);b.filter(":not(.new)").smartFadeOut(this.crossfade_duration);e.smartFadeIn(this.crossfade_duration,
function(){$(this).removeClass("new");b.remove();d.model.display_enqueued()});this.model.trigger("image-updated",a.value)},this));e.one("error",function(){d.model.display_enqueued()})},remove_image:function(){this.$("img").remove()},update_caption:function(a){this.$(".caption").smartFadeOut(function(){$(this).text(a||"").smartFadeIn()})},update_time:function(a){var d=this.$("time");d.data("timeago")||d.timeago();d.smartFadeOut(function(){d.timeago("update",D.u.unix_to_iso8601(a));d.smartFadeIn()})},
view_image:function(a){this.url&&this.add_context_action(a,{label:"View original image",url:this.url,is_public:!0})},update_preview:function(a,d,b,e){var f=this;d.removeClass("invisible");D.u.scale_image(d,b,e);this.$img_preview_wrap.show();d.smartFadeIn(this.crossfade_duration,function(){$(this).removeClass("new");f.$upload_bar.removeClass("visible").addClass("hidden")})}}),d=a.extend({template:"slot_image_full",item_template:"slot_image_full_item",update_image:function(a){var d=this;this.url=a.value.source;
this.$("img").remove();this.$(".picture:not(.new)").not(":last").remove();this.$(".picture.new").not(":last").remove();this.$(".picture.new").each(function(){$(this).stop(!0,!0)});var b=this.$(".picture"),e=$.tmpl(this.img_template,_.extend(a.value,{klass:"new"}));e.appendTo(this.$el);e.one("load",_.bind(function(f){e.appendTo(this.$el);var g=e.get(0).width,h=e.get(0).height;e.remove();f=$.tmpl(this.item_template,a.value);f.appendTo(this.$el);g=D.u.scale_image_sizes(f,g,h,!0);f.css({"background-size":_.sprintf("%dpx %dpx",
g.width,g.height),"background-position":_.sprintf("%dpx %dpx",g["margin-left"],g["margin-top"])});g=$(".caption",f);h=(f.actual("height")-g.actual("height"))/2;0>h&&(h=0);g.css({"margin-top":h+"px"});b.filter(":not(.new)").smartFadeOut(this.crossfade_duration);f.smartFadeIn(this.crossfade_duration,function(){$(this).removeClass("new");b.remove();d.model.display_enqueued()});this.model.trigger("image-updated",a.value)},this));e.one("error",function(){d.model.display_enqueued()})},remove:function(){D.Backbone.SlotView.prototype.remove.apply(this,
arguments)},update_preview:function(a,d,b,e){d.remove();d=D.u.scale_image_sizes(this.$img_preview_wrap,b,e,!0);this.$img_preview_wrap.hide().css({"background-size":_.sprintf("%dpx %dpx",d.width,d.height),"background-position":_.sprintf("%dpx %dpx",d["margin-left"],d["margin-top"]),"background-image":"url("+a.source+")"});a=this.$img_preview_wrap.actual("height")-this.$caption.actual("height");this.$caption.css({top:Math.max(a/2,0)+"px"});_.defer(_.bind(function(){this.$upload_bar.removeClass("visible").addClass("hidden");
this.$img_preview_wrap.fadeIn()},this))}});_.extend(Ducksboard.Backbone.slot_kinds,{Image:e,ImageFull:f,StaticImage:b,StaticImageFull:g})})();
(function(){var e=D.Backbone.SlotView.extend({template:"slot_countdown",detail_template:"slot_countdown_detail",render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$(".event").text(this.model.widget.data_source.get("event"));this.$el.appendTo(this.model.widget.view.$(".inner"));return this},update_countdown:function(e){this.$(".countdown").removeClass("details").text(e)},update_detail_countdown:function(e,f,b){e=$.tmpl(this.detail_template,{hours:_.sprintf("%02d",e),
minutes:_.sprintf("%02d",f),seconds:_.sprintf("%02d",b)});this.$(".countdown").addClass("detail").html(e)}}),k=D.Backbone.Slot.extend({POLL_JITTER:3E5,defaults:{no_appearance:!0},seconds:void 0,delta_seconds:0,view_cls:e,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new this.view_cls({model:this});delete this.url_view},start:function(){this.should_start()&&(this.listenTo(D.ws,"seconds_until:"+this.get("label"),this.process_seconds_until),D.ws.connected&&
(this.get_seconds_until(),this.started=!0))},get_seconds_until:function(){var e=D.Backbone.account.get("timezone").replace(" ","_"),f=this.widget.data_source.get("target");D.ws.get_seconds_until(this.get("label"),{timezone:e,target:f})},seconds_from_data:function(e){return e[0].value},process_seconds_until:function(e){this.clear_timers();this.sync_timeout_id=setTimeout(_.bind(function(){this.get_seconds_until()},this),this._sync_timeout());this.seconds=this.seconds_from_data(e);this.update_countdown(this.seconds);
86400>this.seconds&&this.update_countdown_seconds()},on_seconds_negative:function(e){},on_seconds_detail:function(e){},on_seconds_default:function(e){},update_countdown:function(e){if(0>e)this.on_seconds_negative(e);else if(86400>e)this.on_seconds_detail(e);else this.on_seconds_default(e)},update_countdown_seconds:function(){this.update_time_interval_id=setInterval(_.bind(function(){this.seconds-=this.delta_seconds;this.update_countdown(this.seconds)},this),1E3)},clear_timers:function(){this.sync_timeout_id&&
clearTimeout(this.sync_timeout_id);this.update_time_interval_id&&clearInterval(this.update_time_interval_id)},unsubscribe:function(e){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers();e||(e=this.get("label"));this.stopListening(D.ws,"seconds_until:"+e)},_sync_timeout:function(){var e=0,f=moment(),e=30<=f.minutes()?60-f.minutes():30-f.minutes(),e=6E4*e-1E3*f.seconds()-f.milliseconds(),f=Math.random()*this.POLL_JITTER;return e+f}});_.extend(Ducksboard.Backbone.slot_kinds,
{Countdown:k});_.extend(Ducksboard.Backbone.slot_views,{CountdownView:e})})();
(function(){var e=D.Backbone.Slot.extend({POLL_JITTER:3E5,current_time:void 0,defaults:{no_appearance:!0},feedback_while_fetching:!1,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new k({model:this});delete this.url_view},start:function(){this.should_start()&&(this.listenTo(D.ws,"current_time:"+this.get("label"),this.process_current_time),D.ws.connected&&(this.get_current_time(),this.started=!0))},get_current_time:function(){var e=this.widget.data_source.get("timezone").replace(" ",
"_");D.ws.get_current_time(this.get("label"),{timezone:e})},process_current_time:function(e){this.clear_timers();this.set_current_time(moment(e[0].value));e=1E3*(60-this.current_time.seconds());this.min_timeout_id=setTimeout(_.bind(function(){this._minute_updates()},this),e);this.sync_timeout_id=setTimeout(_.bind(function(){this.get_current_time()},this),this._sync_timeout())},set_current_time:function(e){this.current_time=e;this.view.update_time(e)},clear_timers:function(){this.sync_timeout_id&&
clearTimeout(this.sync_timeout_id);this.min_timeout_id&&clearTimeout(this.min_timeout_id);this.min_interval_id&&clearInterval(this.min_interval_id)},unsubscribe:function(e){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers();e||(e=this.get("label"));this.stopListening(D.ws,"current_time:"+e)},_minute_updates:function(){this.set_current_time(this.current_time.add("m",1));this.min_interval_id=setInterval(_.bind(function(){this.set_current_time(this.current_time.add("m",1))},
this),6E4)},_sync_timeout:function(){var e=0,f=moment(),e=30<=f.minutes()?60-f.minutes():30-f.minutes(),e=6E4*e-1E3*f.seconds()-f.milliseconds(),f=Math.random()*this.POLL_JITTER;return e+f}}),k=D.Backbone.SlotView.extend({template:"slot_current_time",render:function(){this.setElement($.tmpl(this.template,this.model.toJSON()));this.$(".city").text(this.model.widget.data_source.get("city"));var e="12"==this.model.widget.data_source.get("time_mode")?"clock-12h":"clock-24h";this.$(".time").addClass(e);
this.$el.appendTo(this.model.widget.view.$(".inner"));return this},update_time:function(e){var f=e.format("dddd, MMMM Do YYYY");if("12"==this.model.widget.data_source.get("time_mode")){var b=e.format("h:mm");e=e.format("A")}else b=e.format("H:mm"),e="";this.model.widget.view.$("h4").text(f);this.$(".time").text(b);this.$(".am_pm").text(e)}});_.extend(Ducksboard.Backbone.slot_kinds,{CurrentTime:e})})();
(function(){var e=D.Backbone.Slot.extend({initial_data_type:"timespan",data_last:void 0,oldest_value:null,data_last_timestamps:void 0,periods:void 0,period_limits:void 0,send_data_params:{value:{template:"input_text",template_data:{placeholder:76}},timestamp:{template:"input_date",template_data:{placeholder:"timestamp (optional)"}}},initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new k({model:this})},process_initial_data:function(e){this.oldest_value=e.shift().value;
this.data_last=_.pluck(e,"value");this.periods=_.pluck(e,"period");this.period_limits=_.pluck(e,"timestamp");this.data_last_timestamps=this.period_limits.slice(0);this.periods.shift();this.view.render_initial_data(this.filled_data())},update:function(e){var f=this.data_last_index(e);if(0>f&&null!==this.data_last[0])return!1;0>f&&(f=0);if(this.data_last_timestamps[f]>e.timestamp)return!1;var b=e.value!==this.data_last[f];this.data_last[f]=e.value;this.data_last_timestamps[f]=e.timestamp;return{data:e,
idx:f,changed:b}},display:function(e){var f=this.filled_data();this.view.update_trend(f);var b=_.filter(this.data_last,function(b,a){return a>e.idx-1&&null===b});this.view.update_counter(f,e.idx+b.length,e.changed);this.view.update_delta(f,e.idx,e.changed)},clean_data:function(){this.data_last=_.map(this.data_last,function(){return null});this.data_last_timestamps=this.period_limits.slice(0);var e=this.filled_data();this.view.update_trend(e);this.view.update_counter(e,this.data_last.length-1);this.view.update_delta(e,
this.data_last.length-1)},data_last_index:function(e){e=e.timestamp;for(var f=this.period_limits.length-1;0<=f&&!(e>=this.period_limits[f]);f--);return f},filled_data:function(){var e=this.oldest_value,f=-1;return[_.map(this.data_last,function(b,g){null!==b&&(e=b);null===e&&(f=g);return null===e?0:e}),f]},tick:function(e){var f=e[this.get("timespan")];_.last(this.periods)!==f&&(e.current_time||moment().unix(),this.periods.shift(),this.periods.push(f),this.period_limits.shift(),this.period_limits.push(e.current_time),
f=this.data_last.shift(),null!==f&&(this.oldest_value=f),this.data_last.push(null),this.data_last_timestamps.shift(),this.data_last_timestamps.push(e.current_time),this.view.tick(this.filled_data()))},new_period_value:function(){return null}}),k=D.Backbone.SlotView.extend({template:"slot_counter_trend",timespan_class:"timespan-soft",timespans:{daily:{modulus:3,mapper:function(e){e=""+e;return 2>e.length?"0"+e:e},extra_class:"small"},weekly:{modulus:1,mapper:function(e){return"Mon Tue Wed Thu Fri Sat Sun".split(" ")[e-
1]},extra_class:"big"},monthly:{modulus:5,mapper:function(e){e=""+e;return 2>e.length?"0"+e:e},extra_class:"small"},quarterly:{modulus:2,mapper:function(e){return"W"+e},extra_class:"small"},yearly:{modulus:1,mapper:function(e){return"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[e-1]},extra_class:"small"}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.colorify();this.$el.appendTo(this.model.widget.view.$(".inner"));return this},colorify:function(){this.model.get("color")&&
(this.$(".value").css("rgba",this.model.get("color")),this.$(".subtitle").css("rgba",this.model.get("color")))},render_initial_data:function(e){var f=this._create_periods(this.model.periods);this.$el.append(f);this.update_counter(e);this.update_delta(e);this.update_trend(e)},update_counter:function(e,f,b){_.isUndefined(b)&&(b=!0);if((!f||f===e[0].length-1)&&b){f=this.$(".value");var g=this.format_value(_.last(e[0]));e=Raphael.constants.UPDATE_ANIMATION_DURATION/2;f.stop(!0,!0);f.smartFadeOut(e,function(){$(this).text(g)}).smartFadeIn(e)}},
update_delta:function(e,f,b){_.isUndefined(b)&&(b=!0);if((!f||f===e[0].length-1||f===e[0].length-2)&&b){f=this.$(".delta");e=e[0].slice(-2);e=e[1]-e[0];b=this.format_value(e);var g=(0<=e?"+":"")+b;f.stop(!0,!0);f.smartFadeOut(500,function(){$(this).text(g)}).smartFadeIn(500)}},update_trend:function(e){this.$el.graph("trend",{data:e[0],slot:this,padding_offset:e[1],callback:_.bind(this.model.display_enqueued,this.model)})},tick:function(e){this.new_period();this.update_delta(e);this.update_trend(e)},
_create_periods:function(e){var f=Raphael.tools.width_distribution(e.length,this.$el.actual("width")),b=this.timespan_class,g=this.timespans[this.model.get("timespan")],a=g.mapper,d=g.modulus,k=g.extra_class||"",q=0;e=$.map(e,function(e,g){var h='<span class="'+b+" "+k+'" style="left:'+q+"px;width:"+f[g]+'px">'+(0===g%d?a(e):"")+"</span>";q+=f[g];return h});return $(e.join(""))},new_period:function(){var e=this.timespans[this.model.get("timespan")],f=e.mapper,b=e.modulus,e=Raphael.constants.UPDATE_ANIMATION_DURATION/
2,g=this.$("span."+this.timespan_class),a=this.model.periods;g.stop(!0,!0);g.smartFadeOut(e,_.bind(function(){_.each(g,function(d,e){0===e%b&&$(d).text(f(a[e]))})},this)).smartFadeIn(e)},format_value:function(e){return D.u.format_number(e,2,6)}});_.extend(Ducksboard.Backbone.slot_kinds,{CounterTrend:e});_.extend(Ducksboard.Backbone.slot_views,{CounterTrendView:k})})();
(function(){var e=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new f({model:this})}}),k=e.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new b({model:this})},process_initial_data:function(b){this.data_last=_.pluck(b,"value");this.data_last_timestamps=_.pluck(b,"timestamp");b.shift();this.periods=_.pluck(b,"period");this.period_limits=_.pluck(b,"timestamp");this.periods.shift();
this.view.render_initial_data(this.filled_data())},clean_data:function(){e.prototype.clean_data.apply(this,arguments);this.data_last_timestamps.unshift(null)},data_last_index:function(){return e.prototype.data_last_index.apply(this,arguments)+1},filled_data:function(){var b=null,a=-1,d=_.map(this.data_last,function(d,e){if(null===d)return null===b&&(a=e),0;if(null===b)return b=d,0;var f=d-b;b=d;return f});d.shift();return[d,a]}}),h=D.Backbone.slot_views.CounterTrendView.extend({render_initial_data:function(b){var a=
this._create_periods(this.model.periods);this.$el.append(a[0]);this.$el.append(a[1]);this.update_counter(b);this.update_delta(b);this.update_trend(b)},_create_periods:function(b){var a=Raphael.tools.width_distribution(b.length,this.$el.actual("width")),d=this.timespan_class,e=this.timespans[this.model.get("timespan")],f=e.mapper,h=e.modulus,k=e.extra_class||"",e=$.map(b,function(b,e){return'<div class="'+d+'" style="width:'+a[e]+'px"></div>'}),m=0;b=$.map(b,function(b,e){var g='<span class="'+d+" "+
k+'" style="left:'+m+"px;width:"+a[e]+'px">'+(0===e%h?f(b):"")+"</span>";m+=a[e];return g});return[$(e.join("")),$(b.join(""))]}}),f=h.extend({template:"slot_chart",timespan_class:"timespan-hard",colorify:function(){},update_delta:function(){},update_trend:function(b){var a={stroke:this.model.get("color")?this.model.get("color"):this.$el.css("color"),fill:"none","stroke-width":this.get_stroke_width()};this.$el.graph("line",{data:b[0],slot:this,padding_offset:b[1],path_attrs:a,callback:_.bind(this.model.display_enqueued,
this.model)})},format_value:function(b){return D.u.format_number(b,2,18)},get_stroke_width:function(){var b;switch(D.d.current.id){case "tv1080":b=7;break;case "tv720":b=5;break;default:b=4}return b}}),b=f.extend({update_counter:function(b,a){var d=f,e=_.reduce(b[0],function(a,d){return a+d},0);d.prototype.update_counter.call(this,[[e]])}});_.extend(Ducksboard.Backbone.slot_kinds,{AbsoluteChart:e,Chart:k});_.extend(Ducksboard.Backbone.slot_views,{AbsoluteChartView:f,BaseChartView:h,ChartView:b})})();
(function(){var e=D.Backbone.slot_kinds.Chart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this});this._super=D.Backbone.slot_kinds.Chart},process_initial_data:function(){this._super.prototype.process_initial_data.apply(this,arguments);this.trigger("initialdata",this)},update:function(e){return this._super.prototype.update.call(this,e)},display:function(e){this._super.prototype.display.call(this,e);this.widget.draw_all_slots()},tick:function(e){var b=
e[this.get("timespan")];_.last(this.periods)!==b&&(this._super.prototype.tick.apply(this,arguments),this.trigger("periods",this))}}),k=e.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this});this._super=D.Backbone.slot_kinds.AbsoluteChart},clean_data:D.Backbone.slot_kinds.AbsoluteChart.prototype.clean_data,data_last_index:D.Backbone.slot_kinds.AbsoluteChart.prototype.data_last_index,filled_data:D.Backbone.slot_kinds.AbsoluteChart.prototype.filled_data}),
h=D.Backbone.slot_views.ChartView.extend({header_legend_template:"slot_line_chart_header_legend",bottom_legend_template:"slot_line_chart_legend",render_initial_data:function(e){},update_trend:function(e){this.model.widget.draw_all_slots()},tick:function(e){},colorify:function(){},update_delta:function(){},update_counter:function(e,b){},render:function(){this.setElement(this.render_header_legend());this.render_bottom_legend();this.colorify();return this},render_header_legend:function(){var e=this.model.widget.view.$("header span:last"),
b=$.tmpl(this.header_legend_template,this.template_data());0===e.length?b.prependTo(this.model.widget.view.$("header h4")):b.insertAfter(e);this.model.get("color")&&b.css("color",this.model.get("color"));return b},render_bottom_legend:function(){var e=this.model.widget.view.$("section ul.legend"),b=this.template_data(),g=$.tmpl(this.bottom_legend_template,b),b=e.find(".label-"+b.layout);b.length?b.replaceWith(g):g.appendTo(e);this.model.get("color")&&$("span.icon",g).css("background-color",this.model.get("color"))},
update_line:function(e){var b=this.model.get("color")?this.model.get("color"):this.$el.css("color"),g=this.model.filled_data();0!==g[0].length&&(b={stroke:b,fill:"none","stroke-width":this.get_stroke_width()-1},this.model.widget.view.chart.graph("line",{data:g[0],slot:this,padding_offset:g[1],path_attrs:b,paper:this.model.widget.view.paper,factors:e,callback:_.bind(this.model.display_enqueued,this.model)}))},_create_periods:function(e){},new_period:function(){}});_.extend(Ducksboard.Backbone.slot_kinds,
{LineChart:e,AbsoluteLineChart:k});_.extend(Ducksboard.Backbone.slot_views,{LineChartView:h})})();
(function(){var e=D.Backbone.slot_kinds.LineChart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this});this._super=D.Backbone.slot_kinds.Chart}}),k=D.Backbone.slot_kinds.AbsoluteLineChart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this});this._super=D.Backbone.slot_kinds.AbsoluteChart}}),h=D.Backbone.slot_views.LineChartView.extend({update_line:function(e){var b=this.model.get("color")?
this.model.get("color"):this.$el.css("color"),g=this.model.filled_data();0!==g[0].length&&(b={stroke:b,fill:b,"stroke-width":this.get_stroke_width()-2},this.model.widget.view.chart.graph("area",{data:g[0],slot:this,padding_offset:g[1],path_attrs:b,paper:this.model.widget.view.paper,factors:e,callback:_.bind(this.model.display_enqueued,this.model)}))}});_.extend(Ducksboard.Backbone.slot_kinds,{AreaChart:e,AbsoluteAreaChart:k});_.extend(Ducksboard.Backbone.slot_views,{AreaChartView:h})})();
(function(){var e=D.Backbone.slot_kinds.AbsoluteLineChart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new h({model:this});this._super=D.Backbone.slot_kinds.AbsoluteChart},filled_data:function(){var e=this.collection.indexOf(this);if(0<e)var b=this.collection.models[e-1].filled_data()[0];var g=this.oldest_value,a=-1;return[_.map(this.data_last,function(d,e){null!==d&&(g=d);null===g&&(a=e);g=null===g?0:g;return b?g+b[e]:g}),a,b]}}),k=D.Backbone.slot_kinds.LineChart.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,
arguments);this.view=new h({model:this});this._super=D.Backbone.slot_kinds.Chart},filled_data:function(){var e=this.collection.indexOf(this);if(0<e)var b=this.collection.models[e-1].filled_data()[0];var g=this.oldest_value?this.oldest_value:0,a=-1,e=_.map(this.data_last,function(d,e){fill=b?b[e-1]:0;if(null===d)return null===g&&(a=e),fill;if(null===g)return g=d,fill;var f=d-g+fill;g=d;return f});e.shift();return[e,a,b]}}),h=D.Backbone.slot_views.LineChartView.extend({update_line:function(e){var b=
this.model.get("color")?this.model.get("color"):this.$el.css("color"),g=this.model.filled_data();0!==g[0].length&&this.model.widget.view.chart.graph("stacked",{data:g[0],base_data:g[2],slot:this,padding_offset:g[1],path_attrs:{stroke:b,fill:b,"stroke-width":0},paper:this.model.widget.view.paper,factors:e,callback:_.bind(this.model.display_enqueued,this.model)})}});_.extend(Ducksboard.Backbone.slot_kinds,{StackedChart:e,RelativeStackedChart:k});_.extend(Ducksboard.Backbone.slot_views,{StackedChartView:h})})();
(function(){L.Circle.prototype._checkIfEmpty=function(){return!1};var e=D.Backbone.Slot.extend({initial_data_type:void 0,points:void 0,pending_add:[],pending_remove:[],expire_timeout:6E4,expire_timer:void 0,expire_stopped:!1,defaults:{marker_color:D.colors.pink,marker_size:10,autofit:!0,center_lat:30.3,center_lon:-60.3,zoom:1,max_zoom:10,map_tile:"base-dark",initial_data_type:"last",last:5,since:3600},send_data_params:void 0,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);
this.view=new k({model:this})},get_initial_data:function(){this.initial_data_type=this.get("initial_data_type");D.Backbone.Slot.prototype.get_initial_data.apply(this,arguments)},unsubscribe:function(){this.stop_expire();return D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments)},process_initial_data:function(e){this.points=e||[];_.each(this.points,function(e){e.marker=this.view.get_marker(e.value)},this);this.points.length&&this.view.fit_map(this.points);_.each(this.points,function(e){this.view.add_marker(e.marker)},
this);this.start_expire()},start_expire:function(){"since"===this.initial_data_type&&(this.expire_stopped=!1,clearTimeout(this.expire_timer),this.expire_timer=_.delay(_.bind(function(){this.expire_stopped||(this.expire(),this.expire_stopped||this.start_expire())},this),this.expire_timeout))},stop_expire:function(){this.expire_stopped=!0;clearTimeout(this.expire_timer)},expire:function(){if("since"===this.initial_data_type){var e=[],f=moment().unix()-this.get("since");this.points=_.filter(this.points,
function(b,g){var a=b.timestamp<f;a&&e.push(b);return!a},this);this.remove_points(e);this.view.fit_map(this.points)}},clean_data:function(){this.remove_points(this.points);this.points=[];this.view.fit_map()},update:function(e){e.marker=this.view.get_marker(e.value);this.points.push(e);this.pending_add.push(e);if("last"!==this.initial_data_type)return e;this.points.length>this.get("last")&&this.pending_remove.push(this.points.shift());this.pending_add.length>this.get("last")&&this.pending_add.shift();
return e},display:function(e){this.remove_points(this.pending_remove);this.view.fit_map(this.points);_.each(this.pending_add,function(e){this.view.add_marker(e.marker)},this);this.pending_add=[];this.pending_remove=[];_.delay(_.bind(this.display_enqueued,this),1E3)},remove_points:function(e){_.each(e,function(e){this.view.remove_marker(e.marker)},this)}}),k=D.Backbone.SlotView.extend({template:"slot_map",max_marker_radius:30,min_marker_radius:5,render:function(){D.Backbone.SlotView.prototype.render.apply(this,
arguments);this.render_map();return this},render_map:function(){var e=this.$("div.map")[0];this.map=L.map(e,{maxZoom:this.model.get("max_zoom"),dragging:!0,zoomControl:!0,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!0,boxZoom:!1,tap:!1,fadeAnimation:!1});this.set_center();this.map.on("click",D.u.close_contextual);this.map._size=new L.Point(this.$el.width(),this.$el.height());e=_.sprintf("https://cartocdn_{s}.global.ssl.fastly.net/%s/{z}/{x}/{y}.png",this.model.get("map_tile"));L.tileLayer(e).addTo(this.map);
this.map.attributionControl.setPrefix(!1);L.control.attribution({position:"bottomleft",prefix:!1}).addAttribution('<a href="http://www.cartodb.com" target="_blank" class="cartodb-attribution"><img width="71" height="29" src="http://cartodb.s3.amazonaws.com/static/new_logo.png" alt="CartoDB" title="CartoDB"></a>').addTo(this.map);this.fit_map()},get_marker:function(e){var f=e.color||this.model.get("color"),f=L.circleMarker([e.latitude,e.longitude],{radius:e.size||this.model.get("marker_size"),color:f,
fillColor:f,fillOpacity:.6});(e=e.info||e.value)&&f.bindPopup(e.toString());return f},add_marker:function(e){e.addTo(this.map)},remove_marker:function(e){this.map.removeLayer(e)},set_center:function(){this.map.setView([this.model.get("center_lat"),this.model.get("center_lon")],this.model.get("zoom"))},fit_map:function(e){this.scale_points(e);this.model.get("autofit")&&e&&0<e.length&&(e=_.map(e,function(e){return[e.value.latitude,e.value.longitude]}),this.map.fitBounds(e))},scale_points:function(e){var f=
this.max_marker_radius,b=this.min_marker_radius,g=_.unique(_.compact(_.pluck(_.pluck(e,"value"),"value")));if(g.length){if(10>g.length)var a=f-b,a=(a-g.length/10*a)/2,f=f-a,b=b+a;var f=Raphael.tools.zoom(g,f-b,0),d=f[0],k=f[1];_.each(e,function(a){a.value.value&&a.marker.setRadius(a.value.value*d+k+b)})}},remove:function(){this.model.remove_points();this.map.remove();D.Backbone.SlotView.prototype.remove.apply(this,arguments);return this}});_.extend(Ducksboard.Backbone.slot_kinds,{Map:e});_.extend(Ducksboard.Backbone.slot_views,
{MapView:k})})();
(function(){var e=D.Backbone.Slot.extend({poll_id:void 0,defaults:{no_appearance:!0},feedback_while_fetching:!1,initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new k({model:this})},start:function(){this.in_current_dashboard()&&this.poll_data()},append_widget_id:function(e){return/\?.+$/.test(e)?e+"&"+this.widget.id:e+"?"+this.widget.id},format_url:function(){return this.widget.data_source.get("iframe_url")},get_data:function(){var e=this.format_url(),f=this.widget.data_source.get("refresh_mode")||
"0";return{timestamp:moment().unix(),value:{source:this.append_widget_id(e),poll_frequency:6E4*parseInt(f,0)}}},poll_data:function(){this.clear_timers();data=this.get_data();this.view.update_iframe(data);data.value.poll_frequency&&(this.poll_id=setTimeout(_.bind(function(){this.poll_data()},this),data.value.poll_frequency))},clear_timers:function(){this.poll_id&&window.clearTimeout(this.poll_id)},unsubscribe:function(){D.Backbone.Slot.prototype.unsubscribe.apply(this,arguments);this.clear_timers()}}),
k=D.Backbone.SlotView.extend({template:"slot_iframe",item_template:"slot_iframe_item",crossfade_duration:1500,events:{click:"view_iframe"},template_data:function(){var e=D.Backbone.SlotView.prototype.template_data.apply(this,arguments);return _.extend(e,{widget_id:this.model.widget.id})},update_iframe:function(e){this.url=e.value.source;var f=this.$("iframe");e=$.tmpl(this.item_template,_.extend(e.value,{klass:"new"}));f.replaceWith(e);f.filter(":not(.new)").smartFadeOut(this.crossfade_duration);
e.smartFadeIn(this.crossfade_duration,function(){$(this).removeClass("new");f.remove()})},remove_iframe:function(){this.$("").remove()},view_iframe:function(e){this.url&&this.add_context_action(e,{label:"View original site",url:this.url,is_public:!0})}});_.extend(Ducksboard.Backbone.slot_kinds,{Iframe:e})})();
(function(){var e=D.Backbone.Model.extend({idAttribute:null,url:"/support/ticket",defaults:{content:void 0},initialize:function(b,e){this.view=new k({model:this})}}),k=D.Backbone.View.extend({template:"support_ticket",done_text:"close",events:{"click .send":"send_ticket"},sending_complete:!1,render:function(){this.setElement($.tmpl(this.template,{name:D.Backbone.account.get("email"),subject:this.model.get("subject")}));D.u.modal({content:this.$el,onComplete:_.bind(function(){this.$el.find("textarea").first().focus()},
this)});return this},send_ticket:function(b){if(this.$("textarea").val())if(this.sending_complete)this.navigate_away();else{var e=D.u.sending($(b.currentTarget),"creating");e.blocked||(b=this.$(".subject"),b=(b.find("input").length?b.find("input").val():b.text())+"\n\n"+this.$("textarea").val(),this.model.save({content:b},{success:_.bind(function(){this.ticket_sent(e)},this),error:_.bind(function(a,d){e.complete();this.show_response_errors(d)},this)}))}},navigate_away:function(){$.fancybox.close()},
ticket_sent:function(b){this.$(".form").fadeOut(_.bind(function(){b.complete();this.sending_complete=!0;this.$(".sent").fadeIn();this.$(".send").text(this.done_text)},this))}}),h=e.extend({url:"/support/integration",initialize:function(b,e){this.view=new f({model:this})}}),f=k.extend({template:"integration_ticket",done_text:"go back to the widgets",navigate_away:function(){D.Backbone.app.navigate("directory",!0)}});_.extend(Ducksboard.Backbone,{SupportTicket:e,IntegrationTicket:h})})();
(function(){var e=D.Backbone.View.extend({template:"public_info",events:{"click .tvmode":"tvmode"},render:function(){var e=D.bb.dashboards.first().get("label"),h=D.bb.account.get("access_token"),h=_.sprintf("%s/%s/",D.config.public_host,h),f=_.sprintf("Looking at the dashboard %s %s powered by @ducksboard",e,h),e={label:e,title:encodeURIComponent(e),url:encodeURIComponent(h),message:encodeURIComponent(f),can_use_tvmode:D.bb.account.get("has_tvmode"),is_sponsored:D.bb.account.get("is_sponsored"),no_branding:D.bb.account.get("no_branding")};
this.setElement($.tmpl(this.template,e));this.$el.prependTo("body");this.$("> ul").width(_.max(D.Backbone.dashboards.map(function(b){return b.view.$el.width()})));this.$el.fadeIn();return this},tvmode:function(e){e.preventDefault();D.bb.account.has_tvmode()&&(screenfull.enabled?screenfull.request():D.bb.dashboards.current.view.switch_to_tvmode())}});_.extend(Ducksboard.Backbone,{publicinfo:new e})})();
(function(){var e=D.Backbone.View.extend({template:"directory_group_detail_sizes",render:function(){this.setElement($.tmpl(this.template,{sizes:this.options.kind.available_sizes}));return this}}),k=D.Backbone.View.extend({template:"directory_group_detail_item",events:{click:"selected"},render:function(){this.setElement($.tmpl(this.template,this.options.kind));this.options.selected&&this.selected();return this},selected:function(){this.$el.siblings().find("a").removeClass("selected");this.$("a").addClass("selected");
this.trigger("selected",this.options.kind)}}),h=D.Backbone.Model.extend({idAttribute:"group",is_custom_category:!1,initialize:function(){this.item_view=new f({model:this});this.detail_view=new b({model:this})},needs_upgrade:function(){var a=D.bb.account.available_widgets_count();return _.contains(["developer","sinfonier"],D.bb.account.get("plan_label"))&&!this.get("developer_plan_permission")||!D.bb.account.has_premium_directory()&&this.get("premium")||0>=a.total||"custom"==this.get("service_kind")&&
0>=a.custom},order_rank:function(){return this.get("name")}}),f=D.Backbone.View.extend({template:"directory_group_item",max_imgs_per_widget:4,events:{"click a":"select_group"},template_data:function(){var a=_.pluck(this.model.get("widget_kinds"),"kind");return _.extend(this.model.toJSON(),{needs_upgrade:this.model.needs_upgrade(),images:this.get_images(),total_images:Math.min(a.length,this.max_imgs_per_widget)})},get_images:function(){return _.pluck(this.model.get("widget_kinds"),"kind").slice(0,
this.max_imgs_per_widget)},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$("img").preload({placeholder:"/static/dashboard/img/empty.png",notFound:"/static/dashboard/img/empty.png",onFinish:_.bind(function(a){this.$("img").css("opacity",1)},this)});return this},select_group:function(a){analytics.track("widgets group select",{group:this.model.get("group"),service_kind:this.model.get("service")})}}),b=D.Backbone.View.extend({template:"directory_group_detail",selected_kind:void 0,
events:{"click .add":"add_widget","change .kinds":"widget_kind_choice_selected"},template_data:function(){return data=_.extend(this.model.toJSON(),{needs_upgrade:this.model.needs_upgrade(),many_kinds:this.many_kinds(),has_choices:this.has_choices(),kinds:this.model.get("widget_kinds")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.has_choices()?this.render_choices():this.render_kinds();return this},render_choices:function(){kind=this.model.get("widget_kinds")[0];
this.many_kinds()||this.widget_kind_selected(kind);this.$(".kind").attr("class","kind m-widget-preview "+kind.kind)},render_kinds:function(){_.each(this.model.get("widget_kinds"),function(a,d){var b=new k({kind:a,selected:0===d});this.listenTo(b,"selected",this.widget_kind_selected);b.render().$el.appendTo(this.$(".kinds"))},this)},many_kinds:function(){return 1<this.model.get("widget_kinds").length},has_choices:function(){return null!==this.model.get("choice_question")},widget_kind_choice_selected:function(a){var d=
$(a.target).val().toLowerCase();a=_.find(this.model.get("widget_kinds"),function(a){return a.kind===d});this.widget_kind_selected(a)},widget_kind_selected:function(a){this.selected_kind=a;this.$(".description").html(a.description);this.$(".kind").attr("class","kind m-widget-preview "+a.kind);this.remove_size_select();1<a.available_sizes.length&&(a=(new e({kind:a})).render().$el,a.insertBefore(this.$(".add")),this.$el.is(":visible")&&a.chosen({disable_search_threshold:10}));this.enable_add_button()},
remove_size_select:function(){var a=this.$(".size");1>a.length||a.unchosen().remove()},enable_add_button:function(){var a=this.$(".add");a.hasClass("disabled")&&(a.removeAttr("disabled"),a.removeClass("disabled"))},add_widget:function(a){a=$(a.target);if(a.hasClass("disabled"))return null;a.addClass("disabled");a=this.selected_kind.kind;var d=D.Backbone.widget_kinds[a];if(1<this.selected_kind.available_sizes.length)var b=this.$(".size").val();else b=this.selected_kind.available_sizes[0],b=_.sprintf("%dx%d",
b[0],b[1]);d={service_kind:d.prototype.service_kind,widget_kind:a,no_permissions:0};this.model.needs_upgrade()?(d.no_permissions=1,analytics.track("widget kind select",d),D.Backbone.app.navigate("settings/account/subscription",!0)):(analytics.track("widget kind select",d),D.Backbone.app.navigate(_.sprintf("new/widget/%s/%s",a,b),!0))}}),g=D.Backbone.Collection.extend({model:h,url:"/api/directory/",view_cls:void 0,detail_view_cls:void 0,not_services:["static","clock","rss","countdown"],initialize:function(){this.view=
new this.view_cls({collection:this});this.detail_view=new this.detail_view_cls({collection:this});this.on("reset",this.update_widget_classes)},comparator:function(a){var d=a.get("name");a.needs_upgrade()||(d=" "+d);return d},update_widget_classes:function(){this.each(function(a){var d=a.get("parent_service"),b=D.Backbone.service_kinds[d||a.get("service")];void 0===b?console.log("service "+a.get("service")+" not found"):(null===d&&_.extend(b.prototype,{kind:a.get("service"),kind_name:a.get("service_name"),
user_managed:a.get("user_managed"),developer_plan_permission:a.get("developer_plan_permission"),uses_external_authentication:a.get("uses_external_authentication")}),_.each(a.get("widget_kinds"),function(d){var b=D.Backbone.widget_kinds[d.kind];void 0===b?console.log("widget "+d.kind+" not found"):_.extend(b.prototype,{kind:d.kind,kind_name:d.display_name,premium:a.get("premium"),wiki_url:a.get("wiki_url"),service_kind:d.service,description:d.description,available_sizes:d.available_sizes,date_created:d.date_created,
slots:d.slots})}))})}}),a=D.Backbone.View.extend({slider_name:void 0,create_slide:function(a,d){this.slider=new $.fn.Slidster(this.$(".groups"),$.extend({},D.u.constants.slidster_conf,{pager_info_item:"services",start_at:a||1},d))},slide_container:function(){return this.$(".groups .viewport > ul")},next_page:function(){this.track_slide("next page")},previous_page:function(){this.track_slide("previous page")},track_slide:function(a){if(this.slider_name){var d=this.slider_name;_.isFunction(this.slider_name)&&
(d=this.slider_name());analytics.track(d+" "+a,this.track_slider_props())}},track_slider_props:function(){return{slide:this.slider.current,progress:this.slider.current/this.slider.slides}}}),d=a.extend({template:"directory_services_detail",events:{"click .next":"next_page","click .previous":"previous_page"},slider_name:"widget kind",initialize:function(a){this.collection=a.collection},template_data:function(a){a=a.toJSON();return{service:a.service||a.id,service_name:a.service_name||a.name}},render:function(a){if(D.bb.account.get("readonly"))return this;
var d=a.get("service")||a.get("id");this.setElement($.tmpl(this.template,this.template_data(a)));this.groups=this.collection.get(d).get("widgets").models;this.add_groups(a);var b=_.indexOf(this.groups,a)+1;D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc();this.create_slide(b,{on_slide_show:_.bind(function(a,d,b){this.update_pagination(a)},this)});this.slide_container().children().show()},this)});this.$(".groups select").chosen({disable_search_threshold:10});return this},add_groups:function(a){_.each(this.groups,
_.bind(function(d){var b=d.detail_view.render().$el;b.appendTo(this.slide_container());d!==a&&b.hide()},this))},update_pagination:function(a){a=this.groups[a-1];var d=a.get("service")||a.id;D.Backbone.app.navigate("directory/"+d+"/"+a.id)}}),l=g.extend({view_cls:D.bb.View,detail_view_cls:d}),q=D.Backbone.Model.extend({initialize:function(){this.item_view=new v({model:this});this.detail_view=new b({model:this})},needs_upgrade:function(){if(D.bb.account.get("has_full_permissions"))return!1;var a=_.contains(["developer",
"sinfonier"],D.bb.account.get("plan_label"))&&!_.contains(["custom","github","internal"],this.get("id")),d=!D.bb.account.has_premium_directory()&&this.get("premium");return a||d},order_rank:function(){return this.get("name")}}),v=D.Backbone.View.extend({template:"directory_services_item",template_data:function(){return _.extend(this.model.toJSON(),{needs_upgrade:this.model.needs_upgrade()})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this}}),w=v.extend({template:"directory_custom_services_item"}),
m=a.extend({template:"directory_services",page_template:"directory_services_page",groups_per_page:3,current_page:void 0,slider_name:"directory",filtered:void 0,initialize:function(a){this.collection=a.collection},events:{"click .integration-request":"integration_request","keyup .search":"filter_keyword","change .category":"filter_category"},initialize:function(a){this.collection=a.collection;this.reset_search()},template_data:function(){return data={plan:Ducksboard.bb.account.get("plan_label"),total:D.bb.directory.services.models.length,
categories:this.collection.extract_categories(),services:this.collection,has_trial_account:D.bb.account.get("has_trial_account"),has_premium_directory:D.bb.account.has_premium_directory()}},render:function(a){if(D.bb.account.get("readonly"))return this;D.bb.dashboards.current&&D.bb.dashboards.current.view.hide_welcome();this.setElement($.tmpl(this.template,this.template_data()));this.search();this.set_old_filters();D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc();this.create_slide(a||
1,{on_slide_show:_.bind(function(a,d,b){this.update_pagination(a)},this)});var d=new z;this.$(".latest-widgets").replaceWith(d.render().$el);d.create_slide();this.$("#directory-search").focus()},this)});2>$("ul",this.slide_container()).length&&this.$("nav .next").hide();this.$("select").chosen({disable_search_threshold:10});return this},append_to_directory:function(a){this.filtered&&this.filtered.push(a);if(!this.current_page||$("a",this.current_page).length>=this.groups_per_page)this.current_page=
this.new_page();a.item_view.render().$el.appendTo(this.current_page)},new_page:function(){return $.tmpl(this.page_template).appendTo(this.slide_container())},update_directory:function(a){this.current_page=void 0;this.slider&&this.slider.$controls.add(this.slider.$pager_info)[a.length?"show":"hide"]();this.slider&&this.slider.slides&&this.slider.empty();this.filtered=[];_.each(a,function(a){this.append_to_directory(a)},this);this.slider&&this.slider.refresh()},update_pagination:function(a){D.Backbone.app.navigate("directory/p"+
a)},integration_request:function(){analytics.track("missing widgets button")},default_filters:function(){return{keyword:"",category:"all",service:"all"}},reset_search:function(){this.search_filters=this.default_filters()},search_active:function(){return!_.isEqual(this.search_filters,this.default_filters())},set_old_filters:function(){this.$(".filters .search").val(this.search_filters.keyword);this.$(".filters .category").val(this.search_filters.category);this.$(".filters .service").val(this.search_filters.service)},
track_slider_props:function(){return{slide:this.slider.current,progress:this.slider.current/this.slider.slides}},search:function(){var a=this.search_filters.keyword,d=function(a){return!0};_.each(["category"],_.bind(function(a){var b=this.search_filters[a];"all"!==b&&(d=function(a){return _.any(a.get("widgets").models,function(a){return a.get("category")===b})})},this));this.groups=this.collection.select(_.bind(function(b){if(!b.get("name")||this.search_active()&&b.is_custom_category)return!1;var e=
[b.get("name"),b.get("service")];return d(b)&&_.any(e,function(d){return d&&_.str.include(d.toLowerCase(),a)})},this));this.update_directory(this.groups)},filter_keyword:function(){var a=this.$(".filters .search").val().toLowerCase();this.search_filters.keyword=a;this.search();this.track_keyword()},track_keyword:_.debounce(function(){analytics.track("directory filter keyword")},2E3),filter_category:function(a){a=$(a.target).val().toLowerCase();this.search_filters.category=a;this.reset_filter("service");
this.search();analytics.track("directory filter category",{category:a})},reset_filter:function(a){this.search_filters[a]="all";this.$(_.sprintf(".filters .%s",a)).val("all").trigger("liszt:updated")}}),t=m.extend({template:"directory_service_widgets",slider_name:"service widgets",groups_per_page:void 0,using_service:function(a){return _.find(D.bb.services.models,function(d){return d.get("service_kind")===a.get("service_kind")})},template_data:function(a){return _.extend(a.toJSON(),{description:a.get("description")||
!1,using_service:this.in_use})},render:function(a,d){if(D.bb.account.get("readonly"))return this;D.bb.dashboards.current&&D.bb.dashboards.current.view.hide_welcome();this.groups_per_page=(this.in_use=this.using_service(a))||!a.get("description")?6:4;this.setElement($.tmpl(this.template,this.template_data(a)));this.update_directory(a);D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc();this.create_slide(d||1,{on_slide_show:_.bind(function(a,d,b){this.update_pagination(a)},this)})},
this)});return this},create_slide:function(a,d){this.slider=new $.fn.Slidster(this.$(".groups"),$.extend({},D.u.constants.slidster_conf,{pager_info_item:"widgets",start_at:a||1},d))},update_directory:function(a){this.current_page=void 0;this.groups=a.get("widgets").models;_.each(this.groups,function(a){this.append_to_directory(a)},this)},update_pagination:function(a){var d=this.groups[a-1],d=d.get("service")||d.id;D.Backbone.app.navigate("directory/service/"+d+"/p"+a)}}),t=g.extend({model:q,view_cls:m,
widgets_view_cls:t,detail_view_cls:d,no_external_services:["clock","countdown","rss","static"],initialize:function(){this.view=new this.view_cls({collection:this});this.widgets_view=new this.widgets_view_cls({collection:this});this.detail_view=new this.detail_view_cls({collection:this})},extract_categories:function(a){a||(a=this.service_widgets);return _.uniq(_.sortBy(a.map(function(a){return{id:a.get("category"),name:a.get("category_name"),description:a.get("description")}}),function(a){return a.name}),
!0,function(a){return a.id})},extract_services:function(a){a||(a=this.service_widgets);var d=this.no_external_services,b={};a=a.map(function(a){var e=a.get("service"),f=D.bb.service_kinds[a.get("parent_service")||a.get("service")];if(void 0===f)return console.log("service "+e+" widgets not found"),{};f=f.prototype;b[e]||(b[e]={all:[],total:0});b[e].all.push(a);return{id:a.get("service"),premium:a.get("premium"),service_kind:a.get("parent_service")||a.get("service"),name:a.get("service_name"),description:f.description,
total:b[e].total+a.get("total"),signup_url:f.signup_url,button_text:f.button_text,external_service:-1===$.inArray(a.get("service"),d)}});a=_.chain(a).filter(function(a){return a.id}).sortBy(function(a){return a.name}).uniq(!0,function(a){return a.id}).value();_.each(a,function(a){a.widgets=new B(b[a.id].all)});return a},extract_service_models:function(a){a||(a=this.service_widgets);a=_.map(this.extract_services(a),function(a){return new q(a)});var d=new q({id:"custom",premium:!1,service_kind:"custom",
name:"API",widgets:new B([new C])});d.item_view=new w({model:d});a.push(d);return a}}),u=D.Backbone.Model.extend({is_custom_category:!1,initialize:function(){this.item_view=new f({model:this})}}),x=D.Backbone.View.extend({template:"directory_dashboard_item",template_data:function(){return _.extend(this.model.toJSON(),{needs_upgrade:this.model.get("needs_upgrade")()})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this}}),y=D.Backbone.View.extend({template:"directory_dashboard_detail",
template_data:function(){return _.extend(this.model.toJSON(),{needs_upgrade:this.model.get("needs_upgrade")})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this}}),B=D.bb.Collection.extend({model:u,comparator:function(a){return a.is_dashboard?-1:a.order_rank()},initialize:function(a){this.service=a[0].get("service");"twilio"===this.service&&(this.dashboard_kind=D.bb.dashboard_kinds.get(this.service))&&(this.dashboard_kind.is_dashboard=!0,this.dashboard_kind.item_view=
new x({model:this.dashboard_kind}),this.dashboard_kind.detail_view=new y({model:this.dashboard_kind}),a.push(this.dashboard_kind))}});D.bb.Collection.extend({model:u,initialize:function(){this.detail_view=new d({collection:this})}});var F=D.Backbone.View.extend({template:"directory_custom_category_item",events:{"click a":"select_group"},template_data:function(){return this.model.toJSON()},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},select_group:function(a){analytics.track("widgets group select",
{group:this.model.id,service_kind:"custom"})}}),m=m.extend({template:"directory_customs",spreadsheets_template:"directory_custom_googlespreadsheets",groups_per_page:9,current_page:void 0,slider_name:"customs",initialize:function(a){this.collection=a.collection},render:function(){this.setElement($.tmpl(this.template));D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc()},this)});this.update_directory(this.collection.models);$.tmpl(this.spreadsheets_template).appendTo(this.current_page);
return this}});D.Backbone.View.extend({template:"directory_custom_item",render:function(){this.setElement($.tmpl(this.template,this.model.toJSON()));return this}});var u=d.extend({template:"directory_custom_detail",category_name:void 0,slider_name:function(){return this.category_name?this.category_name.replace("_"," "):"custom"},render:function(a,d){this.setElement($.tmpl(this.template));this.category_name=a;this.groups=this.collection.select(_.bind(function(d){return d.get("category").toLowerCase()===
a},this));d||(d=this.groups[0]);this.add_groups(d);var b=_.indexOf(this.groups,d)+1;D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc();this.create_slide(b);this.slide_container().children().show()},this)});this.$(".groups select").chosen({disable_search_threshold:10});return this},slide_container:function(){return this.$(".groups .viewport > ul")},update_pagination:function(a,d){var b=_.sprintf("custom/%s/%s",this.category_name,this.groups[a].id);D.Backbone.app.navigate(b)}}),C=
h.extend({initialize:function(){this.item_view=new f({model:this});this.detail_view=new b({model:this})}}),u=g.extend({model:C,view_cls:D.bb.View,detail_view_cls:u,comparator:function(a){return a.get("layout")}}),K=D.Backbone.Model.extend({is_custom_category:!0,initialize:function(){this.item_view=new F({model:this})},needs_upgrade:function(){return!1},order_rank:function(){return this.get("order_rank")}}),h=D.bb.Collection.extend({model:K,view_cls:m,initialize:function(){this.view=new this.view_cls({collection:this})},
extract_categories:function(){var a={custom_numeric:1,custom_images:2,custom_textual:3};return _.uniq(_.sortBy(D.bb.directory.custom.map(function(d){return{id:d.get("category"),name:d.get("category_name"),order_rank:a[d.get("category")],description:d.get("category_description")}}),function(d){return a[d.id]}),!0,function(a){return a.id})},extract_category_models:function(){return _.map(this.extract_categories(),function(a){return new K(a)})}}),g=g.extend({url:null,initialize:function(){this.on("reset",
this.update_widget_classes)}}),z=a.extend({template:"directory_latest",limit:12,events:{"click .next":"next_page","click .previous":"previous_page"},initialize:function(){this.collection=J},template_data:function(){return{widgets:this.collection.sortBy(function(a){return-1*parseFloat(a.get("date_modified"))}).slice(0,this.limit).map(function(a,d){return{name:a.get("name"),description:a.get("description"),service:a.get("service"),group:a.get("group")}})}},render:function(){this.setElement($.tmpl(this.template,
this.template_data()));return this},create_slide:function(){this.slider=new $.fn.Slidster(this.$el,$.extend({},D.u.constants.slidster_conf,{pager_info:!1,loop:!1}))}}),a=new u,J=new l,l=new g,G=new t,A=new h;J.on("reset",function(a){G.service_widgets=a;a=G.extract_service_models();G.reset(a)});a.on("reset",function(a){a=A.extract_category_models();A.reset(a)});_.extend(Ducksboard.Backbone,{directory:{services:J,custom:a,others:l,service_kinds:G,custom_kinds:A}})})();
(function(){var e,k="twitter analytics salesforce zendesk github twilio".split(" ");D.bb.directory.service_kinds.on("reset",function(){e=D.bb.directory.service_kinds.filter(function(a){return _.contains(k,a.get("id"))});e=_.map(e,function(a){return{slug:a.get("id"),name:a.get("name"),needs_upgrade:a.needs_upgrade()}})});var h=D.Backbone.View.extend({template:null,template_data:function(){return{}},render:function(a){this.setElement($.tmpl(this.template,this.template_data()));this.render_modal();return this},
render_modal:function(){D.u.super_modal(this);this.track_action()},track_action:function(a){analytics.track(this.template.replace(/_/g," "),a)}}),f=h.extend({template:"wizard_start"}),b=h.extend({template:"wizard_manual_setup"}),g=h.extend({template:"wizard_choose_service",template_data:function(){return{services:e}}}),a=h.extend({template:"wizard_connect",render:function(a){if(a){this.setElement($.tmpl(this.template,this.template_data()));var b=D.Backbone.dashboards.current;b.set_create_view(D.Backbone.wizard_dashboard_create_views[a.service]);
b.create_view.render();this.track_action({service:a.service})}}}),h=h.extend({template:"wizard_what_is_next",template_data:function(){return{slug:D.bb.dashboards.current.get("slug")}},track_action:function(){var a={},b=D.bb.dashboards.current.widgets,e=b.size(),f=e?"setup":"manual";e&&(a.service=b.at(0).service.get("service_kind"));analytics.track(f+" wizard completed",a)}});D.bb.wizard||(D.bb.wizard={});D.bb.wizard.dashboard={start:f,manual_setup:b,choose_service:g,connect:a,what_is_next:h}})();
(function(){var e=D.Backbone.Model.extend({idAttribute:"service_id",description:void 0,signup_url:void 0,button_text:void 0,create_tip:void 0,kind:void 0,kind_name:void 0,user_managed:void 0,uses_external_authentication:void 0,api_translation:[["service_id","id"],["service_username","username"],["service_kind","kind"]],defaults:{service_username:void 0,auth_user:null,auth_password:null,auth_domain:null},initialize:function(){this.item_view=new k({model:this});this.selectable=new h({model:this});this.form_view=
new D.Backbone.FormView({model:this});this.initial_form_view=new D.Backbone.FormView({model:this})},auth_url:function(b){var e=_.sprintf("/services/add/%s/",this.kind);b&&(e=_.sprintf("%s/%d/",e,this.id));return e},sync:function(b,e,a){_.include(["create","update"],b)&&(a.contentType="application/json",a.data=JSON.stringify(_.extend(this.toDucksboardJSON(),{kind:this.kind})));return Backbone.sync.call(this,b,this,a)},parse:function(b,e){return _.extend(D.bb.Model.prototype.parse.apply(this,arguments),
{auth_user:void 0,auth_password:void 0})},requires_oauth_domain:function(){return this.uses_external_authentication&&("zendesk"===this.kind||"desk"===this.kind)}}),k=D.Backbone.View.extend({template:"service_item",events:{"click .delete":"destroy","click .authorize":"authorize"},template_data:function(){var b=!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_serviceboard()&&!1===D.bb.dashboards.current_is_chromeboard()&&!1===D.bb.account.get("is_beta"),b=b||!0===D.bb.account.get("has_recurly_account_expired")&&
!1===D.bb.dashboards.current_is_serviceboard()&&!1===D.bb.dashboards.current_is_chromeboard();return _.extend(this.model.toJSON(),{can_relink:!b,kind:this.model.kind,kind_name:this.model.kind_name,uses_external_authentication:this.model.uses_external_authentication})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},destroy:function(){this.confirm_view=this.$el.confirm({text:_.sprintf("Unlinking this %s account will erase all related widgets and data. Sure you want to unlink it?",
_.capitalize(this.model.kind_name)),continue_text:"Unlink",discard_text:"Keep",continue_action:_.bind(this._destroy,this),continue_icon:!1}).data("confirm_view")},_destroy:function(){_.map(D.bb.dashboards.get_service_widgets(this.model.id),function(b){b.view.remove_from_frontend()});this.model.destroy({wait:!0}).complete(_.bind(function(){this.confirm_view.hide();this.$el.fadeOut(_.bind(function(){this.remove()},this))},this));this.model.collection.remove(this.model)},authorize:function(){if(this.model.uses_external_authentication&&
!this.model.requires_oauth_domain())return window.open(this.model.auth_url(!0));this.model.trigger("relink",this.model)}}),h=D.Backbone.View.extend({template:"service_selectable",render:function(b,e){var a=D.u.break_space(this.model.get("service_username")),a=_.extend(this.model.toJSON(),{selected:!!b,username_multiline:a,service:this.model.get("service_kind"),in_dashboard_creation:!!e});this.setElement($.tmpl(this.template,a,{model:this.model}));return this}}),f=new (D.Backbone.Collection.extend({model:e,
url:"/api/accounts/",comparator:function(b){return[b.kind,b.id]},parse:function(b,f){return _.map(b.data,function(a){a=D.u.from_api(e.prototype.api_translation,a);return new D.Backbone.service_kinds[a.service_kind](a)},this)}}));_.extend(Ducksboard.Backbone,{Service:e,services:f,service_kinds:{}})})();
(function(){var e=D.Backbone.Model.extend({idAttribute:"service_id",api_translation:[["service_id","account_id"]],initialize:function(b,a){this.widget=a.widget},load_service_params:function(){return _.any(this.params,function(b,a){return b.template_data&&b.template_data.load_service_params})},retry_service_params:function(){return this.widget.retry_service_params}}),k=D.Backbone.Model.extend({idAttribute:"widget_id",urlRoot:"/api/widgets/",current_error_code:null,retry_service_params:void 0,kind:void 0,
kind_name:void 0,service_kind:void 0,description:void 0,slots:void 0,timezone:void 0,api_translation:[["widget_id","id"]],slot_attrs:{},initialize:function(b,a){this.dashboard=a&&a.dashboard;this.service=a&&a.service;var d=this.__proto__&&this.__proto__.available_sizes;d&&(this.get("width")||this.set({width:d[0][0]}),this.get("height")||this.set({height:d[0][1]}));_.each(["width","height","row","column"],_.bind(function(a){this.set(a,parseInt(this.get(a)));this.on("change:"+a,function(d,b){d.set(a,
parseInt(b))})},this));this.timezone=this.timezone||D.bb.account.get("timezone");this.data_source=new e({},{widget:this});this.data_source.params=this.data_source_params;this.slots=new D.Backbone.SlotList;this.create_slots();this.view=new (this.view_cls?this.view_cls:h)({model:this})},slot_defs:{},data_source_params:{},css_classes:"",create_slots:function(b,a){var d=_.isFunction(this.slot_defs)?this.slot_defs():this.slot_defs;_.each(d,_.bind(function(d,e){var f=new d.kind(_.extend({layout:e},d.defaults),
{widget:this});b?f.set(b[e]):this.slot_attrs&&f.set(this.slot_attrs[e]);this.slots.add(f);a&&f.start()},this));a&&this.bind_error_notifications()},delete_slots:function(b){_.isUndefined(b)&&(b=400);var a=this.slots.map(_.bind(function(a){a.unsubscribe();var e=$.Deferred();a.view.$el.transition({opacity:0},b,_.bind(function(){this.view.remove();this.url_view&&this.url_view.remove();e.resolve()},a));return e.promise()},this));this.slots=new D.Backbone.SlotList;return a},extract_slot_attrs:function(){var b=
{};this.slots.each(function(a){b[a.get("layout")]=a.toJSON()});return _.isEmpty(b)?this.slot_attrs:b},reload_slots:function(b,a,d){_.isUndefined(a)&&(a=400);this.slot_attrs=this.extract_slot_attrs();a=this.delete_slots(a);d&&a.push(d);$.when.apply(null,a).then(_.bind(function(){this.create_slots(b,!1);this.slots.each(function(a){a.view.render().$el.css({opacity:1});a.start()})},this))},can_edit_appearance:function(){return!_.all(this.slots.pluck("no_appearance"),_.identity)||this.isNew()&&"custom"===
this.service.kind},get_timespan_slots:function(){var b=this.slots.select(function(a){return"timespan"===a.initial_data_type});return _.any(b,function(a){return 1<a.allowed_timespans.length})?b:[]},toDucksboardJSON:function(){var b={};this.slots.each(function(a){b[a.get("layout")]=a.toDucksboardJSON()});var a=_.extend(this.toJSON(),{kind:this.kind,dashboard:this.dashboard.get("slug"),wiki_url:this.wiki_url});return{widget:D.u.to_api(this.api_translation,a),slots:b,content:this.data_source.toDucksboardJSON()}},
current_status:function(){var b={widget:this.toJSON(),data_source:this.data_source.toJSON(),slots:{}};this.slots.each(function(a){b.slots[a.get("layout")]=a.toJSON()});return b},set_all:function(b){b.widget&&this.set(b.widget);b.data_source&&this.data_source.set(b.widget);_.each(_.pairs(b.slots),_.bind(function(a){var d=a[0];a=a[1];this.slots.get(d).set(a);this.slots.get(d).old_label=void 0},this))},from_api:function(b){b.content=D.u.from_api(this.data_source.api_translation,b.content);b.widget=D.u.from_api(this.api_translation,
b.widget);_.each(b.slots,function(a,d){b.slots[d]=D.u.from_api(this.slots.get(d).api_translation,a)},this);return b},sync:function(b,a,d){_.include(["create","update"],b)&&(a=JSON.stringify(this.toDucksboardJSON()),d.contentType="application/json",d.data=d.data||a);return Backbone.sync.call(this,b,this,d)},parse:function(b){return D.u.from_api(this.api_translation,b.widget)},clone_url:function(){return this.url()+"/copy"},start:function(b){this.view.render();this.slots.each(function(a){a.view.$el.show();
b&&(a.view.render(),a.start())})},setup_new:function(b){var a=D.u.from_api(e.api_translation,b.content),d=a.service_id;d&&D.Backbone.services.get(d)&&(this.service=D.Backbone.services.get(d));this.data_source.set(a);this.slots.each(function(a){a.set(b.slots[a.get("layout")])});this.set(b.widget)},setup_and_start:function(b,a){_.isUndefined(a)&&(a=!0);this.setup_new(b);this.start(a)},bind_error_notifications:function(){_.each(this.slots.pluck("label"),function(b){this.listenTo(D.ws,"error:"+b,this.error);
this.listenTo(D.ws,"success:"+b,this.success)},this);this.listenTo(this.data_source,"change",this.success)},unbind_error_notifications:function(){_.each(this.slots.pluck("label"),function(b){this.stopListening(D.ws,"error:"+b);this.stopListening(D.ws,"success:"+b)},this);this.stopListening(this.data_source,"change")},error:function(b){b!==this.current_error_code&&this.handles_error_code(b)&&(this.current_error_code=b,this.view.error(b))},success:function(){this.current_error_code&&(this.current_error_code=
null,this.view.success())},handles_error_code:function(b){return 401===b},has_multiple_slot_kinds:function(){var b=_.keys(this.slots.groupBy(function(a){return a.get_slot_kind()}));this.slot_kinds=b;return 1<b.length},is_visible:function(){return D.bb.dashboards.current&&this.dashboard===D.bb.dashboards.current},is_exportable_to_csv:function(){return _.some(this.slots.filter(function(b){return b.is_exportable_to_csv()},this))},supports_alerts:function(){var b=_.groupBy(D.config.condition_kinds,function(a){return a.slot_type});
return this.slots.find(function(a){return b[a.get_slot_type()]})}}),h=D.Backbone.View.extend({template:"widget",contextual_template:"widget_contextual",error_template:"widget_error",events:{click:"show_contextual","click .dragger":"dragging","click .error .authorize":"authorize","click .error .preferences":"show_preferences"},initialize:function(){_.extend(this.events,h.prototype.events);this.container=this.setup_container()},setup_container:function(b,a){if(this.model.dashboard){var d;b=b||this.model.get("width");
a=a||this.model.get("height");if(this.model.isNew()){var e=this.model.dashboard.view.gridster;d=e.next_position(b,a);this.model.set({column:d.col,row:d.row});d=$("<li></li>");e.add_widget(d,b,a)}else d=$.tmpl("gridster_container",{col:this.model.get("column"),row:this.model.get("row"),sizex:b,sizey:a});return d}},template_data:function(){return _.extend({kind:this.model.kind,css_classes:_.result(this.model,"css_classes")},this.model.toJSON())},render:function(){this.setElement($.tmpl(this.template,
this.template_data(),{model:this.model}));this.append();this.prepare_slots_rendering();this.model.slots.each(function(b){b.view.add_loading_layer()});this.$el.show();return this},prepare_slots_rendering:function(){},notify:function(){this.model.get("sound")&&this.play_sound();var b=this.$el;if(this.model.is_visible()&&!b.hasClass("updated")){b.addClass("updated");var a=function(){b.removeClass("updated")};Modernizr.cssanimations&&b.animationEnd("glow",a);_.delay(a,3E3)}},error:function(b){b={message:this.error_code_to_message(b),
uses_external_authentication:this.model.service.uses_external_authentication,is_public:D.bb.account.get("readonly")};b=$.tmpl(this.error_template,b);this.$(".error").remove();this.$el.prepend(b)},success:function(){this.$(".error").remove()},error_code_to_message:function(b){return D.u.error_message(b)},play_sound:_.throttle(function(){$("#sound-player").data("ready")&&$("#sound-player").jPlayer("stop").jPlayer("play")},Raphael.constants.UPDATE_ANIMATION_DURATION),show_contextual:function(b){var a=
"#settings/widget/"+this.model.id,d="/api/widgets/"+this.model.id+"/export";this.add_context_action(b,{label:"Widget preferences",url:a,css_class:"preferences",icon:"settings"});this.model.supports_alerts()&&this.add_context_action(b,{label:"Setup alert",url:a+"/alerts",css_class:"alert",icon:"alert icon-small"});D.bb.account.can_export_data()&&this.model.is_exportable_to_csv()&&this.add_context_action(b,{label:"Export CSV",url:d,css_class:"export-csv",icon:"csv icon-small",external:!0});this.render_contextual(b)},
dragging:function(b){b.stopImmediatePropagation()},show_preferences:function(b){b.stopPropagation();D.Backbone.app.navigate(_.sprintf("settings/widget/%d",this.model.id),!0)},authorize:function(b){b.stopPropagation();return window.open(this.model.service.auth_url(!0))},hide_widget:function(){this.model.dashboard.view.gridster.remove_widget(this.container,_.bind(function(){this.model.delete_slots();this.model.dashboard.view.update_positions(!0)},this))},remove_from_frontend:function(){this.hide_widget();
this.model.collection.remove(this.model)},add_context_action:function(b,a){var d=b.originalEvent;d.ducksboard_actions||(d.ducksboard_actions=[]);d.ducksboard_actions.push(a)},render_contextual:function(b){if(!b.isPropagationStopped()&&D.d.interactive&&this.model.dashboard.kind.get("editable")){var a=b.originalEvent.ducksboard_actions;D.Backbone.account.get("readonly")&&(a=_.filter(a,function(a){return a.is_public}));if(!_.isEmpty(a)){var d=this.model.dashboard.view.$el,a=$.tmpl(this.contextual_template,
{actions:a},{is_external:D.u.is_external});a.css({top:b.pageY-d.offset().top,left:b.pageX-d.offset().left}).appendTo(d).fadeIn();b.originalEvent.$contextual=a;a.data("cleanup",function(){$(this).remove()});$("li.preferences a",a).click(_.bind(function(){analytics.track("widget preferences open",{widget_kind:this.model.kind,service_kind:this.model.service.kind})},this))}}},append:function(){this.$el.appendTo(this.container)},get_position:function(){return{row:this.container.attr("data-row"),column:this.container.attr("data-col")}},
remove:function(){this.model.unbind_error_notifications();this.hide_widget();D.Backbone.View.prototype.remove.apply(this)}}),f=D.Backbone.View.extend({template:"widget_settings",events:{"click .delete":"destroy","click .copy-to > a":"show_list","click #dashboards-to-copy-list li":"clone_widget","click .save":"save","click .sound .enable":"enable_sound","click .sound .disable":"disable_sound","click .close":"close"},tabs:"create_account accounts appearance data_api content alerts advanced feedback".split(" "),
template_data:function(){var b={is_new:this.model.isNew(),is_custom:"custom"==this.model.service.kind};return _.extend(b,this.model.toJSON())},render:function(b){this.setElement($.tmpl(this.template,this.template_data()));var a=this.$("nav");this.sections={};var d=0;_.each(this.tabs,_.bind(function(b){var e=new D.Backbone.widget_tabs[b]({container:this});e.enabled?(this.sections[b]=e,this.sections[b].tab=a.find("a").eq(d++)):e.remove()},this));var e=_.indexOf(_.keys(this.sections),b),e=-1<e?e:0;a.tabs(this.$(".pane"),
{initialIndex:e,onBeforeClick:function(){D.u.hide_tooltips()},onClick:_.bind(function(a,d){var b=_.keys(this.sections)[d],e=this.sections[b];D.u.track_tab(a,"select widget tab",{tab:b,widget_kind:this.model.kind,service_kind:this.model.service.kind});e&&D.u.focus_on_first(e.$el)},this)});this.render_dashboards();_.each(this.sections,function(a){_.isFunction(a.cb_appended)&&a.cb_appended()});_.defer(_.bind(function(){var a=_.keys(this.sections)[e];D.u.focus_on_first(this.sections[a].$el)},this));return this},
render_dashboards:function(){var b=this.$("#dashboards-to-copy-list"),a=D.Backbone.dashboards.filter(function(a){return a.kind.get("editable")});_.each(a,function(a){$.tmpl("dashboard_to_copy_item",a.toJSON(),{truncate:function(a){var d=this.data.label;return d.length>a+3?d.substring(0,30)+"...":d}}).appendTo(b)})},save:function(b){if(this.$(".error").length)b=_.keys(_.groupBy(this.$(".error"),function(a){return $(a).parents(".pane").tmplItem().data.section})),_.each(b,_.bind(function(a){(a=this.sections[a])&&
this._mark_tab(a.tab)},this));else{var a=this.model.current_status();this.model.set({title:this.$(".title input").val(),sound:this.$(".sound").hasClass("enabled")},{silent:!0});_.each(this.sections,function(a){a.set_from_input()});var d=D.u.sending($(b.currentTarget),"saving preferences");if(d.blocked)return!1;var e=this.model.isNew();this.model.save({},{success:_.bind(function(a,b){d.complete();b=this.model.from_api(b);e?this.setup_new_widget(a,b):this.update_on_changes(a,b)},this),error:_.bind(function(b,
f){d.complete();this.model.set_all(a);this._show_all_errors(b,f);analytics.track(e?"create widget error":"update widget error",{widget_kind:this.model.kind,service_kind:this.model.service.kind})},this)})}},destroy:function(b){b&&b.preventDefault();this.model.isNew()||(this.confirm_view=this.$("header").confirm({text:_.sprintf("Sure you want to delete this %s widget? It won't come back...",_.capitalize(this.model.service.kind_name)),continue_text:"Delete",discard_text:"Keep",continue_action:_.bind(this._destroy,
this)}).data("confirm_view"))},_destroy:function(){this.model.destroy({wait:!0}).complete(_.bind(function(){this.confirm_view&&this.confirm_view.hide();$.fancybox.close();this.model.view.remove()},this))},show_list:function(b){b&&b.preventDefault();if(this.model.isNew())return!1;var a=D.bb.account.available_widgets_count(),d="custom"==this.model.service_kind&&0>=a.custom;if(0>=a.total||d)return d?Backbone.history.navigate("upgrade/custom_widget_count",!0):Backbone.history.navigate("upgrade/widget_count",
!0),!1;a=$("#dashboards-to-copy-list");a.fadeToggle();b.originalEvent.$contextual=a},clone_widget:function(b){$("#dashboards-to-copy-list").fadeOut();if(this.model.isNew())return!1;b=D.Backbone.dashboards.get(b.currentTarget.id);this._clone_widget(b);return!1},_clone_widget:function(b){var a=D.u.sending($(".copy-to > a"),"copying widget");if(a.blocked)return!1;var d=this.model.clone_url(),e=this.model.clone({silent:!0}),f=e.get("width"),h=e.get("height");e.clear();e.dashboard=b;e.view.container=e.view.setup_container(f,
h);e.service=this.model.service;e.save({},{url:d,data:JSON.stringify({dashboard:b.get("slug"),row:e.get("row"),column:e.get("column")}),complete:a.complete,success:function(a,d){d=e.from_api(d);b.widgets.add(e);e.setup_and_start(d,!1)},error:_.bind(function(a,d){this._show_all_errors(a,d)},this)})},enable_sound:function(){this.$(".sound").addClass("enabled")},disable_sound:function(b){this.$(".sound").removeClass("enabled")},close:function(b){b.preventDefault();this.abort_creation();$.fancybox.close()},
abort_creation:function(){this.model.isNew()&&(this.model.dashboard.view.gridster.remove_widget(this.model.view.container),this.track_create_abandon(),D.Backbone.dashboards.current.widgets.remove(this.model))},track_create_abandon:function(){var b=!0;this.model.service.user_managed&&(b=D.Backbone.services.any(function(a){return a.get("service_kind")===this.model.service.kind},this));analytics.track("create widget abandon",{widget_kind:this.model.kind,service_kind:this.model.service.kind,has_service:b?
1:0})},setup_new_widget:function(b,a){this.model.setup_and_start(a);"custom"===this.model.service.kind?D.Backbone.app.navigate("settings/widget/"+this.model.id+"/data_api",!0):$.fancybox.close()},update_on_changes:function(b,a){$.fancybox.close();if(_.any(a.changed)){if(a.changed.widget){this.model.set(a.widget);var d=this.model.get("title");this.model.view.$("header h4").fadeOut(function(){spans=$(this).children();$(this).text(d).fadeIn();$(this).prepend(spans)})}if(a.changed.slots||a.changed.content)this.model.data_source.set(a.content),
this.model.reload_slots(a.slots,!1)}},_mark_tab:function(b){if(!b.hasClass("current"))b.addClass("error").one("click",function(){$(this).removeClass("error")})},_show_all_errors:function(b,a){if(_.str.include(a.getResponseHeader("Content-Type"),"application/json")){var d=JSON.parse(a.responseText);if("errors"in d)if(d.code===D.u.api_error_codes.unique_error)_.each(d.errors.labels,_.bind(function(a,d){var b=this.model.slots.get(d);b.url_view.show_errors({label:a});b.set({label:b.previous("label")})},
this)),this._mark_tab(this.sections.urls.tab);else if(d=d.errors,!_.isString(d)){d.widget&&this.show_errors(d.widget);if(d.content){var e="custom"===this.model.service.kind?this.sections.data_api:this.sections.content;e.show_errors(d.content);this._mark_tab(e.tab)}d.slots&&(e=this.sections.appearance,e.show_errors(d.slots),this._mark_tab(e.tab))}}},remove:function(){this.$("nav").data("tabs").destroy();_.each(this.sections,function(b){b.remove()});this.sections={};D.Backbone.View.prototype.remove.apply(this)}}),
b=D.Backbone.Collection.extend({model:k,url:"/api/widgets/",comparator:function(b){var a=b.get("column")?b.get("column"):9999;b=b.get("row")?b.get("row"):9999;return 1E3*parseInt(b)+parseInt(a)},get_by_service:function(b){return this.filter(function(a){return a.service&&a.service.id===b})},save_positions:function(){var b={};_.each(this.models,function(a){b[a.id]={column:a.get("column"),row:a.get("row")}});$.ajax(this.url+"/positions",{type:"POST",data:JSON.stringify(b),contentType:"application/json"})},
save_positions_with_delay:_.debounce(function(){this.save_positions()},2E3)});_.extend(Ducksboard.Backbone,{Widget:k,WidgetView:h,WidgetSettingsView:f,WidgetList:b,widget_kinds:{},widget_tabs:{}})})();
(function(){var e=D.Backbone.WidgetView.extend({fake_slot_template:"slot_line_chart",timespan_class:"timespan-hard",timespan_span_class:"timespan-hard",tick_count:5,section:void 0,timespans:{daily:{modulus:3,mapper:function(a){a=""+a;return 2>a.length?"0"+a:a},extra_class:"small"},weekly:{modulus:1,mapper:function(a){return"Mon Tue Wed Thu Fri Sat Sun".split(" ")[a-1]},extra_class:"big"},monthly:{modulus:5,mapper:function(a){a=""+a;return 2>a.length?"0"+a:a},extra_class:"small"},quarterly:{modulus:2,
mapper:function(a){return"W"+a},extra_class:"small"},yearly:{modulus:1,mapper:function(a){return"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a-1]},extra_class:"small"}},render:function(){this.model.is_compound()||2!=this.model.get("height")||(this.timespan_span_class="timespan-hard-double",this.tick_count=11);D.Backbone.WidgetView.prototype.render.apply(this,arguments);this.chart=this.$("section .timespan .canvas");this.timespan=this.$("section .timespan");this._render_paper();this._render_ticks();
this.$el.fadeIn();return this},prepare_slots_rendering:function(){$.tmpl(this.fake_slot_template,{kind:this.model.kind,extra_classes:this.model.fake_slot_extra_css}).appendTo(this.$(".inner"));D.bb.SlotView.prototype.add_loading_layer.call(this.model,this.model)},clean:function(){var a=$.Deferred();this.timespan.fadeOut(_.bind(function(){$(this.timespan).find(":not(div.canvas)").remove()},this)).fadeIn(_.bind(function(){this._render_paper();this._render_ticks();a.resolve()},this));return a.promise()},
new_ticks:function(a){var d=Raphael.constants.UPDATE_ANIMATION_DURATION/2,b=this.$("span.ticks");b.stop(!0,!0);b.fadeOut(d,_.bind(function(){_.each(b,function(d,b){$(d).text(a[b])})},this)).fadeIn(d)},render_periods:function(){var a=this._create_periods(this.model.periods());this.timespan.prepend(a[0]);this.timespan.prepend(a[1])},new_period:function(){var a=this.timespans[this.model.current_timespan()],d=a.mapper,b=a.modulus,a=Raphael.constants.UPDATE_ANIMATION_DURATION/2,e=this.$("span."+this.timespan_span_class),
f=this.model.periods();e.stop(!0,!0);e.fadeOut(a,_.bind(function(){_.each(e,function(a,e){0===e%b&&$(a).text(d(f[e]))})},this)).fadeIn(a)},_create_periods:function(a){var d=Raphael.tools.width_distribution(a.length,this.$el.actual("width")),b=this.timespan_class,e=this.timespans[this.model.current_timespan()],f=e.mapper,g=e.modulus,h=e.extra_class,e=$.map(a,function(a,e){return'<div class="'+b+'" style="width:'+d[e]+'px"></div>'}),k=0;a=$.map(a,function(a,e){var l='<span class="'+b+" "+h+'" style="left:'+
k+"px;width:"+d[e]+'px">'+(0===e%g?f(a):"")+"</span>";k+=d[e];return l});return[$(e.join("")),$(a.join(""))]},_render_paper:function(){this.chart.graph("paper",{widget:this})},_render_ticks:function(){var a=this.tick_count+1,d=Raphael.tools.width_distribution(a,this.chart.actual("height")),b=0,e=$.map(_.range(1,a),function(a,e){var f=$.tmpl('<div class="${klass}"></div>',{klass:"ticks"});b+=d[e];f.css({height:d[e],"line-height":d[e]+10+"px",bottom:b});return f.tmplItem().nodes}),b=0,a=$.map(_.range(1,
a),function(a,e){var f=$.tmpl('<span class="${klass}">${value}</div>',{klass:"ticks",value:a});b+=d[e];f.css({height:d[e],"line-height":d[e]+7+"px",bottom:b});return f.tmplItem().nodes});this.chart.append(e);this.chart.append(a)}}),k=D.Backbone.Widget.extend({subtitles:[],colors:[],centered:!0,multiline_slots:[],slots_fetched:[],slots_ticked:[],trend_defs:{},kind_cls:D.Backbone.slot_kinds.LineChart,view_cls:e,fake_slot_extra_css:"s-line-chart",create_slots:function(){this.view&&($(this.view.timespan).find(":not(div.canvas)").remove(),
this.view._render_paper(),this.view._render_ticks());this.multiline_slots=[];D.Backbone.Widget.prototype.create_slots.apply(this,arguments);this.slots.each(function(a){a.get("timespan")&&(this.listenTo(a,"initialdata",this.got_slot_initial_data),this.listenTo(a,"periods",this.new_periods),this.multiline_slots.push(a))},this)},delete_slots:function(){var a=D.Backbone.Widget.prototype.delete_slots.apply(this,arguments);a.push(this.view.clean());return a},slot_defs:function(){_.isEmpty(this.trend_defs)&&
$.error("Subclasses must define trend_defs");ret={};_.each(this.subtitles,function(a,d){ret[d+1]={kind:this.kind_cls,defaults:_.extend({subtitle:a,timespan:"daily"},this.trend_defs)}},this);_.each(this.colors,function(a,d){ret[d+1].defaults.color=a},this);return ret},get_slots_data:function(){var a=_.map(this.multiline_slots,function(a){filled=a.filled_data();return filled[0]});return _.flatten(a)},find_best_ticks:function(){return Raphael.tools.zoom_ticks(this.get_slots_data(),this.view.chart.actual("height"),
this.view.tick_count,this.centered)},got_slot_initial_data:function(a){this.slots_fetched.push(a);_.difference(this.multiline_slots,this.slots_fetched).length||(this.view.render_periods(),this.draw_all_slots(),this.slots_fetched=[])},draw_all_slots:function(){var a=this.find_best_ticks();a[2]&&(this.view.new_ticks(a[2]),_.each(this.multiline_slots,function(d){d.view.update_line(a)}))},new_periods:function(a){this.slots_ticked.push(a);_.difference(this.multiline_slots,this.slots_ticked).length||(this.view.new_period(),
this.draw_all_slots(),this.slots_ticked=[])},periods:function(){return this.multiline_slots[0].periods},current_timespan:function(){return this.multiline_slots[0].get("timespan")},is_compound:function(){return this.multiline_slots.length<this.slots.length},css_classes:"floating-header"}),h=k.extend({kind_cls:D.Backbone.slot_kinds.AbsoluteLineChart}),f={centered:!1,get_slots_data:function(){var a=_.map(this.multiline_slots,function(a){filled=a.filled_data();return filled[0]}),a=_.flatten(a);a.push(0);
return a}},b=k.extend(f).extend({kind_cls:D.Backbone.slot_kinds.AreaChart,fake_slot_extra_css:"s-area-chart s-relative-area-chart"}),g=h.extend(f).extend({kind_cls:D.Backbone.slot_kinds.AbsoluteAreaChart,fake_slot_extra_css:"s-area-chart s-absolute-area-chart"}),a=_.extend(_.clone(f),{kind_cls:D.Backbone.slot_kinds.StackedChart,fake_slot_extra_css:"s-stacked-chart"}),f=k.extend(a),d=function(a){var d=a?" leaderboard-image":"";return{css_classes:function(){var a="compound floating-header "+d;this.leaderboard_defs&&
(a+=" leaderboard-"+(this.leaderboard_defs.total_subtitles-1));return a}}},l=k.extend({leaderboard_cls:D.Backbone.slot_kinds.Leaderboard,leaderboard_defs:{},slot_defs:function(){_.isEmpty(this.trend_defs)&&$.error("Subclasses must define trend_defs");_.isEmpty(this.leaderboard_defs)&&$.error("Subclasses must define leaderboard_defs");defs=k.prototype.slot_defs.apply(this,arguments);defs[this.colors.length+1]={kind:this.leaderboard_cls,defaults:this.leaderboard_defs};return defs}}),a=l.extend(a).extend(d(!1)),
q=a.extend(d(!0)).extend({leaderboard_cls:D.Backbone.slot_kinds.StatusLeaderboard}),d=l.extend(d(!1)).extend({kind_cls:D.Backbone.slot_kinds.AbsoluteLineChart});_.extend(Ducksboard.Backbone,{_multiline:{MultilineChartView:e,MultilineChartWidget:k,AbsoluteMultilineChartWidget:h,MultiareaChartWidget:b,AbsoluteMultiareaChartWidget:g,StackedChartWidget:f,AbsoluteMultilineChartLeaderboardWidget:d,StackedChartLeaderboardWidget:a,StackedChartLeaderboardStatusWidget:q}})})();
(function(){var e=D.Backbone.WidgetView.extend({show_contextual:function(e){e.target&&$(e.target).closest(".btn.settings").length&&D.Backbone.WidgetView.prototype.show_contextual.apply(this,arguments)}}),k=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.Map,view_cls:e,css_classes:"no-border",slot_defs:function(){_.isEmpty(this.map_defs)&&$.error("Subclasses must define map_defs");return{1:{kind:this.kind_cls,defaults:_.extend({last:5},this.map_defs)}}}});_.extend(Ducksboard.Backbone,{_map:{MapWidgetView:e,
MapWidget:k}})})();
(function(){var e=D.Backbone.Widget.extend({subtitles:[],colors:[],kind_cls:D.Backbone.slot_kinds.CounterSubtitle,extra_defaults:{},slot_defs:function(){ret={};_.each(this.subtitles,function(a,d){ret[d+1]={kind:this.kind_cls,defaults:{subtitle:a}}},this);_.each(this.colors,function(a,d){ret[d+1].defaults.color=a},this);return ret}}),k=D.Backbone.Widget.extend({trend_defs:{},kind_cls:D.Backbone.slot_kinds.CounterTrend,slot_defs:function(){_.isEmpty(this.trend_defs)&&$.error("Subclasses must define trend_defs");return{1:{kind:this.kind_cls,
defaults:_.extend({timespan:"daily"},this.trend_defs)}}}}),h=k.extend({kind_cls:D.Backbone.slot_kinds.Chart,css_classes:"floating-header"}),f=e.extend({kind_cls:D.Backbone.slot_kinds.CounterBar,css_classes:function(){return _.sprintf("bars-%s",this.slots.length)}}),b=e.extend({kind_cls:D.Backbone.slot_kinds.CounterBox,css_classes:function(){return _.sprintf("boxes-%s",this.slots.length)}}),g=e.extend({kind_cls:D.Backbone.slot_kinds.CounterPin,css_classes:function(){return _.sprintf("pins-%s",this.slots.length)}}),
a=e.extend({kind_cls:D.Backbone.slot_kinds.Gauge,css_classes:function(){return _.sprintf("gauges-%s",this.slots.length)}}),d=e.extend({kind_cls:D.Backbone.slot_kinds.Status}),l=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.Timeline,slot_defs:function(){return{1:{kind:this.kind_cls,defaults:{last:D.u.constants.timeline_size}}}}}),q=l.extend({kind_cls:D.Backbone.slot_kinds.Calendar}),v=D.Backbone.Widget.extend({leaderboard_defs:{},kind_cls:D.Backbone.slot_kinds.Leaderboard,slot_defs:function(){_.isEmpty(this.leaderboard_defs)&&
$.error("Subclasses must define leaderboard_defs");return{1:{kind:this.kind_cls,defaults:this.leaderboard_defs}}}}),w=function(a){var d=a?" leaderboard-image":"";return{css_classes:function(){var a=d;this.leaderboard_defs&&(a+=" leaderboard-"+(this.leaderboard_defs.total_subtitles-1));return a}}},m=v.extend(w(!1)),t=v.extend(w(!0)).extend({kind_cls:D.Backbone.slot_kinds.TrendLeaderboard}),v=v.extend(w(!0)).extend({kind_cls:D.Backbone.slot_kinds.StatusLeaderboard}),w=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.Image,
slot_defs:function(){return{1:{kind:this.kind_cls,defaults:{no_appearance:!0}}}}}),u=w.extend({kind_cls:D.Backbone.slot_kinds.ImageFull,css_classes:"no-border"}),x=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.StaticText,slot_defs:function(){return{1:{kind:this.kind_cls,defaults:{no_appearance:!0}}}},css_classes:"no-border post-it"}),y=D.Backbone.Widget.extend({kind_cls:D.Backbone.slot_kinds.Iframe,css_classes:"no-border",slot_defs:function(){return{1:{kind:this.kind_cls,defaults:{no_appearance:!0}}}}}),
B=D.Backbone.Widget.extend({trend_cls:D.Backbone.slot_kinds.CounterTrend,timeline_cls:D.Backbone.slot_kinds.Timeline,trend_defs:{},timeline_defs:{},slot_defs:function(){_.isEmpty(this.trend_defs)&&$.error("Subclasses must define trend_defs");return{1:{kind:this.trend_cls,defaults:_.defaults(this.trend_defs,{timespan:"daily"})},2:{kind:this.timeline_cls,defaults:_.defaults(this.timeline_defs,{last:D.u.constants.timeline_size})}}},css_classes:"compound"}),F=B.extend({trend_cls:D.Backbone.slot_kinds.Chart,
css_classes:"compound floating-header"}),C=e.extend({kind_cls:D.Backbone.slot_kinds.Funnel}),K=e.extend({kind_cls:D.Backbone.slot_kinds.Completion,css_classes:"floating-header",slot_defs:function(){var a=e.prototype.slot_defs.apply(this,arguments);a[1].kind=this.kind_cls;a[1].defaults=_.extend(a[1].defaults,this.completion_defs);return a}}),z=e.extend({kind_cls:D.Backbone.slot_kinds.Histogram}),k={TrendWidget:k,ChartWidget:h,BarsWidget:f,BoxesWidget:b,PinsWidget:g,GaugeWidget:a,StatusWidget:d,TimelineWidget:l,
CalendarWidget:q,LeaderboardWidget:m,TrendLeaderboardWidget:t,StatusLeaderboardWidget:v,ImageWidget:w,FullImageWidget:u,TextWidget:x,TrendTimelineWidget:B,ChartTimelineWidget:F,FunnelWidget:C,IframeWidget:y,CompletionWidget:K,HistogramWidget:z},k=_.extend(k,D.bb._multiline,D.bb._map);_.extend(Ducksboard.Backbone,{widget_templates:k,wt:k})})();
(function(){var e={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to pingdom",url:"https://my.pingdom.com"})}},k=D.Backbone.WidgetView.extend(_.clone(e)),h=D.Backbone.wt.MultilineChartView.extend(_.clone(e)),f=D.Backbone.slot_kinds.AbsoluteAreaChart.extend({allowed_timespans:["weekly","monthly"]}),b=D.Backbone.slot_kinds.AbsoluteAreaChart.extend({allowed_timespans:["daily"]}),g=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a)}}),
a=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new g({model:this})}}),d=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),l={view_cls:k,data_source_params:{check_id:{template:"select",template_data:{load_service_params:!0}}}},q={view_cls:k,data_source_params:{check_id:{template:"select",template_data:{load_service_params:!0}},timespan_days:{template:"select",
template_data:{options:[{value:"365",display_name:"yearly"},{value:"30",display_name:"monthly"},{value:"7",display_name:"weekly"},{value:"1",display_name:"daily"}]}}}},e=D.Backbone.wt.StatusWidget.extend(l).extend({defaults:{title:"Pingdom Current Status",sound:!1},subtitles:["check"],colors:[D.colors.green]}),d=D.Backbone.wt.TrendWidget.extend(q).extend({kind_cls:d,defaults:{title:"Pingdom Average Response Time",sound:!1},trend_defs:{subtitle:"ms",color:D.colors.blue,timespan:"monthly"}}),a=D.Backbone.wt.TrendWidget.extend(q).extend({kind_cls:a,
defaults:{title:"Pingdom Downtime",sound:!1},trend_defs:{subtitle:"downtime",color:D.colors.red,timespan:"monthly"}}),q=D.Backbone.wt.GaugeWidget.extend(q).extend({defaults:{title:"Pingdom average uptime",sound:!1},subtitles:["uptime"],colors:[D.colors.green]}),v=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(l).extend({view_cls:h,kind_cls:f,defaults:{title:"Pingdom Daily",sound:!1},subtitles:["response time"],colors:[D.colors.blue],trend_defs:{timespan:"monthly"}}),w=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(l).extend({view_cls:h,
kind_cls:f,defaults:{title:"Pingdom Daily",sound:!1},subtitles:["uptime"],colors:[D.colors.green],trend_defs:{timespan:"monthly"}}),f=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(l).extend({view_cls:h,kind_cls:f,defaults:{title:"Pingdom Daily",sound:!1},subtitles:["downtime"],colors:[D.colors.red],trend_defs:{timespan:"monthly"}}),m=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(l).extend({view_cls:h,kind_cls:b,defaults:{title:"Pingdom Hourly",sound:!1},subtitles:["response time"],colors:[D.colors.blue],
trend_defs:{timespan:"daily"}}),t=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(l).extend({view_cls:h,kind_cls:b,defaults:{title:"Pingdom Hourly",sound:!1},subtitles:["uptime"],colors:[D.colors.green],trend_defs:{timespan:"daily"}}),h=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(l).extend({view_cls:h,kind_cls:b,defaults:{title:"Pingdom Hourly",sound:!1},subtitles:["downtime"],colors:[D.colors.red],trend_defs:{timespan:"daily"}}),l=D.Backbone.wt.TimelineWidget.extend(l).extend({view_cls:k,
defaults:{title:"Pingdom status changes",sound:!1}}),k=D.Backbone.wt.StatusLeaderboardWidget.extend({view_cls:k,data_source_params:{filter_checks:{template:"select_multiple",template_data:{load_service_params:!0}},filter_type:{template:"select",template_data:{options:[{value:"all",display_name:"Show all types"},{value:"http",display_name:"Show http checks"},{value:"httpcustom",display_name:"Show httpcustom checks"},{value:"tcp",display_name:"Show tcp checks"},{value:"udp",display_name:"Show udp checks"},
{value:"stmp",display_name:"Show smtp checks"},{value:"pop3",display_name:"Show pop3 checks"},{value:"imap",display_name:"Show imap checks"}]}},filter_status:{template:"select",template_data:{options:[{value:"all",display_name:"Show all checks"},{value:"up",display_name:"Show up checks"},{value:"down",display_name:"Show down checks"},{value:"paused",display_name:"Show paused checks"}]}}},defaults:{title:"Pingdom checks overview",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"Name",color1:D.colors.black,
subtitle2:"type",color2:D.colors.gray,subtitle3:"RT(ms)",color3:D.colors.gray}}),b=D.Backbone.Service.extend({description:"Uptime and performance monitoring made easy.",signup_url:"http://www.pingdom.com/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","username"],["auth_password","password"]]),params:{auth_user:{template:"input_text",template_data:{placeholder:"E-mail"}},auth_password:{template:"input_password",template_data:{placeholder:"Password"}}}});_.extend(Ducksboard.Backbone.widget_kinds,
{pingdom_check_status:e,pingdom_avg_response_time_counter:d,pingdom_downtime_counter:a,pingdom_avg_uptime_gauge:q,pingdom_daily_avg_response_time_absolute_area_graph:v,pingdom_daily_avg_uptime_absolute_area_graph:w,pingdom_daily_downtime_absolute_area_graph:f,pingdom_hourly_avg_response_time_absolute_area_graph:m,pingdom_hourly_avg_uptime_absolute_area_graph:t,pingdom_hourly_downtime_absolute_area_graph:h,pingdom_checks_overview_leaderboard:k,pingdom_outages_timeline:l});_.extend(Ducksboard.Backbone.service_kinds,
{pingdom:b})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");D.Backbone.services.get(d);d=_.sprintf("https://teambox.com/");this.add_context_action(a,{label:"Go to Teambox account",url:d})}}),data_source_params:{project_id:{template:"select",template_data:{load_service_params:!0}}}},k=_.extend({},e,{defaults:{title:"Teambox project activity",sound:!1}}),k=D.Backbone.wt.TimelineWidget.extend(k),h=
_.extend({},e,{defaults:{title:"Teambox project conversations",sound:!1}}),f={subtitle:"conversations",color:"rgba(59, 121, 10, 0.65)",timespan:"daily"},b=D.Backbone.wt.TimelineWidget.extend(h),g=D.Backbone.wt.TrendWidget.extend(h).extend({trend_defs:f}),h=D.bb.wt.TrendTimelineWidget.extend(h).extend({trend_defs:f}),a=_.extend({},e,{defaults:{title:"Teambox project tasks",sound:!1}}),d={subtitle:"tasks",color:"rgba(59, 121, 10, 0.65)",timespan:"daily"},f=D.Backbone.wt.TimelineWidget.extend(a),l=D.Backbone.wt.TrendWidget.extend(a).extend({trend_defs:d}),
a=D.bb.wt.TrendTimelineWidget.extend(a).extend({trend_defs:d}),q=_.extend({},e,{defaults:{title:"Teambox project tasks by status",sound:!1},subtitles:["unassigned","late","hold"],colors:["rgba(59, 121, 10, 0.65)","rgba(11, 52, 2, 0.65)","rgba(37, 177, 228, 0.65)"]}),d=D.Backbone.wt.BoxesWidget.extend(q),q=D.Backbone.wt.BarsWidget.extend(q),e=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"Teambox project resolved rate",sound:!1},subtitles:["resolved"],colors:["rgba(59, 121, 10, 0.65)"]}),
v=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{teambox_project_tasks_counter:l,teambox_project_tasks_counter_timeline:a,teambox_project_tasks_timeline:f,teambox_project_tasks_by_status_boxes:d,teambox_project_tasks_by_status_bars:q,teambox_project_resolved_rate_gauge:e,teambox_project_conversations_counter:g,teambox_project_conversations_counter_timeline:h,teambox_project_conversations_timeline:b,teambox_project_activity_timeline:k});_.extend(Ducksboard.Backbone.service_kinds,
{teambox:v})})();
(function(){var e=D.Backbone.slot_kinds.Iframe.extend({format_url:function(){var e=this.widget.data_source.get("visualization_id"),f=this.widget.service.get("auth_domain"),b={search:!1,scrollwheel:!1,title:"t"==this.widget.data_source.get("show_title"),description:"t"==this.widget.data_source.get("show_description"),legends:"t"==this.widget.data_source.get("show_legends"),center_lat:this.widget.data_source.get("center_latitude")||30.3,center_lon:this.widget.data_source.get("center_longitude")||-60.3,
zoom:this.widget.data_source.get("zoom_level")||2};return _.sprintf("https://%s.cartodb.com/viz/%s/embed_map?"+$.param(b),f,e)}}),e=D.bb.wt.IframeWidget.extend({kind_cls:e,defaults:{title:"CartoDB Visualization",sound:!1},data_source_params:{visualization_id:{template:"select",template_data:{load_service_params:!0}},refresh_mode:{template:"select",template_data:{options:[{value:"0",display_name:"Don't refresh the map"},{value:"1",display_name:"Refresh the map every minute"},{value:"5",display_name:"Refresh the map every 5 minutes"}]}},
show_title:{template:"select",template_data:{options:[{value:"",display_name:"hide table name"},{value:"t",display_name:"show table name"}]}},show_description:{template:"select",template_data:{options:[{value:"",display_name:"hide description"},{value:"t",display_name:"show description"}]}},show_legends:{template:"select",template_data:{options:[{value:"",display_name:"hide legends"},{value:"t",display_name:"show legends"}]}},center_latitude:{template:"input_text",template_data:{placeholder:"the latitude to center your map (optional)"}},
center_longitude:{template:"input_text",template_data:{placeholder:"the longitude to center your map (optional)"}},zoom_level:{template:"select",template_data:{options:_.map(_.range(1,21),function(e){return{display_name:"zoom level"+e,value:e.toString()}})}}}}),k=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"],["auth_domain","subdomain"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",
tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_user:{template:"input_text",template_data:{placeholder:"API key"}},auth_domain:{template:"input_text",template_data:{placeholder:"Your cartodb domain (like company.cartodb.com)"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{cartodb_visualization_iframe:e});_.extend(Ducksboard.Backbone.service_kinds,{cartodb:k})})();
(function(){var e=D.colors.blue,k=D.colors.black,h={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Google Analytics",url:"https://www.google.com/analytics/"})}},f=D.Backbone.WidgetView.extend(_.clone(h)),b=D.Backbone.wt.MultilineChartView.extend(_.clone(h)),g={view_cls:f,data_source_params:{table_id:{template:"select",template_data:{load_service_params:!0}}}},a={view_cls:f,data_source_params:_.extend(_.clone(g.data_source_params),_.clone({timespan_days:{template:"select",
template_data:{options:[{value:"365",display_name:"a year's worth of data"},{value:"30",display_name:"a month's worth of data"},{value:"7",display_name:" a week's worth of data"},{value:"1",display_name:"two day's worth of data"},{value:"0",display_name:"today's data"}]}}}))},f=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"GA ecommerce transactions",sound:!1},trend_defs:{subtitle:"transactions",color:e,timespan:"monthly"}}),h=D.Backbone.wt.MultilineChartWidget.extend(g).extend({view_cls:b,
defaults:{title:"GA Ecommerce",sound:!1},subtitles:["transactions revenue"],colors:[e],trend_defs:{timespan:"monthly"}}),d=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"GA Ecommerce transactions revenue",sound:!1},trend_defs:{subtitle:"revenue",color:e,timespan:"monthly"}}),l=D.Backbone.wt.MultilineChartWidget.extend(g).extend({view_cls:b,defaults:{title:"GA Ecommerce",sound:!1},subtitles:["items purchased"],colors:[e],trend_defs:{timespan:"monthly"}}),q=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"GA Ecommerce items purchased",
sound:!1},trend_defs:{subtitle:"items",color:e,timespan:"monthly"}}),v=D.Backbone.wt.MultilineChartWidget.extend(g).extend({view_cls:b,defaults:{title:"GA Ecommerce",sound:!1},subtitles:["unique purchases"],colors:[e],trend_defs:{timespan:"monthly"}}),w=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"GA Ecommerce unique purchases",sound:!1},trend_defs:{subtitle:"unique purchases",color:e,timespan:"monthly"}}),m=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(g).extend({view_cls:b,kind_cls:D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly",
"monthly"]}),defaults:{title:"GA Ecommerce",sound:!1},subtitles:["average revenue"],colors:[e],trend_defs:{timespan:"monthly"}}),t=D.Backbone.wt.TrendWidget.extend(a).extend({defaults:{title:"GA Ecommerce average revenue",sound:!1},trend_defs:{subtitle:"average revenue",color:e,timespan:"monthly"}}),u={allowed_timespans:["weekly","monthly"],filled_data:function(){filled=D.Backbone.slot_kinds.CounterTrend.prototype.filled_data.call(this);return[_.map(filled[0],function(a,d){return 100*a}),filled[1]]}},
x=D.Backbone.slot_kinds.CounterTrend.extend(u),u=D.Backbone.slot_kinds.AbsoluteLineChart.extend(u),b=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(g).extend({view_cls:b,kind_cls:u,defaults:{title:"GA Ecommerce",sound:!1},subtitles:["% conversion rate"],colors:[e],trend_defs:{timespan:"monthly"}}),g=D.Backbone.wt.TrendWidget.extend(a).extend({kind_cls:x,defaults:{title:"GA Ecommerce conversion rate",sound:!1},trend_defs:{subtitle:"% conversion rate",color:e,timespan:"monthly"}}),x=D.Backbone.wt.TrendLeaderboardWidget.extend(a).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Most popular products",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:e,subtitle2:"units sold",color2:k,subtitle3:"pct",color3:k}}),e=D.Backbone.wt.TrendLeaderboardWidget.extend(a).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top sources for sales",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:e,subtitle2:"units sold",color2:k,subtitle3:"pct",color3:k}}),k=D.Backbone.Service.extend({description:"Your data is in there somewhere. Bring those key performance indicators to the forefront with these widgets.",
signup_url:"http://www.google.com/analytics/"});_.extend(Ducksboard.Backbone.widget_kinds,{gaecommerce_transactions_counter:f,gaecommerce_transactions_revenue_counter:d,gaecommerce_transactions_revenue_graph:h,gaecommerce_popular_products_leaderboard:x,gaecommerce_sales_sources_leaderboard:e,gaecommerce_items_purchased_counter:q,gaecommerce_items_purchased_graph:l,gaecommerce_unique_purchases_counter:w,gaecommerce_unique_purchases_graph:v,gaecommerce_conversion_rate_counter:g,gaecommerce_conversion_rate_graph:b,
gaecommerce_average_revenue_counter:t,gaecommerce_average_revenue_graph:m});_.extend(Ducksboard.Backbone.service_kinds,{gaecommerce:k})})();
(function(){function e(a,d,b,e){var f=b.prototype.kind_cls.extend({allowed_timespans:["weekly","monthly","quarterly","yearly"]}),g=b.prototype.view_cls||D.bb.WidgetView,g=g.extend(h);a={kind_cls:f,view_cls:g,context_path:"links",data_source_params:{url:{template:"input_text",template_data:{placeholder:"the URL of the page you are interested in",tooltip:"For instance, ducksboard.com/tour/"}}},defaults:{title:a,sound:!1}};e?_.extend(a,{subtitles:[d],colors:[k],trend_defs:{timespan:"monthly"}}):_.extend(a,
{trend_defs:{subtitle:d,color:k,timespan:"monthly"}});return b.extend(a)}var k=D.colors.lightblue,h={events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("url");d&&(d=_.join("","http://www.opensiteexplorer.org/",this.model.context_path,"?","site=",encodeURIComponent(d)),this.add_context_action(a,{label:"See report on Moz.com",url:d,css_class:"mozscape",icon:"mozscape"}))}},f=e("External links","external links",D.bb.wt.TrendWidget,!1),b=e("External links",
"external links",D.bb.wt.AbsoluteMultilineChartWidget,!0),g=e("External links","external links",D.bb.wt.AbsoluteMultiareaChartWidget,!0),a=e("External links","external links",D.bb.wt.MultiareaChartWidget,!0),d=e("External links","external links",D.bb.wt.MultilineChartWidget,!0),l=e("Domain authority","domain authority",D.bb.wt.TrendWidget,!1),q=e("Domain authority","domain authority",D.bb.wt.AbsoluteMultilineChartWidget,!0),v=e("Domain authority","domain authority",D.bb.wt.AbsoluteMultiareaChartWidget,
!0),w=e("Domain authority","domain authority",D.bb.wt.MultiareaChartWidget,!0),m=e("Domain authority","domain authority",D.bb.wt.MultilineChartWidget,!0),t=e("Page authority","page authority",D.bb.wt.TrendWidget,!1),u=e("Page authority","page authority",D.bb.wt.AbsoluteMultilineChartWidget,!0),x=e("Page authority","page authority",D.bb.wt.AbsoluteMultiareaChartWidget,!0),y=e("Page authority","page authority",D.bb.wt.MultiareaChartWidget,!0),B=e("Page authority","page authority",D.bb.wt.MultilineChartWidget,
!0),F=e("MozRank","mozrank",D.bb.wt.TrendWidget,!1),C=e("MozRank","mozrank",D.bb.wt.AbsoluteMultilineChartWidget,!0),K=e("MozRank","mozrank",D.bb.wt.AbsoluteMultiareaChartWidget,!0),z=e("MozRank","mozrank",D.bb.wt.MultiareaChartWidget,!0),J=e("MozRank","mozrank",D.bb.wt.MultilineChartWidget,!0),G=e("MozTrust","moztrust",D.bb.wt.TrendWidget,!1),A=e("MozTrust","moztrust",D.bb.wt.AbsoluteMultilineChartWidget,!0),I=e("MozTrust","moztrust",D.bb.wt.AbsoluteMultiareaChartWidget,!0),O=e("MozTrust","moztrust",
D.bb.wt.MultiareaChartWidget,!0),P=e("MozTrust","moztrust",D.bb.wt.MultilineChartWidget,!0),E=D.Backbone.Service.extend({description:"With Mozscape widgets, you can easily display data from the Mozscape index on your dashboard.",signup_url:"http://moz.com/products/api/keys",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","access_id"],["auth_password","secret_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},
auth_user:{template:"input_text",template_data:{placeholder:"Access ID",tooltip:'You can find your Access ID <a href="https://moz.com/products/api/keys" target="_blank">here</a>.'}},auth_password:{template:"input_password",template_data:{placeholder:"Secret Key",tooltip:'You can find your Secret Key <a href="https://moz.com/products/api/keys" target="_blank">here</a>.'}}}});_.extend(Ducksboard.Backbone.widget_kinds,{mozscape_external_links_counter:f,mozscape_external_links_absolute_graph:b,mozscape_external_links_absolute_area_graph:g,
mozscape_external_links_area_graph:a,mozscape_external_links_graph:d,mozscape_domain_authority_counter:l,mozscape_domain_authority_absolute_graph:q,mozscape_domain_authority_absolute_area_graph:v,mozscape_domain_authority_area_graph:w,mozscape_domain_authority_graph:m,mozscape_page_authority_counter:t,mozscape_page_authority_absolute_graph:u,mozscape_page_authority_absolute_area_graph:x,mozscape_page_authority_area_graph:y,mozscape_page_authority_graph:B,mozscape_mozrank_counter:F,mozscape_mozrank_absolute_graph:C,
mozscape_mozrank_absolute_area_graph:K,mozscape_mozrank_area_graph:z,mozscape_mozrank_graph:J,mozscape_moztrust_counter:G,mozscape_moztrust_absolute_graph:A,mozscape_moztrust_absolute_area_graph:I,mozscape_moztrust_area_graph:O,mozscape_moztrust_graph:P});_.extend(Ducksboard.Backbone.service_kinds,{mozscape:E})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("https://%s.highrisehq.com/",d.get("auth_domain")),this.add_context_action(a,{label:"Go to Highrise account",url:d})}}),k=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Highrise contacts",sound:!1},trend_defs:{subtitle:"contacts",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),
h=D.Backbone.wt.BoxesWidget.extend({view_cls:e,defaults:{title:"Highrise tasks",sound:!1},subtitles:["assigned","upcoming","overdue"],colors:["rgba(59, 121, 10, 0.65)","rgba(59, 136, 177, 0.65)","rgba(203, 25, 28, 0.65)"]}),f=D.Backbone.wt.PinsWidget.extend({view_cls:e,defaults:{title:"Highrise cases",sound:!1},subtitles:["open cases","closed cases"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 121, 10, 0.65)"]}),b=D.Backbone.wt.BarsWidget.extend({view_cls:e,defaults:{title:"Highrise deals",sound:!1},
subtitles:["pending","lost","won"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)"]}),e=D.Backbone.wt.GaugeWidget.extend({view_cls:e,defaults:{title:"Highrise deals",sound:!1},subtitles:["lost","won"],colors:["rgba(254, 203, 91, 0.65)","rgba(59, 136, 177, 0.65)"]}),g=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",
template_data:{placeholder:"Account name"}},auth_domain:{template:"input_text",template_data:{placeholder:"Highrise subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"API token"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{highrise_people_counter:k,highrise_cases_pins:f,highrise_tasks_boxes:h,highrise_deals_bars:b,highrise_deals_gauges:e});_.extend(Ducksboard.Backbone.service_kinds,{highrise:g})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(b){var e=this.model.data_source.get("service_id");if(e=D.Backbone.services.get(e))e=_.sprintf("%s/wp-admin/",e.get("auth_domain")),this.add_context_action(b,{label:"Go to admin interface",url:e})}}),k=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Wordpress comments",sound:!1},trend_defs:{subtitle:"approved comments",color:"rgba(9, 9, 9, 0.65)",timespan:"daily"}}),h=
D.Backbone.wt.BoxesWidget.extend({view_cls:e,defaults:{title:"Wordpress comments by status",sound:!1},subtitles:["approved","pending","spam"],colors:["rgba(9, 9, 9, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"]}),e=D.bb.wt.TimelineWidget.extend({view_cls:e,webhook_doc_url:"http://ducksboard.com/wordpress-webhooks-setup/",defaults:{title:"Wordpress comments",sound:!1}}),f=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","address"],
["auth_user","username"],["auth_password","password"]]),params:{auth_domain:{template:"input_text",template_data:{placeholder:"Blog address",tooltip:"Your blog's home address, for instance http://myweblog.wordpress.com/ or http://blog.mycompany.com/"}},auth_user:{template:"input_text",template_data:{placeholder:"Wordpress username"}},auth_password:{template:"input_password",template_data:{placeholder:"Wordpress password"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{wordpress_comments_counter:k,
wordpress_comments_by_status_boxes:h,wordpress_comments_timeline_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{wordpress:f})})();
(function(){var e={code_messages:{400:"Got 400 Bad Request when pulling data.",401:"Got HTTP 401 Unauthorized when pulling data, possible authentication problem.",403:"Got HTTP 403 Forbiden when pulling data, possible authentication problem.",404:"Got HTTP 404 Not Found when pulling data, is the pull URL correct?",444:"Could not parse pulled data, please check the return format.",500:"Got HTTP 500 Internal Server Error when pulling data."},error_code_to_message:function(a){return this.code_messages[a]||
"Got HTTP "+a+" response when pulling data."}},k=D.bb.WidgetView.extend(e).extend({notify:function(){this.success();D.bb.WidgetView.prototype.notify.apply(this,arguments)}}),h=D.bb.wt.MultilineChartView.extend(e).extend({notify:function(){this.success();D.bb.wt.MultilineChartView.prototype.notify.apply(this,arguments)}}),e=D.bb.wt.MapWidgetView.extend(e).extend({notify:function(){this.success();D.bb.wt.MapWidgetView.prototype.notify.apply(this,arguments)}}),f={view_cls:k,handles_error_code:function(){return!0}},
b=_.extend({},f,{view_cls:h}),g=_.extend({},f,{view_cls:e}),k=D.Backbone.wt.GaugeWidget.extend(f).extend({defaults:{title:"Custom gauge",sound:!1},subtitles:["rate"],colors:["rgba(193, 31, 112, 0.65)"]}),h=D.Backbone.wt.GaugeWidget.extend(f).extend({defaults:{title:"Custom double gauge",sound:!1},subtitles:["rate 1","rate 2"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),a={defaults:{title:"Custom chart",sound:!1}},d=_.extend({},b,{subtitles:["label1"],colors:["rgba(193, 31, 112, 0.65)"],
trend_defs:{timespan:"daily"}}),e=D.Backbone.wt.MultilineChartWidget.extend(a).extend(d),l=D.bb.wt.AbsoluteMultilineChartWidget.extend(a).extend(d),q=_.extend({},b,{subtitles:["label1","label2"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),v=D.Backbone.wt.MultilineChartWidget.extend(a).extend(q),w=D.bb.wt.AbsoluteMultilineChartWidget.extend(a).extend(q),m=_.extend({},b,{subtitles:["label1","label2","label3"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)",
"rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),t=D.Backbone.wt.MultilineChartWidget.extend(a).extend(m),u=D.bb.wt.AbsoluteMultilineChartWidget.extend(a).extend(m),x=_.extend({},b,{subtitles:["label1","label2","label3","label4"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),y=D.Backbone.wt.MultilineChartWidget.extend(a).extend(x),B=D.bb.wt.AbsoluteMultilineChartWidget.extend(a).extend(x),
F=_.extend({},b,{subtitles:["label1","label2","label3","label4","label5"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"],trend_defs:{timespan:"daily"}}),C=D.Backbone.wt.MultilineChartWidget.extend(a).extend(F),K=D.bb.wt.AbsoluteMultilineChartWidget.extend(a).extend(F),z=_.extend({},b,{subtitles:"label1 label2 label3 label4 label5 label6".split(" "),colors:"rgba(193, 31, 112, 0.65);rgba(193, 31, 112, 0.65);rgba(193, 31, 112, 0.65);rgba(193, 31, 112, 0.65);rgba(193, 31, 112, 0.65);rgba(193, 31, 112, 0.65)".split(";"),
trend_defs:{timespan:"daily"}}),b=D.Backbone.wt.MultilineChartWidget.extend(a).extend(z),J=D.bb.wt.AbsoluteMultilineChartWidget.extend(a).extend(z),G=D.Backbone.wt.MultiareaChartWidget.extend(a).extend(d),d=D.bb.wt.AbsoluteMultiareaChartWidget.extend(a).extend(d),A=D.Backbone.wt.MultiareaChartWidget.extend(a).extend(q),I=D.bb.wt.AbsoluteMultiareaChartWidget.extend(a).extend(q),O=D.Backbone.wt.MultiareaChartWidget.extend(a).extend(m),P=D.bb.wt.AbsoluteMultiareaChartWidget.extend(a).extend(m),E=D.Backbone.wt.MultiareaChartWidget.extend(a).extend(x),
Y=D.bb.wt.AbsoluteMultiareaChartWidget.extend(a).extend(x),q=D.bb.wt.StackedChartWidget.extend(a).extend(q),m=D.bb.wt.StackedChartWidget.extend(a).extend(m),x=D.bb.wt.StackedChartWidget.extend(a).extend(x),F=D.bb.wt.StackedChartWidget.extend(a).extend(F),a=D.bb.wt.StackedChartWidget.extend(a).extend(z),z=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"Custom counter trend",sound:!1},trend_defs:{subtitle:"value",color:"rgba(193, 31, 112, 0.65)"}}),N=D.Backbone.wt.PinsWidget.extend(f).extend({defaults:{title:"Custom pins",
sound:!1},subtitles:["label1","label2"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),n=D.Backbone.wt.BoxesWidget.extend(f).extend({defaults:{title:"Three custom boxes",sound:!1},subtitles:["label1","label2","label3"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),M=D.Backbone.wt.BoxesWidget.extend(f).extend({defaults:{title:"Four custom boxes",sound:!1},subtitles:["label1","label2","label3","label4"],colors:["rgba(193, 31, 112, 0.65)",
"rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),U=D.Backbone.wt.BarsWidget.extend(f).extend({defaults:{title:"Three custom bars",sound:!1},subtitles:["label1","label2","label3"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),W=D.Backbone.wt.BarsWidget.extend(f).extend({defaults:{title:"Four custom bars",sound:!1},subtitles:["label1","label2","label3","label4"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)",
"rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),H=D.Backbone.wt.BarsWidget.extend(f).extend({defaults:{title:"Five custom bars",sound:!1},subtitles:["label1","label2","label3","label4","label5"],colors:["rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)","rgba(193, 31, 112, 0.65)"]}),S=_.extend(f,{defaults:{title:"Custom timeline",sound:!1}}),S=D.Backbone.wt.TimelineWidget.extend(S),R=function(a,d,b){d=d||{};b=b||{};for(var e={total_subtitles:a,
subtitle1:"col1",color1:"rgba(122, 123, 118, 0.65)"},g=2;g<=a;g++)e["subtitle"+g]="col"+g,e["color"+g]="rgba(193, 31, 112, 0.65)";return _.extend(f,{defaults:_.extend({title:"Custom Leaderboard",sound:!1},d),leaderboard_defs:_.extend(e,b)})},X=D.Backbone.wt.LeaderboardWidget.extend(R(2)),ea=D.Backbone.wt.LeaderboardWidget.extend(R(3)),fa=D.Backbone.wt.LeaderboardWidget.extend(R(4)),ja=D.Backbone.wt.LeaderboardWidget.extend(R(5)),ga=D.Backbone.wt.LeaderboardWidget.extend(R(6)),V=D.Backbone.wt.LeaderboardWidget.extend(R(7)),
ca=D.Backbone.wt.LeaderboardWidget.extend(R(8)),pa=D.Backbone.wt.LeaderboardWidget.extend(R(9)),sa=D.Backbone.wt.TrendLeaderboardWidget.extend(R(2,{title:"Custom Trend Leaderboard"})),la=D.Backbone.wt.TrendLeaderboardWidget.extend(R(3,{title:"Custom Trend Leaderboard"})),qa=D.Backbone.wt.TrendLeaderboardWidget.extend(R(4,{title:"Custom Trend Leaderboard"})),ia=D.Backbone.wt.TrendLeaderboardWidget.extend(R(5,{title:"Custom Trend Leaderboard"})),Z=D.Backbone.wt.TrendLeaderboardWidget.extend(R(6,{title:"Custom Trend Leaderboard"})),
ha=D.Backbone.wt.TrendLeaderboardWidget.extend(R(7,{title:"Custom Trend Leaderboard"})),La=D.Backbone.wt.TrendLeaderboardWidget.extend(R(8,{title:"Custom Trend Leaderboard"})),Ma=D.Backbone.wt.StatusLeaderboardWidget.extend(R(2,{title:"Custom Status Leaderboard"})),xa=D.Backbone.wt.StatusLeaderboardWidget.extend(R(3,{title:"Custom Status Leaderboard"})),Ka=D.Backbone.wt.StatusLeaderboardWidget.extend(R(4,{title:"Custom Status Leaderboard"})),Ua=D.Backbone.wt.StatusLeaderboardWidget.extend(R(5,{title:"Custom Status Leaderboard"})),
Ta=D.Backbone.wt.StatusLeaderboardWidget.extend(R(6,{title:"Custom Status Leaderboard"})),ma=D.Backbone.wt.StatusLeaderboardWidget.extend(R(7,{title:"Custom Status Leaderboard"})),R=D.Backbone.wt.StatusLeaderboardWidget.extend(R(8,{title:"Custom Status Leaderboard"})),Na=D.Backbone.wt.StatusWidget.extend(f).extend({defaults:{title:"Custom Status",sound:!1},subtitles:["my check"],colors:[D.colors.green]}),ua=_.extend(f,{defaults:{title:"Custom image",sound:!1}}),Ea=D.bb.wt.ImageWidget.extend(ua),ua=
D.bb.wt.FullImageWidget.extend(ua),za=_.extend(f,{defaults:{title:"Custom text",sound:!1}}),za=D.bb.wt.TextWidget.extend(za).extend({kind_cls:D.Backbone.slot_kinds.Text}),ra=D.Backbone.wt.FunnelWidget.extend(f).extend({defaults:{title:"Custom Numeric Funnel",sound:!1},subtitles:["conversion rate"],colors:["rgba(59, 136, 177, 0.65)"]}),va=_.extend(f,{defaults:{title:"Custom Numeric Completion",sound:!1},subtitles:["conversion rate"],colors:["rgba(59, 136, 177, 0.65)"]}),Ga=D.Backbone.wt.CompletionWidget.extend(va).extend({completion_defs:{view_cls:D.bb.slot_views.CompletionGaugeView}}),
va=D.Backbone.wt.CompletionWidget.extend(va).extend({completion_defs:{view_cls:D.bb.slot_views.CompletionProgressView}}),g=D.Backbone.wt.MapWidget.extend(g).extend({defaults:{title:"Custom Map",sound:!1},map_defs:{color:"rgba(193, 31, 112, 0.65)"}}),Oa=D.Backbone.wt.HistogramWidget.extend(f).extend({defaults:{title:"Custom Histogram",sound:!1},subtitles:["label"],colors:["rgba(193, 31, 112, 0.65)"]}),Ha=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{custom_numeric_gauge:k,
custom_numeric_gauges:h,custom_numeric_counter:z,custom_numeric_pins:N,custom_numeric_boxes3:n,custom_numeric_boxes4:M,custom_numeric_bars3:U,custom_numeric_bars4:W,custom_numeric_bars5:H,custom_textual_timeline:S,custom_textual_leaderboard:X,custom_textual_leaderboard2:ea,custom_textual_leaderboard3:fa,custom_textual_leaderboard4:ja,custom_textual_leaderboard5:ga,custom_textual_leaderboard6:V,custom_textual_leaderboard7:ca,custom_textual_leaderboard8:pa,custom_textual_trend_leaderboard:sa,custom_textual_trend_leaderboard2:la,
custom_textual_trend_leaderboard3:qa,custom_textual_trend_leaderboard4:ia,custom_textual_trend_leaderboard5:Z,custom_textual_trend_leaderboard6:ha,custom_textual_trend_leaderboard7:La,custom_textual_status_leaderboard:Ma,custom_textual_status_leaderboard2:xa,custom_textual_status_leaderboard3:Ka,custom_textual_status_leaderboard4:Ua,custom_textual_status_leaderboard5:Ta,custom_textual_status_leaderboard6:ma,custom_textual_status_leaderboard7:R,custom_textual_text:za,custom_textual_status:Na,custom_image:Ea,
custom_image_fullsize:ua,custom_numeric_graph:e,custom_numeric_graph2:v,custom_numeric_graph3:t,custom_numeric_graph4:y,custom_numeric_graph5:C,custom_numeric_graph6:b,custom_numeric_absolute_graph:l,custom_numeric_absolute_graph2:w,custom_numeric_absolute_graph3:u,custom_numeric_absolute_graph4:B,custom_numeric_absolute_graph5:K,custom_numeric_absolute_graph6:J,custom_numeric_area_graph:G,custom_numeric_area_graph2:A,custom_numeric_area_graph3:O,custom_numeric_area_graph4:E,custom_numeric_absolute_area_graph:d,
custom_numeric_absolute_area_graph2:I,custom_numeric_absolute_area_graph3:P,custom_numeric_absolute_area_graph4:Y,custom_numeric_stacked_graph2:q,custom_numeric_stacked_graph3:m,custom_numeric_stacked_graph4:x,custom_numeric_stacked_graph5:F,custom_numeric_stacked_graph6:a,custom_numeric_funnel:ra,custom_numeric_completion_gauge:Ga,custom_numeric_completion_progress:va,custom_numeric_histogram:Oa,custom_map:g});_.extend(Ducksboard.Backbone.service_kinds,{custom:Ha})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=_.sprintf("https://dev.flurry.com/");this.add_context_action(a,{label:"Go to Flurry account",url:d})}}),k=D.Backbone.wt.MultilineChartView.extend(e),h=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly","quarterly","yearly"]}),f=D.Backbone.slot_kinds.AreaChart.extend({allowed_timespans:["weekly","monthly","quarterly","yearly"]}),b={data_source_params:{application_api_key:{template:"select",
template_data:{load_service_params:!0}},metric_name:{template:"select",template_data:{options:[{value:"active_users",display_name:"Total number of unique users"},{value:"new_users",display_name:"Total number of unique new users"},{value:"retained_users",display_name:"Total number of users who remain active"},{value:"page_views",display_name:"Total number of page views"},{value:"avg_page_views_per_session",display_name:"Average page views per session"},{value:"sessions",display_name:"Total number of user sessions"},
{value:"avg_session_length",display_name:"Average length of a user session"},{value:"median_session_length",display_name:"Median length of a user session"}]}}}},g={retry_service_params:1001,data_source_params:{application_api_key:{template:"select",template_data:{load_service_params:!0,klass:"load:event_name"}},event_name:{template:"select",template_data:{load_service_params:!0}},metric_name:{template:"select",template_data:{options:[{value:"users",display_name:"Total number of unique users"},{value:"avgUsers",
display_name:"Average of the number of unique users"},{value:"totalCount",display_name:"Total number of time the event occurred"},{value:"totalSessions",display_name:"Total number of sessions"}]}}}},a=D.colors.lightblue,d=D.Backbone.wt.TrendWidget.extend(b).extend({view_cls:e,kind_cls:h,defaults:{title:"Flurry application metric",sound:!1},trend_defs:{subtitle:"metric",color:a,timespan:"monthly"}}),b=D.Backbone.wt.MultiareaChartWidget.extend(b).extend({view_cls:k,kind_cls:f,defaults:{title:"Application metric growth",
sound:!1},subtitles:["metric"],colors:[a],trend_defs:{timespan:"monthly"}}),e=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:e,kind_cls:h,defaults:{title:"Flurry application event metric",sound:!1},trend_defs:{subtitle:"metric",color:a,timespan:"weekly"}}),k=D.Backbone.wt.MultiareaChartWidget.extend(g).extend({view_cls:k,kind_cls:f,defaults:{title:"Application event metric growth",sound:!1},subtitles:["metric"],colors:[a],trend_defs:{timespan:"weekly"}}),f=D.Backbone.Service.extend({description:"Use these widgets to keep tabs on your Flurry-managed applications. Stay up to date in your application metrics growth rate.",
signup_url:"http://www.flurry.com/signup.html",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_access_code"]]),params:{auth_user:{template:"input_text",template_data:{placeholder:"API access code",tooltip:'You can find your API access code for your Flurry account <a href="https://dev.flurry.com/manageCompany.do" target="_blank">here</a>.'}}}});_.extend(Ducksboard.Backbone.widget_kinds,{flurry_application_metrics_counter:d,flurry_application_metrics_area_graph:b,
flurry_application_event_metrics_counter:e,flurry_application_event_metrics_area_graph:k});_.extend(Ducksboard.Backbone.service_kinds,{flurry:f})})();
(function(){var e=D.Backbone.WidgetView.extend({}),k=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["yearly"]}),e=D.Backbone.wt.TrendWidget.extend({view_cls:e,kind_cls:k,defaults:{title:"Compete rank",sound:!1},trend_defs:{subtitle:"site rank",color:"rgba(134, 197, 64, 0.65)",timespan:"yearly"},data_source_params:{domain:{template:"input_text",template_data:{placeholder:"domain",tooltip:'Please write just the domain name without a leading "http://" and without a leading www. You can also search for a specific subdomain if desired. Please note that Compete has data for many, although not all, subdomains.'}}}}),
k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{compete_site_rank_counter:e});_.extend(Ducksboard.Backbone.service_kinds,{compete:k})})();
(function(){var e=function(a,d){return(d?D.Backbone.wt.MultilineChartView:D.Backbone.WidgetView).extend({events:{"click .inner":"external_account"},external_account:function(d){var b=this.model.data_source.get("advertiser"),e=this.model.data_source.get("keyword");if(b=b||e)e=/\?/.test(a)?"&":"?",b="http://mixrank.com"+_.sprintf(a,b)+e+"utm_source=ducksboard",this.add_context_action(d,{label:"Go to MixRank report",url:b})}})},k={data_source_params:{advertiser:{template:"input_text",template_data:{placeholder:"advertiser",
tooltip:'The advertiser\'s domain name. Use the root domain name; in particular, do not prefix with "www." or any other subdomain.'}}}},h=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),f=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"]}),b=D.Backbone.wt.AbsoluteMultilineChartLeaderboardWidget.extend(k).extend({defaults:{title:"Google Display Network",sound:!1},view_cls:e("/a/%s",!0),kind_cls:h,trend_defs:{timespan:"monthly"},
leaderboard_defs:{total_subtitles:4,subtitle1:"ad type breakdown",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"",color2:"rgba(122, 123, 118, 0.65)",subtitle3:"count",color3:"rgba(203, 25, 28, 0.65)",subtitle4:"first seen",color4:"rgba(203, 25, 28, 0.65)",has_title:!0},subtitles:["text ads","banners"],colors:["rgba(203, 25, 28, 0.65)","rgba(59, 136, 177, 0.65)"]}),g=D.Backbone.wt.LeaderboardWidget.extend({data_source_params:{keyword:{template:"input_text",template_data:{placeholder:"keyword",tooltip:'A keyword, e.g. "affordable life insurance", "cheap auto insurance".'}}}}).extend({defaults:{title:"Landing page summary",
sound:!1},view_cls:e("/search?q=%s&type=landingpage"),leaderboard_defs:{total_subtitles:5,subtitle1:"page",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"first seen",color2:"rgba(203, 25, 28, 0.65)",subtitle3:"last seen",color3:"rgba(203, 25, 28, 0.65)",subtitle4:"avg position",color4:"rgba(203, 25, 28, 0.65)",subtitle5:"times seen",color5:"rgba(203, 25, 28, 0.65)"}}),a=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"Active text ads",sound:!1},kind_cls:f,view_cls:e("/a/%s/display/gdn/textads"),
trend_defs:{subtitle:"active text ads",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),d=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"Active banners",sound:!1},kind_cls:f,view_cls:e("/a/%s/display/banners"),trend_defs:{subtitle:"active banners",color:"rgba(59, 136, 177, 0.65)",timespan:"monthly"}}),l=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"New text ads",sound:!1},kind_cls:f,view_cls:e("/a/%s/display/gdn/textads"),trend_defs:{subtitle:"new text ads",color:"rgba(81, 0, 14, 0.65)",
timespan:"monthly"}}),q=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"New banners",sound:!1},kind_cls:f,view_cls:e("/a/%s/display/banners"),trend_defs:{subtitle:"new banners",color:"rgba(75, 99, 149, 0.65)",timespan:"monthly"}}),h=D.Backbone.wt.AbsoluteMultilineChartLeaderboardWidget.extend(k).extend({defaults:{title:"New and active",sound:!1},kind_cls:h,view_cls:e("/a/%s",!0),trend_defs:{timespan:"monthly"},leaderboard_defs:{total_subtitles:4,subtitle1:"ad type breakdown",color1:"rgba(122, 123, 118, 0.65)",
subtitle2:"",color2:"rgba(122, 123, 118, 0.65)",subtitle3:"count",color3:"rgba(203, 25, 28, 0.65)",subtitle4:"most times seen",color4:"rgba(203, 25, 28, 0.65)",has_title:!0},subtitles:["new text ads","active text ads","new banners","active banners"],colors:["rgba(81, 0, 14, 0.65)","rgba(203, 25, 28, 0.65)","rgba(75, 99, 149, 0.65)","rgba(59, 136, 177, 0.65)"]}),v=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"Active publishers",sound:!1},kind_cls:f,view_cls:e("/a/%s/display/publishers"),
trend_defs:{subtitle:"active publishers",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),e=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"Active keywords",sound:!1},kind_cls:f,view_cls:e("/a/%s/display/gdn/keywords"),trend_defs:{subtitle:"active keywords",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),k=D.Backbone.Service.extend({description:"MixRank is a spy tool for online ads. With MixRank you can see exactly where your competitors are buying traffic & which ads are performing best for them across over 100,000 sites.",
signup_url:"http://www.mixrank.com/upgrade?utm_source=ducksboard",button_text:"Gain Access to MixRank Professional for Only $1"});_.extend(Ducksboard.Backbone.widget_kinds,{mixrank_gdn_absolute_graph2_leaderboard:b,mixrank_landing_page_leaderboard:g,mixrank_active_text_ads_counter:a,mixrank_active_display_ads_counter:d,mixrank_new_text_ads_counter:l,mixrank_new_display_ads_counter:q,mixrank_new_active_ads_stacked_graph4_leaderboard:h,mixrank_active_publishers_counter:v,mixrank_active_keywords_counter:e});
_.extend(Ducksboard.Backbone.service_kinds,{mixrank:k})})();
(function(){var e=D.Backbone.slot_views.CountdownView.extend({countdown_complete:function(){this.model.widget.view.notify();var e=this.model.widget.data_source.get("event");this.$(".countdown").fadeOut();this.$(".event").addClass("complete").fadeOut(function(){$(this).text(_.sprintf("%s now!",e)).fadeIn()})}}),e=D.Backbone.slot_kinds.Countdown.extend({delta_seconds:1,view_cls:e,feedback_while_fetching:!1,on_seconds_negative:function(e){this.clear_timers();this.view.countdown_complete()},on_seconds_detail:function(e){e=
D.u.split_seconds(e);e.shift();this.view.update_detail_countdown.apply(this.view,e)},on_seconds_default:function(e){e=parseInt(e/86400);this.view.update_countdown(_.sprintf("%d days",e))}}),k=D.Backbone.slot_views.CountdownView.extend({countdown_pending:function(){var e=this.model.widget.data_source.get("event");this.$(".countdown").fadeOut();this.$(".event").addClass("pending").text(_.sprintf("%s pending",e))},countdown_started:function(){var e=this.model.widget.data_source.get("event");this.model.widget.view.notify();
this.$(".event").fadeOut(function(){$(this).removeClass("pending").text(e).fadeIn()});this.$(".countdown").fadeIn()}}),k=D.Backbone.slot_kinds.Countdown.extend({delta_seconds:-1,view_cls:k,feedback_while_fetching:!1,seconds_from_data:function(e){return-e[0].value},on_seconds_negative:function(e){this.clear_timers();this.start_counting_interval_id=setTimeout(_.bind(function(){this.seconds=0;this.view.countdown_started();this.update_countdown_seconds()},this),1E3*-e);this.view.countdown_pending()},
on_seconds_detail:function(e){e=D.u.split_seconds(e);e.shift();this.view.update_detail_countdown.apply(this.view,e)},on_seconds_default:function(e){e=parseInt(e/86400);var b=1<e?"days":"day";this.update_time_interval_id&&clearInterval(this.update_time_interval_id);this.view.update_countdown(_.sprintf("%d %s",e,b))},clear_timers:function(){this.start_counting_interval_id&&clearTimeout(this.start_counting_interval_id);D.Backbone.slot_kinds.Countdown.prototype.clear_timers.apply(this)}}),e=D.Backbone.Widget.extend({defaults:{title:"countdown",
sound:!1},slot_defs:{1:{kind:e}},data_source_params:{event:{template:"input_text",template_data:{placeholder:"event name",tooltip:"Use a name to identify the event the widget counts down to."}},target:{template:"input_text",template_data:{placeholder:"until when?",tooltip:'Enter the date and time you want to count down to in the format "14 Dec 2011, 12:34:56".'}}}}),k=D.Backbone.Widget.extend({defaults:{title:"count up",sound:!1},slot_defs:{1:{kind:k}},data_source_params:{event:{template:"input_text",
template_data:{placeholder:"event name",tooltip:"Use a name to identify the event the widget counts from."}},target:{template:"input_text",template_data:{placeholder:"since when?",tooltip:'Enter the date and time you want to count from in the format "14 Dec 2011, 12:34:56".'}}}}),h=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{countdown:e,countdown_reverse:k});_.extend(Ducksboard.Backbone.service_kinds,{countdown:h})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("https://twitter.com/%s",d.get("service_username")),this.add_context_action(a,{label:"Go to Twitter account",url:d})}}),k=D.Backbone.slot_views.TimelineItemView.extend({events:{click:"go_to_tweet"},go_to_tweet:function(a){this.add_context_action(a,{label:"Go to this tweet",url:this.item.link,
is_public:!0})}}),h={kind_cls:D.Backbone.slot_kinds.Timeline.extend({initialize:function(){D.Backbone.slot_kinds.Timeline.prototype.initialize.apply(this,arguments);this.view=new D.Backbone.slot_views.TimelineView({model:this,item_view:k})},parse_value:function(a){if(void 0===a.value.user){var d=D.Backbone.slot_kinds.Timeline.prototype.parse_value.apply(this,arguments);return d=this.choose_best_image(d)}d={title:a.value.user.name,image:a.value.user.profile_image_url_https||a.value.user.profile_image_url,
time:moment(a.value.created_at).unix(),content:a.value.text,link:_.sprintf("https://twitter.com/%s/status/%s",a.value.user.screen_name,a.value.id_str)};return d=this.choose_best_image(d)},choose_best_image:function(a){var d;switch(D.d.current.id){case "tv1080":d="reasonably_small";break;case "tv720":d="bigger"}d&&(a.image=a.image.replace(/_normal\./g,_.sprintf("_%s.",d)));return a}}),view_cls:e},f=_.extend({},h,{data_source_params:{keyword:{template:"input_text",template_data:{placeholder:"search keyword",
tooltip:'To search for multiple keywords, separate them with commas, for instance "cookies,cakes" will search for both cookies and cakes. To search for tweets containing all of the keywords, separate them with spaces, for instance "home gardening" will search for tweets containing both "home" and "gardening".'}}}}),f=D.bb.wt.TimelineWidget.extend({defaults:{title:"Twitter keywords search",sound:!1}}).extend(f),b=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Twitter followers",sound:!1},
trend_defs:{subtitle:"followers",color:"rgba(37, 177, 228, 0.65)",timespan:"daily"}}),g={view_cls:e,defaults:{title:"Twitter mentions",sound:!1}},a={subtitle:"mentions",color:"rgba(37, 177, 228, 0.65)",timespan:"daily"},d=D.Backbone.wt.TrendWidget.extend(g).extend({trend_defs:a}),l=D.Backbone.wt.TimelineWidget.extend(g).extend(h),g=D.bb.wt.TrendTimelineWidget.extend(g).extend({trend_defs:a}),a=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Twitter lists",sound:!1},trend_defs:{subtitle:"listed",
color:"rgba(37, 177, 228, 0.65)",timespan:"daily"}}),q={view_cls:e,defaults:{title:"Twitter retweets",sound:!1}},v={subtitle:"retweets",color:"rgba(37, 177, 228, 0.65)",timespan:"daily"},e=D.Backbone.wt.TrendWidget.extend(q).extend({trend_defs:v}),h=D.Backbone.wt.TimelineWidget.extend(q).extend(h),q=D.bb.wt.TrendTimelineWidget.extend(q).extend({trend_defs:v}),v=D.Backbone.Service.extend({description:"Graph your progress, look for prospects or protect your brand with any combination of these Twitter widgets.",
signup_url:"http://twitter.com"});_.extend(Ducksboard.Backbone.widget_kinds,{twitter_followers_counter:b,twitter_search_timeline:f,twitter_reactions_counter:d,twitter_reactions_timeline:l,twitter_reactions_counter_timeline:g,twitter_listed_counter:a,twitter_retweets_counter:e,twitter_retweets_timeline:h,twitter_retweets_counter_timeline:q});_.extend(Ducksboard.Backbone.service_kinds,{twitter:v})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(e){var f=this.model.data_source.get("venue_id"),f=_.sprintf("https://foursquare.com/venue/%s",f);this.add_context_action(e,{label:"Go to venue",url:f})}}),e=D.Backbone.wt.PinsWidget.extend({view_cls:e,defaults:{title:"Foursquare check-ins",sound:!1},subtitles:["users here now","total check-ins"],colors:["#b5d47a","#59cbdf"],data_source_params:{venue_id:{template:"input_text",template_data:{placeholder:"venue ID or twitter handle of the venue",
tooltip:'The venue ID is the sequence of numbers at the end of a venue URL. <a target="_blank" href="http://support.foursquare.com/entries/211232-How-do-I-find-the-venue-URL-">How do I find the venue URL?</a>'}}}}),k=D.Backbone.Service.extend({description:"Foursquare helps its users share and save the places they visit. Retail and hospitality brands are wise to include Foursquare in a social dashboard.",signup_url:"https://foursquare.com/signup/"});_.extend(Ducksboard.Backbone.widget_kinds,{foursquare_checkins_pins:e});
_.extend(Ducksboard.Backbone.service_kinds,{foursquare:k})})();
(function(){var e=D.colors.darkorange,k=D.colors.gray,h=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("http://%s.uservoice.com/",d.get("auth_domain")),this.add_context_action(a,{label:"Go to your UserVoice site",url:d})}}),f=D.Backbone.wt.MultilineChartView.extend(h),b=D.bb.wt.TrendWidget.extend({view_cls:h,defaults:{title:"UserVoice open tickets",sound:!1},
trend_defs:{subtitle:"open tickets",color:e,timespan:"daily"},data_source_params:{queue_id:{template:"select",template_data:{load_service_params:!0}}}}),g=D.bb.wt.MultiareaChartWidget.extend({view_cls:f,defaults:{title:"UserVoice created vs closed tickets",sound:!1},subtitles:["created","closed"],colors:[e,D.colors.darkgreen],trend_defs:{timespan:"daily"}}),a=D.bb.wt.TimelineWidget.extend({view_cls:h,defaults:{title:"UserVoice activities",sound:!1},data_source_params:{activities:{template:"select_multiple",
template_data:{options:[{value:"vote",display_name:"Show votes"},{value:"suggestion",display_name:"Show suggestions"},{value:"comment",display_name:"Show comments"},{value:"note",display_name:"Show notes"},{value:"suggestion_merge",display_name:"Show suggestion merges"},{value:"ticket",display_name:"Show tickets"},{value:"ticket_message",display_name:"Show ticket messages"},{value:"ticket_note",display_name:"Show ticket notes"}]}}}}),d=D.bb.wt.TrendLeaderboardWidget.extend({view_cls:h,defaults:{title:"UserVoice queues summary",
sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:k,subtitle2:"updated",color2:e,subtitle3:"cnt",color3:e}}),l=D.bb.wt.TrendLeaderboardWidget.extend({view_cls:h,defaults:{title:"UserVoice top forum ideas",sound:!1},leaderboard_defs:{total_subtitles:4,subtitle1:"",color1:k,subtitle2:"created",color2:e,subtitle3:"comms",color3:e,subtitle4:"votes",color4:e},data_source_params:{forum_id:{template:"select",template_data:{load_service_params:!0}}}}),q=D.bb.wt.TrendWidget.extend({view_cls:h,
defaults:{title:"UserVoice forum ideas",sound:!1},trend_defs:{subtitle:"ideas",color:e,timespan:"daily"},data_source_params:{forum_id:{template:"select",template_data:{load_service_params:!0}}}}),k=D.bb.wt.TrendLeaderboardWidget.extend({view_cls:h,defaults:{title:"UserVoice forums summary",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:k,subtitle2:"priv?",color2:e,subtitle3:"ideas",color3:e}}),v=function(a){var d=_.map(a,function(a,d){return"queue"+(d+1)}),b={};_.each(a,function(a,
d){var e="queue_id"+(d+1);0===d&&(e="queue_id");b[e]={template:"select",template_data:{load_service_params:!0}}});return D.Backbone.wt.AbsoluteMultilineChartWidget.extend({view_cls:f,defaults:{title:"UserVoice tickets in queue",sound:!1},subtitles:d,colors:a,trend_defs:{timespan:"daily"},data_source_params:b})},h=v([e,D.colors.blue]),w=v([e,D.colors.blue,D.colors.purple]),m=v([e,D.colors.blue,D.colors.purple,D.colors.darkgreen]),t=v([e,D.colors.blue,D.colors.purple,D.colors.darkgreen,D.colors.red]),
e=v([e,D.colors.blue,D.colors.purple,D.colors.darkgreen,D.colors.red,D.colors.gray]),v=D.Backbone.Service.extend({description:"Stay on top of you customer's feedback with this suite of UserVoice widgets.",signup_url:"http://www.uservoice.com/plans/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"]]),params:{auth_domain:{template:"input_text",template_data:{placeholder:"Your UserVoice domain (like company.uservoice.com)",tooltip:"Use the UserVoice domain, if your account is using a custom domain.<br>For instance enter company.uservoice.com instead of company.support.com"}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{uservoice_open_tickets_counter:b,uservoice_open_closed_tickets_area_graph:g,uservoice_activities_timeline:a,uservoice_queues_summary_leaderboard:d,uservoice_top_forum_ideas_leaderboard:l,uservoice_forum_suggestions_counter:q,uservoice_forums_summary_leaderboard:k,uservoice_open_tickets_in_queues_absolute_graph2:h,uservoice_open_tickets_in_queues_absolute_graph3:w,uservoice_open_tickets_in_queues_absolute_graph4:m,uservoice_open_tickets_in_queues_absolute_graph5:t,
uservoice_open_tickets_in_queues_absolute_graph6:e});_.extend(Ducksboard.Backbone.service_kinds,{uservoice:v})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=_.sprintf("http://login.mailchimp.com/");this.add_context_action(a,{label:"Go to MailChimp account",url:d})}}),k=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"MailChimp list subscribers",sound:!1},trend_defs:{subtitle:"subscribers",timespan:"daily",color:"rgba(37, 177, 228, 0.65)"},data_source_params:{campaign_id:{template:"hidden"},list_id:{template:"select",
template_data:{load_service_params:!0}}}}),h=D.Backbone.wt.GaugeWidget.extend({view_cls:e,defaults:{title:"MailChimp clicks",sound:!1},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}},subtitles:["clickrate"],colors:["rgba(37, 177, 228, 0.65)"]}),f=D.Backbone.wt.GaugeWidget.extend({view_cls:e,defaults:{title:"MailChimp opens and clicks",sound:!1},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},
list_id:{template:"hidden"}},subtitles:["openrate","clickrate"],colors:["rgba(251, 136, 11, 0.65)","rgba(37, 177, 228, 0.65)"]}),b=D.Backbone.wt.GaugeWidget.extend({view_cls:e,defaults:{title:"MailChimp opens",sound:!1},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}},subtitles:["openrate"],colors:["rgba(251, 136, 11, 0.65)"]}),g=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(100*
a,1,4)+"%"}}),a=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new g({model:this})}}),d=D.Backbone.wt.TrendWidget.extend({view_cls:e,kind_cls:a,defaults:{title:"MailChimp bounce rate",sound:!1},trend_defs:{subtitle:"bounce rate",timespan:"daily",color:"rgba(37, 177, 228, 0.65)"},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}}),
l=D.Backbone.wt.TrendWidget.extend({view_cls:e,kind_cls:a,defaults:{title:"MailChimp delivery rate",sound:!1},trend_defs:{subtitle:"delivery rate",timespan:"daily",color:"rgba(37, 177, 228, 0.65)"},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}}),q=D.Backbone.wt.TrendWidget.extend({view_cls:e,kind_cls:a,defaults:{title:"MailChimp CTR",sound:!1},trend_defs:{subtitle:"click through rate",timespan:"daily",color:"rgba(37, 177, 228, 0.65)"},
data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}}),a=D.Backbone.wt.TrendWidget.extend({view_cls:e,kind_cls:a,defaults:{title:"MailChimp sharing rate",sound:!1},trend_defs:{subtitle:"email sharing rate",timespan:"daily",color:"rgba(37, 177, 228, 0.65)"},data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}}),v=D.Backbone.slot_views.CounterBarView.extend({format_value:function(a){return D.u.format_number(100*
a,1,4)+"%"}}),w=D.Backbone.slot_kinds.CounterBar.extend({initialize:function(){D.Backbone.slot_kinds.CounterBar.prototype.initialize.apply(this,arguments);this.view=new v({model:this})}}),m={subtitles:["campaign1","campaign2"],colors:["rgba(37, 177, 228, 0.65)","rgba(251, 136, 11, 0.65)"],data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},campaign_id2:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}},t={subtitles:["campaign1",
"campaign2","campaign3"],colors:["rgba(37, 177, 228, 0.65)","rgba(251, 136, 11, 0.65)","rgba(247, 209, 2, 0.65)"],data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},campaign_id2:{template:"select",template_data:{load_service_params:!0}},campaign_id3:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}},u={subtitles:["campaign1","campaign2","campaign3","campaign4"],colors:["rgba(37, 177, 228, 0.65)","rgba(251, 136, 11, 0.65)",
"rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)"],data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},campaign_id2:{template:"select",template_data:{load_service_params:!0}},campaign_id3:{template:"select",template_data:{load_service_params:!0}},campaign_id4:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}},x={subtitles:["campaign1","campaign2","campaign3","campaign4","campaign5"],colors:["rgba(37, 177, 228, 0.65)",
"rgba(251, 136, 11, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},campaign_id2:{template:"select",template_data:{load_service_params:!0}},campaign_id3:{template:"select",template_data:{load_service_params:!0}},campaign_id4:{template:"select",template_data:{load_service_params:!0}},campaign_id5:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}},
y={subtitles:"campaign1 campaign2 campaign3 campaign4 campaign5 campaign6".split(" "),colors:"rgba(37, 177, 228, 0.65);rgba(251, 136, 11, 0.65);rgba(247, 209, 2, 0.65);rgba(251, 136, 11, 0.65);rgba(203, 25, 28, 0.65);rgba(77, 34, 89, 0.65)".split(";"),data_source_params:{campaign_id:{template:"select",template_data:{load_service_params:!0}},campaign_id2:{template:"select",template_data:{load_service_params:!0}},campaign_id3:{template:"select",template_data:{load_service_params:!0}},campaign_id4:{template:"select",
template_data:{load_service_params:!0}},campaign_id5:{template:"select",template_data:{load_service_params:!0}},campaign_id6:{template:"select",template_data:{load_service_params:!0}},list_id:{template:"hidden"}}},B=D.Backbone.wt.BarsWidget.extend(t).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp bounce rate",sound:!1}}),F=D.Backbone.wt.BarsWidget.extend(u).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp bounce rate",sound:!1}}),C=D.Backbone.wt.BarsWidget.extend(x).extend({view_cls:e,
kind_cls:w,defaults:{title:"MailChimp bounce rate",sound:!1}}),K=D.Backbone.wt.BarsWidget.extend(t).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp delivery rate",sound:!1}}),z=D.Backbone.wt.BarsWidget.extend(u).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp delivery rate",sound:!1}}),J=D.Backbone.wt.BarsWidget.extend(x).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp delivery rate",sound:!1}}),G=D.Backbone.wt.BarsWidget.extend(t).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp CTR",
sound:!1}}),A=D.Backbone.wt.BarsWidget.extend(u).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp CTR",sound:!1}}),I=D.Backbone.wt.BarsWidget.extend(x).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp CTR",sound:!1}}),O=D.Backbone.wt.BarsWidget.extend(t).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp sharing rate",sound:!1}}),P=D.Backbone.wt.BarsWidget.extend(u).extend({view_cls:e,kind_cls:w,defaults:{title:"MailChimp sharing rate",sound:!1}}),w=D.Backbone.wt.BarsWidget.extend(x).extend({view_cls:e,
kind_cls:w,defaults:{title:"MailChimp sharing rate",sound:!1}}),E=D.Backbone.wt.MultilineChartView.extend(e),Y=D.Backbone.slot_views.LineChartView.extend({format_value:function(a){return D.u.format_number(100*a,2,18)}}),N=D.Backbone.slot_kinds.AbsoluteLineChart.extend({initialize:function(){D.Backbone.slot_kinds.AbsoluteLineChart.prototype.initialize.apply(this,arguments);this.view=new Y({model:this})},filled_data:function(){var a=D.Backbone.slot_kinds.AbsoluteLineChart.prototype.filled_data.call(this);
a[0]=a[0].map(function(a){return 100*a});return a}}),e=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp bounce rate",sound:!1},trend_defs:{timespan:"daily"}}),n=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(t).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp bounce rate",sound:!1},trend_defs:{timespan:"daily"}}),M=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp bounce rate",
sound:!1},trend_defs:{timespan:"daily"}}),U=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(x).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp bounce rate",sound:!1},trend_defs:{timespan:"daily"}}),W=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(y).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp bounce rate",sound:!1},trend_defs:{timespan:"daily"}}),H=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp delivery rate",
sound:!1},trend_defs:{timespan:"daily"}}),S=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(t).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp delivery rate",sound:!1},trend_defs:{timespan:"daily"}}),R=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp delivery rate",sound:!1},trend_defs:{timespan:"daily"}}),X=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(x).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp delivery rate",
sound:!1},trend_defs:{timespan:"daily"}}),ea=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(y).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp delivery rate",sound:!1},trend_defs:{timespan:"daily"}}),fa=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp CTR",sound:!1},trend_defs:{timespan:"daily"}}),ja=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(t).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp CTR",sound:!1},trend_defs:{timespan:"daily"}}),
ga=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp CTR",sound:!1},trend_defs:{timespan:"daily"}}),V=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(x).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp CTR",sound:!1},trend_defs:{timespan:"daily"}}),ca=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(y).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp CTR",sound:!1},trend_defs:{timespan:"daily"}}),m=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({view_cls:E,
kind_cls:N,defaults:{title:"MailChimp sharing rate",sound:!1},trend_defs:{timespan:"daily"}}),t=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(t).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp sharing rate",sound:!1},trend_defs:{timespan:"daily"}}),u=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp sharing rate",sound:!1},trend_defs:{timespan:"daily"}}),x=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(x).extend({view_cls:E,
kind_cls:N,defaults:{title:"MailChimp sharing rate",sound:!1},trend_defs:{timespan:"daily"}}),y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(y).extend({view_cls:E,kind_cls:N,defaults:{title:"MailChimp sharing rate",sound:!1},trend_defs:{timespan:"daily"}}),E=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name"}},auth_user:{template:"input_text",
template_data:{placeholder:"API key",tooltip:'You can find your API Key for your MailChimp account here: <a href="https://admin.mailchimp.com/account/api/" target="_blank">https://admin.mailchimp.com/account/api/</a>'}}}});_.extend(Ducksboard.Backbone.widget_kinds,{mailchimp_subscribers_counter:k,mailchimp_clicks_gauge:h,mailchimp_opens_and_clicks_gauges:f,mailchimp_opens_gauge:b,mailchimp_bounce_rate_counter:d,mailchimp_delivery_rate_counter:l,mailchimp_click_through_rate_counter:q,mailchimp_email_sharing_rate_counter:a,
mailchimp_bounce_rate_bars3:B,mailchimp_bounce_rate_bars4:F,mailchimp_bounce_rate_bars5:C,mailchimp_delivery_rate_bars3:K,mailchimp_delivery_rate_bars4:z,mailchimp_delivery_rate_bars5:J,mailchimp_click_through_rate_bars3:G,mailchimp_click_through_rate_bars4:A,mailchimp_click_through_rate_bars5:I,mailchimp_email_sharing_rate_bars3:O,mailchimp_email_sharing_rate_bars4:P,mailchimp_email_sharing_rate_bars5:w,mailchimp_bounce_rate_graph2:e,mailchimp_bounce_rate_graph3:n,mailchimp_bounce_rate_graph4:M,
mailchimp_bounce_rate_graph5:U,mailchimp_bounce_rate_graph6:W,mailchimp_delivery_rate_graph2:H,mailchimp_delivery_rate_graph3:S,mailchimp_delivery_rate_graph4:R,mailchimp_delivery_rate_graph5:X,mailchimp_delivery_rate_graph6:ea,mailchimp_click_through_rate_graph2:fa,mailchimp_click_through_rate_graph3:ja,mailchimp_click_through_rate_graph4:ga,mailchimp_click_through_rate_graph5:V,mailchimp_click_through_rate_graph6:ca,mailchimp_email_sharing_rate_graph2:m,mailchimp_email_sharing_rate_graph3:t,mailchimp_email_sharing_rate_graph4:u,
mailchimp_email_sharing_rate_graph5:x,mailchimp_email_sharing_rate_graph6:y});_.extend(Ducksboard.Backbone.service_kinds,{mailchimp:E})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(b){var a=_.sprintf("http://klout.com/%s",this.model.data_source.get("username"));this.add_context_action(b,{label:"Go to Klout page",url:a})}}),k=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly"]}),h={view_cls:e,kind_cls:k,data_source_params:{username:{template:"input_text",template_data:{placeholder:"username",tooltip:"Please provide the username of the Klout user to track. It's the same as the Twitter username, for example: ducksboard. You can only enter one username at the time, if you want to track more users, create separate Klout widgets for them."}}}},
e=D.Backbone.wt.TrendWidget.extend(h).extend({defaults:{title:"Klout score",sound:!1},trend_defs:{subtitle:"Klout score",color:"rgba(209, 59, 8, 0.65)",timespan:"weekly"}}),k=D.Backbone.wt.TrendWidget.extend(h).extend({defaults:{title:"Klout True Reach",sound:!1},trend_defs:{subtitle:"True Reach",color:"rgba(37, 177, 228, 0.65)",timespan:"weekly"}}),f=D.Backbone.wt.TrendWidget.extend(h).extend({defaults:{title:"Klout Amplification",sound:!1},trend_defs:{subtitle:"Amplification",color:"rgba(9, 9, 9, 0.65)",
timespan:"weekly"}}),h=D.Backbone.wt.TrendWidget.extend(h).extend({defaults:{title:"Klout Network Impact",sound:!1},trend_defs:{subtitle:"Network Impact",color:"rgba(209, 59, 8, 0.65)",timespan:"weekly"}}),b=D.Backbone.Service.extend({description:"Klout helps you benchmark and chart your online influence. Watch yours or your competitors\u2019 scores with these widgets.",signup_url:"http://klout.com/home"});_.extend(Ducksboard.Backbone.widget_kinds,{klout_score_counter:e,klout_true_reach_counter:k,
klout_amplification_score_counter:f,klout_network_score_counter:h});_.extend(Ducksboard.Backbone.service_kinds,{klout:b})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(b){var e=this.model.data_source.get("service_id");if(e=D.Backbone.services.get(e))e=_.sprintf("https://%s.prefinery.com/",e.get("auth_domain")),this.add_context_action(b,{label:"Go to Prefinery account",url:e})}}),data_source_params:{beta_id:{template:"select",template_data:{load_service_params:!0}}}},k=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Prefinery testers",
sound:!1},trend_defs:{subtitle:"testers",color:"rgba(251, 136, 11, 0.65)",timespan:"daily"}}),h=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"Prefinery testers by status",sound:!1},subtitles:["pending","invited","active"],colors:["rgba(59, 136, 177, 0.65)","rgba(122, 123, 118, 0.65)","rgba(251, 136, 11, 0.65)"]}),e=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"Prefinery active rate",sound:!1},subtitles:["active rate"],colors:["rgba(251, 136, 11, 0.65)"]}),f=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain",
"subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name"}},auth_domain:{template:"input_text",template_data:{placeholder:"Prefinery subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"API key"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{prefinery_testers_counter:k,prefinery_testers_by_status_boxes:h,prefinery_active_rate_gauge:e});_.extend(Ducksboard.Backbone.service_kinds,{prefinery:f})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(e){var f=this.model.data_source.get("rss_url");this.add_context_action(e,{label:"Go to Alerts feed",url:f})}}),defaults:{title:"Alerts feed entries",sound:!1},data_source_params:{rss_url:{template:"input_text",template_data:{placeholder:"Alerts feed URL",tooltip:"Enter the RSS feed URL provided by Google Alerts, e.g. http://www.google.com/alerts/feeds/XXXX"}}}},e=D.Backbone.wt.TimelineWidget.extend(e),
k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googlealerts_feed_entries_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{googlealerts:k})})();
(function(){var e={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Mixpanel",url:"https://mixpanel.com/"})}},k=D.Backbone.WidgetView.extend(e),h=D.bb.wt.MultilineChartView.extend(e),e=D.Backbone.wt.TrendLeaderboardWidget.extend({view_cls:k,kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top events",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"event",color1:"#ababa3",subtitle2:"count",color2:"#4572a7",
subtitle3:"pct",color3:"#4572a7"},data_source_params:{unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),f=D.Backbone.wt.LeaderboardWidget.extend({view_cls:k,defaults:{title:"Properties breakdown",sound:!1},leaderboard_defs:{total_subtitles:2,subtitle1:"value",color1:"#ababa3",subtitle2:"count",color2:"#4572a7"},data_source_params:{event_name:{template:"select",template_data:{load_service_params:!0,
klass:"load:property_name"}},property_name:{template:"select",template_data:{load_service_params:!0}},unit:{template:"select",template_data:{options:[{value:"day",display_name:"look at current day's events"},{value:"week",display_name:"look at current week's events"},{value:"month",display_name:"look at current month's events"}]}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),b={view_cls:k,defaults:{title:"Mixpanel funnel",
sound:!1},data_source_params:{funnel_id:{template:"select",template_data:{load_service_params:!0}},unit:{template:"select",template_data:{options:[{value:"day",display_name:"look at current day's events"},{value:"week",display_name:"look at current week's events"},{value:"month",display_name:"look at current month's events"}]}}}},g=D.Backbone.wt.FunnelWidget.extend(b).extend({subtitles:["completion"],colors:["#4572a7"]}),a=D.Backbone.wt.BarsWidget.extend(b).extend({subtitles:["step 1","step 2","step 3"],
colors:["#4572a7","#4572a7","#4572a7"]}),d=D.Backbone.wt.BarsWidget.extend(b).extend({subtitles:["step 1","step 2","step 3","step 4"],colors:["#4572a7","#4572a7","#4572a7","#4572a7"]}),b=D.Backbone.wt.BarsWidget.extend(b).extend({subtitles:["step 1","step 2","step 3","step 4","step 5"],colors:["#4572a7","#4572a7","#4572a7","#4572a7","#4572a7"]}),l=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["quarterly","yearly"],filled_data:function(){var a=D.Backbone.slot_kinds.AbsoluteLineChart.prototype.filled_data.apply(this,
arguments);a[0]=_.map(a[0],function(a){return 100*a});return a}}),l=D.Backbone.wt.AbsoluteMultilineChartWidget.extend({kind_cls:l,view_cls:h,defaults:{title:"Funnel performance",sound:!1},subtitles:["performance"],colors:["#4572a7"],trend_defs:{timespan:"quarterly"},find_best_ticks:function(){var a=D.Backbone.wt.AbsoluteMultilineChartWidget.prototype.find_best_ticks.apply(this,arguments);a[2]=_.map(a[2],function(a){return a+"%"});return a},data_source_params:{funnel_id:{template:"select",template_data:{load_service_params:!0}},
funnel_length:{template:"input_text",template_data:{placeholder:"funnel length in days",tooltip:"The number of days each user has to complete the funnel, starting from the time they triggered the first step in the funnel."}}}}),q=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["daily"]}),v=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),w=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"]}),m={view_cls:h,defaults:{title:"Event count",
sound:!1}},k=D.Backbone.wt.TrendWidget.extend({view_cls:k,kind_cls:w,defaults:{title:"Mixpanel event count",sound:!1},trend_defs:{subtitle:"events",color:"#4572a7",timespan:"daily"},data_source_params:{event_name:{template:"select",template_data:{load_service_params:!0}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),t=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({subtitles:["event"],
colors:["#4572a7"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:!0}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),w=t.extend({kind_cls:q,trend_defs:{timespan:"daily"}}),t=t.extend({kind_cls:v,trend_defs:{timespan:"monthly"}}),u=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({subtitles:["event 1","event 2"],colors:["#4572a7","#a94542"],data_source_params:{event_name:{template:"select",
template_data:{load_service_params:!0}},event_name2:{template:"select",template_data:{load_service_params:!0}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),x=u.extend({kind_cls:q,trend_defs:{timespan:"daily"}}),u=u.extend({kind_cls:v,trend_defs:{timespan:"monthly"}}),y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({subtitles:["event 1","event 2","event 3"],colors:["#4572a7","#a94542",
"#89a54e"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:!0}},event_name2:{template:"select",template_data:{load_service_params:!0}},event_name3:{template:"select",template_data:{load_service_params:!0}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),m=y.extend({kind_cls:q,trend_defs:{timespan:"daily"}}),y=y.extend({kind_cls:v,trend_defs:{timespan:"monthly"}}),
B={view_cls:h,defaults:{title:"Property count",sound:!1}},F=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(B).extend({subtitles:["segment"],colors:["#4572a7"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:!0,klass:"load:property_name"}},property_name:{template:"select",template_data:{load_service_params:!0,klass:"load:property_value"}},property_value:{template:"select",template_data:{load_service_params:!0}},unique_events:{template:"select",template_data:{options:[{value:"",
display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),h=F.extend({kind_cls:q,trend_defs:{timespan:"daily"}}),F=F.extend({kind_cls:v,trend_defs:{timespan:"monthly"}}),C=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(B).extend({subtitles:["segment 1","segment 2"],colors:["#4572a7","#a94542"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:!0,klass:"load:property_name"}},property_name:{template:"select",template_data:{load_service_params:!0,
klass:"load:property_value"}},property_value:{template:"select",template_data:{load_service_params:!0}},property_value2:{template:"select",template_data:{load_service_params:!0}},unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),K=C.extend({kind_cls:q,trend_defs:{timespan:"daily"}}),C=C.extend({kind_cls:v,trend_defs:{timespan:"monthly"}}),B=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(B).extend({subtitles:["segment 1",
"segment 2","segment 3"],colors:["#4572a7","#a94542","#89a54e"],data_source_params:{event_name:{template:"select",template_data:{load_service_params:!0,klass:"load:property_name"}},property_name:{template:"select",template_data:{load_service_params:!0,klass:"load:property_value"}},property_value:{template:"select",template_data:{load_service_params:!0}},property_value2:{template:"select",template_data:{load_service_params:!0}},property_value3:{template:"select",template_data:{load_service_params:!0}},
unique_events:{template:"select",template_data:{options:[{value:"",display_name:"count all events"},{value:"t",display_name:"count unique events"}]}}}}),q=B.extend({kind_cls:q,trend_defs:{timespan:"daily"}}),v=B.extend({kind_cls:v,trend_defs:{timespan:"monthly"}}),B=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"],["auth_password","api_secret"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",
tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_user:{template:"input_text",template_data:{placeholder:"API key"}},auth_password:{template:"input_text",template_data:{placeholder:"API secret"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{mixpanel_top_events_leaderboard:e,mixpanel_segmentation_leaderboard:f,mixpanel_funnel:g,mixpanel_funnel_bars3:a,mixpanel_funnel_bars4:d,mixpanel_funnel_bars5:b,mixpanel_funnel_performance_absolute_graph:l,
mixpanel_hourly_events_absolute_graph:w,mixpanel_hourly_events_absolute_graph2:x,mixpanel_hourly_events_absolute_graph3:m,mixpanel_daily_events_absolute_graph:t,mixpanel_daily_events_absolute_graph2:u,mixpanel_daily_events_absolute_graph3:y,mixpanel_daily_events_counter:k,mixpanel_hourly_properties_absolute_graph:h,mixpanel_hourly_properties_absolute_graph2:K,mixpanel_hourly_properties_absolute_graph3:q,mixpanel_daily_properties_absolute_graph:F,mixpanel_daily_properties_absolute_graph2:C,mixpanel_daily_properties_absolute_graph3:v});
_.extend(Ducksboard.Backbone.service_kinds,{mixpanel:B})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Instagram account",url:"https://instagram.com/accounts/edit/"})}}),k=D.Backbone.wt.MultilineChartView.extend(e),h={view_cls:e},e=D.Backbone.wt.TrendWidget.extend(h).extend({defaults:{title:"Instagram followers",sound:!1},trend_defs:{subtitle:"followers",color:"rgba(69, 158, 230, 0.65)",timespan:"daily"}}),f=_.extend(_.clone(h),{defaults:{title:"Instagram engagement rate",
sound:!1},data_source_params:{timespan_days:{template:"select",template_data:{options:[{value:"0",display_name:"engagement for photos published today"},{value:"1",display_name:"engagement for photos published in the last two days"},{value:"7",display_name:"engagement for photos published in the last seven days"}]}}}}),b=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(a,2,6)+"%"}}),g=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,
arguments);this.view=new b({model:this})}}),g=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:g,trend_defs:{subtitle:"engagement rate",color:"rgba(69, 158, 230, 0.65)",timespan:"weekly"}}),k=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(f).extend({view_cls:k,subtitles:["engagement rate"],colors:["rgba(69, 158, 230, 0.65)"],trend_defs:{timespan:"weekly"}}),f=_.extend(h,{defaults:{title:"Instagram feed",sound:!1}}),f=D.bb.wt.TimelineWidget.extend(f),a=_.extend(_.clone(h),{defaults:{title:"Instagram recent media",
sound:!1},data_source_params:{username:{template:"input_text",template_data:{placeholder:"username (optional)",tooltip:"If not indicated, your media will be retrieved"}}}}),d=_.extend(_.clone(h),{defaults:{title:"Instagram media search",sound:!1},data_source_params:{tag:{template:"input_text",template_data:{placeholder:"tag name"}}}}),l=D.bb.wt.FullImageWidget.extend({css_classes:D.bb.wt.FullImageWidget.prototype.css_classes+" no-caption"}),h=D.bb.wt.TimelineWidget.extend(a),q=D.bb.wt.ImageWidget.extend(a),
a=l.extend(a),v=D.bb.wt.TimelineWidget.extend(d),w=D.bb.wt.ImageWidget.extend(d),d=l.extend(d),l=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{instagram_user_followers_counter:e,instagram_user_engagement_rate_counter:g,instagram_user_engagement_rate_absolute_area_graph:k,instagram_user_feed_timeline:f,instagram_user_media_timeline:h,instagram_user_media_image:q,instagram_user_media_image_fullsize:a,instagram_media_search_timeline:v,instagram_media_search_image:w,instagram_media_search_image_fullsize:d});
_.extend(Ducksboard.Backbone.service_kinds,{instagram:l})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(e){this.add_context_action(e,{label:"Go to flickr account",url:"http://www.flickr.com/account"})}}),defaults:{title:"Flickr random photo",sound:!1},data_source_params:{tags:{template:"input_text",template_data:{placeholder:"comma-separated tags (optional)"}},only_mine:{template:"select",template_data:{options:[{value:"t",display_name:"show only my photos"},{value:"",display_name:"Show public photos marked for commercial reuse"}]}}}},
k=D.bb.wt.ImageWidget.extend(e),e=D.bb.wt.FullImageWidget.extend({css_classes:D.bb.wt.FullImageWidget.prototype.css_classes+" no-caption"}).extend(e),h=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{flickr_photos:k,flickr_photos_fullsize:e});_.extend(Ducksboard.Backbone.service_kinds,{flickr:h})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to YouTube",url:"https://www.youtube.com/dashboard"})}}),k=D.Backbone.wt.MultilineChartView.extend(e),h=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"]}),f=D.Backbone.slot_kinds.LineChart.extend({allowed_timespans:["weekly","monthly"]}),b=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly",
"monthly"]}),g=D.Backbone.slot_kinds.RelativeStackedChart.extend({allowed_timespans:["weekly","monthly"]}),a=D.Backbone.wt.MultilineChartWidget.extend({view_cls:k,kind_cls:f}),b=D.Backbone.wt.AbsoluteMultilineChartWidget.extend({view_cls:k,kind_cls:b}),d={view_cls:e,data_source_params:{channel_id:{template:"select",template_data:{load_service_params:!0}}}},l={channel_id:{template:"select",template_data:{load_service_params:!0}},timespan_days:{template:"select",template_data:{options:[{value:"365",
display_name:"yearly"},{value:"30",display_name:"monthly"},{value:"7",display_name:"weekly"},{value:"2",display_name:"daily"}]}}},e=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:h,defaults:{title:"YouTube Total Views",sound:!1},trend_defs:{subtitle:"views",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),b=b.extend(d).extend({view_cls:k,defaults:{title:"YouTube Viewers",sound:!1},subtitles:["views","uniques"],colors:["rgba(203, 25, 28, 0.65)","rgba(75, 99, 149, 0.65)"],trend_defs:{timespan:"monthly"}}),
f=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:h,defaults:{title:"YouTube Total Comments",sound:!1},trend_defs:{subtitle:"comments",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),q=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:h,defaults:{title:"YouTube Total Shares",sound:!1},trend_defs:{subtitle:"shares",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),v=a.extend(d).extend({view_cls:k,defaults:{title:"YouTube Subscribers",sound:!1},subtitles:["gained","lost"],colors:["rgba(75, 99, 149, 0.65)",
"rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"monthly"}}),w=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:h,defaults:{title:"YouTube Total Subscribers",sound:!1},trend_defs:{subtitle:"subscribers",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),h=D.Backbone.wt.TrendWidget.extend(d).extend({kind_cls:h,defaults:{title:"YouTube Attrition Rate",sound:!1},trend_defs:{subtitle:"attrition rate",color:"rgba(203, 25, 28, 0.65)",timespan:"monthly"}}),m=D.Backbone.wt.GaugeWidget.extend(d).extend({defaults:{title:"YouTube Attrition Rate",
sound:!1},subtitles:["attrition rate"],colors:["rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},l)}),a=a.extend(d).extend({view_cls:k,defaults:{title:"YouTube Likes and Dislikes",sound:!1},subtitles:["likes","dislikes"],colors:["rgba(75, 99, 149, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"monthly"}}),t=D.Backbone.wt.TrendLeaderboardWidget.extend(d).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Youtube Top Videos",sound:!1},leaderboard_defs:{total_subtitles:3,
subtitle1:"",color1:"rgba(203, 25, 28, 0.65)",subtitle2:"views",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"},data_source_params:_.extend({},l)}),u=D.Backbone.wt.LeaderboardWidget.extend(d).extend({defaults:{title:"Youtube Viewers age and gender",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"age",color1:"rgba(203, 25, 28, 0.65)",subtitle2:"male",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"female",color3:"rgba(9, 9, 9, 0.65)"},data_source_params:_.extend({},l)}),
x=D.Backbone.wt.TrendLeaderboardWidget.extend(d).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Youtube Top Locations",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"country",color1:"rgba(203, 25, 28, 0.65)",subtitle2:"views",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"},data_source_params:_.extend({},l)}),y=D.Backbone.wt.TrendLeaderboardWidget.extend(d).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Youtube Traffic Sources",
sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(203, 25, 28, 0.65)",subtitle2:"views",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"},data_source_params:_.extend({},l)}),k=D.Backbone.wt.StackedChartLeaderboardStatusWidget.extend(d).extend({defaults:{title:"Playback locations",sound:!1},kind_cls:g,leaderboard_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,view_cls:k,trend_defs:{timespan:"monthly"},leaderboard_defs:{total_subtitles:4,subtitle1:"Top locations",
color1:"rgba(122, 123, 118, 0.65)",subtitle2:"",color2:"rgba(203, 25, 28, 0.65)",subtitle3:"views",color3:"rgba(9, 9, 9, 0.65)",subtitle4:"pct",color4:"rgba(9, 9, 9, 0.65)",has_title:!0},subtitles:["watch","channel","embedded","mobile"],colors:["rgba(75, 99, 149, 0.65)","rgba(171, 227, 114, 0.65)","rgba(226, 135, 97, 0.65)","rgba(83, 169, 207, 0.65)"],data_source_params:_.extend({},l)}),g=D.Backbone.wt.GaugeWidget.extend(d).extend({defaults:{title:"Viewers gender ratio",sound:!1},subtitles:["men/women ratio"],
colors:["rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},l)}),d=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{youtube_views_counter:e,youtube_views_uniques_graph:b,youtube_comments_counter:f,youtube_shares_counter:q,youtube_lost_gained_subscribers_graph:v,youtube_subscribers_counter:w,youtube_attrition_rate_counter:h,youtube_attrition_rate_gauge:m,youtube_likes_dislikes_graph:a,youtube_top_videos_leaderboard:t,youtube_demographics_leaderboard:u,youtube_gender_rate_gauge:g,
youtube_top_locations_leaderboard:x,youtube_traffic_sources_leaderboard:y,youtube_playback_location_stacked_leaderboard:k});_.extend(Ducksboard.Backbone.service_kinds,{youtube:d})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("https://%s.zendesk.com/",d.get("auth_domain")),this.add_context_action(a,{label:"Go to Zendesk account",url:d})}}),k=D.Backbone.wt.MultilineChartView.extend(e),h={view_cls:e,data_source_params:{group_name:{template:"select_multiple",template_data:{placeholder:"All groups",load_service_params:!0}}}},
f={view_cls:e,data_source_params:_.extend(_.clone(h.data_source_params),_.clone({tags:{template:"select_multiple",template_data:{placeholder:"All tags",load_service_params:!0}}}))},b={timespan_days:{template:"select",template_data:{options:[{value:"7",display_name:" a week's worth of data"},{value:"1",display_name:"two day's worth of data"},{value:"0",display_name:"today's data"}]}}},g={view_cls:e,data_source_params:_.extend(_.clone(h.data_source_params),_.clone(b))},a={view_cls:e,data_source_params:_.extend(_.clone(f.data_source_params),
_.clone(b))},d={view_cls:e,data_source_params:{view_id:{template:"select",template_data:{load_service_params:!0}}}},l={exclude_tags:{template:"input_text",template_data:{placeholder:"optional tags to exclude",tooltip:"A comma separated list of tags to exclude when calculating"}}},b=D.Backbone.wt.BoxesWidget.extend(f).extend({defaults:{title:"Zendesk tickets by status",sound:!1},subtitles:["new","open","pending"],colors:["rgba(9, 9, 9, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"]}),
q=D.Backbone.wt.BarsWidget.extend(f).extend({defaults:{title:"Zendesk tickets by status",sound:!1},subtitles:["new","open","pending"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"]}),v=D.Backbone.wt.BarsWidget.extend(f).extend({defaults:{title:"Zendesk tickets by type",sound:!1},subtitles:["none","question","incident","problem","task"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"]}),
w=D.Backbone.wt.BarsWidget.extend(f).extend({defaults:{title:"Zendesk tickets by priority",sound:!1},subtitles:["none","low","normal","high","urgent"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"]}),m=_.extend({},f,{defaults:{title:"Zendesk unresolved tickets",sound:!1},trend_defs:{subtitle:"unresolved tickets",color:"rgba(59, 121, 10, 0.65)",timespan:"daily"}}),m=D.Backbone.wt.TrendWidget.extend(m),
t=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"Zendesk urgent and unresolved tickets",sound:!1},trend_defs:{subtitle:"urgent & unresolved",color:"rgba(203, 25, 28, 0.65)",timespan:"daily"}}),u=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"Zendesk unassigned tickets",sound:!1},trend_defs:{subtitle:"unassigned tickets",color:"rgba(247, 209, 2, 0.65)",timespan:"daily"}}),x=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a,
2)}}),y=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new x({model:this})}}),B={view_cls:e,data_source_params:_.extend(_.clone(a.data_source_params),{business_hours:{template:"select",template_data:{options:[{value:"",display_name:"regardless of business hours"},{value:"t",display_name:"within business hours"}]}}})},F=D.Backbone.wt.TrendWidget.extend(B).extend({kind_cls:y,
defaults:{title:"Zendesk response time",sound:!1},trend_defs:{subtitle:"response time",color:"rgba(59, 121, 10, 0.65)",timespan:"weekly"}}),y=D.Backbone.wt.TrendWidget.extend(B).extend({kind_cls:y,defaults:{title:"Zendesk solution time",sound:!1},trend_defs:{subtitle:"solution time",color:"rgba(203, 25, 28, 0.65)",timespan:"weekly"}}),B=D.Backbone.wt.GaugeWidget.extend(g).extend({view_cls:e,defaults:{title:"Zendesk customer satisfaction",sound:!1},subtitles:["overall happiness"],colors:["rgba(157, 199, 88, 0.65)"]}),
C=D.Backbone.wt.TimelineWidget.extend({view_cls:e,defaults:{title:"Zendesk activity stream",sound:!1}}),K=D.Backbone.wt.TrendLeaderboardWidget.extend(h).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,data_source_params:_.extend(_.clone(h.data_source_params),_.clone(l)),defaults:{title:"Zendesk top tags",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"count",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"}}),
g=D.Backbone.wt.TrendLeaderboardWidget.extend(g).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Zendesk satisfaction per agent",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"ratings",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"}}),z=D.Backbone.wt.TrendLeaderboardWidget.extend(f).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Zendesk unresolved tickets per agent",
sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"total",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"}}),a=D.Backbone.wt.TrendLeaderboardWidget.extend(a).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Zendesk solved tickets per agent",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"total",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",
color3:"rgba(9, 9, 9, 0.65)"}}),J=D.Backbone.wt.StackedChartWidget.extend(f).extend({view_cls:k,defaults:{title:"Zendesk tickets by priority",sound:!1},subtitles:["none","low","normal","high","urgent"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"daily"}}),G=_.extend({},f,{view_cls:k,defaults:{title:"Zendesk tickets by priority",sound:!1},subtitles:["none","low","normal","high","urgent"],
colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"daily"}}),G=D.bb.wt.MultilineChartWidget.extend(G),A=D.Backbone.wt.StackedChartWidget.extend(f).extend({view_cls:k,defaults:{title:"Zendesk tickets by status",sound:!1},subtitles:["new","open","pending"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(251, 136, 11, 0.65)"],trend_defs:{timespan:"daily"}}),f=_.extend({},
f,{view_cls:k,defaults:{title:"Zendesk tickets by type",sound:!1},subtitles:["none","question","incident","problem","task"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"daily"}}),f=D.Backbone.wt.StackedChartWidget.extend(f),I=function(a){return _.extend({},{view_cls:k,defaults:{title:"Zendesk created vs "+a+" tickets",sound:!1},subtitles:["created",a],colors:["rgba(157, 199, 88, 0.65)",
"rgba(59, 136, 177, 0.65)"],trend_defs:{timespan:"daily"}})},O=D.Backbone.wt.MultiareaChartWidget.extend(I("closed")),I=D.Backbone.wt.MultiareaChartWidget.extend(I("solved")),P=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(h).extend({view_cls:k,defaults:{title:"Zendesk unresolved tickets by group",sound:!1},subtitles:["group1","group2"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)"],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},
group_name2:{template:"select",template_data:{load_service_params:!0}}}}),E=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(h).extend({view_cls:k,defaults:{title:"Zendesk unresolved tickets by group",sound:!1},subtitles:["group1","group2","group3"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)"],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",template_data:{load_service_params:!0}},
group_name3:{template:"select",template_data:{load_service_params:!0}}}}),Y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(h).extend({view_cls:k,defaults:{title:"Zendesk unresolved tickets by group",sound:!1},subtitles:["group1","group2","group3","group4"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)"],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",
template_data:{load_service_params:!0}},group_name3:{template:"select",template_data:{load_service_params:!0}},group_name4:{template:"select",template_data:{load_service_params:!0}}}}),N=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(h).extend({view_cls:k,defaults:{title:"Zendesk unresolved tickets by group",sound:!1},subtitles:["group1","group2","group3","group4","group5"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"],
trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",template_data:{load_service_params:!0}},group_name3:{template:"select",template_data:{load_service_params:!0}},group_name4:{template:"select",template_data:{load_service_params:!0}},group_name5:{template:"select",template_data:{load_service_params:!0}}}}),h=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(h).extend({view_cls:k,defaults:{title:"Zendesk unresolved tickets by group",
sound:!1},subtitles:"group1 group2 group3 group4 group5 group6".split(" "),colors:"rgba(157, 199, 88, 0.65);rgba(59, 136, 177, 0.65);rgba(247, 209, 2, 0.65);rgba(251, 136, 11, 0.65);rgba(203, 25, 28, 0.65);rgba(77, 34, 89, 0.65)".split(";"),trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",template_data:{load_service_params:!0}},group_name3:{template:"select",template_data:{load_service_params:!0}},
group_name4:{template:"select",template_data:{load_service_params:!0}},group_name5:{template:"select",template_data:{load_service_params:!0}},group_name6:{template:"select",template_data:{load_service_params:!0}}}}),n={view_cls:e,defaults:{title:"Tickets by tag",sound:!1}},e=D.Backbone.wt.BarsWidget.extend(n).extend({subtitles:["tag1","tag2","tag3"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"],data_source_params:{group_name:{template:"select_multiple",
template_data:{placeholder:"Filter by group",load_service_params:!0}},tag_name:{template:"input_text",template_data:{placeholder:"First tag"}},tag_name2:{template:"input_text",template_data:{placeholder:"Second tag"}},tag_name3:{template:"input_text",template_data:{placeholder:"Third tag"}}}}),M=D.Backbone.wt.BarsWidget.extend(n).extend({subtitles:["tag1","tag2","tag3","tag4"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"],data_source_params:{group_name:{template:"select_multiple",
template_data:{placeholder:"Filter by group",load_service_params:!0}},tag_name:{template:"input_text",template_data:{placeholder:"First tag"}},tag_name2:{template:"input_text",template_data:{placeholder:"Second tag"}},tag_name3:{template:"input_text",template_data:{placeholder:"Third tag"}},tag_name4:{template:"input_text",template_data:{placeholder:"Fourth tag"}}}}),n=D.Backbone.wt.BarsWidget.extend(n).extend({subtitles:["tag1","tag2","tag3","tag4","tag5"],colors:["rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)",
"rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)","rgba(157, 199, 88, 0.65)"],data_source_params:{group_name:{template:"select_multiple",template_data:{placeholder:"Filter by group",load_service_params:!0}},tag_name:{template:"input_text",template_data:{placeholder:"First tag"}},tag_name2:{template:"input_text",template_data:{placeholder:"Second tag"}},tag_name3:{template:"input_text",template_data:{placeholder:"Third tag"}},tag_name4:{template:"input_text",template_data:{placeholder:"Fourth tag"}},
tag_name5:{template:"input_text",template_data:{placeholder:"Fifth tag"}}}}),U=D.Backbone.wt.TrendWidget.extend(d).extend({defaults:{title:"Zendesk view tickets",sound:!1},trend_defs:{subtitle:"total view tickets",color:"rgba(59, 121, 10, 0.65)",timespan:"daily"}}),d=D.Backbone.wt.TrendLeaderboardWidget.extend(d).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,data_source_params:_.extend(_.clone(d.data_source_params),_.clone(l)),defaults:{title:"Zendesk top view tags",sound:!1},leaderboard_defs:{total_subtitles:3,
subtitle1:"",color1:"rgba(59, 121, 10, 0.65)",subtitle2:"count",color2:"rgba(9, 9, 9, 0.65)",subtitle3:"pct",color3:"rgba(9, 9, 9, 0.65)"}}),l=D.Backbone.Service.extend({description:"Your brand is much more than a mark. It is the sum total of your customer\u2019s experience with you. These widgets bring your Zendesk customer service KPIs to your dash.",signup_url:"http://www.zendesk.com/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"]]),params:{auth_domain:{template:"input_text",
template_data:{placeholder:"Your Zendesk domain (like company.zendesk.com)",tooltip:"Use the Zendesk domain, if your account is using a custom domain.<br>For instance enter company.zendesk.com instead of company.support.com"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{zendesk_tickets_by_status_boxes:b,zendesk_tickets_by_priority_bars:w,zendesk_tickets_by_priority_stacked_graph:J,zendesk_tickets_by_priority_graph:G,zendesk_tickets_by_status_bars:q,zendesk_tickets_by_status_stacked_graph:A,zendesk_tickets_by_type_bars:v,
zendesk_tickets_by_type_stacked_graph:f,zendesk_unresolved_tickets_counter:m,zendesk_unresolved_urgent_tickets_counter:t,zendesk_unresolved_tickets_by_tag_bars3:e,zendesk_unresolved_tickets_by_tag_bars4:M,zendesk_unresolved_tickets_by_tag_bars5:n,zendesk_unresolved_tickets_by_group_absolute_graph2:P,zendesk_unresolved_tickets_by_group_absolute_graph3:E,zendesk_unresolved_tickets_by_group_absolute_graph4:Y,zendesk_unresolved_tickets_by_group_absolute_graph5:N,zendesk_unresolved_tickets_by_group_absolute_graph6:h,
zendesk_unassigned_tickets_counter:u,zendesk_average_response_time_counter:F,zendesk_average_solution_time_counter:y,zendesk_customer_satisfaction_gauge:B,zendesk_activity_stream_timeline:C,zendesk_top_active_tags_leaderboard:K,zendesk_view_tickets_counter:U,zendesk_view_top_tags_leaderboard:d,zendesk_tickets_created_closed_area_graph:O,zendesk_tickets_created_solved_area_graph:I,zendesk_agents_satisfaction_leaderboard:g,zendesk_unresolved_tickets_agent_leaderboard:z,zendesk_solved_tickets_agent_leaderboard:a});
_.extend(Ducksboard.Backbone.service_kinds,{zendesk:l})})();(function(){var e=D.Backbone.WidgetView.extend({append:function(){},notify:function(){}}),e=D.Backbone.Widget.extend({view_cls:e,slot_defs:{1:{kind:Ducksboard.Backbone.slot_kinds.Notification,defaults:{since:86400}}}}),k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{notification_handler:e});_.extend(Ducksboard.Backbone.service_kinds,{internal:k})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");D.Backbone.services.get(d)&&(d=_.sprintf("http://www.facebook.com/%s",this.model.data_source.get("object_id")),this.add_context_action(a,{label:"Go to Facebook account",url:d}))}}),k={view_cls:e,data_source_params:{object_id:{template:"select",template_data:{load_service_params:!0}}}},h=D.Backbone.slot_kinds.AbsoluteChart.extend({allowed_timespans:["weekly",
"monthly"],initialize:function(){D.Backbone.slot_kinds.AbsoluteChart.prototype.initialize.apply(this,arguments);this.view=new D.Backbone.slot_views.ChartView({model:this})}}),f=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),b=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(100*a,1,4)+"%"}}),g=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,
arguments);this.view=new b({model:this})}}),a=D.Backbone.wt.MultilineChartView.extend(e),d=D.Backbone.wt.TrendWidget.extend(k).extend({kind:"facebook_fans_counter",defaults:{title:"Facebook likes",sound:!1},trend_defs:{subtitle:"fb likes",color:"rgba(75, 99, 149, 0.65)",timespan:"daily"}}),l=D.Backbone.wt.MultilineChartWidget.extend(k).extend({view_cls:a,defaults:{title:"Facebook",sound:!1},subtitles:["likes"],colors:["rgba(75, 99, 149, 0.65)"],trend_defs:{timespan:"daily"}}),q={view_cls:e,data_source_params:{object_id:{template:"select",
template_data:{load_service_params:!0}},timespan_days:{template:"select",template_data:{options:[{value:"31",display_name:"monthly attrition rate"},{value:"8",display_name:"weekly attrition rate"},{value:"2",display_name:"daily attrition rate"}]}}}},e=D.Backbone.wt.GaugeWidget.extend(q).extend({defaults:{title:"Likes attrition rate",sound:!1},subtitles:["attrition rate"],colors:["rgba(75, 99, 149, 0.65)"]}),q=D.Backbone.wt.TrendWidget.extend(q).extend({kind_cls:g,defaults:{title:"Likes attrition rate",
sound:!1},trend_defs:{subtitle:"attrition rate",color:"rgba(75, 99, 149, 0.65)",timespan:"monthly"}}),v=D.Backbone.wt.GaugeWidget.extend({defaults:{title:"Likes growth rate",sound:!1},subtitles:["growth rate"],colors:["rgba(75, 99, 149, 0.65)"],data_source_params:{object_id:{template:"select",template_data:{load_service_params:!0}},timespan_days:{template:"select",template_data:{options:[{value:"31",display_name:"monthly growth rate"},{value:"8",display_name:"weekly growth rate"},{value:"2",display_name:"daily growth rate"}]}}}}),
w=D.Backbone.wt.GaugeWidget.extend(k).extend({defaults:{title:"Likes gender ratio",sound:!1},subtitles:["men/women ratio"],colors:["rgba(59, 136, 177, 0.65)"]}),m=D.Backbone.wt.PinsWidget.extend(k).extend({defaults:{title:"Likes gender breakdown",sound:!1},subtitles:["men","women"],colors:["rgba(75, 99, 149, 0.65)","rgba(193, 31, 112, 0.65)"]}),t=D.Backbone.wt.LeaderboardWidget.extend(k).extend({defaults:{title:"Likes demographics",sound:!1},leaderboard_defs:{total_subtitles:4,subtitle1:"age",color1:"rgba(122, 123, 118, 0.65)",
subtitle2:"men",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"women",color3:"rgba(75, 99, 149, 0.65)",subtitle4:"undef",color4:"rgba(75, 99, 149, 0.65)"}}),u=D.Backbone.wt.TrendLeaderboardWidget.extend(k).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Facebook likes top sources",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"source",color1:"rgba(112, 123, 118, 0.65)",subtitle2:"likes",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),
x=D.Backbone.wt.BarsWidget.extend(k).extend({defaults:{title:"Likes sources",sound:!1},subtitles:["page","timeline","ticker","mobile","other"],colors:["rgba(75, 99, 149, 0.65)","rgba(75, 99, 149, 0.65)","rgba(75, 99, 149, 0.65)","rgba(75, 99, 149, 0.65)","rgba(75, 99, 149, 0.65)"]}),y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(k).extend({view_cls:a,defaults:{title:"Like sources",sound:!1},subtitles:["page","timeline","ticker","mobile","other"],colors:["rgba(75, 99, 149, 0.65)","rgba(157, 199, 88, 0.65)",
"rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)","rgba(112, 123, 118, 0.65)"],trend_defs:{timespan:"monthly"}}),B=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"Like sources",sound:!1},trend_defs:{subtitle:"likes from custom source",color:"rgba(75, 99, 149, 0.65)",timespan:"monthly"},data_source_params:{object_id:{template:"select",template_data:{load_service_params:!0}},source:{template:"select",template_data:{options:function(){for(var a="page_suggestion timeline ads registration mobile wizard_suggestion profile_connect external_connect recommended_pages favorites api page_browser hovercard search page_profile ticker like_story".split(" "),
d=[],b=a.length-1;0<=b;b--)d.push({value:a[b],display_name:a[b].replace("-"," ").replace("_"," ")});return d}()}}}}),F=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:h,defaults:{title:"Facebook pageviews",sound:!1},trend_defs:{subtitle:"fb pageviews",color:"rgba(157, 199, 88, 0.65)",timespan:"monthly"}}),C=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:h,defaults:{title:"Facebook unique visitors",sound:!1},trend_defs:{subtitle:"fb unique visitors",color:"rgba(157, 199, 88, 0.65)",timespan:"monthly"}}),
K=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:h,defaults:{title:"Facebook people talking about",sound:!1},trend_defs:{subtitle:"fb people talking",color:"rgba(157, 199, 88, 0.65)",timespan:"monthly"}}),z=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:h,defaults:{title:"Facebook viral reach",sound:!1},trend_defs:{subtitle:"fb viral reach",color:"rgba(157, 199, 88, 0.65)",timespan:"monthly"}}),f=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(k).extend({view_cls:a,kind_cls:f,defaults:{title:"Facebook reach",
sound:!1},subtitles:["organic","paid","viral"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)"],trend_defs:{timespan:"monthly"}}),a=D.Backbone.wt.BarsWidget.extend(k).extend({defaults:{title:"Facebook reach",sound:!1},subtitles:["organic","paid","viral"],colors:["rgba(157, 199, 88, 0.65)","rgba(59, 136, 177, 0.65)","rgba(247, 209, 2, 0.65)"],trend_defs:{timespan:"monthly"}}),J=D.Backbone.wt.TrendLeaderboardWidget.extend(k).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Facebook likes top countries",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"country",color1:"rgba(112, 123, 118, 0.65)",subtitle2:"likes",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),G=D.Backbone.wt.TrendLeaderboardWidget.extend(k).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Facebook likes top cities",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"city",color1:"rgba(122, 123, 118, 0.65)",
subtitle2:"likes",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),A=D.Backbone.wt.TrendLeaderboardWidget.extend(k).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Facebook likes top languages",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"language",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"likes",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),I=D.Backbone.wt.TrendLeaderboardWidget.extend(k).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Facebook top external referrals",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"visits",color2:"rgba(75, 99, 149, 0.65)",subtitle3:"pct",color3:"rgba(75, 99, 149, 0.65)"}}),O=D.Backbone.slot_views.ChartView.extend({format_value:function(a){return D.u.format_number(100*a,2,18)+"%"}}),P=D.Backbone.slot_kinds.Chart.extend({initialize:function(){D.Backbone.slot_kinds.Chart.prototype.initialize.apply(this,arguments);this.view=new O({model:this})}}),
E=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"Facebook page engagement",sound:!1},trend_defs:{subtitle:"users engaged",color:"rgba(75, 99, 149, 0.65)",timespan:"daily"}}),h=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:h,defaults:{title:"Facebook page engagement",sound:!1},trend_defs:{subtitle:"users engaged",color:"rgba(75, 99, 149, 0.65)",timespan:"monthly"}}),g=D.Backbone.wt.TrendWidget.extend(k).extend({kind_cls:g,defaults:{title:"Facebook page engagement rate",sound:!1},
trend_defs:{subtitle:"engagement rate",color:"rgba(75, 99, 149, 0.65)",timespan:"monthly"}}),P=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:P,defaults:{title:"Facebook page engagement rate",sound:!1},trend_defs:{subtitle:"engagement rate",color:"rgba(75, 99, 149, 0.65)",timespan:"monthly"}}),k=D.Backbone.wt.GaugeWidget.extend(k).extend({defaults:{title:"Facebook page engagement rate",sound:!1},subtitles:["engagement rate"],colors:["rgba(75, 99, 149, 0.65)"]}),Y=D.Backbone.Service.extend({description:"Monitor your facebook's performance. You must have a Facebook company page to use these widgets. Please contact us for more info",
signup_url:"http://www.facebook.com/"});_.extend(Ducksboard.Backbone.widget_kinds,{facebook_fans_counter:d,facebook_fans_graph:l,facebook_fans_attrition_rate_gauge:e,facebook_fans_attrition_rate_counter:q,facebook_fans_growth_rate_gauge:v,facebook_fans_gender_gauge:w,facebook_fans_gender_pins:m,facebook_fans_demographics_leaderboard:t,facebook_fans_sources_leaderboard:u,facebook_fans_sources_bars:x,facebook_fans_sources_graph:y,facebook_fans_custom_source_counter:B,facebook_pageviews_absolute_graph:F,
facebook_unique_pageviews_absolute_graph:C,facebook_page_storytellers_absolute_graph:K,facebook_page_viral_reach_absolute_graph:z,facebook_page_reach_absolute_graph3:f,facebook_page_reach_bars:a,facebook_fans_countries_leaderboard:J,facebook_fans_cities_leaderboard:G,facebook_fans_languages_leaderboard:A,facebook_page_external_referrals_leaderboard:I,facebook_page_engagement_counter:E,facebook_page_engagement_graph:h,facebook_page_engagement_rate_counter:g,facebook_page_engagement_rate_graph:P,facebook_page_engagement_rate_gauge:k});
_.extend(Ducksboard.Backbone.service_kinds,{facebook:Y})})();
(function(){var e=D.Backbone.Widget.extend({defaults:{title:"Clock",sound:!1},slot_defs:{1:{kind:D.Backbone.slot_kinds.CurrentTime}},data_source_params:{city:{template:"input_text",template_data:{placeholder:"city name",tooltip:"This is just a label to help you identify the clock, the displayed time is defined by the timezone."}},timezone:{template:"select_timezones",template_data:function(){return{timezones:D.config.timezones,most_used_timezones:D.config.most_used_timezones}}},time_mode:{template:"select",
template_data:{options:[{value:"12",display_name:"12-hour clock"},{value:"24",display_name:"24-hour clock"}]}}}}),k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{clock:e});_.extend(Ducksboard.Backbone.service_kinds,{clock:k})})();
(function(){D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(e){this.add_context_action(e,{label:"Go to Google Calendar",url:"https://www.google.com/calendar/"})}});var e=D.Backbone.wt.CalendarWidget.extend({defaults:{title:"Google Calendar Events",sound:!1},data_source_params:{calendar_id:{template:"select",template_data:{load_service_params:!0}}}}),k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googlecalendar_events_timeline:e});
_.extend(Ducksboard.Backbone.service_kinds,{googlecalendar:k})})();
(function(){var e={events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("spreadsheet_id");this.add_context_action(a,{label:"Go to Google Spreadsheet",url:"https://docs.google.com/spreadsheets/d/"+d})}},k=D.Backbone.WidgetView.extend(e),h={template:"input_text",template_data:{placeholder:"Cell or Range of cells",tooltip:'If you want to bring a single value from a given cell, use the format "D9". If you want to graph a value evolution over time, use a range to specify a column "D2:D10" and set a corresponding Dates Range. <a target="_blank" href="https://ducksboard.com/google-spreadsheet-dashboard">Learn more</a>'}},f=
{spreadsheet_id:{template:"select",template_data:{load_service_params:!0,klass:"load:worksheet"}},worksheet_id:{template:"select",template_data:{load_service_params:!0}}},b=_.extend(_.clone(f),{timestamp_range:{template:"input_text",template_data:{placeholder:"Dates range",tooltip:'When graphing a value evolution over time, Ducksboard needs a column identifying the timestamps corresponding to each value. Use the format "C2:C10" to specify the column. <a target="_blank" href="https://ducksboard.com/google-spreadsheet-dashboard">Learn more</a>'}}}),
g={data_source_params:_.extend(_.clone(f),{cell1_id:h})},a={data_source_params:_.extend(_.clone(f),{cell1_id:h,cell2_id:h})},d={data_source_params:_.extend(_.clone(f),{cell1_id:h,cell2_id:h,cell3_id:h})},l={data_source_params:_.extend(_.clone(f),{cell1_id:h,cell2_id:h,cell3_id:h,cell4_id:h})},q={data_source_params:_.extend(_.clone(f),{cell1_id:h,cell2_id:h,cell3_id:h,cell4_id:h,cell5_id:h})};_.extend(_.clone(f),{cell1_id:h,cell2_id:h,cell3_id:h,cell4_id:h,cell5_id:h,cell6_id:h});var v={data_source_params:_.extend(_.clone(b),
{cell1_id:h})},w={data_source_params:_.extend(_.clone(b),{cell1_id:h,cell2_id:h})},m={data_source_params:_.extend(_.clone(b),{cell1_id:h,cell2_id:h,cell3_id:h})},t={data_source_params:_.extend(_.clone(b),{cell1_id:h,cell2_id:h,cell3_id:h,cell4_id:h})},u={data_source_params:_.extend(_.clone(b),{cell1_id:h,cell2_id:h,cell3_id:h,cell4_id:h,cell5_id:h})},x={data_source_params:_.extend(_.clone(b),{cell1_id:h,cell2_id:h,cell3_id:h,cell4_id:h,cell5_id:h,cell6_id:h})},g=D.Backbone.wt.GaugeWidget.extend(g).extend({view_cls:k,
defaults:{title:"Google Spreadsheets gauge",sound:!1},subtitles:["rate"],colors:["rgba(0, 170, 93, 0.65)"]}),h=D.Backbone.wt.GaugeWidget.extend(a).extend({view_cls:k,defaults:{title:"Google Spreadsheets double gauge",sound:!1},subtitles:["rate 1","rate 2"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)"]}),y={view_cls:D.Backbone.wt.MultilineChartView.extend(e),defaults:{title:"Google Spreadsheets chart",sound:!1}},B={subtitles:["label1"],colors:["rgba(0, 170, 93, 0.65)"],trend_defs:{timespan:"yearly"}},
F=_.extend(_.clone(v),B),e=D.Backbone.wt.MultilineChartWidget.extend(y).extend(F),b=D.bb.wt.AbsoluteMultilineChartWidget.extend(y).extend(F),B={subtitles:["label1","label2"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)"],trend_defs:{timespan:"yearly"}},C=_.extend(_.clone(w),B),w=D.Backbone.wt.MultilineChartWidget.extend(y).extend(C),K=D.bb.wt.AbsoluteMultilineChartWidget.extend(y).extend(C),B={subtitles:["label1","label2","label3"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)",
"rgba(56, 128, 253, 0.65)"],trend_defs:{timespan:"yearly"}},z=_.extend(_.clone(m),B),m=D.Backbone.wt.MultilineChartWidget.extend(y).extend(z),J=D.bb.wt.AbsoluteMultilineChartWidget.extend(y).extend(z),B={subtitles:["label1","label2","label3","label4"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)"],trend_defs:{timespan:"yearly"}},G=_.extend(_.clone(t),B),t=D.Backbone.wt.MultilineChartWidget.extend(y).extend(G),A=D.bb.wt.AbsoluteMultilineChartWidget.extend(y).extend(G),
B={subtitles:["label1","label2","label3","label4","label5"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"],trend_defs:{timespan:"yearly"}},I=_.extend(_.clone(u),B),u=D.Backbone.wt.MultilineChartWidget.extend(y).extend(I),O=D.bb.wt.AbsoluteMultilineChartWidget.extend(y).extend(I),B={subtitles:"label1 label2 label3 label4 label5 label6".split(" "),colors:"rgba(0, 170, 93, 0.65);rgba(255, 210, 59, 0.65);rgba(56, 128, 253, 0.65);rgba(216, 66, 55, 0.65);rgba(109, 0, 119, 0.65);rgba(255, 114, 0, 0.65)".split(";"),
trend_defs:{timespan:"yearly"}},P=_.extend(_.clone(x),B),x=D.Backbone.wt.MultilineChartWidget.extend(y).extend(P),B=D.bb.wt.AbsoluteMultilineChartWidget.extend(y).extend(P),E=D.Backbone.wt.MultiareaChartWidget.extend(y).extend(F),F=D.bb.wt.AbsoluteMultiareaChartWidget.extend(y).extend(F),Y=D.Backbone.wt.MultiareaChartWidget.extend(y).extend(C),N=D.bb.wt.AbsoluteMultiareaChartWidget.extend(y).extend(C),n=D.Backbone.wt.MultiareaChartWidget.extend(y).extend(z),M=D.bb.wt.AbsoluteMultiareaChartWidget.extend(y).extend(z),
U=D.Backbone.wt.MultiareaChartWidget.extend(y).extend(G),W=D.bb.wt.AbsoluteMultiareaChartWidget.extend(y).extend(G),C=D.bb.wt.StackedChartWidget.extend(y).extend(C),z=D.bb.wt.StackedChartWidget.extend(y).extend(z),G=D.bb.wt.StackedChartWidget.extend(y).extend(G),I=D.bb.wt.StackedChartWidget.extend(y).extend(I),y=D.bb.wt.StackedChartWidget.extend(y).extend(P),v=D.Backbone.wt.TrendWidget.extend(v).extend({view_cls:k,defaults:{title:"Google Spreadsheets counter trend",sound:!1},trend_defs:{subtitle:"value",
color:"rgba(0, 170, 93, 0.65)"}}),a=D.Backbone.wt.PinsWidget.extend(a).extend({view_cls:k,defaults:{title:"Google Spreadsheets pins",sound:!1},subtitles:["label1","label2"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)"]}),P=D.Backbone.wt.BoxesWidget.extend(d).extend({view_cls:k,defaults:{title:"Three Google Spreadsheets boxes",sound:!1},subtitles:["label1","label2","label3"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)"]}),H=D.Backbone.wt.BoxesWidget.extend(l).extend({view_cls:k,
defaults:{title:"Four Google Spreadsheets boxes",sound:!1},subtitles:["label1","label2","label3","label4"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)"]}),d=D.Backbone.wt.BarsWidget.extend(d).extend({view_cls:k,defaults:{title:"Three Google Spreadsheets bars",sound:!1},subtitles:["label1","label2","label3"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)"]}),l=D.Backbone.wt.BarsWidget.extend(l).extend({view_cls:k,
defaults:{title:"Four Google Spreadsheets bars",sound:!1},subtitles:["label1","label2","label3","label4"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)"]}),q=D.Backbone.wt.BarsWidget.extend(q).extend({view_cls:k,defaults:{title:"Five Google Spreadsheets bars",sound:!1},subtitles:["label1","label2","label3","label4","label5"],colors:["rgba(0, 170, 93, 0.65)","rgba(255, 210, 59, 0.65)","rgba(56, 128, 253, 0.65)","rgba(216, 66, 55, 0.65)",
"rgba(109, 0, 119, 0.65)"]}),k=D.Backbone.wt.FunnelWidget.extend({view_cls:k,defaults:{title:"Google Spreadsheets funnel",sound:!1},subtitles:["funnel"],colors:["rgba(0, 170, 93, 0.65)"],data_source_params:_.extend({},f,{funnel_values_range:{template:"input_text",template_data:{placeholder:"Funnel values range",tooltip:'Specify the range of cells to get the funnel values from, for instance "C2:C10". <a target="_blank" href="https://ducksboard.com/google-spreadsheet-dashboard">Learn more</a> abour ranges.'}},
funnel_steps_range:{template:"input_text",template_data:{placeholder:"Funnel step names range (optional)",tooltip:'Specify the range of cells to get funnel step names, for instance "D2:D10". <a target="_blank" href="https://ducksboard.com/google-spreadsheet-dashboard">Learn more</a> abour ranges.'}}})}),S=function(a,d,b){d=d||{};b=b||{};for(var e={total_subtitles:a,subtitle1:"col1",color1:"rgba(122, 123, 118, 0.65)"},g=2;g<=a;g++)e["subtitle"+g]="col"+g,e["color"+g]="rgba(193, 31, 112, 0.65)";return{defaults:_.extend({title:"Google Spreadsheets Leaderboard",
sound:!1},d),leaderboard_defs:_.extend(e,b),data_source_params:_.extend(_.clone(f),{cell1_id:{template:"input_text",template_data:{placeholder:"Cell",tooltip:"Indicate the first cell of the range. E.g. If your data is in the range A1:B2 write A1 (that is the cell in the top left corner of the cell)."}}})}},R=D.Backbone.wt.LeaderboardWidget.extend(S(2)),X=D.Backbone.wt.LeaderboardWidget.extend(S(3)),ea=D.Backbone.wt.LeaderboardWidget.extend(S(4)),fa=D.Backbone.wt.LeaderboardWidget.extend(S(5)),ja=
D.Backbone.wt.LeaderboardWidget.extend(S(6)),ga=D.Backbone.wt.LeaderboardWidget.extend(S(7)),V=D.Backbone.wt.LeaderboardWidget.extend(S(8)),S=D.Backbone.wt.LeaderboardWidget.extend(S(9)),ca=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googlespreadsheets_cell_gauge:g,googlespreadsheets_cell_gauges:h,googlespreadsheets_cell_counter:v,googlespreadsheets_cell_pins:a,googlespreadsheets_cell_boxes3:P,googlespreadsheets_cell_boxes4:H,googlespreadsheets_cell_bars3:d,googlespreadsheets_cell_bars4:l,
googlespreadsheets_cell_bars5:q,googlespreadsheets_cell_graph:e,googlespreadsheets_cell_graph2:w,googlespreadsheets_cell_graph3:m,googlespreadsheets_cell_graph4:t,googlespreadsheets_cell_graph5:u,googlespreadsheets_cell_graph6:x,googlespreadsheets_cell_absolute_graph:b,googlespreadsheets_cell_absolute_graph2:K,googlespreadsheets_cell_absolute_graph3:J,googlespreadsheets_cell_absolute_graph4:A,googlespreadsheets_cell_absolute_graph5:O,googlespreadsheets_cell_absolute_graph6:B,googlespreadsheets_cell_area_graph:E,
googlespreadsheets_cell_area_graph2:Y,googlespreadsheets_cell_area_graph3:n,googlespreadsheets_cell_area_graph4:U,googlespreadsheets_cell_absolute_area_graph:F,googlespreadsheets_cell_absolute_area_graph2:N,googlespreadsheets_cell_absolute_area_graph3:M,googlespreadsheets_cell_absolute_area_graph4:W,googlespreadsheets_cell_stacked_graph2:C,googlespreadsheets_cell_stacked_graph3:z,googlespreadsheets_cell_stacked_graph4:G,googlespreadsheets_cell_stacked_graph5:I,googlespreadsheets_cell_stacked_graph6:y,
googlespreadsheets_cell_funnel:k,googlespreadsheets_cell_leaderboard:R,googlespreadsheets_cell_leaderboard2:X,googlespreadsheets_cell_leaderboard3:ea,googlespreadsheets_cell_leaderboard4:fa,googlespreadsheets_cell_leaderboard5:ja,googlespreadsheets_cell_leaderboard6:ga,googlespreadsheets_cell_leaderboard7:V,googlespreadsheets_cell_leaderboard8:S});_.extend(Ducksboard.Backbone.service_kinds,{googlespreadsheets:ca})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(e){var b=this.model.data_source.get("url");this.add_context_action(e,{label:"Go to tracked page",url:b})}}),k=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(e){var b="https://plus.google.com/"+this.model.data_source.get("page_id");this.add_context_action(e,{label:"Go to tracked page",url:b})}}),e=D.Backbone.wt.TrendWidget.extend({view_cls:e,
defaults:{title:"Google +1 count",sound:!1},trend_defs:{subtitle:"google +1s",color:"rgba(209, 59, 8, 0.65)",timespan:"daily"},data_source_params:{url:{template:"input_text",template_data:{placeholder:"Link to track",tooltip:"The full URL of the webpage you're interested in"}}}}),k=D.Backbone.wt.TrendWidget.extend({view_cls:k,defaults:{title:"Google+ Page +1 count",sound:!1},trend_defs:{subtitle:"page +1s",color:"rgba(209, 59, 8, 0.65)",timespan:"daily"},data_source_params:{page_id:{template:"input_text",
template_data:{placeholder:"Google+ Page ID",tooltip:"The numeric ID of the Google+ Page you're interested in.<br>For instance, for a Google+ Page of https://plus.google.com/114974977202082010753 enter 114974977202082010753 here."}}}}),h=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googleplusone_plusones_counter:e,googleplusone_page_plusones_counter:k});_.extend(Ducksboard.Backbone.service_kinds,{googleplusone:h})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=_.sprintf("https://app.recurly.com/");this.add_context_action(a,{label:"Go to Recurly account",url:d})}}),k=D.Backbone.wt.MultilineChartView.extend(e),h=D.Backbone.wt.BoxesWidget.extend({view_cls:e,defaults:{title:"Recurly accounts by status",sound:!1},subtitles:["total","open","closed"],colors:["rgba(59, 136, 177, 0.65)","rgba(77, 34, 89, 0.65)","rgba(122, 123, 118, 0.65)"]}),
f=D.bb.wt.StackedChartWidget.extend({view_cls:k,defaults:{title:"Subscriptions",sound:!1},subtitles:["active","canceled","past due","expired"],colors:["rgba(77, 34, 89, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)","rgba(122, 123, 118, 0.65)"],trend_defs:{timespan:"monthly"}}),b=D.Backbone.wt.BoxesWidget.extend({view_cls:e,defaults:{title:"Subscriptions by status",sound:!1},subtitles:["active","canceled","past due","expired"],colors:["rgba(77, 34, 89, 0.65)","rgba(251, 136, 11, 0.65)",
"rgba(203, 25, 28, 0.65)","rgba(122, 123, 118, 0.65)"]}),g=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(a,2,6)+"%"}}),a=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new g({model:this})}}),a=D.Backbone.wt.TrendWidget.extend({view_cls:e,kind_cls:a,defaults:{title:"Churn rate",sound:!1},trend_defs:{subtitle:"churn rate",color:"rgba(77, 34, 89, 0.65)",
timespan:"monthly"},data_source_params:{timespan_days:{template:"select",template_data:{options:[{value:"365",display_name:"yearly"},{value:"30",display_name:"monthly"},{value:"7",display_name:"weekly"},{value:"1",display_name:"daily"}]}}}}),d=D.Backbone.wt.MultiareaChartWidget.extend({view_cls:k,defaults:{title:"Subscriptions growth",sound:!1},subtitles:["active subscriptions"],colors:["rgba(77, 34, 89, 0.65)"],trend_defs:{timespan:"monthly"}}),k=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend({view_cls:k,
defaults:{title:"Accounts & subscribers",sound:!1},subtitles:["accounts","subscribers"],colors:["rgba(59, 136, 177, 0.65)","rgba(77, 34, 89, 0.65)"],trend_defs:{timespan:"monthly"}}),l=D.Backbone.wt.TimelineWidget.extend({view_cls:e,defaults:{title:"Account activities",sound:!1}}),e=D.Backbone.wt.TimelineWidget.extend({view_cls:e,defaults:{title:"Transactions",sound:!1}}),q=D.Backbone.Service.extend({description:"Use these widgets to keep tabs on your Recurly-managed billing. Stay up to date in your customers growth rate and don\u2019t neglect your churn rate.",
signup_url:"https://app.recurly.com/signup",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"],["auth_domain","subdomain"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_domain:{template:"input_text",template_data:{placeholder:"Recurly subdomain",tooltip:'Just the subdomain part, that would be "ducksboard" if your domain is "ducksboard.recurly.com".'}},
auth_user:{template:"input_text",template_data:{placeholder:"API key",tooltip:'You can find your API Key for your Recurly account <a href="https://api.recurly.com/developer/api_access" target="_blank">here</a>.'}}}});_.extend(Ducksboard.Backbone.widget_kinds,{recurly_accounts_boxes:h,recurly_subscriptions_boxes:b,recurly_subscriptions_stacked:f,recurly_churn_counter:a,recurly_active_subscriptions_area_graph:d,recurly_accounts_subscriptions_absolute_area_graph:k,recurly_account_activities_timeline:l,
recurly_transactions_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{recurly:q})})();
(function(){var e={events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d)){var b=this.model.context_path()||"home/home.jsp",d=_.sprintf("https://%s.salesforce.com/%s",d.get("auth_domain"),b);this.add_context_action(a,{label:"See details in Salesforce",url:d})}}},k=D.Backbone.WidgetView.extend(e),h=D.Backbone.wt.MultilineChartView.extend(e),f={date_range:{template:"select",template_data:{options:[{value:"this_month",
display_name:"this month's data"},{value:"this_week",display_name:"this week's data"},{value:"this_quarter",display_name:"this quarter's data"}]}}},b={only_mine:{template:"select",template_data:{options:[{value:"",display_name:"show all records"},{value:"t",display_name:"show only my records"}]}}},e=D.Backbone.wt.TrendWidget.extend({view_cls:k,defaults:{title:"Sales pipeline",sound:!1},context_path:function(){return"00O?rt=22&open=open"},trend_defs:{subtitle:"value",color:"rgba(209, 59, 8, 0.65)",
timespan:"monthly"},data_source_params:_.extend({},b)}),g=D.bb.slot_views.LeaderboardView.extend({add_item:function(a){var d=_.clone(a),b=_.clone(a.values);d.values=_.map(b,_.bind(function(a,d){this.model.is_numeric(d+2)&&(a=D.u.format_number(a,2,6,!0));return a},this));d=(new this.item_view({item:d})).render().$el;this.$(".board").append(d);d.show();this.calculate_lengths(a)}}),a=D.bb.slot_kinds.Leaderboard.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);
this.view=new g({model:this})}}),d=D.bb.slot_kinds.TrendLeaderboard.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new g({model:this,item_view:D.bb.slot_views.TrendLeaderboardItemView,extra_header:"\u00b1"})}}),l=D.Backbone.wt.TrendLeaderboardWidget.extend({view_cls:k,kind_cls:d,defaults:{title:"Sales pipeline by rep",sound:!1},context_path:function(){return"00O?rt=22&open=open&break0=FULL_NAME"},leaderboard_defs:{total_subtitles:3,numeric_columns:[3],
subtitle1:"",color1:"rgba(209, 59, 8, 0.65)",subtitle2:"count",color2:"rgba(250, 136, 54, 0.65)",subtitle3:"amount",color3:"rgba(250, 136, 54, 0.65)"},data_source_params:_.extend({},f)}),a=D.Backbone.wt.LeaderboardWidget.extend({view_cls:k,kind_cls:a,defaults:{title:"Opportunity stage breakdown",sound:!1},context_path:function(){return"00O?rt=22&open=open&break0=STAGE_NAME"},leaderboard_defs:{total_subtitles:3,numeric_columns:[3],subtitle1:"",color1:"rgba(209, 59, 8, 0.65)",subtitle2:"qty",color2:"rgba(250, 136, 54, 0.65)",
subtitle3:"$",color3:"rgba(250, 136, 54, 0.65)"},data_source_params:_.extend({},f)}),q=D.Backbone.wt.TrendLeaderboardWidget.extend({view_cls:k,defaults:{title:"Lead status",sound:!0},context_path:function(){return"00O?rt=20&break0=STATUS"},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:"rgba(209, 59, 8, 0.65)",subtitle2:"qty",color2:"rgba(250, 136, 54, 0.65)"}}),v=D.Backbone.wt.GaugeWidget.extend({view_cls:k,defaults:{title:"Opportunity win/loss",sound:!1},context_path:function(){return"00O?rt=22&open=closed&break0=WON"},
subtitles:["win","loss"],colors:["rgba(11, 52, 2, 0.65)","rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},f,b)}),d=D.Backbone.wt.TrendLeaderboardWidget.extend({view_cls:k,kind_cls:d,defaults:{title:"Opportunity source",sound:!1},context_path:function(){return"00O?rt=22&open=open&break0=LEAD_SOURCE"},leaderboard_defs:{total_subtitles:3,numeric_columns:[3],subtitle1:"",color1:"rgba(209, 59, 8, 0.65)",subtitle2:"qty",color2:"rgba(250, 136, 54, 0.65)",subtitle3:"$",color3:"rgba(250, 136, 54, 0.65)"},
data_source_params:_.extend({},f)}),w=D.Backbone.wt.BoxesWidget.extend({view_cls:k,defaults:{title:"Activities",sound:!1},context_path:function(){return"00U"},subtitles:["open","closed","progress"],colors:["rgba(209, 59, 8, 0.65)","rgba(11, 52, 2, 0.65)","rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},f,b)}),m=D.Backbone.wt.PinsWidget.extend({view_cls:k,defaults:{title:"Closed won sales",sound:!1},context_path:function(){return"00O?rt=22&open=closedwon"},subtitles:["qty","$"],colors:["rgba(209, 59, 8, 0.65)",
"rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},f,b)}),k=D.Backbone.wt.PinsWidget.extend({view_cls:k,defaults:{title:"Cases",sound:!1},context_path:function(){return"500/o"},subtitles:["closed cases","open cases"],colors:["rgba(209, 59, 8, 0.65)","rgba(203, 25, 28, 0.65)"],data_source_params:_.extend({},f,b)}),h=D.Backbone.wt.AbsoluteMultilineChartWidget.extend({view_cls:h,defaults:{title:"Sales trend",sound:!1},context_path:function(){return"00O?rt=22&open=closedwon"},subtitles:["amount"],
colors:["rgba(209, 59, 8, 0.65)"],trend_defs:{timespan:"monthly"},data_source_params:_.extend({},b)}),b=D.Backbone.Service.extend({create_tip:'We get data from Salesforce via the REST API. This feature is only available for certain plans, please check if <a href="http://www.salesforce.com/crm/editions-pricing.jsp" target="_blank">your plan</a> supports integration with Web Services or contact your Salesforce representative.'});_.extend(D.Backbone.widget_kinds,{salesforce_opportunities_amount_counter:e,
salesforce_opportunities_by_rep_leaderboard:l,salesforce_opportunities_stages_leaderboard:a,salesforce_opportunities_lead_status_leaderboard:q,salesforce_opportunities_status_gauge:v,salesforce_opportunities_sources_leaderboard:d,salesforce_activities_status_boxes:w,salesforce_opportunities_summary_pins:m,salesforce_cases_status_pins:k,salesforce_sales_volume_absolute_graph:h});_.extend(D.Backbone.service_kinds,{salesforce:b})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(b){var e=_.sprintf("http://feeds.feedburner.com/%s",this.model.data_source.get("uri"));this.add_context_action(b,{label:"Go to feed",url:e})}}),data_source_params:{uri:{template:"input_text",template_data:{placeholder:"Feed name",tooltip:"If you Feedburner URL is http://feeds.feedburner.com/MyAwesomeBlog then the feed name to use is MyAwesomeBlog. Remember that you have to enable Awareness API for that feed to be able to track it!"}}}},
k=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Feedburner subscribers",sound:!1},trend_defs:{subtitle:"subscribers",color:"rgba(203, 25, 28, 0.65)",timespan:"daily"}}),h=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Feedburner requests",sound:!1},trend_defs:{subtitle:"requests",color:"rgba(247, 209, 2, 0.65)",timespan:"daily"}}),e=D.Backbone.wt.PinsWidget.extend(e).extend({defaults:{title:"Feedburner popularity",sound:!1},subtitles:["subscribers","requests"],colors:["rgba(203, 25, 28, 0.65)",
"rgba(247, 209, 2, 0.65)"]}),f=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{feedburner_circulation_counter:k,feedburner_hits_counter:h,feedburner_circulation_and_hits_pins:e});_.extend(Ducksboard.Backbone.service_kinds,{feedburner:f})})();
(function(){var e={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to pipedrive",url:"https://app.pipedrive.com"})}},k=D.Backbone.WidgetView.extend(_.clone(e)),h=D.Backbone.wt.MultilineChartView.extend(_.clone(e)),f={view_cls:k,data_source_params:{filter_id:{template:"select",template_data:{load_service_params:!0}}}},b={view_cls:k,data_source_params:{pipeline_id:{template:"select",template_data:{load_service_params:!0,klass:"load:currency"}},
currency:{template:"select",template_data:{load_service_params:!0}}}},g={view_cls:k,data_source_params:{pipeline_id:{template:"select",template_data:{load_service_params:!0}}}},e=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"Pipedrive Deals",sound:!1},trend_defs:{subtitle:"deals",color:D.colors.blue,timespan:"monthly"}}),f=D.Backbone.wt.MultilineChartWidget.extend(f).extend({view_cls:h,defaults:{title:"Pipedrive",sound:!1},subtitles:["Deals"],colors:[D.colors.blue],trend_defs:{timespan:"monthly"}}),
a=D.Backbone.wt.TrendWidget.extend(b).extend({defaults:{title:"Pipedrive pipeline value",sound:!1},trend_defs:{subtitle:"value",color:D.colors.green,timespan:"monthly"}}),d=D.Backbone.wt.TrendWidget.extend(b).extend({defaults:{title:"Pipedrive pipeline weighted value",sound:!1},trend_defs:{subtitle:"weighted value",color:D.colors.red,timespan:"monthly"}}),h=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(b).extend({view_cls:h,defaults:{title:"Pipedrive pipeline",sound:!1},subtitles:["value","weighted value"],
colors:[D.colors.green,D.colors.red],trend_defs:{timespan:"monthly"}}),b=D.Backbone.wt.CalendarWidget.extend({view_cls:k,data_source_params:{user_id:{template:"select",template_data:{load_service_params:!0}}},defaults:{title:"Pipedrive next activities",sound:!1}}),l=D.Backbone.wt.TimelineWidget.extend({view_cls:k,defaults:{title:"Pipedrive last deals",sound:!1}}),k=D.Backbone.wt.TrendLeaderboardWidget.extend(g).extend({view_cls:k,kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Pipedrive pipeline stages",
sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"Name",color1:D.colors.black,subtitle2:"deals",color2:D.colors.gray,subtitle3:"pct",color3:D.colors.gray}}),g=D.Backbone.Service.extend({description:"A powerful sales CRM that small teams love to use.",signup_url:"http://www.pipedrive.com/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_token"]]),params:{auth_user:{template:"input_text",template_data:{placeholder:"Api token",tooltip:"Your personal API token. https://app.pipedrive.com/settings#api"}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{pipedrive_deals_counter:e,pipedrive_deals_graph:f,pipedrive_pipeline_graph:h,pipedrive_pipeline_value_counter:a,pipedrive_pipeline_weighted_value_counter:d,pipedrive_stages_leaderboard:k,pipedrive_activities_timeline:b,pipedrive_last_deals_timeline:l});_.extend(Ducksboard.Backbone.service_kinds,{pipedrive:g})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(e){var b=this.model.data_source.get("service_id");if(b=D.Backbone.services.get(b))b=_.sprintf("http://%s.tenderapp.com/",b.get("auth_domain")),this.add_context_action(e,{label:"Go to Tender account",url:b})}}),k=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Tender users",sound:!1},trend_defs:{subtitle:"users count",color:"rgba(75, 99, 149, 0.65)",timespan:"daily"}}),
e=D.Backbone.wt.BoxesWidget.extend({view_cls:e,defaults:{title:"Tender discussions by state",sound:!1},subtitles:["new","open","assigned","pending"],colors:["rgba(209, 59, 8, 0.65)","rgba(75, 99, 149, 0.65)","rgba(122, 123, 118, 0.65)","rgba(203, 25, 28, 0.65)"]}),h=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name"}},
auth_domain:{template:"input_text",template_data:{placeholder:"Tender subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"main API key (not read-only)"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{tender_users_counter:k,tender_discussions_boxes:e});_.extend(Ducksboard.Backbone.service_kinds,{tender:h})})();
(function(){var e=D.colors.darkblue,k=D.colors.black,h={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Google Trends",url:"https://www.google.com/trends/"})}},f=D.Backbone.WidgetView.extend(_.clone(h)),b=D.Backbone.wt.MultilineChartView.extend(_.clone(h)),g=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["monthly","quarterly","yearly"]}),h=_.map(D.isocountries,function(a,d){return{value:d,display_name:a}});h.unshift({value:"all",
display_name:"All Countries"});var a={search_type:{template:"select",template_data:{options:[{value:"web",display_name:"Web Search"},{value:"images",display_name:"Image Search"},{value:"news",display_name:"News Search"},{value:"froggle",display_name:"Product Search"},{value:"youtube",display_name:"YouTube Search"}]}},region:{template:"select",template_data:{options:h}}},d=D.Backbone.wt.LeaderboardWidget.extend({view_cls:f,data_source_params:_.extend({term1:{template:"input_text",template_data:{placeholder:"The search term you are interested in",
tooltip:"For instance, ducksboard"}}},_.clone(a),_.clone({timeframe:{template:"select",template_data:{options:[{value:"yearly",display_name:"a year's worth of data"},{value:"quarterly",display_name:"a quarter's worth of data"},{value:"monthly",display_name:" a month's worth of data"},{value:"weekly",display_name:"a week's worth of data"}]}}}))}),f=d.extend({defaults:{title:"Top regions",sound:!1},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:e,subtitle2:"vol.",color2:k}}),h=d.extend({defaults:{title:"Top cities",
sound:!1},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:e,subtitle2:"vol.",color2:k}}),l=d.extend({defaults:{title:"Top searches",sound:!1},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:e,subtitle2:"vol.",color2:k}}),e=d.extend({defaults:{title:"Rising searches",sound:!1},leaderboard_defs:{total_subtitles:2,subtitle1:"",color1:e,subtitle2:"growth",color2:k}}),q=function(d,e){e=e||{};type="term";var f=[D.colors.blue,D.colors.red,D.colors.yellow,D.colors.lightgreen,D.colors.purple],
h=["first","second","third","fourth","fifth"],k={},l={template:"input_text",template_data:{tooltip:"For instance, ducksboard"}},m=[];for(i=1;i<=d;i++)m.push(type+i),k[type+i]=$.extend(!0,{},l,{template_data:{placeholder:_.sprintf("The %s term you are interested in",h[i-1])}});data_source_params=_.extend(k,_.clone(a));return{timezone:"Etc/UTC",defaults:_.extend({title:"Interest over time",sound:!1},e),view_cls:b,kind_cls:g,data_source_params:data_source_params,colors:f.slice(0,d),subtitles:m,trend_defs:{timespan:"monthly"}}},
k=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(q(1)),d=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(q(2)),v=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(q(3)),w=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(q(4)),q=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(q(5)),m=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{googletrends_top_regions_leaderboard:f,googletrends_top_cities_leaderboard:h,googletrends_top_searches_leaderboard:l,googletrends_rising_searches_leaderboard:e,
googletrends_interest_absolute_graph:k,googletrends_interest_absolute_graph2:d,googletrends_interest_absolute_graph3:v,googletrends_interest_absolute_graph4:w,googletrends_interest_absolute_graph5:q});_.extend(Ducksboard.Backbone.service_kinds,{googletrends:m})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("https://github.com/%s",d.get("service_username")),this.add_context_action(a,{label:"Go to GitHub account",url:d})}}),webhook_doc_url:"http://ducksboard.com/github-webhooks-setup/",data_source_params:{user:{template:"input_text",template_data:{placeholder:"username",tooltip:_.join(" ",
"The GitHub username whose repository","pushes you want to track.")}},repo:{template:"input_text",template_data:{placeholder:"repository",tooltip:_.join(" ","The above's GitHub user repository","you want to track.")}}}},k=_.extend({},e,{defaults:{title:"GitHub commits",sound:!1},data_source_params:_.extend(_.clone(e.data_source_params),{branch:{template:"input_text",template_data:{placeholder:"branch name (defaults to master)",tooltip:_.join(" ","Optional branch name to track,","defaults to master.")}}})}),
k=D.bb.wt.TimelineWidget.extend(k),h=_.extend({},e,{defaults:{title:"GitHub watchers",sound:!1}}),f={subtitle:"watchers",color:D.colors.blue,timespan:"daily"},b=D.Backbone.wt.TimelineWidget.extend(h),g=D.Backbone.wt.TrendWidget.extend(h).extend({trend_defs:f}),a=D.bb.wt.TrendTimelineWidget.extend(h).extend({trend_defs:f}),d=D.Backbone.wt.ChartWidget.extend(h).extend({trend_defs:f}),h=D.bb.wt.ChartTimelineWidget.extend(h).extend({trend_defs:f}),l=_.extend({},e,{defaults:{title:"GitHub forks",sound:!1}}),
q={subtitle:"forks",color:D.colors.blue,timespan:"daily"},f=D.Backbone.wt.TimelineWidget.extend(l),v=D.Backbone.wt.TrendWidget.extend(l).extend({trend_defs:q}),w=D.bb.wt.TrendTimelineWidget.extend(l).extend({trend_defs:q}),m=D.Backbone.wt.ChartWidget.extend(l).extend({trend_defs:q}),l=D.bb.wt.ChartTimelineWidget.extend(l).extend({trend_defs:q}),t=_.extend({},e,{defaults:{title:"GitHub issues",sound:!1}}),u={subtitle:"issues",color:D.colors.blue,timespan:"daily"},e=D.Backbone.wt.TimelineWidget.extend(t),
q=D.Backbone.wt.TrendWidget.extend(t).extend({trend_defs:u}),x=D.bb.wt.TrendTimelineWidget.extend(t).extend({trend_defs:u}),y=D.Backbone.wt.ChartWidget.extend(t).extend({trend_defs:u}),t=D.bb.wt.ChartTimelineWidget.extend(t).extend({trend_defs:u}),u=D.Backbone.Service.extend({description:"Whether you are collaborating, tracking issues or managing multiple projects, these widgets will give you a visualization of your most crucial data.",signup_url:"https://github.com/"});_.extend(Ducksboard.Backbone.widget_kinds,
{github_commits_timeline:k,github_watchers_timeline:b,github_watchers_counter:g,github_watchers_counter_timeline:a,github_watchers_graph:d,github_watchers_graph_timeline:h,github_forks_timeline:f,github_forks_counter:v,github_forks_counter_timeline:w,github_forks_graph:m,github_forks_graph_timeline:l,github_issues_counter:q,github_issues_graph:y,github_issues_timeline:e,github_issues_counter_timeline:x,github_issues_graph_timeline:t});_.extend(Ducksboard.Backbone.service_kinds,{github:u})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");D.Backbone.services.get(d);d=_.sprintf("http://www.pivotaltracker.com/");this.add_context_action(a,{label:"Go to Pivotal Tracker account",url:d})}}),webhook_doc_url:"http://ducksboard.com/pivotal-tracker-webhooks-setup/",data_source_params:{project_id:{template:"select",template_data:{load_service_params:!0}}}},k=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Pivotal project stories",
sound:!1},trend_defs:{subtitle:"stories",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),h=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"Pivotal project stories by type",sound:!1},subtitles:["features","bugs","chores","releases"],colors:["rgba(247, 209, 2, 0.65)","rgba(203, 25, 28, 0.65)","rgba(9, 9, 9, 0.65)","rgba(59, 136, 177, 0.65)"]}),f=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Pivotal project stories by type",sound:!1},subtitles:["features","bugs","chores",
"releases"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),b=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Pivotal project stories by state",sound:!1},subtitles:["unstarted","started","finished","delivered","rejected"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),g=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"Pivotal project stories by iteration",
sound:!1},subtitles:["done","current","backlog"],colors:["rgba(9, 9, 9, 0.65)","rgba(59, 136, 177, 0.65)","rgba(56, 175, 197, 0.65)"]}),a=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Pivotal project stories by iteration",sound:!1},subtitles:["done","current","backlog"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),d=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"Current iteration stories by type",sound:!1},subtitles:["features",
"bugs","chores","releases"],colors:["rgba(247, 209, 2, 0.65)","rgba(203, 25, 28, 0.65)","rgba(9, 9, 9, 0.65)","rgba(59, 136, 177, 0.65)"]}),l=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Current iteration stories by type",sound:!1},subtitles:["features","bugs","chores","releases"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),q=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Current iteration stories by state",
sound:!1},subtitles:["unstarted","started","finished","delivered","rejected"],colors:["rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)","rgba(56, 175, 197, 0.65)"]}),v=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"Current iteration accepted stories rate",sound:!1},subtitles:["accepted stories"],colors:["rgba(56, 175, 197, 0.65)"]}),e=_.extend({},e,{defaults:{title:"Pivotal project activity",sound:!1}}),e=D.Backbone.wt.TimelineWidget.extend(e),
w=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Provide a name that you'll easily relate to the Pivotal project you'll be tracking. It can be the project's name itself, or whatever you prefer. It's up to you!"}},auth_user:{template:"input_text",template_data:{placeholder:"API token",tooltip:"To get you Pivotal API token log in to your Pivotal account and navigate to Profile > API token. If you ever create a new API token, you will need to relink your Pivotal account with Ducksboard."}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{pivotal_project_stories_counter:k,pivotal_project_stories_by_type_boxes:h,pivotal_project_stories_by_type_bars:f,pivotal_project_stories_by_state_bars:b,pivotal_project_stories_by_iteration_boxes:g,pivotal_project_stories_by_iteration_bars:a,pivotal_iteration_stories_by_type_boxes:d,pivotal_iteration_stories_by_type_bars:l,pivotal_iteration_stories_by_state_bars:q,pivotal_iteration_accepted_stories_rate_gauge:v,pivotal_project_activity_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,
{pivotal:w})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(b){this.add_context_action(b,{label:"Go to startup's page",url:this.model.data_source.get("url")})}}),data_source_params:{url:{template:"input_text",template_data:{placeholder:"AngelList URL"}}}},k=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"AngelList followers",sound:!1},trend_defs:{subtitle:"followers",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),h=
D.Backbone.wt.TimelineWidget.extend(e).extend({defaults:{title:"AngelList followers",sound:!1}}),e=D.Backbone.wt.TimelineWidget.extend(e).extend({defaults:{title:"AngelList statuses",sound:!1}}),f=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{angellist_followers_counter:k,angellist_followers_timeline:h,angellist_statuses_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{angellist:f})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(e){var f=this.model.data_source.get("rss_url");this.add_context_action(e,{label:"Go to RSS feed",url:f})}}),defaults:{title:"RSS feed entries",sound:!1},data_source_params:{rss_url:{template:"input_text",template_data:{placeholder:"RSS feed URL",tooltip:"You can access authenticated RSS feeds by using http://user:pass@hostname/feed.rss"}}}},e=D.Backbone.wt.TimelineWidget.extend(e),
k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{rss_feed_entries_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{rss:k})})();
(function(){var e=D.colors.orange,k={events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("https://insights.newrelic.com/accounts/%s",d.get("auth_domain")),this.add_context_action(a,{label:"Go to New Relic Insights account",url:d})}},h=D.Backbone.WidgetView.extend(k),f={event_type:{label:"FROM",template:"interpolable_input_text",template_data:{placeholder:"The event type"}}},b={where:{label:"WHERE",
template:"interpolable_input_text",template_data:{placeholder:"where clause",tooltip:"The WHERE clause is a series of one or more conditions separated by the keywords AND or OR."}}},g={since:{label:"SINCE",template:"interpolable_input_text",template_data:{placeholder:"since clause",tooltip:'The SINCE clause defines the beginning of a time range across which to pull data. The default value is "1 hour ago".'}}},a={interpolator:{label:"Preview the final query",template:"interpolator",interpolate:function(a,
d,b){d=a.event_type||"";var e=a.where?" WHERE "+a.where:"",f=a.facet?" FACET "+a.facet:"",g="",h="",k=a.select;k||(h=_.map(_.range(1,7),function(d){return a["select_arg"+d]}),k=_.filter(h,function(a){return a}).join(", "));void 0===a.since?"daily"==b?(h=" SINCE 1 day ago",g=" TIMESERIES hour"):(h=" SINCE 1 week ago",g=" TIMESERIES day"):h=a.since?" SINCE "+a.since:"";return _.sprintf("SELECT %s FROM %s%s%s%s%s",k,d,e,f,g,h)},info_builder:function(a,d,b,e,f){a=_.sprintf("https://insights.newrelic.com/accounts/%s/query?query=%s",
f.get("auth_domain"),encodeURIComponent(e));return _.sprintf('<a href="%s" target="_blank">%s</a>',a,"Click here to test this NRQL request in Insights")}}},d={interpolator:_.extend(_.clone(a.interpolator),{label:"Preview the final query <em>(TIMESERIES/SINCE parameters depend on STANDARD SETTINGS/TIMEFRAME value)</em>"})},l=D.bb.slot_kinds.TrendLeaderboard.extend({get_trend_value_idx:function(){return 0}}),q=D.Backbone.wt.TrendLeaderboardWidget.extend({kind_cls:l}),v=function(d,k){k=k||D.Backbone.wt.LeaderboardWidget;
for(var l={total_subtitles:d,subtitle1:"col1",color1:e},m=2;m<=d;m++)l["subtitle"+m]="col"+m,l["color"+m]=D.colors.black;m=_.extend({select:{label:"SELECT",template:"interpolable_input_text",template_data:{placeholder:"select clause",tooltip:'A comma separated list of arguments. Read the NQRL documentation at <a href="http://docs.newrelic.com/docs/insights/using-nrql" target="_blank">http://docs.newrelic.com/docs/insights/using-nrql</a>'}}},_.clone(f),b,{facet:{label:"FACET",template:"interpolable_input_text",
template_data:{placeholder:"facet clause",tooltip:"The string property to break out your data."}}},g,a);return k.extend({view_cls:h,defaults:{title:"Insights Leaderboard",sound:!1},leaderboard_defs:l,data_source_params:m})},l=v(2),w=v(3),m=v(4),t=v(5),u=v(6),x=v(7),y=v(8),B=v(2,q),F=v(3,q),C=v(4,q),K=v(5,q),z=v(6,q),J=v(7,q),q=v(8,q),v=function(h,l,m,u){var q=[D.colors.red,D.colors.blue,D.colors.yellow,D.colors.lightgreen,D.colors.purple,D.colors.darkgreen],t=h.prototype.view_cls||D.bb.WidgetView,
t=t.extend(k),v={},x=[];m=m||1;for(i=1;i<=m;i++)x.push("arg"+i),v["select_arg"+i]={label:1==i?"SELECT":void 0,template:"interpolable_input_text",template_data:{placeholder:"select argument "+i,tooltip:'An argument that is aggregator function that acts on an attribute. Read the NRQL documentation at <a href="http://docs.newrelic.com/docs/insights/using-nrql" target="_blank">http://docs.newrelic.com/docs/insights/using-nrql</a>'}};v=_.extend(v,_.clone(f),b);l?(kind_cls=h.prototype.kind_cls.extend({allowed_timespans:["daily",
"weekly","monthly"]}),_.extend(v,d)):(kind_cls=h.prototype.kind_cls.extend({allowed_timespans:["daily"]}),_.extend(v,g,a));t={timezone:"Etc/UTC",kind_cls:kind_cls,view_cls:t,data_source_params:v};l?_.extend(t,{subtitles:x,colors:q.slice(0,m),trend_defs:{timespan:"daily"},defaults:{title:"Insights chart",sound:!1}}):u?_.extend(t,{subtitles:x,colors:q.slice(0,m),defaults:{title:"Insights bars",sound:!1}}):_.extend(t,{trend_defs:{subtitle:x[0],color:e,timespan:"daily"},defaults:{title:"Insights counter",
sound:!1}});return h.extend(t)};CounterWidget=v(D.bb.wt.TrendWidget,!1);AbsoluteLineChart1Widget=v(D.bb.wt.AbsoluteMultilineChartWidget,!0,1);AbsoluteLineChart2Widget=v(D.bb.wt.AbsoluteMultilineChartWidget,!0,2);AbsoluteLineChart3Widget=v(D.bb.wt.AbsoluteMultilineChartWidget,!0,3);AbsoluteLineChart4Widget=v(D.bb.wt.AbsoluteMultilineChartWidget,!0,4);AbsoluteLineChart5Widget=v(D.bb.wt.AbsoluteMultilineChartWidget,!0,5);AbsoluteLineChart6Widget=v(D.bb.wt.AbsoluteMultilineChartWidget,!0,6);AbsoluteAreaChart1Widget=
v(D.bb.wt.AbsoluteMultiareaChartWidget,!0,1);AbsoluteAreaChart2Widget=v(D.bb.wt.AbsoluteMultiareaChartWidget,!0,2);AbsoluteAreaChart3Widget=v(D.bb.wt.AbsoluteMultiareaChartWidget,!0,3);AbsoluteAreaChart4Widget=v(D.bb.wt.AbsoluteMultiareaChartWidget,!0,4);StackedChart2Widget=v(D.bb.wt.StackedChartWidget,!0,2);StackedChart3Widget=v(D.bb.wt.StackedChartWidget,!0,3);StackedChart4Widget=v(D.bb.wt.StackedChartWidget,!0,4);StackedChart5Widget=v(D.bb.wt.StackedChartWidget,!0,5);StackedChart6Widget=v(D.bb.wt.StackedChartWidget,
!0,6);Bars3Widget=v(D.bb.wt.BarsWidget,!1,3,!0);Bars4Widget=v(D.bb.wt.BarsWidget,!1,4,!0);Bars5Widget=v(D.bb.wt.BarsWidget,!1,5,!0);v=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","query_key"],["auth_domain","account_id"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_user:{template:"input_text",
template_data:{placeholder:"Query key",tooltip:"Once logged in Insights, your Query Keys are listed in the menu Manage Data > API Keys"}},auth_domain:{template:"input_text",template_data:{placeholder:"Your New Relic account id",tooltip:"Once logged in Insights, your account id is the number in the URL.  For instance in https://insights.newrelic.com/accounts/12345 the account id is 12345"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{newrelicinsights_counter:CounterWidget,newrelicinsights_absolute_graph1:AbsoluteLineChart1Widget,
newrelicinsights_absolute_graph2:AbsoluteLineChart2Widget,newrelicinsights_absolute_graph3:AbsoluteLineChart3Widget,newrelicinsights_absolute_graph4:AbsoluteLineChart4Widget,newrelicinsights_absolute_graph5:AbsoluteLineChart5Widget,newrelicinsights_absolute_graph6:AbsoluteLineChart6Widget,newrelicinsights_absolute_area_graph1:AbsoluteAreaChart1Widget,newrelicinsights_absolute_area_graph2:AbsoluteAreaChart2Widget,newrelicinsights_absolute_area_graph3:AbsoluteAreaChart3Widget,newrelicinsights_absolute_area_graph4:AbsoluteAreaChart4Widget,
newrelicinsights_stacked_graph2:StackedChart2Widget,newrelicinsights_stacked_graph3:StackedChart3Widget,newrelicinsights_stacked_graph4:StackedChart4Widget,newrelicinsights_stacked_graph5:StackedChart5Widget,newrelicinsights_stacked_graph6:StackedChart6Widget,newrelicinsights_bars3:Bars3Widget,newrelicinsights_bars4:Bars4Widget,newrelicinsights_bars5:Bars5Widget,newrelicinsights_leaderboard1:l,newrelicinsights_leaderboard2:w,newrelicinsights_leaderboard3:m,newrelicinsights_leaderboard4:t,newrelicinsights_leaderboard5:u,
newrelicinsights_leaderboard6:x,newrelicinsights_leaderboard7:y,newrelicinsights_trend_leaderboard1:B,newrelicinsights_trend_leaderboard2:F,newrelicinsights_trend_leaderboard3:C,newrelicinsights_trend_leaderboard4:K,newrelicinsights_trend_leaderboard5:z,newrelicinsights_trend_leaderboard6:J,newrelicinsights_trend_leaderboard7:q});_.extend(Ducksboard.Backbone.service_kinds,{newrelicinsights:v})})();
(function(){var e=D.colors.black,k={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Google Analytics",url:"https://www.google.com/analytics/"})}},h=D.Backbone.WidgetView.extend(_.clone(k)),f=D.Backbone.wt.MultilineChartView.extend(_.clone(k)),b=D.Backbone.slot_kinds.Chart.extend({allowed_timespans:["weekly","monthly"]}),g=D.Backbone.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["weekly","monthly"]}),a=D.Backbone.slot_kinds.LineChart.extend({allowed_timespans:["weekly",
"monthly"]}),d=D.Backbone.slot_kinds.StackedChart.extend({allowed_timespans:["weekly","monthly"]}),l=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"]}),q=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["daily"]});l.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new D.Backbone.slot_views.ChartView({model:this})}});var v=D.Backbone.slot_views.ChartView.extend({update_counter:function(a,d){var b=D.Backbone.slot_views.CounterTrendView,
e=_.reduce(a[0],function(a,d){return a+d},0)/_.filter(a[0],function(a){return null!==a}).length;this.model.get("is_percentage")&&(e*=100);b.prototype.update_counter.call(this,[[e]])}}),w=l.extend({initialize:function(){D.Backbone.Slot.prototype.initialize.apply(this,arguments);this.view=new v({model:this})}}),m={view_cls:h,data_source_params:{table_id:{template:"select",template_data:{load_service_params:!0}}}},t={view_cls:h,data_source_params:{table_id:{template:"select",template_data:{load_service_params:!0}},
segment_id:{template:"select",template_data:{load_service_params:!0}}}},u={view_cls:h,data_source_params:{table_id:{template:"select",template_data:{load_service_params:!0,klass:"load:goal"}},goal_number:{template:"select",template_data:{load_service_params:!0}}}},k={view_cls:h,data_source_params:_.extend(_.clone(u.data_source_params),{segment_id:{template:"select",template_data:{load_service_params:!0}}})},x={view_cls:h,data_source_params:{table_id:{template:"select",template_data:{load_service_params:!0,
klass:"load:event_categories"}},segment_id:{template:"select",template_data:{load_service_params:!0}},event_category:{template:"select",template_data:{load_service_params:!0}}}},y={timespan_days:{template:"select",template_data:{options:[{value:"365",display_name:"a year's worth of data"},{value:"30",display_name:"a month's worth of data"},{value:"7",display_name:" a week's worth of data"},{value:"1",display_name:"two day's worth of data"},{value:"0",display_name:"today's data"}]}}},B={view_cls:h,
data_source_params:_.extend(_.clone(m.data_source_params),_.clone(y))},F={view_cls:h,data_source_params:_.extend(_.clone(t.data_source_params),_.clone(y))},C={view_cls:h,data_source_params:_.extend(_.clone(u.data_source_params),_.clone(y))},K={view_cls:h,data_source_params:_.extend(_.clone(k.data_source_params),_.clone(y))},z={view_cls:h,data_source_params:_.extend(_.clone(x.data_source_params),_.clone(y))},k=D.Backbone.wt.ChartWidget.extend(k).extend({kind_cls:b,defaults:{title:"Google Analytics visits",
sound:!1},trend_defs:{subtitle:"visits",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),J=D.Backbone.wt.ChartWidget.extend(t).extend({kind_cls:b,defaults:{title:"Google Analytics pageviews",sound:!1},trend_defs:{subtitle:"pageviews",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),b=D.Backbone.wt.ChartWidget.extend(m).extend({kind_cls:b,defaults:{title:"Google Analytics unique visitors",sound:!1},trend_defs:{subtitle:"unique visitors",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),
B=D.Backbone.wt.TrendWidget.extend(B).extend({kind_cls:D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),defaults:{title:"Google Analytics unique visitors",sound:!1},trend_defs:{subtitle:"unique visitors",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),G=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({view_cls:f,kind_cls:g,defaults:{title:"Google Analytics",sound:!1},subtitles:["daily unique visitors"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),
A=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a,2)}}),I=l.extend({initialize:function(){l.prototype.initialize.apply(this,arguments);this.view=new A({model:this})}}),I=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:I,defaults:{title:"Google Analytics average session time",sound:!1},trend_defs:{subtitle:"avg duration",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),O=v.extend({format_value:function(a){return D.u.format_time(a,2)}}),P=
w.extend({initialize:function(){w.prototype.initialize.apply(this,arguments);this.view=new O({model:this})}}),P=D.Backbone.wt.ChartWidget.extend(t).extend({kind_cls:P,defaults:{title:"Google Analytics average session time",sound:!1},trend_defs:{subtitle:"avg duration",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),E=D.Backbone.wt.GaugeWidget.extend(F).extend({defaults:{title:"Google Analytics visit bounce rate",sound:!1},subtitles:["visit bounce rate"],colors:["rgba(250, 136, 54, 0.65)"]}),
Y=D.Backbone.wt.ChartWidget.extend(t).extend({kind_cls:w,defaults:{title:"Google Analytics visit bounce rate",sound:!1},trend_defs:{is_percentage:!0,subtitle:"% bounce rate",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),N=D.Backbone.wt.TrendLeaderboardWidget.extend(K).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top sources",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:e,subtitle3:"pct",
color3:e}}),n=D.Backbone.wt.TrendLeaderboardWidget.extend(K).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top keywords",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:e,subtitle3:"pct",color3:e}}),M=D.Backbone.wt.TrendLeaderboardWidget.extend(K).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top languages",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",
color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:e,subtitle3:"pct",color3:e}}),U=D.Backbone.wt.TrendLeaderboardWidget.extend(K).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,data_source_params:_.extend(_.clone(K.data_source_params),{page_title:{template:"select",template_data:{options:[{value:"",display_name:"Show pages path"},{value:"t",display_name:"Show pages title"}]}}}),defaults:{title:"Most visited pages",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",
color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:e,subtitle3:"pct",color3:e}}),W=D.Backbone.wt.TrendLeaderboardWidget.extend(K).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Visitors Frequency",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"Count of visits",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:e,subtitle3:"pct",color3:e}}),K=D.Backbone.wt.TrendLeaderboardWidget.extend(K).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Visitors engagement",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"Visit duration",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visits",color2:e,subtitle3:"pct",color3:e}}),H=D.Backbone.wt.GaugeWidget.extend(F).extend({defaults:{title:"Google Analytics new visitors pct.",sound:!1},subtitles:["new visitors"],colors:["rgba(250, 136, 54, 0.65)"]}),S=D.Backbone.wt.ChartWidget.extend(t).extend({kind_cls:w,defaults:{title:"Google Analytics new visits percentage",sound:!1},trend_defs:{is_percentage:!0,
subtitle:"% new visits",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),R=D.Backbone.wt.MultilineChartWidget.extend(u).extend({view_cls:f,kind_cls:a,defaults:{title:"Google Analytics",sound:!1},subtitles:["goal completions"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),X=D.Backbone.wt.TrendWidget.extend(C).extend({kind_cls:D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),defaults:{title:"Google Analytics goal completions",sound:!1},trend_defs:{subtitle:"completions",
color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),ea=D.Backbone.wt.MultilineChartWidget.extend(u).extend({view_cls:f,kind_cls:a,defaults:{title:"Google Analytics",sound:!1},subtitles:["goal abandons"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),fa=D.Backbone.wt.TrendWidget.extend(C).extend({kind_cls:D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),defaults:{title:"Google Analytics goal abandons",sound:!1},trend_defs:{subtitle:"abandons",color:"rgba(250, 136, 54, 0.65)",
timespan:"monthly"}}),ja=D.Backbone.wt.MultilineChartWidget.extend(u).extend({view_cls:f,kind_cls:a,defaults:{title:"Google Analytics",sound:!1},subtitles:["goal value"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),ga=D.Backbone.wt.TrendWidget.extend(C).extend({kind_cls:D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["monthly"]}),defaults:{title:"Google Analytics goal value",sound:!1},trend_defs:{subtitle:"value",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),
V=D.Backbone.wt.GaugeWidget.extend(C).extend({defaults:{title:"Google Analytics goal conversion rate",sound:!1},subtitles:["conversion"],colors:["rgba(250, 136, 54, 0.65)"]}),ca=D.Backbone.wt.TrendWidget.extend(C).extend({kind_cls:l,defaults:{title:"Google Analytics goal conversion rate",sound:!1},trend_defs:{is_percentage:!0,subtitle:"conversion rate",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),pa=D.Backbone.wt.GaugeWidget.extend(C).extend({defaults:{title:"Google Analytics goal abandon rate",
sound:!1},subtitles:["abandons"],colors:["rgba(250, 136, 54, 0.65)"]}),sa=D.Backbone.wt.TrendWidget.extend(C).extend({kind_cls:l,defaults:{title:"Google Analytics goal abandon rate",sound:!1},trend_defs:{is_percentage:!0,subtitle:"abandon rate",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),la=D.Backbone.wt.TrendLeaderboardWidget.extend(C).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top goal sources",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",
color1:"rgba(250, 136, 54, 0.65)",subtitle2:"goals",color2:e,subtitle3:"pct",color3:e}}),u=D.Backbone.wt.MultilineChartWidget.extend(u).extend({view_cls:f,kind_cls:a,defaults:{title:"Completions vs Abandons",sound:!1},subtitles:["completions","abandons"],colors:[D.colors.blue,D.colors.red],trend_defs:{timespan:"monthly"}}),d=D.Backbone.wt.StackedChartWidget.extend(C).extend({view_cls:f,kind_cls:d,defaults:{title:"Conversion vs Abandon rate",sound:!1},subtitles:["conversion","abandon"],colors:[D.colors.blue,
D.colors.red],trend_defs:{timespan:"monthly"}}),C=D.Backbone.wt.MultilineChartWidget.extend(x).extend({view_cls:f,kind_cls:a,defaults:{title:"Google Analytics",sound:!1},subtitles:["total events"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),qa=D.Backbone.wt.TrendWidget.extend(z).extend({kind_cls:l,defaults:{title:"Google Analytics total events",sound:!1},trend_defs:{subtitle:"events",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),ia=D.Backbone.wt.MultilineChartWidget.extend(x).extend({view_cls:f,
kind_cls:a,defaults:{title:"Google Analytics",sound:!1},subtitles:["unique events"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),Z=D.Backbone.wt.TrendWidget.extend(z).extend({kind_cls:l,defaults:{title:"Google Analytics unique events",sound:!1},trend_defs:{subtitle:"unique events",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),ha=D.Backbone.wt.MultilineChartWidget.extend(x).extend({view_cls:f,kind_cls:a,defaults:{title:"Google Analytics",sound:!1},subtitles:["event value"],
colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),La=D.Backbone.wt.TrendWidget.extend(z).extend({kind_cls:l,defaults:{title:"Google Analytics event value",sound:!1},trend_defs:{subtitle:"value",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),Ma=D.Backbone.wt.MultilineChartWidget.extend(x).extend({view_cls:f,kind_cls:a,defaults:{title:"Google Analytics",sound:!1},subtitles:["visits with event"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),xa=D.Backbone.wt.TrendWidget.extend(z).extend({kind_cls:l,
defaults:{title:"Google Analytics visits with event",sound:!1},trend_defs:{subtitle:"visits",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),x=D.Backbone.wt.MultilineChartWidget.extend(x).extend({view_cls:f,kind_cls:g,defaults:{title:"Google Analytics",sound:!1},subtitles:["events per visit"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),z=D.Backbone.wt.TrendWidget.extend(z).extend({kind_cls:l,defaults:{title:"Google Analytics events per visit",sound:!1},trend_defs:{subtitle:"events per vist",
color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),Ka=D.Backbone.wt.TrendLeaderboardWidget.extend(F).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top events",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"events",color2:e,subtitle3:"pct",color3:e}}),Ua=D.Backbone.wt.MultilineChartWidget.extend(t).extend({view_cls:f,kind_cls:a,defaults:{title:"Google Analytics",sound:!1},subtitles:["search visits"],colors:["rgba(250, 136, 54, 0.65)"],
trend_defs:{timespan:"monthly"}}),Ta=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:l,defaults:{title:"Google Analytics search visits",sound:!1},trend_defs:{subtitle:"visits",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),F=D.Backbone.wt.TrendLeaderboardWidget.extend(F).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top search keywords",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"searches",color2:e,
subtitle3:"pct",color3:e}}),ma=function(d,b){b=b||{};type="source";var e=[D.colors.red,D.colors.blue,D.colors.yellow,D.colors.lightgreen,D.colors.purple,D.colors.darkgreen],g={table_id:{template:"select",template_data:{load_service_params:!0,klass:"load:sources"}}},h={template:"autocomplete",template_data:{load_service_params:!0},depends_on:"table_id"},k=[];for(i=1;i<=d;i++)k.push(type+i),g[type+i]=$.extend(!0,{},h,{template_data:{placeholder:"Select Source "+i,tooltip:'Every referral to a web site has an origin, or source. Possible sources include: "google" (the name of a search engine), "facebook.com" (the name of a referring site), "spring_newsletter" (the name of one of your newsletters), and "direct" (visits from people who typed your URL directly into their browser, or who had bookmarked your site).'}});
return{defaults:_.extend({title:"Traffic sources",sound:!1},b),view_cls:f,kind_cls:a,data_source_params:g,colors:e.slice(0,d),subtitles:k,trend_defs:{timespan:"monthly"}}},Na=D.Backbone.wt.MultilineChartWidget.extend(ma(2)),ua=D.Backbone.wt.MultilineChartWidget.extend(ma(3)),Ea=D.Backbone.wt.MultilineChartWidget.extend(ma(4)),za=D.Backbone.wt.MultilineChartWidget.extend(ma(5)),ma=D.Backbone.wt.MultilineChartWidget.extend(ma(6)),ra={view_cls:h,data_source_params:_.extend(_.clone(t.data_source_params),
{custom_metric:{template:"autocomplete",template_data:{options:D.ga.metric_options,placeholder:"Select metric",tooltip:'The metrics data to be retrieved from the API. Read the reference for <a target="_blank" href="http://developers.google.com/analytics/devguides/reporting/core/v3/reference#metrics">metrics</a>'}},custom_filter:{template:"input_text",template_data:{placeholder:"filters",tooltip:'Specifies a subset of all data matched in analytics. Read the reference for <a target="_blank" href="http://developers.google.com/analytics/devguides/reporting/core/v3/reference#filters">filters</a>'}}})},
t={view_cls:h,data_source_params:_.extend(_.clone(ra.data_source_params),_.clone(y))},g=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(ra).extend({view_cls:f,kind_cls:g,defaults:{title:"Google Analytics custom query",sound:!1},subtitles:["metric"],colors:["rgba(250, 136, 54, 0.65)"],trend_defs:{timespan:"monthly"}}),t=D.Backbone.wt.TrendWidget.extend(t).extend({kind_cls:l,defaults:{title:"Google Analytics custom query",sound:!1},trend_defs:{subtitle:"metric",color:"rgba(250, 136, 54, 0.65)",timespan:"monthly"}}),
y=D.Backbone.wt.TrendLeaderboardWidget.extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,view_cls:h,defaults:{title:"Google Analytics custom board",sound:!1},data_source_params:_.extend(_.clone(ra.data_source_params),{custom_dim:{template:"autocomplete",template_data:{options:D.ga.dimension_options,placeholder:"Select dimension",tooltip:'The dimension data to be retrieved from the API. Read the reference for <a target="_blank" href="http://developers.google.com/analytics/devguides/reporting/core/v3/reference#dimensions">dimensions</a>'}}},
_.clone(y)),leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"metric",color2:e,subtitle3:"pct",color3:e}}),ra=D.Backbone.wt.TrendWidget.extend(m).extend({kind_cls:q,defaults:{title:"Active Visitors",sound:!1},trend_defs:{subtitle:"visitors right now",color:"rgba(250, 136, 54, 0.65)",timespan:"daily"}}),va=D.Backbone.wt.GaugeWidget.extend(m).extend({defaults:{title:"new visitors pct. right now",sound:!1},subtitles:["new visitors"],colors:["rgba(250, 136, 54, 0.65)"]}),
Ga=D.Backbone.wt.TrendLeaderboardWidget.extend(m).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top active keywords",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visitors",color2:e,subtitle3:"pct",color3:e}}),Oa=D.Backbone.wt.TrendLeaderboardWidget.extend(m).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top active countries",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",
color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visitors",color2:e,subtitle3:"pct",color3:e}}),Ha=D.Backbone.wt.TrendLeaderboardWidget.extend(m).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Top active sources",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visitors",color2:e,subtitle3:"pct",color3:e}}),Za=D.Backbone.wt.TrendLeaderboardWidget.extend(m).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
data_source_params:_.extend(_.clone(m.data_source_params),{page_title:{template:"select",template_data:{options:[{value:"",display_name:"Show pages path"},{value:"t",display_name:"Show pages title"}]}}}),defaults:{title:"Top active pages",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"visitors",color2:e,subtitle3:"pct",color3:e}}),m={view_cls:h,data_source_params:_.extend(_.clone(m.data_source_params),{realtime_custom_metric:{template:"autocomplete",
template_data:{options:D.ga.realtime_metric_options,placeholder:"Select metric",tooltip:'The metrics data to be retrieved from the API. Read the reference for <a target="_blank" href="https://developers.google.com/analytics/devguides/reporting/realtime/dimsmets/">metrics</a>'}},realtime_custom_filter:{template:"input_text",template_data:{placeholder:"filters",tooltip:'Specifies a subset of all data matched in analytics. Read the reference for <a target="_blank" href="https://developers.google.com/analytics/devguides/reporting/core/v3/reference#filters">filters</a>'}}})},
q=D.Backbone.wt.TrendWidget.extend(m).extend({kind_cls:q,defaults:{title:"GA real time custom query",sound:!1},trend_defs:{subtitle:"metric",color:"rgba(250, 136, 54, 0.65)",timespan:"daily"}}),e=D.Backbone.wt.TrendLeaderboardWidget.extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,view_cls:h,defaults:{title:"GA real time custom board",sound:!1},data_source_params:_.extend(_.clone(m.data_source_params),{realtime_custom_dim:{template:"autocomplete",template_data:{options:D.ga.realtime_dimension_options,
placeholder:"Select dimension",tooltip:'The dimension data to be retrieved from the API. Read the reference for <a target="_blank" href="https://developers.google.com/analytics/devguides/reporting/realtime/dimsmets/">dimensions</a>'}}}),leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:"rgba(250, 136, 54, 0.65)",subtitle2:"metric",color2:e,subtitle3:"pct",color3:e}}),Fa={custom_metric:{template:"autocomplete",template_data:{options:_.map(D.ga.metrics.AdWords,function(a,d){return{value:d,display_name:d}}),
placeholder:"Select adwords metric",tooltip:'The metrics data to be retrieved from the API. Read the reference for <a target="_blank" href="http://developers.google.com/analytics/devguides/reporting/core/v3/reference#metrics">metrics</a>'}}},h=g.extend({defaults:{title:"Google Adwords",sound:!1},data_source_params:_.extend(_.clone(g.prototype.data_source_params),_.clone(Fa))}),m=t.extend({defaults:{title:"Google Adwords custom query",sound:!1},data_source_params:_.extend(_.clone(t.prototype.data_source_params),
_.clone(Fa))}),Fa=y.extend({defaults:{title:"Google Adwords custom board",sound:!1},data_source_params:_.extend(_.clone(y.prototype.data_source_params),_.clone(Fa))}),Aa=D.Backbone.Service.extend({description:"Your data is in there somewhere. Bring those key performance indicators to the forefront with these widgets.",signup_url:"http://www.google.com/analytics/"});_.extend(Ducksboard.Backbone.widget_kinds,{analytics_visits_graph:k,analytics_pageviews_graph:J,analytics_avg_time_on_site_counter:I,
analytics_avg_time_on_site_graph:P,analytics_visit_bounce_rate_gauge:E,analytics_visit_bounce_rate_graph:Y,analytics_keywords_leaderboard:n,analytics_sources_leaderboard:N,analytics_frequency_leaderboard:W,analytics_engagement_leaderboard:K,analytics_keywords_leaderboard:n,analytics_sources_leaderboard:N,analytics_pct_new_visitors_gauge:H,analytics_pct_new_visits_graph:S,analytics_unique_visitors_graph:b,analytics_unique_visitors_counter:B,analytics_daily_unique_visitors_graph:G,analytics_languages_leaderboard:M,
analytics_pages_leaderboard:U,analytics_goal_completions_graph:R,analytics_goal_completions_counter:X,analytics_goal_conversion_rate_counter:ca,analytics_goal_conversion_rate_gauge:V,analytics_goal_abandons_graph:ea,analytics_goal_abandons_counter:fa,analytics_goal_abandon_rate_counter:sa,analytics_goal_abandon_rate_gauge:pa,analytics_goal_completions_vs_abandons_graph:u,analytics_goal_conversion_rate_vs_abandon_rate_stacked_graph:d,analytics_goal_value_graph:ja,analytics_goal_value_counter:ga,analytics_goal_completed_source_leaderboard:la,
analytics_total_events_graph:C,analytics_total_events_counter:qa,analytics_unique_events_graph:ia,analytics_unique_events_counter:Z,analytics_event_value_graph:ha,analytics_event_value_counter:La,analytics_visits_with_event_graph:Ma,analytics_visits_with_event_counter:xa,analytics_events_per_visit_graph:x,analytics_events_per_visit_counter:z,analytics_events_leaderboard:Ka,analytics_search_visits_graph:Ua,analytics_search_visits_counter:Ta,analytics_search_keywords_leaderboard:F,analytics_sources_graph2:Na,
analytics_sources_graph3:ua,analytics_sources_graph4:Ea,analytics_sources_graph5:za,analytics_sources_graph6:ma,analytics_custom_query_graph:g,analytics_custom_query_counter:t,analytics_custom_query_leaderboard:y,analytics_adwords_custom_query_graph:h,analytics_adwords_custom_query_counter:m,analytics_adwords_custom_query_leaderboard:Fa,analytics_realtime_active_visitors_counter:ra,analytics_realtime_pct_new_visitors_gauge:va,analytics_realtime_pages_leaderboard:Za,analytics_realtime_keywords_leaderboard:Ga,
analytics_realtime_sources_leaderboard:Ha,analytics_realtime_countries_leaderboard:Oa,analytics_realtime_custom_query_counter:q,analytics_realtime_custom_query_leaderboard:e});_.extend(Ducksboard.Backbone.service_kinds,{analytics:Aa})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to your Trello account",url:"https://trello.com/"})}}),k=D.Backbone.wt.TimelineWidget.extend({view_cls:e,data_source_params:{board_id:{template:"select",template_data:{load_service_params:!0}}},defaults:{title:"Trello board activity",sound:!1}}),h=D.Backbone.wt.CompletionWidget.extend({view_cls:e,completion_defs:{view_cls:D.bb.slot_views.CompletionProgressView},
data_source_params:{board_id:{template:"select",template_data:{load_service_params:!0}}},defaults:{title:"Trello board completion rate",sound:!1},subtitles:["closed cards"],colors:["rgba(32, 92, 126, 0.65)"]}),f={template:"select",template_data:{load_service_params:!0}},b={board_id:{template:"select",template_data:{load_service_params:!0,klass:"load:list"}}},g={data_source_params:_.extend(_.clone(b),{list_id:f})},a={data_source_params:_.extend(_.clone(b),{list_id:f,list_id2:f})},d={data_source_params:_.extend(_.clone(b),
{list_id:f,list_id2:f,list_id3:f})},l={data_source_params:_.extend(_.clone(b),{list_id:f,list_id2:f,list_id3:f,list_id4:f})},q={data_source_params:_.extend(_.clone(b),{list_id:f,list_id2:f,list_id3:f,list_id4:f,list_id5:f})},v={data_source_params:_.extend(_.clone(b),{list_id:f,list_id2:f,list_id3:f,list_id4:f,list_id5:f,list_id6:f})},f=D.Backbone.wt.TimelineWidget.extend(g).extend({view_cls:e,defaults:{title:"Trello board list cards",sound:!1}}),w={view_cls:D.Backbone.wt.MultilineChartView.extend(_.clone(e)),
defaults:{title:"Trello board list cards",sound:!1}},m={subtitles:["list1"],colors:["rgba(32, 92, 126, 0.65)"],trend_defs:{timespan:"daily"}},t=_.extend(_.clone(g),m),b=D.bb.wt.AbsoluteMultilineChartWidget.extend(w).extend(t),m={subtitles:["list1","list2"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)"],trend_defs:{timespan:"daily"}},u=_.extend(_.clone(a),m),x=D.bb.wt.AbsoluteMultilineChartWidget.extend(w).extend(u),m={subtitles:["list1","list2","list3"],colors:["rgba(32, 92, 126, 0.65)",
"rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"],trend_defs:{timespan:"daily"}},y=_.extend(_.clone(d),m),B=D.bb.wt.AbsoluteMultilineChartWidget.extend(w).extend(y),m={subtitles:["list1","list2","list3","list4"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)"],trend_defs:{timespan:"daily"}},F=_.extend(_.clone(l),m),C=D.bb.wt.AbsoluteMultilineChartWidget.extend(w).extend(F),m={subtitles:["list1","list2","list3","list4","list5"],colors:["rgba(32, 92, 126, 0.65)",
"rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)","rgba(0, 170, 93, 0.65)"],trend_defs:{timespan:"daily"}},K=_.extend(_.clone(q),m),K=D.bb.wt.AbsoluteMultilineChartWidget.extend(w).extend(K),m={subtitles:"list1 list2 list3 list4 list5 list6".split(" "),colors:"rgba(32, 92, 126, 0.65);rgba(216, 66, 55, 0.65);rgba(109, 0, 119, 0.65);rgba(255, 114, 0, 0.65);rgba(0, 170, 93, 0.65);rgba(255, 210, 59, 0.65)".split(";"),trend_defs:{timespan:"daily"}},v=_.extend(_.clone(v),m),
v=D.bb.wt.AbsoluteMultilineChartWidget.extend(w).extend(v),t=D.bb.wt.AbsoluteMultiareaChartWidget.extend(w).extend(t),u=D.bb.wt.AbsoluteMultiareaChartWidget.extend(w).extend(u),y=D.bb.wt.AbsoluteMultiareaChartWidget.extend(w).extend(y),w=D.bb.wt.AbsoluteMultiareaChartWidget.extend(w).extend(F),g=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:e,defaults:{title:"Trello board list cards",sound:!1},trend_defs:{subtitle:"value",color:"rgba(32, 92, 126, 0.65)"}}),a=D.Backbone.wt.PinsWidget.extend(a).extend({view_cls:e,
defaults:{title:"Trello board list cards",sound:!1},subtitles:["list1","list2"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)"]}),F=D.Backbone.wt.BoxesWidget.extend(d).extend({view_cls:e,defaults:{title:"Trello board list cards",sound:!1},subtitles:["list1","list2","list3"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"]}),m=D.Backbone.wt.BoxesWidget.extend(l).extend({view_cls:e,defaults:{title:"Trello board list cards",sound:!1},subtitles:["list1",
"list2","list3","list4"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)"]}),d=D.Backbone.wt.BarsWidget.extend(d).extend({view_cls:e,defaults:{title:"Trello board list cards",sound:!1},subtitles:["list1","list2","list3"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)"]}),l=D.Backbone.wt.BarsWidget.extend(l).extend({view_cls:e,defaults:{title:"Trello board list cards",sound:!1},subtitles:["list1","list2",
"list3","list4"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)"]}),e=D.Backbone.wt.BarsWidget.extend(q).extend({view_cls:e,defaults:{title:"Trello board list cards",sound:!1},subtitles:["list1","list2","list3","list4","list5"],colors:["rgba(32, 92, 126, 0.65)","rgba(216, 66, 55, 0.65)","rgba(109, 0, 119, 0.65)","rgba(255, 114, 0, 0.65)","rgba(0, 170, 93, 0.65)"]}),q=D.Backbone.Service.extend({description:"Use these widgets to keep tabs on your Trello boards.",
signup_url:"https://trello.com/signup"});_.extend(Ducksboard.Backbone.widget_kinds,{trello_board_list_cards_counter:g,trello_board_list_cards_pins:a,trello_board_list_cards_boxes3:F,trello_board_list_cards_boxes4:m,trello_board_list_cards_bars3:d,trello_board_list_cards_bars4:l,trello_board_list_cards_bars5:e,trello_board_list_cards_absolute_graph:b,trello_board_list_cards_absolute_graph2:x,trello_board_list_cards_absolute_graph3:B,trello_board_list_cards_absolute_graph4:C,trello_board_list_cards_absolute_graph5:K,
trello_board_list_cards_absolute_graph6:v,trello_board_list_cards_absolute_area_graph:t,trello_board_list_cards_absolute_area_graph2:u,trello_board_list_cards_absolute_area_graph3:y,trello_board_list_cards_absolute_area_graph4:w,trello_board_completion_rate_progress:h,trello_board_list_cards_timeline:f,trello_board_activity_timeline:k});_.extend(Ducksboard.Backbone.service_kinds,{trello:q})})();
(function(){var e={401:"Could not authenticate. The authorization has probably expired. Please, relink it.",403:"You do not have permissions to get statistics for the company. Please, change it.",404:"We couldn't find the configured object. Don't worry, we'll keep on trying."},k=D.Backbone.WidgetView.extend({error_code_to_message:function(a){a=e[a];void 0===a&&(a=D.u.default_error_message);return a}}),h={view_cls:k,data_source_params:{company_id:{template:"input_text",template_data:{placeholder:"company ID or company keywords",
tooltip:"The Company ID is the sequence of numbers at the end of a company URL."}}}},f={view_cls:k,data_source_params:{company_id:{template:"input_text",template_data:{placeholder:"your company ID or keywords",tooltip:"Your Company ID is the sequence of numbers at the end of your company URL."}}},handles_error_code:function(a){console.log(a);return 401===a||403===a}},b={allowed_timespans:["yearly"],get_initial_data:function(){var a=this._prepare_initial_params();this.initial_msg_id=D.ws.fetch(this.get("label"),
a);this.initial_data_d=$.Deferred();this.listenTo(D.ws,"fetched:"+this.initial_msg_id,this.got_initial_data);D.ws.connected&&this.bind_data_source();return this.initial_data_d},got_initial_data:function(a){this.stopListening(D.ws,"fetched:"+this.initial_msg_id);this.initial_data_d.resolve();delete this.initial_msg_id;delete this.initial_data_d;this._process_initial_data(a);a=this.extra_timezone?_.sprintf("tick:%s",this.extra_timezone):"tick";this.listenTo(D.ws,a,this.tick)}},g=D.Backbone.slot_kinds.CounterTrend.extend(b),
a=D.Backbone.slot_kinds.AreaChart.extend(b),d=D.Backbone.wt.MultilineChartView.extend(k),l=D.colors.bluesteel,k=D.Backbone.wt.TrendWidget.extend(h).extend({defaults:{title:"Linkedin followers",sound:!1},trend_defs:{subtitle:"followers",color:l,timespan:"daily"}}),b=D.Backbone.wt.MultiareaChartWidget.extend(h).extend({view_cls:d,defaults:{title:"Followers growth",sound:!1},subtitles:["followers"],colors:[l],trend_defs:{timespan:"monthly"}}),h=D.Backbone.wt.TimelineWidget.extend(h).extend({defaults:{title:"Linkedin company updates",
sound:!1}}),q=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:g,defaults:{title:"Linkedin engagement",sound:!1},trend_defs:{subtitle:"engagement",color:l,timespan:"yearly"}}),v=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:g,defaults:{title:"Linkedin clicks",sound:!1},trend_defs:{subtitle:"clicks",color:l,timespan:"yearly"}}),w=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:g,defaults:{title:"Linkedin comments",sound:!1},trend_defs:{subtitle:"comments",color:l,timespan:"yearly"}}),
m=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:g,defaults:{title:"Linkedin likes",sound:!1},trend_defs:{subtitle:"likes",color:l,timespan:"yearly"}}),t=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:g,defaults:{title:"Linkedin shares",sound:!1},trend_defs:{subtitle:"shares",color:l,timespan:"yearly"}}),g=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:g,defaults:{title:"Linkedin impressions",sound:!1},trend_defs:{subtitle:"impressions",color:l,timespan:"yearly"}}),u=D.Backbone.wt.MultiareaChartWidget.extend(f).extend({view_cls:d,
kind_cls:a,defaults:{title:"Engagement growth",sound:!1},subtitles:["engagement"],colors:[l],trend_defs:{timespan:"yearly"}}),x=D.Backbone.wt.MultiareaChartWidget.extend(f).extend({view_cls:d,kind_cls:a,defaults:{title:"Clicks growth",sound:!1},subtitles:["clicks"],colors:[l],trend_defs:{timespan:"yearly"}}),y=D.Backbone.wt.MultiareaChartWidget.extend(f).extend({view_cls:d,kind_cls:a,defaults:{title:"Comments growth",sound:!1},subtitles:["comments"],colors:[l],trend_defs:{timespan:"yearly"}}),B=D.Backbone.wt.MultiareaChartWidget.extend(f).extend({view_cls:d,
kind_cls:a,defaults:{title:"Likes growth",sound:!1},subtitles:["likes"],colors:[l],trend_defs:{timespan:"yearly"}}),F=D.Backbone.wt.MultiareaChartWidget.extend(f).extend({view_cls:d,kind_cls:a,defaults:{title:"Shares growth",sound:!1},subtitles:["shares"],colors:[l],trend_defs:{timespan:"yearly"}}),f=D.Backbone.wt.MultiareaChartWidget.extend(f).extend({view_cls:d,kind_cls:a,defaults:{title:"Impressions growth",sound:!1},subtitles:["impressions"],colors:[l],trend_defs:{timespan:"yearly"}}),a=D.Backbone.Service.extend({});
_.extend(Ducksboard.Backbone.widget_kinds,{linkedin_company_updates_timeline:h,linkedin_company_followers_counter:k,linkedin_company_followers_area_graph:b,linkedin_company_engagement_counter:q,linkedin_company_clicks_counter:v,linkedin_company_comments_counter:w,linkedin_company_likes_counter:m,linkedin_company_shares_counter:t,linkedin_company_impressions_counter:g,linkedin_company_engagement_area_graph:u,linkedin_company_clicks_area_graph:x,linkedin_company_comments_area_graph:y,linkedin_company_likes_area_graph:B,
linkedin_company_shares_area_graph:F,linkedin_company_impressions_area_graph:f});_.extend(Ducksboard.Backbone.service_kinds,{linkedin:a})})();
(function(){var e=D.Backbone.wt.TrendWidget.extend({defaults:{title:"Delicious bookmarks count",sound:!1},trend_defs:{subtitle:"bookmarks",color:"rgba(9, 9, 9, 0.65)",timespan:"daily"},data_source_params:{url:{template:"input_text",template_data:{placeholder:"Link to track"}}}}),k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{delicious_url_posts_counter:e});_.extend(Ducksboard.Backbone.service_kinds,{delicious:k})})();
(function(){var e={events:{"click .inner":"external_account"},server_or_app:void 0,external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("https://rpm.newrelic.com/accounts/%s",d.get("auth_domain")),this.server_or_app&&(d=_.sprintf(d+"/%s/%s",this.server_or_app,this.model.data_source.get("app_id"))),this.add_context_action(a,{label:"Go to New Relic account",url:d})}},k=D.Backbone.WidgetView.extend(e).extend({server_or_app:"applications"}),
h=D.Backbone.wt.MultilineChartView.extend(e).extend({server_or_app:"applications"}),f=D.Backbone.wt.MultilineChartView.extend(e).extend({server_or_app:"servers"}),b=D.Backbone.WidgetView.extend(e).extend({server_or_app:"servers"}),g={view_cls:k,data_source_params:{app_id:{template:"select",template_data:{load_service_params:!0}}}},a=D.Backbone.wt.TrendWidget.extend(g).extend({defaults:{title:"New Relic Apdex",sound:!1},trend_defs:{subtitle:"apdex",color:"rgba(56, 175, 197, 0.65)",timespan:"daily"}}),
d=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:k,defaults:{title:"New Relic response time",sound:!1},trend_defs:{subtitle:"avg response time",color:"rgba(56, 175, 197, 0.65)",timespan:"daily"}}),l=D.Backbone.wt.BoxesWidget.extend(g).extend({view_cls:k,defaults:{title:"New Relic response times",sound:!1},subtitles:["min","avg","max"],colors:["rgba(59, 136, 177, 0.65)","rgba(56, 175, 197, 0.65)","rgba(209, 59, 8, 0.65)"]}),q=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:k,defaults:{title:"New Relic throughput",
sound:!1},trend_defs:{subtitle:"throughput",color:"#338899",timespan:"daily"}}),v=D.Backbone.wt.TrendWidget.extend(g).extend({view_cls:k,defaults:{title:"New Relic errors",sound:!1},trend_defs:{subtitle:"error rate",color:"rgba(209, 59, 8, 0.65)",timespan:"daily"}}),w=D.Backbone.wt.GaugeWidget.extend(g).extend({view_cls:k,defaults:{title:"New Relic busy rate",sound:!1},subtitles:["busy time"],colors:["rgba(56, 175, 197, 0.65)"]}),k=D.Backbone.wt.GaugeWidget.extend(g).extend({view_cls:k,defaults:{title:"New Relic resource usage",
sound:!1},data_source_params:{app_id:{template:"select",template_data:{load_service_params:!0,klass:"load:metric_name"}},ncpus:{template:"input_text",template_data:{placeholder:"Total number of CPUs"}}},subtitles:["CPU","DB"],colors:["rgba(56, 175, 197, 0.65)","rgba(59, 136, 177, 0.65)"]}),m={defaults:{title:"New Relic custom metric",sound:!1},data_source_params:{app_id:{template:"select",template_data:{load_service_params:!0,klass:"load:metric_name"}},metric_name:{template:"select",template_data:{load_service_params:!0,
klass:"load:field_name"}},field_name:{template:"select",template_data:{load_service_params:!0}}}},t=D.Backbone.wt.MultilineChartView.extend(e),e=D.Backbone.WidgetView.extend(e),e=D.Backbone.wt.TrendWidget.extend(m).extend({view_cls:e,trend_defs:{subtitle:"custom metric",color:"rgba(56, 175, 197, 0.65)",timespan:"daily"}}),u=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({view_cls:t,subtitles:["metric"],colors:["rgba(56, 175, 197, 0.65)"],trend_defs:{timespan:"daily"}}),m=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(m).extend({view_cls:t,
subtitles:["metric"],colors:["rgba(56, 175, 197, 0.65)"],trend_defs:{timespan:"daily"}}),t=D.Backbone.wt.StackedChartWidget.extend(g).extend({view_cls:f,defaults:{title:"CPU usage",sound:!1},subtitles:["IO wait","stolen","system","user"],colors:["rgba(203, 25, 28, 0.65)","rgba(157, 199, 88, 0.65)","rgba(81, 0, 14, 0.65)","rgba(59, 136, 177, 0.65)"],trend_defs:{timespan:"daily"}}),x=D.Backbone.wt.StackedChartWidget.extend(g).extend({view_cls:f,defaults:{title:"memory usage",sound:!1},subtitles:["swap",
"used"],colors:[D.colors.red,D.colors.blue],trend_defs:{timespan:"daily"}}),y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(g).extend({view_cls:f,defaults:{title:"system load",sound:!1},subtitles:["load"],colors:["rgba(56, 175, 197, 0.65)"],trend_defs:{timespan:"daily"}}),B=D.Backbone.wt.StackedChartWidget.extend(g).extend({view_cls:f,defaults:{title:"IO utilization",sound:!1},subtitles:["reads","writes"],colors:[D.colors.orange,D.colors.lightblue],trend_defs:{timespan:"daily"}}),F=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(g).extend({view_cls:f,
defaults:{title:"IO rate (bytes/s)",sound:!1},subtitles:["reads","writes"],colors:[D.colors.orange,D.colors.lightblue],trend_defs:{timespan:"daily"}}),f=D.Backbone.wt.StackedChartWidget.extend(g).extend({view_cls:f,defaults:{title:"Network bandwidth (bytes/s)",sound:!1},subtitles:["received","transmitted"],colors:[D.colors.orange,D.colors.lightblue],trend_defs:{timespan:"daily"}}),b=D.Backbone.wt.LeaderboardWidget.extend({view_cls:b,defaults:{title:"Top processes",sound:!1},leaderboard_defs:{total_subtitles:3,
subtitle1:"",color1:"rgba(122, 123, 118, 0.65)",subtitle2:"mem",color2:"rgba(59, 136, 177, 0.65)",subtitle3:"cpu",color3:"rgba(59, 136, 177, 0.65)"},data_source_params:{app_id:{template:"select",template_data:{load_service_params:!0}},order_by_cpu:{template:"select",template_data:{options:[{value:"t",display_name:"order processes by CPU usage"},{value:"",display_name:"order processes by memory consumption"}]}}}}),h=D.Backbone.wt.StackedChartWidget.extend(g).extend({view_cls:h,defaults:{title:"Web Transactions response time",
sound:!1},subtitles:["request queuing","language","db"],colors:[D.colors.lightgreen,D.colors.lightblue,D.colors.orange],trend_defs:{timespan:"daily"}}),g=D.Backbone.Service.extend({description:"Get Insight Into Your Application Stack with New Relic and track response times, Apdex and even your server\u2019s resource usage with this widgets.",signup_url:"https://rpm.newrelic.com/signup?product%5Blevel%5D=Standard&product%5Bcommitment%5D=Monthly&subscription%5Bnumber_of_hosts%5D=1&partnership_id=135&promo_code=DUCK14PRO",
api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),create_tip:'We get data from New Relic via the Performance Data API. This feature is only available for certain plans. Please <a href="http://newrelic.com/application-monitoring/pricing">check here</a> if your plan has access to Performance Data API or contact your New Relic representative.',params:{auth_user:{template:"input_text",template_data:{placeholder:"API key",tooltip:'Once logged in, your API Key is in Account Settings > Integrations > <a href="https://rpm.newrelic.com/integrations?page=data_sharing" target="_blank">Data Sharing</a>'}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{newrelic_apdex_counter:a,newrelic_response_time_counter:d,newrelic_response_time_boxes:l,newrelic_throughput_counter:q,newrelic_errors_counter:v,newrelic_busy_rate_gauge:w,newrelic_resource_rate_gauges:k,newrelic_custom_metric_counter:e,newrelic_custom_metric_absolute_graph:u,newrelic_custom_metric_absolute_area_graph:m,newrelic_cpu_usage_stacked_graph4:t,newrelic_memory_usage_stacked_graph:x,newrelic_system_load_absolute_graph:y,newrelic_io_utilization_stacked_graph:B,
newrelic_io_rate_absolute_graph:F,newrelic_network_rate_stacked_graph:f,newrelic_processes_leaderboard:b,newrelic_web_transactions_response_time_stacked_graph:h});_.extend(Ducksboard.Backbone.service_kinds,{newrelic:g})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("basecamp_account_id");d&&(d=_.sprintf("https://basecamp.com/%s/",d),this.add_context_action(a,{label:"Go to Basecamp account",url:d}))}}),k=D.Backbone.slot_kinds.Timeline.extend({reverse:!1,_prepare_initial_params:function(a){a=D.Backbone.account.get("timezone").replace(" ","_");return{label:this.get("label"),timezone:a,kind:"since",seconds:moment().diff(moment().startOf("day"),
"seconds")}}}),h={view_cls:e,data_source_params:{basecamp_account_id:{template:"select",template_data:{load_service_params:!0,klass:"load:project"}},project_id:{template:"select",template_data:{load_service_params:!0}}}},f={view_cls:e,data_source_params:{basecamp_account_id:{template:"select",template_data:{load_service_params:!0,klass:"load:project"}},project_id:{template:"select",template_data:{load_service_params:!0,klass:"load:todolist"}},todolist_id:{template:"select_multiple",template_data:{placeholder:"All to-do lists",
load_service_params:!0}}}},b=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"Basecamp to-dos",sound:!1},trend_defs:{subtitle:"to-dos",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),g=D.Backbone.wt.PinsWidget.extend(f).extend({defaults:{title:"Basecamp to-dos",sound:!1},subtitles:["remaining","completed"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 121, 10, 0.65)"]}),a=D.Backbone.wt.TimelineWidget.extend(f).extend({defaults:{title:"Basecamp project to-dos",sound:!1}}),f=D.Backbone.wt.TrendTimelineWidget.extend(f).extend({defaults:{title:"Basecamp project to-dos",
sound:!1},trend_defs:{subtitle:"to-dos",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),d=D.Backbone.wt.TimelineWidget.extend(h).extend({defaults:{title:"Basecamp project discussions",sound:!1}}),h=D.Backbone.wt.TimelineWidget.extend(h).extend({defaults:{title:"Basecamp project events",sound:!1},kind_cls:k}),e=D.Backbone.wt.TimelineWidget.extend({view_cls:e,kind_cls:k,defaults:{title:"Basecamp calendar events",sound:!1},data_source_params:{basecamp_account_id:{template:"select",template_data:{load_service_params:!0,
klass:"load:calendar"}},calendar_id:{template:"select",template_data:{load_service_params:!0}}}}),k=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{basecamp_project_todolist_todos_counter:b,basecamp_project_todolist_todos_pins:g,basecamp_project_todolist_todos_timeline:a,basecamp_project_todolist_todos_counter_timeline:f,basecamp_project_discussions_timeline:d,basecamp_project_calendar_events_timeline:h,basecamp_calendar_events_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,
{basecamp_new:k})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Chartbeat account",url:"http://www.chartbeat.com/"})}}),data_source_params:{host:{template:"input_text",template_data:{placeholder:"host name",tooltip:'The hostname you used when configuring the Chartbeat snippet on your site, like "example.com" or "store.company.com".'}}}},k=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Chartbeat page load time",sound:!1},
trend_defs:{subtitle:"seconds to load",color:"rgba(81, 0, 14, 0.65)",timespan:"daily"}}),h=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Chartbeat visitors",sound:!1},trend_defs:{subtitle:"visits",color:"rgba(209, 59, 8, 0.65)",timespan:"daily"}}),f=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"Chartbeat visitors by activity",sound:!1},subtitles:["total","read","write","idle"],colors:["rgba(209, 59, 8, 0.65)","rgba(59, 121, 10, 0.65)","rgba(251, 136, 11, 0.65)","rgba(122, 123, 118, 0.65)"]}),
b=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"Chartbeat active visitors",sound:!1},subtitles:["visitors active"],colors:["rgba(203, 25, 28, 0.65)"]}),g=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"Chartbeat new visitors",sound:!1},subtitles:["new visitors"],colors:["rgba(59, 121, 10, 0.65)"]}),a=_.extend({},e,{defaults:{title:"Chartbeat alerts",sound:!1}}),a=D.Backbone.wt.TimelineWidget.extend(a),e=_.extend({},e,{defaults:{title:"Chartbeat visits",sound:!1}}),e=D.Backbone.wt.TimelineWidget.extend(e),
d=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_user:{template:"input_text",template_data:{placeholder:"API key"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{chartbeat_domload_counter:k,chartbeat_visitors_counter:h,chartbeat_visitors_boxes:f,
chartbeat_active_vs_all_visitors_gauge:b,chartbeat_new_vs_all_visitors_gauge:g,chartbeat_alerts_timeline:a,chartbeat_visits_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{chartbeat:d})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=_.sprintf("http://www.gosquared.com/cp/signin.php");this.add_context_action(a,{label:"Go to GoSquared account",url:d})}}),data_source_params:{site_token:{template:"select",template_data:{load_service_params:!0}}}},k=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"GoSquared visitors",sound:!1},trend_defs:{subtitle:"visits",color:"rgba(77, 34, 89, 0.65)",
timespan:"daily"}}),h=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"GoSquared visitors by type",sound:!1},subtitles:["total","new","returning","active"],colors:["rgba(77, 34, 89, 0.65)","rgba(59, 121, 10, 0.65)","rgba(37, 177, 228, 0.65)","rgba(209, 59, 8, 0.65)"]}),f=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"GoSquared active visitors",sound:!1},subtitles:["visitors active"],colors:["rgba(209, 59, 8, 0.65)"]}),b=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"GoSquared new visitors",
sound:!1},subtitles:["new visitors"],colors:["rgba(59, 121, 10, 0.65)"]}),e=_.extend({},e,{defaults:{title:"GoSquared visits",sound:!1}}),e=D.Backbone.wt.TimelineWidget.extend(e),g=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Choose any name to give to this account, so you can find it later in the accounts list."}},auth_user:{template:"input_text",
template_data:{placeholder:"API key",tooltip:"You GoSquared account API Key"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{gosquared_visitors_counter:k,gosquared_visitors_boxes:h,gosquared_new_vs_all_visitors_gauge:b,gosquared_active_vs_all_visitors_gauge:f,gosquared_visits_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{gosquared:g})})();
(function(){var e={events:{"click .inner":"external_account"},external_account:function(a){this.add_context_action(a,{label:"Go to Bitly",url:"https://bitly.com"})}},k={view_cls:D.Backbone.WidgetView.extend(_.clone(e)),data_source_params:{link:{template:"input_text",template_data:{placeholder:"Bitly link"}}}},h=_.extend(_.clone(k),{defaults:{title:"Bitly link stats",sound:!1},subtitles:["clicks","shares"],colors:["rgba(107, 175, 240, 0.65)","rgba(238, 97, 35, 0.65)"]}),f=D.Backbone.wt.PinsWidget.extend(h),
e=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(h).extend({view_cls:D.Backbone.wt.MultilineChartView.extend(_.clone(e)),trend_defs:{timespan:"daily"}}),h=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"Bitly link clicks",sound:!1},trend_defs:{subtitle:"clicks",color:"rgba(107, 175, 240, 0.65)",timespan:"daily"}}),b=D.Backbone.wt.TrendWidget.extend(k).extend({defaults:{title:"Bitly link encoders",sound:!1},trend_defs:{subtitle:"encoders",color:"rgba(107, 175, 240, 0.65)",timespan:"daily"}}),
g=D.Backbone.wt.TrendLeaderboardWidget.extend(k).extend({defaults:{title:"Bitly link locations",sound:!1},leaderboard_defs:{total_subtitles:2,subtitle1:"country",color1:"rgba(107, 175, 240, 0.65)",subtitle2:"clicks",color2:"rgba(238, 97, 35, 0.65)"}}),a=D.Backbone.wt.TrendLeaderboardWidget.extend(k).extend({defaults:{title:"Bitly link referrers",sound:!1},leaderboard_defs:{total_subtitles:2,subtitle1:"referrer",color1:"rgba(107, 175, 240, 0.65)",subtitle2:"clicks",color2:"rgba(238, 97, 35, 0.65)"}}),
k=D.Backbone.wt.TrendLeaderboardWidget.extend(k).extend({defaults:{title:"Bitly link referring domains",sound:!1},leaderboard_defs:{total_subtitles:2,subtitle1:"referring domain",color1:"rgba(107, 175, 240, 0.65)",subtitle2:"clicks",color2:"rgba(238, 97, 35, 0.65)"}}),d=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{bitly_link_stats_boxes:f,bitly_link_stats_graph:e,bitly_link_clicks_counter:h,bitly_link_encoders_counter:b,bitly_link_locations_trend_leaderboard:g,bitly_link_referrers_trend_leaderboard:a,
bitly_link_referring_domains_trend_leaderboard:k});_.extend(Ducksboard.Backbone.service_kinds,{bitly:d})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(b){var e=this.model.data_source.get("service_id");if(e=D.Backbone.services.get(e))e=_.sprintf("http://%s.lighthouseapp.com/",e.get("auth_domain")),this.add_context_action(b,{label:"Go to Lighthouse account",url:e})}}),k=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Lighthouse ticket bin count",sound:!1},trend_defs:{subtitle:"ticket count",color:"rgba(59, 136, 177, 0.65)",
timespan:"daily"},data_source_params:{project_id:{template:"select",template_data:{load_service_params:!0,klass:"load:ticket_bin"}},ticket_bin_id:{template:"select",template_data:{load_service_params:!0}}}}),h=D.Backbone.wt.GaugeWidget.extend({view_cls:e,defaults:{title:"Lighthouse milestone completion",sound:!1},data_source_params:{project_id:{template:"select",template_data:{load_service_params:!0,klass:"load:milestone"}},milestone_id:{template:"select",template_data:{load_service_params:!0}}},
subtitles:["tickets completed"],colors:["rgba(59, 136, 177, 0.65)"]}),e=D.Backbone.wt.BarsWidget.extend({view_cls:e,defaults:{title:"Lighthouse tickets by state",sound:!1},data_source_params:{project_id:{template:"select",template_data:{load_service_params:!0}}},subtitles:["open","resolved","hold","invalid"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)","rgba(59, 136, 177, 0.65)"]}),f=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain",
"subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name"}},auth_domain:{template:"input_text",template_data:{placeholder:"Lighthouse subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"API token"}}}});_.extend(Ducksboard.Backbone.widget_kinds,{lighthouse_ticket_bins_counter:k,lighthouse_milestones_gauge:h,lighthouse_tickets_bars:e});_.extend(Ducksboard.Backbone.service_kinds,{lighthouse:f})})();
(function(){var e={defaults:{title:"Static image",sound:!1},data_source_params:_.extend({image_url:{template:"input_text",template_data:{placeholder:"Image URL"}},caption:{template:"input_textarea",template_data:{placeholder:"Image caption (optional)"}},refresh_mode:{template:"select",template_data:{options:[{value:"0",display_name:"Don't refresh the image"},{value:"1",display_name:"Refresh the image every minute"},{value:"5",display_name:"Refresh the image every 5 minutes"}]}}})},k={defaults:{title:"Static iframe",
sound:!1},data_source_params:_.extend({iframe_url:{template:"input_text",template_data:{placeholder:"iFrame URL",tooltip:"Please note that most browsers will refuse to display a HTTP iframe on a secure HTTPS page."}},refresh_mode:{template:"select",template_data:{options:[{value:"0",display_name:"Don't refresh the iframe"},{value:"1",display_name:"Refresh the iframe every minute"},{value:"5",display_name:"Refresh the iframe every 5 minutes"}]}}})},h=D.bb.wt.ImageWidget.extend(e).extend({kind_cls:D.Backbone.slot_kinds.StaticImage}),
e=D.bb.wt.FullImageWidget.extend(e).extend({kind_cls:D.Backbone.slot_kinds.StaticImageFull}),f=D.bb.wt.TextWidget.extend({defaults:{title:"Static text",sound:!1},data_source_params:{content:{template:"input_textarea",template_data:{placeholder:"Text content"}}}}),k=D.bb.wt.IframeWidget.extend(k),b=D.Backbone.Service.extend({kind:"static_image",kind_name:"Image",user_managed:!1}),g=D.Backbone.Service.extend({kind:"static_text",kind_name:"Text",user_managed:!1}),a=D.Backbone.Service.extend({kind:"static_iframe",
kind_name:"Iframe",user_managed:!1});_.extend(Ducksboard.Backbone.widget_kinds,{static_image:h,static_image_fullsize:e,static_text:f,static_iframe:k});_.extend(Ducksboard.Backbone.service_kinds,{static_image:b,static_text:g,static_iframe:a})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("https://%s.basecamphq.com/",d.get("auth_domain")),this.add_context_action(a,{label:"Go to Basecamp account",url:d})}}),data_source_params:{project_id:{template:"select",template_data:{load_service_params:!0}}}},k=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Basecamp to-dos",
sound:!1},trend_defs:{subtitle:"to-dos",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),h=D.Backbone.wt.TrendWidget.extend(e).extend({defaults:{title:"Basecamp project hours",sound:!1},trend_defs:{subtitle:"hours",color:"rgba(59, 136, 177, 0.65)",timespan:"daily"}}),f=D.Backbone.wt.PinsWidget.extend(e).extend({defaults:{title:"Basecamp to-dos",sound:!1},subtitles:["pending","finished"],colors:["rgba(59, 136, 177, 0.65)","rgba(59, 121, 10, 0.65)"]}),b=D.Backbone.wt.BoxesWidget.extend(e).extend({defaults:{title:"Basecamp project milestones",
sound:!1},subtitles:["late","completed","upcoming"],colors:["rgba(203, 25, 28, 0.65)","rgba(59, 121, 10, 0.65)","rgba(59, 136, 177, 0.65)"]}),g=D.Backbone.wt.BarsWidget.extend(e).extend({defaults:{title:"Basecamp project milestones",sound:!1},subtitles:["late","completed","upcoming"],colors:["rgba(203, 25, 28, 0.65)","rgba(59, 121, 10, 0.65)","rgba(59, 136, 177, 0.65)"]}),a=D.Backbone.wt.TimelineWidget.extend(e).extend({defaults:{title:"Basecamp project posts",sound:!1}}),e=D.Backbone.wt.TimelineWidget.extend(e).extend({defaults:{title:"Basecamp project activity",
sound:!1}}),d=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",template_data:{placeholder:"Account name",tooltip:"Provide a name that you'll easily relate to the Basecamp project you'll be tracking. It can be the project's name itself, or whatever you prefer. It's up to you!"}},auth_domain:{template:"input_text",template_data:{placeholder:"Basecamp subdomain",
tooltip:'Basecamp subdomain is the name of your Basecamp account as it appears in the URL. For example, if you log on to http://subdomain.basecamphq.com, please enter "subdomain" here.'}},auth_user:{template:"input_text",template_data:{placeholder:"API token",tooltip:"To get you Basecamp API token log in to your Basecamp account and navigate to My info > Authentication tokens > Basecamp API token. If you ever regenerate your API token, you will need to relink your basecamp account with Ducksboard."}}}});
_.extend(Ducksboard.Backbone.widget_kinds,{basecamp_project_todos_counter:k,basecamp_project_todos_by_state_pins:f,basecamp_project_milestones_boxes:b,basecamp_project_milestones_bars:g,basecamp_project_hours_counter:h,basecamp_project_posts_timeline:a,basecamp_project_activity_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{basecamp:d})})();
(function(){var e={view_cls:D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(b){var e=this.model.data_source.get("service_id");if(e=D.Backbone.services.get(e))e=_.sprintf("https://%s.wufoo.com/admin/",e.get("auth_domain")),this.add_context_action(b,{label:"Go to Wufoo account",url:e})}}),data_source_params:{form_identifier:{template:"select",template_data:{load_service_params:!0}}}},k=D.Backbone.wt.PinsWidget.extend(e).extend({defaults:{title:"Wufoo entries",
sound:!1},subtitles:["started","completed"],colors:["#dcc167","#cb3517"]}),h=D.Backbone.wt.GaugeWidget.extend(e).extend({defaults:{title:"Wufoo Form Completion Rate",sound:!1},subtitles:["completion rate"],colors:["#cb3517"]}),e=D.Backbone.wt.TimelineWidget.extend(e).extend({defaults:{title:"Wufoo Form Entries",sound:!1}}),f=D.Backbone.Service.extend({api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"],["auth_user","api_key"]]),params:{service_username:{template:"input_text",
template_data:{placeholder:"Account name"}},auth_domain:{template:"input_text",template_data:{placeholder:"Wufoo subdomain"}},auth_user:{template:"input_text",template_data:{placeholder:"API key",tooltip:'You can find your API Key for your Wufoo account following <a href="http://help.wufoo.com/articles/en_US/SurveyMonkeyArticleType/Wufoo-REST-API-V3#Findingthekey" target="_blank">these instructions</a>.'}}}});_.extend(Ducksboard.Backbone.widget_kinds,{wufoo_forms_pins:k,wufoo_form_completion_rate_gauge:h,
wufoo_form_entries_timeline:e});_.extend(Ducksboard.Backbone.service_kinds,{wufoo:f})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=_.sprintf("https://manage.stripe.com/");this.add_context_action(a,{label:"Go to Stripe account",url:d})}}),k=D.Backbone.wt.MultilineChartView.extend(e),h=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_number(a,2,6)+"%"}}),f=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly","quarterly","yearly"]}),b=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly",
"monthly","quarterly","yearly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new h({model:this})}}),g=D.colors.red,a=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe customers",sound:!1},trend_defs:{subtitle:"customers",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),d=D.Backbone.wt.MultiareaChartWidget.extend({view_cls:k,defaults:{title:"Customers growth",sound:!1},subtitles:["customers"],colors:["rgba(0,140,221, 0.65)"],
trend_defs:{timespan:"monthly"}}),l=D.Backbone.wt.BoxesWidget.extend({view_cls:e,defaults:{title:"Stripe subscriptions by status",sound:!1},subtitles:["trialing","active","past_due","unpaid"],colors:[D.colors.orange,"rgba(0,140,221, 0.65)",D.colors.green,g]}),q=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe active subscriptions",sound:!1},trend_defs:{subtitle:"active subscriptions",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),v=D.Backbone.wt.MultiareaChartWidget.extend({view_cls:k,
defaults:{title:"Subscriptions growth",sound:!1},subtitles:["active subscriptions"],colors:["rgba(0,140,221, 0.65)"],trend_defs:{timespan:"monthly"}}),g=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend({view_cls:k,defaults:{title:"Customers & subscriptions",sound:!1},subtitles:["customers","subscriptions"],colors:[g,"rgba(0,140,221, 0.65)"],trend_defs:{timespan:"monthly"}}),b=D.Backbone.wt.TrendWidget.extend({kind_cls:b,defaults:{title:"Churn rate",sound:!1},trend_defs:{subtitle:"churn rate",color:"rgba(0,140,221, 0.65)",
timespan:"monthly"}}),f=D.Backbone.wt.TrendWidget.extend({view_cls:e,kind_cls:f,timezone:"Etc/UTC",defaults:{title:"Stripe Revenue",sound:!1},trend_defs:{subtitle:"revenue",color:"rgba(0,140,221, 0.65)",timespan:"yearly"}}),w=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe charges",sound:!1},trend_defs:{subtitle:"your currency",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),m=D.Backbone.wt.MultiareaChartWidget.extend({view_cls:k,defaults:{title:"Charges growth",sound:!1},
subtitles:["charges"],colors:["rgba(0,140,221, 0.65)"],trend_defs:{timespan:"monthly"}}),t=D.Backbone.wt.TimelineWidget.extend({view_cls:e,defaults:{title:"Stripe account events",sound:!1}}),u=function(a){for(var d=["rgba(0,140,221, 0.65)",D.colors.red,D.colors.green,D.colors.purple,D.colors.orange,D.colors.black],b="first second third fourth fifth sixth".split(" "),e={},f={template:"select",template_data:{load_service_params:!0}},g=[],h=1;h<=a;h++)g.push("Plan id "+h),e["plan_id"+h]=$.extend(!0,
{},f,{template_data:{placeholder:_.sprintf("The %s plan you are interested in",b[h-1])}});return{defaults:{title:"Subscriptions by plan",sound:!1},view_cls:k,data_source_params:e,colors:d.slice(0,a),subtitles:g,trend_defs:{timespan:"monthly"}}},x=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(1)),y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(2)),B=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(3)),F=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(4)),C=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(5)),
K=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(6)),z=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe MRR",sound:!1},trend_defs:{subtitle:"your currency",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),J=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe ARPU",sound:!1},trend_defs:{subtitle:"your currency",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),G=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe ARPNU",sound:!1},trend_defs:{subtitle:"your currency",
color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),A=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe ARR",sound:!1},trend_defs:{subtitle:"your currency",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),I=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe LTV",sound:!1},trend_defs:{subtitle:"your currency",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),O=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe failed charges",sound:!1},trend_defs:{subtitle:"charges",
color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),e=D.Backbone.wt.TrendWidget.extend({view_cls:e,defaults:{title:"Stripe refunds",sound:!1},trend_defs:{subtitle:"refunds",color:"rgba(0,140,221, 0.65)",timespan:"monthly"}}),P=D.Backbone.wt.AbsoluteMultilineChartWidget.extend({view_cls:k,colors:["rgba(0,140,221, 0.65)",D.colors.red],subtitles:["ARPU","ARPNU"],defaults:{title:"Stripe ARPU vs ARPNU",sound:!1},trend_defs:{timespan:"monthly"}}),E=function(a){return{defaults:{title:"Stripe "+a,sound:!1}}},
Y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(1)).extend(E("MRR")),N=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(2)).extend(E("MRR")),n=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(3)).extend(E("MRR")),M=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(4)).extend(E("MRR")),U=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(5)).extend(E("MRR")),W=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(6)).extend(E("MRR")),H=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(1)).extend(E("ARR")),
S=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(2)).extend(E("ARR")),R=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(3)).extend(E("ARR")),X=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(4)).extend(E("ARR")),ea=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(5)).extend(E("ARR")),fa=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(6)).extend(E("ARR")),ja=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(1)).extend(E("LTV")),ga=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(2)).extend(E("LTV")),
V=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(3)).extend(E("LTV")),ca=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(4)).extend(E("LTV")),pa=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(5)).extend(E("LTV")),sa=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(6)).extend(E("LTV")),la=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(1)).extend(E("Churn rate")),qa=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(2)).extend(E("Churn rate")),ia=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(3)).extend(E("Churn rate")),
Z=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(4)).extend(E("Churn rate")),ha=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(5)).extend(E("Churn rate")),u=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u(6)).extend(E("Churn rate")),E=D.Backbone.Service.extend({description:"Use these widgets to keep tabs on your Stripe-managed billing. Stay up to date in your customers growth rate.",signup_url:"https://manage.stripe.com/register",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_user",
"api_key"]])});_.extend(Ducksboard.Backbone.widget_kinds,{stripe_customers_counter:a,stripe_customers_area_graph:d,stripe_subscriptions_boxes:l,stripe_active_subscriptions_counter:q,stripe_active_subscriptions_area_graph:v,stripe_customers_subscriptions_absolute_area_graph:g,stripe_charges_counter:w,stripe_churn_counter:b,stripe_revenue_counter:f,stripe_charges_area_graph:m,stripe_events_timeline:t,stripe_plan_subscriptions_absolute_graph:x,stripe_plan_subscriptions_absolute_graph2:y,stripe_plan_subscriptions_absolute_graph3:B,
stripe_plan_subscriptions_absolute_graph4:F,stripe_plan_subscriptions_absolute_graph5:C,stripe_plan_subscriptions_absolute_graph6:K,stripe_mrr_counter:z,stripe_arpu_counter:J,stripe_arpnu_counter:G,stripe_arr_counter:A,stripe_ltv_counter:I,stripe_failed_charges_counter:O,stripe_refunds_counter:e,stripe_arpu_vs_arpnu_graph:P,stripe_mrr_per_plan_graph:Y,stripe_mrr_per_plan_graph2:N,stripe_mrr_per_plan_graph3:n,stripe_mrr_per_plan_graph4:M,stripe_mrr_per_plan_graph5:U,stripe_mrr_per_plan_graph6:W,stripe_arr_per_plan_graph:H,
stripe_arr_per_plan_graph2:S,stripe_arr_per_plan_graph3:R,stripe_arr_per_plan_graph4:X,stripe_arr_per_plan_graph5:ea,stripe_arr_per_plan_graph6:fa,stripe_ltv_per_plan_graph:ja,stripe_ltv_per_plan_graph2:ga,stripe_ltv_per_plan_graph3:V,stripe_ltv_per_plan_graph4:ca,stripe_ltv_per_plan_graph5:pa,stripe_ltv_per_plan_graph6:sa,stripe_churn_per_plan_graph:la,stripe_churn_per_plan_graph2:qa,stripe_churn_per_plan_graph3:ia,stripe_churn_per_plan_graph4:Z,stripe_churn_per_plan_graph5:ha,stripe_churn_per_plan_graph6:u});
_.extend(Ducksboard.Backbone.service_kinds,{stripe:E})})();
(function(){var e=D.Backbone.WidgetView.extend({events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");D.Backbone.services.get(d)&&this.add_context_action(a,{label:"Go to Twilio account",url:"https://www.twilio.com/user/account"})}}),k=D.bb.wt.MultilineChartView.extend(e),h={timezone:"Etc/UTC",view_cls:e,data_source_params:{subaccount:{template:"select",template_data:{load_service_params:!0}}}},f=D.bb.slot_kinds.CounterBar.extend({initialize:function(){D.Backbone.slot_kinds.CounterBar.prototype.initialize.apply(this,
arguments);this.view=new b({model:this})},new_slot_value:function(){var a=this.collection.map(function(a){return a.current_value||0}),d=_.reduce(a,function(a,d){return a+d},0);this.collection.each(function(a){a.view.update_bar(d)})}}),b=D.bb.slot_views.CounterBarView.extend({template:"slot_twilio_progress",update_counter:function(a){var d=this.$(".preview .value"),b=this.$(".preview .subtitle"),e=this.format_value(a);a=Raphael.constants.UPDATE_ANIMATION_DURATION/2;d.stop(!0,!0);d.fadeOut(a,function(){$(this).text(e)}).fadeIn(a);
b.stop(!0,!0);b.fadeOut(a).fadeIn(a)},update_bar_value:function(a,d){var b=this.$(".bar .label strong"),e=this.$(".bar .label span"),f=this.format_value(a),g=this.format_value(d),h=Raphael.constants.UPDATE_ANIMATION_DURATION/2;b.stop(!0,!0);b.fadeOut(h,function(){$(this).text(f)}).fadeIn(h);e.stop(!0,!0);e.fadeOut(h,function(){$(this).text(g)}).fadeIn(h)},update_bar:function(a){if(_.isNumber(this.model.current_value)){a=0===a?0:100*this.model.current_value/a;this.update_counter(a);this.update_bar_value(this.model.current_value,
a);var d=this.$(".bar"),b=this.format_value(a);$(".value",d).width(b+"%");30>a?d.removeClass("high_value").addClass("low_value"):70<a?d.removeClass("low_value").addClass("high_value"):d.removeClass("low_value high_value")}}}),g=D.bb.slot_kinds.CounterTrend.extend({allowed_timespans:["yearly","monthly","weekly"]}),a=D.bb.slot_kinds.AbsoluteLineChart.extend({allowed_timespans:["yearly","monthly","weekly"]}),d=D.bb.slot_kinds.AbsoluteAreaChart.extend({allowed_timespans:["yearly","monthly","weekly"]}),
l=D.bb.slot_kinds.StackedChart.extend({allowed_timespans:["yearly","monthly","weekly"]}),q=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a,2)}}),e=g.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new q({model:this})}}),e=D.Backbone.wt.TrendWidget.extend(h).extend({kind_cls:e,defaults:{title:"Twilio average call duration this month",sound:!1},trend_defs:{subtitle:"average call duration",
color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),v=_.extend({},h,{defaults:{title:"Twilio monthly calls",sound:!1},subtitles:["total calls"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"total calls",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),w=D.Backbone.wt.TrendWidget.extend(v).extend({kind_cls:g}),v=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(v).extend({view_cls:k,kind_cls:a}),m=_.extend({},h,{defaults:{title:"Twilio monthly received calls",sound:!1},subtitles:["received calls"],
colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"received calls",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),t=D.Backbone.wt.TrendWidget.extend(m).extend({kind_cls:g}),m=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(m).extend({view_cls:k,kind_cls:a}),u=_.extend({},h,{defaults:{title:"Twilio monthly sent calls",sound:!1},subtitles:["sent calls"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"sent calls",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),x=D.Backbone.wt.TrendWidget.extend(u).extend({kind_cls:g}),
u=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(u).extend({view_cls:k,kind_cls:a}),y=_.extend({},h,{defaults:{title:"Twilio-Client monthly calls",sound:!1},subtitles:["client calls"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"client calls",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),B=D.Backbone.wt.TrendWidget.extend(y).extend({kind_cls:g}),y=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(y).extend({view_cls:k,kind_cls:a}),F=_.extend({},h,{defaults:{title:"Twilio monthly SMS",
sound:!1},subtitles:["total SMS"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"total SMS",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),C=D.Backbone.wt.TrendWidget.extend(F).extend({kind_cls:g}),F=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(F).extend({view_cls:k,kind_cls:a}),K=_.extend({},h,{defaults:{title:"Twilio monthly received SMS",sound:!1},subtitles:["received SMS"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"received SMS",color:"rgba(203, 25, 28, 0.65)",
timespan:"yearly"}}),z=D.Backbone.wt.TrendWidget.extend(K).extend({kind_cls:g}),K=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(K).extend({view_cls:k,kind_cls:a}),J=_.extend({},h,{defaults:{title:"Totals",sound:!1},subtitles:["sms-in","sms-out","calls-in","calls-out","client"],colors:["rgba(251, 136, 11, 0.65)","rgba(122, 123, 118, 0.65)","rgba(59, 121, 10, 0.65)","rgba(203, 25, 28, 0.65)","rgba(37, 177, 228, 0.65)"],trend_defs:{timespan:"yearly"}}),J=D.bb.wt.AbsoluteMultilineChartWidget.extend(J).extend({view_cls:k,
kind_cls:a}),G=_.extend({},h,{defaults:{title:"Twilio monthly sent SMS",sound:!1},subtitles:["sent SMS"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"sent SMS",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),A=D.Backbone.wt.TrendWidget.extend(G).extend({kind_cls:g}),G=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(G).extend({view_cls:k,kind_cls:a}),I=_.extend({},h,{defaults:{title:"Twilio monthly calls amount",sound:!1},subtitles:["calls amount"],colors:["rgba(203, 25, 28, 0.65)"],
trend_defs:{subtitle:"calls amount",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),O=D.Backbone.wt.TrendWidget.extend(I).extend({kind_cls:g}),I=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(I).extend({view_cls:k,kind_cls:a}),P=_.extend({},h,{defaults:{title:"Twilio monthly SMS amount",sound:!1},subtitles:["SMS amount"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"SMS amount",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),E=D.Backbone.wt.TrendWidget.extend(P).extend({kind_cls:g}),
P=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(P).extend({view_cls:k,kind_cls:a}),Y=_.extend({},h,{defaults:{title:"Twilio monthly total amount",sound:!1},subtitles:["total amount"],colors:["rgba(203, 25, 28, 0.65)"],trend_defs:{subtitle:"total amount",color:"rgba(203, 25, 28, 0.65)",timespan:"yearly"}}),g=D.Backbone.wt.TrendWidget.extend(Y).extend({kind_cls:g}),a=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(Y).extend({view_cls:k,kind_cls:a}),N=_.extend({},h,{defaults:{title:"Twilio monthly amounts",
sound:!1},subtitles:["calls","sms","total"],colors:["rgba(9, 9, 9, 0.65)","rgba(122, 123, 118, 0.65)","rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"yearly"}}),Y=D.Backbone.wt.BoxesWidget.extend(N),d=D.Backbone.wt.AbsoluteMultiareaChartWidget.extend(N).extend({view_cls:k,kind_cls:d}),N=_.extend({},h,{defaults:{title:"Twilio monthly calls by status",sound:!1},subtitles:["unanswered","busy","completed","failed"],colors:["rgba(251, 136, 11, 0.65)","rgba(122, 123, 118, 0.65)","rgba(59, 121, 10, 0.65)",
"rgba(203, 25, 28, 0.65)"],trend_defs:{timespan:"yearly"}}),k=D.bb.wt.StackedChartWidget.extend(N).extend({view_cls:k,kind_cls:l,defaults:{title:"Calls by status",sound:!1},subtitles:["no-answer","busy","completed","failed"]}),l=D.Backbone.wt.BarsWidget.extend(N).extend({subtitles:["completed","busy","unanswered","failed"],colors:["rgba(59, 121, 10, 0.65)","rgba(122, 123, 118, 0.65)","rgba(251, 136, 11, 0.65)","rgba(203, 25, 28, 0.65)"]}),N=D.bb.wt.BarsWidget.extend(h).extend({kind_cls:f,css_classes:function(){return _.sprintf("progress-%s",
this.slots.length)},defaults:{title:"Sent vs received calls",sound:!1},subtitles:["sent calls","received calls"],colors:["rgba(9, 9, 9, 0.65)","rgba(122, 123, 118, 0.65)"]}),f=D.bb.wt.BarsWidget.extend(h).extend({kind_cls:f,css_classes:function(){return _.sprintf("progress-%s",this.slots.length)},defaults:{title:"Sent vs received SMS",sound:!1},subtitles:["sent SMS","received SMS"],colors:["rgba(9, 9, 9, 0.65)","rgba(122, 123, 118, 0.65)"]}),n=_.extend({},h,{timezone:void 0,data_source_params:{subaccount:{template:"select",
template_data:{load_service_params:!0,klass:"load:queue"}},queue:{template:"select",template_data:{load_service_params:!0}}}}),h=D.bb.wt.TrendWidget.extend(n).extend({defaults:{title:"Twilio queue size",sound:!1},trend_defs:{subtitle:"queued callers",color:"rgba(203, 25, 28, 0.65)"}}),M=D.Backbone.slot_kinds.CounterTrend.extend({initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new q({model:this})}}),n=D.bb.wt.TrendWidget.extend(n).extend({kind_cls:M,
defaults:{title:"Twilio queue average wait time",sound:!1},trend_defs:{subtitle:"average wait time",color:"rgba(203, 25, 28, 0.65)"},allowed_timespans:["daily","weekly","monthly"]}),M=D.Backbone.Service.extend({});_.extend(Ducksboard.Backbone.widget_kinds,{twilio_average_call_duration_counter:e,twilio_total_calls_counter:w,twilio_total_calls_graph:v,twilio_inbound_calls_counter:t,twilio_inbound_calls_graph:m,twilio_outbound_calls_counter:x,twilio_outbound_calls_graph:u,twilio_client_calls_counter:B,
twilio_client_calls_graph:y,twilio_total_sms_counter:C,twilio_total_sms_graph:F,twilio_inbound_sms_counter:z,twilio_inbound_sms_graph:K,twilio_outbound_sms_counter:A,twilio_outbound_sms_graph:G,twilio_calls_by_status_stacked:k,twilio_calls_by_status_bars:l,twilio_usage_categories_graph:J,twilio_calls_price_counter:O,twilio_calls_price_graph:I,twilio_sms_price_counter:E,twilio_sms_price_graph:P,twilio_total_price_counter:g,twilio_total_price_graph:a,twilio_prices_area:d,twilio_prices_boxes:Y,twilio_sent_received_calls_progress:N,
twilio_sent_received_sms_progress:f,twilio_queue_size_counter:h,twilio_queue_average_wait_time_counter:n});_.extend(Ducksboard.Backbone.service_kinds,{twilio:M})})();
(function(){var e={events:{"click .inner":"external_account"},external_account:function(a){var d=this.model.data_source.get("service_id");if(d=D.Backbone.services.get(d))d=_.sprintf("https://%s.desk.com/",d.get("auth_domain")),this.add_context_action(a,{label:"Go to Desk account",url:d})}},k=D.Backbone.WidgetView.extend(_.clone(e)),h=D.Backbone.wt.MultilineChartView.extend(_.clone(e)),f={view_cls:k,data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}}}},b=D.colors.purple,
g=D.colors.black,e=D.Backbone.wt.BoxesWidget.extend(f).extend({defaults:{title:"Desk cases by status",sound:!1},subtitles:["new","open","pending"],colors:[b,D.colors.yellow,D.colors.darkorange]}),a=D.Backbone.wt.BarsWidget.extend(f).extend({defaults:{title:"Desk cases by status",sound:!1},subtitles:["new","open","pending"],colors:[b,b,b]}),d=D.Backbone.wt.BarsWidget.extend(f).extend({defaults:{title:"Desk cases by priority",sound:!1},subtitles:["low","normal","high","urgent"],colors:[b,b,b,b]}),l=
_.extend({},f,{defaults:{title:"Desk unresolved cases",sound:!1},trend_defs:{subtitle:"unresolved cases",color:b,timespan:"daily"}}),l=D.Backbone.wt.TrendWidget.extend(l),q=D.Backbone.wt.TrendWidget.extend(f).extend({defaults:{title:"Desk urgent and unresolved cases",sound:!1},trend_defs:{subtitle:"urgent & unresolved",color:D.colors.red,timespan:"daily"}}),v=D.Backbone.wt.TrendWidget.extend({defaults:{title:"Desk unassigned cases",sound:!1},trend_defs:{subtitle:"unassigned cases",color:D.colors.yellow,
timespan:"daily"}}),w=D.Backbone.slot_views.CounterTrendView.extend({format_value:function(a){return D.u.format_time(a,1)}}),m=D.Backbone.slot_kinds.CounterTrend.extend({allowed_timespans:["weekly","monthly"],initialize:function(){D.Backbone.slot_kinds.CounterTrend.prototype.initialize.apply(this,arguments);this.view=new w({model:this})}}),t=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:m,defaults:{title:"Desk response time",sound:!1},trend_defs:{subtitle:"response time",color:b,timespan:"weekly"}}),
m=D.Backbone.wt.TrendWidget.extend(f).extend({kind_cls:m,defaults:{title:"Desk solution time",sound:!1},trend_defs:{subtitle:"solution time",color:b,timespan:"weekly"}}),u=D.Backbone.wt.TrendLeaderboardWidget.extend(f).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Desk top labels",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:b,subtitle2:"count",color2:g,subtitle3:"pct",color3:g}}),x=D.Backbone.wt.TrendLeaderboardWidget.extend(f).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,
defaults:{title:"Desk unresolved cases per agent",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:b,subtitle2:"total",color2:g,subtitle3:"pct",color3:g}}),g=D.Backbone.wt.TrendLeaderboardWidget.extend(f).extend({kind_cls:D.Backbone.slot_kinds.RoundedTrendLeaderboard,defaults:{title:"Desk solved cases per agent",sound:!1},leaderboard_defs:{total_subtitles:3,subtitle1:"",color1:b,subtitle2:"total",color2:g,subtitle3:"pct",color3:g}}),y=D.Backbone.wt.StackedChartWidget.extend(f).extend({view_cls:h,
defaults:{title:"Desk cases by priority",sound:!1},subtitles:["low","normal","high","urgent"],colors:[D.colors.blue,D.colors.yellow,D.colors.orange,D.colors.red],trend_defs:{timespan:"daily"}}),B=_.extend({},f,{view_cls:h,defaults:{title:"Desk cases by priority",sound:!1},subtitles:["low","normal","high","urgent"],colors:[D.colors.blue,D.colors.yellow,D.colors.orange,D.colors.red],trend_defs:{timespan:"daily"}}),B=D.bb.wt.MultilineChartWidget.extend(B),F=D.Backbone.wt.StackedChartWidget.extend(f).extend({view_cls:h,
defaults:{title:"Desk cases by status",sound:!1},subtitles:["new","open","pending"],colors:[b,D.colors.yellow,D.colors.darkorange],trend_defs:{timespan:"daily"}}),b=_.extend({},{view_cls:h,defaults:{title:"Desk created vs closed cases",sound:!1},subtitles:["created","closed"],colors:[b,D.colors.lightgreen],trend_defs:{timespan:"daily"}}),b=D.Backbone.wt.MultiareaChartWidget.extend(b),C=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(f).extend({view_cls:h,defaults:{title:"Desk unresolved cases by group",
sound:!1},subtitles:["group1","group2"],colors:[D.colors.purple,D.colors.lightgreen],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",template_data:{load_service_params:!0}}}}),K=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(f).extend({view_cls:h,defaults:{title:"Desk unresolved cases by group",sound:!1},subtitles:["group1","group2","group3"],colors:[D.colors.purple,D.colors.lightgreen,D.colors.yellow],
trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",template_data:{load_service_params:!0}},group_name3:{template:"select",template_data:{load_service_params:!0}}}}),z=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(f).extend({view_cls:h,defaults:{title:"Desk unresolved cases by group",sound:!1},subtitles:["group1","group2","group3","group4"],colors:[D.colors.purple,D.colors.lightgreen,D.colors.yellow,
D.colors.orange],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",template_data:{load_service_params:!0}},group_name3:{template:"select",template_data:{load_service_params:!0}},group_name4:{template:"select",template_data:{load_service_params:!0}}}}),J=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(f).extend({view_cls:h,defaults:{title:"Desk unresolved cases by group",sound:!1},subtitles:["group1",
"group2","group3","group4","group5"],colors:[D.colors.purple,D.colors.lightgreen,D.colors.yellow,D.colors.orange,D.colors.red],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",template_data:{load_service_params:!0}},group_name3:{template:"select",template_data:{load_service_params:!0}},group_name4:{template:"select",template_data:{load_service_params:!0}},group_name5:{template:"select",template_data:{load_service_params:!0}}}}),
h=D.Backbone.wt.AbsoluteMultilineChartWidget.extend(f).extend({view_cls:h,defaults:{title:"Desk unresolved cases by group",sound:!1},subtitles:"group1 group2 group3 group4 group5 group6".split(" "),colors:[D.colors.purple,D.colors.lightgreen,D.colors.yellow,D.colors.orange,D.colors.red,D.colors.blue],trend_defs:{timespan:"daily"},data_source_params:{group_name:{template:"select",template_data:{load_service_params:!0}},group_name2:{template:"select",template_data:{load_service_params:!0}},group_name3:{template:"select",
template_data:{load_service_params:!0}},group_name4:{template:"select",template_data:{load_service_params:!0}},group_name5:{template:"select",template_data:{load_service_params:!0}},group_name6:{template:"select",template_data:{load_service_params:!0}}}}),k=D.Backbone.wt.TimelineWidget.extend({view_cls:k,defaults:{title:"Desk interaction stream",sound:!1}}),f=D.Backbone.Service.extend({description:"Be there for your customers \u2014 anytime, anywhere. These widgets bring your Desk.com customer service KPIs to your dash.",
signup_url:"http://www.desk.com/",api_translation:D.Backbone.Service.prototype.api_translation.concat([["auth_domain","subdomain"]]),params:{auth_domain:{template:"input_text",template_data:{placeholder:"Your Desk domain (like company.desk.com)",tooltip:"Use the Desk domain, if your account is using a custom domain.<br>For instance enter company.desk.com instead of company.support.com, unless you're using SSL. In that case, enter your own domain."}}}});_.extend(Ducksboard.Backbone.widget_kinds,{desk_cases_by_status_boxes:e,
desk_cases_by_priority_bars:d,desk_cases_by_priority_stacked_graph:y,desk_cases_by_priority_graph:B,desk_cases_by_status_bars:a,desk_cases_by_status_stacked_graph:F,desk_unresolved_cases_counter:l,desk_unresolved_urgent_cases_counter:q,desk_unresolved_cases_by_group_absolute_graph2:C,desk_unresolved_cases_by_group_absolute_graph3:K,desk_unresolved_cases_by_group_absolute_graph4:z,desk_unresolved_cases_by_group_absolute_graph5:J,desk_unresolved_cases_by_group_absolute_graph6:h,desk_unassigned_cases_counter:v,
desk_average_response_time_counter:t,desk_average_solution_time_counter:m,desk_top_active_labels_leaderboard:u,desk_cases_created_closed_area_graph:b,desk_unresolved_cases_agent_leaderboard:x,desk_solved_cases_agent_leaderboard:g,desk_interaction_stream_timeline:k});_.extend(Ducksboard.Backbone.service_kinds,{desk:f})})();
(function(){var e=D.Backbone.Model.extend({idAttribute:"email",url:"/api/user",defaults:{email:void 0,first_name:void 0,last_name:void 0,position:void 0,company:void 0,address1:void 0,city:void 0,state:void 0,zip:void 0,country:void 0,timezone:void 0,plan_label:void 0,status:void 0,status_change_date:void 0,readonly:void 0,access_token:void 0,access_password:void 0,api_key:void 0,subscriber_account_code:void 0,recurly_plan_code:void 0,recurly_signature:void 0,has_trial_expired:void 0,has_trial_account:void 0,
has_recurly_account:void 0,can_subscribe:void 0,has_full_permissions:void 0,has_freemium_plan:void 0,date_joined:void 0,mixpanel_distinct_id:void 0,can_upload_background:void 0,has_tvmode:void 0,num_alerts:void 0,owners:void 0},initialize:function(){this.settings_view=new k({model:this});this.disabled_settings_view=new h({model:this});this.unpaid_settings_view=new f({model:this});this.trial_expired_view=new b({model:this});this.subscription_expired_view=new g({model:this});this.api_key_view=new a({model:this});
this.invoices=new D.Backbone.InvoiceList},get_billing:function(){var a={account:this};this.get("can_subscribe")?this.billing=new D.Backbone.SubscriptionParams({},a):this.get("has_recurly_account")&&(this.billing=new D.Backbone.BillingInfoParams({},a));return this.billing},available_plans:function(){return D.bb.plans.filter(function(a){return"whitelabel"!==a.get("subscriber_kind")&&!0===a.get("active")&&void 0!==a.get("monthly")&&void 0!==a.get("yearly")})},set_plan:function(a){if(a)return this.plan=
a;if(this.get("has_trial_account"))this.plan=[];else if(this.get("has_recurly_account")||this.get("can_subscribe"))this.plan=D.bb.recurly_plans.filter(_.bind(function(a){return a.get("code")===this.get("recurly_plan_code")},this));else return this.plan=D.bb.plans.get(this.get("plan_label"));if(!_.isEmpty(this.plan))return this.plan=this.plan[0];if("enterprise"===this.get("plan_label"))return this.plan=D.bb.recurly_plans.get("monthly_enterprise");if("professional"===this.get("plan_label"))return this.plan=
D.bb.recurly_plans.get("monthly_professional");if("standard"===this.get("plan_label"))return this.plan=D.bb.recurly_plans.get("standard");a=D.bb.recurly_plans.filter(function(a){return!0===a.get("active")&&"whitelabel"!==a.get("subscriber_kind")&&!_.startsWith(a.get("plan_label"),"starter_2014")&&"monthly"===a.get("payment_frequency")});_.isEmpty(a)?this.plan=D.bb.recurly_plans.get("monthly_enterprise_2013"):this.plan=_.min(a,function(a){return a.get("features").create_dashboard});return this.plan},
update:function(){return this.fetch({url:"/accounts/"})},is_expired:function(){return!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard()||!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard()||!0===D.bb.account.get("readonly")},should_be_activated:function(){return this.get("first_name")&&this.get("last_name")&&("trial"===this.get("status")||"developer"===this.get("plan_label"))&&3<=D.bb.dashboards.reduce(function(a,
b){return a+(b.widgets?b.widgets.size():0)},0)},available_widgets_count:function(a){var b=Infinity,e=Infinity,f=D.bb.dashboards.num_widgets(),g=D.bb.dashboards.num_custom_widgets();if(!a&&(this.get("has_full_permissions")||this.get("is_beta")))return{total:Infinity,custom:Infinity};if(!a&&this.is_expired())return{total:0,custom:0};a=a||D.bb.plans.get(this.get("plan_label"));a.get("features").create_widget&&(b=a.get("features").create_widget);a.get("features").create_custom_widget&&(e=a.get("features").create_custom_widget);
return{total:b-f,custom:e-g}},available_alerts_count:function(a){if(!a&&this.get("has_full_permissions"))return Infinity;if(this.get("is_beta"))return 0;a=a||D.bb.plans.get(this.get("plan_label"));if(this.get("has_alert_tag"))return Infinity;var b=Infinity;a.get("features").create_alert&&(b=a.get("features").create_alert);return b-D.bb.account.get("num_alerts")},has_premium_directory:function(a){if(!a&&this.get("has_full_permissions"))return!0;if(!a&&this.is_expired())return!1;a=a||D.bb.plans.get(this.get("plan_label"));
return"premium_directory"in a.get("features")},available_accounts_per_service:function(a,b){if(!b&&this.get("has_full_permissions"))return Infinity;b=b||D.bb.plans.get(this.get("plan_label"));var e=Infinity;b.get("features").accounts_per_service&&(e=b.get("features").accounts_per_service);var f=D.Backbone.services.countBy(function(a){return a.get("service_kind")},this);return e-(f[a]||0)},check_accounts_per_service:function(a){if(a.get("features").accounts_per_service)var b=a.get("features").accounts_per_service;
else return!0;a=D.Backbone.services.countBy(function(a){return a.get("service_kind")},this);return _.every(a,function(a,d){return b>=a})},has_tvmode:function(){if(!0===this.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_serviceboard()&&!1===D.bb.dashboards.current_is_chromeboard()&&!1===this.get("is_beta"))return this.get("readonly")||this.trial_expired_view.render(!0),!1;if(!0===this.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_serviceboard()&&!1===D.bb.dashboards.current_is_chromeboard())return this.get("readonly")||
this.subscription_expired_view.render(),!1;if(this.get("has_tvmode")||D.bb.dashboards.current_is_serviceboard())return!0;this.get("readonly")||Backbone.history.navigate("upgrade/tvmode",!0);return!1},has_tvmode_carousel:function(a){if(!a&&this.get("has_full_permissions"))return!0;if(!a&&this.is_expired())return!1;a=a||D.bb.plans.get(this.get("plan_label"));return"tvmode_carousel"in a.get("features")},can_export_data:function(a){if(!a&&this.get("has_full_permissions"))return!0;if(!a&&this.is_expired())return!1;
a=a||D.bb.plans.get(this.get("plan_label"));return"export_data"in a.get("features")},can_use_ip_access_rules:function(a){if(!a&&this.get("has_full_permissions"))return!0;if(!a&&this.is_expired())return!1;a=a||D.bb.plans.get(this.get("plan_label"));return"ip_access_rules"in a.get("features")},can_upgrade:function(){if(!this.get("has_recurly_account"))return!0;var a=D.bb.plans.get(this.get("plan_label"));if(!a)return!0;var b=_.last(this.available_plans());return a.id!==b.id},accepted_timespan:function(a){return-1===
_.indexOf(["quarterly","yearly"],a)||this.get("has_full_permissions")?!0:"data_retention"in this.plan.get("features")},refresh_alert_count:function(){return $.get("/api/alerts/",_.bind(function(a){this.set("num_alerts",a.count)},this))},display_wizard:function(){D.bb.dashboards.current.has_widgets()||D.bb.account.get("readonly")||D.bb.account.get("has_trial_account")&&!D.bb.account.get("has_trial_expired")&&Backbone.history.navigate("/wizard/dashboard/start",!0)},display_welcome:function(){var a=
D.bb.dashboards.current,b=a.view;a.has_widgets()||D.bb.account.get("readonly")||!a.has_widgets()&&D.bb.account.get("has_trial_account")&&!D.bb.account.get("has_trial_expired")||_.str.include(Backbone.history.fragment,"directory")||_.str.include(Backbone.history.fragment,"custom")||_.str.include(Backbone.history.fragment,"new/widget")||_.str.include(Backbone.history.fragment,"wizard/dashboard")||b.render_welcome()},set_background:function(a){var b=D.bb.dashboards.current.get("owner");this.get("owners")[b]=
a},get_background_url:function(a){a=a||D.bb.dashboards.current.get("owner");return this.get("owners")[a].background_url},get_background_thumbnail:function(a){a=a||D.bb.dashboards.current.get("owner");return this.get("owners")[a].background_thumbnail}}),k=D.Backbone.View.extend({template:"account_settings",tabs:"credentials services subscription billing invoices api_key close".split(" "),initialize:function(){this.listenTo(this.model,"change:company",this.company_updated)},template_data:function(){return _.extend({},
this.model.toJSON())},create_tabs:function(a){this.setElement($.tmpl(this.template,this.template_data()));this.sections={};_.each(this.tabs,_.bind(function(a){var d=new D.Backbone.account_tabs[a]({container:this});d&&d.enabled&&(this.sections[a]=d)},this));var b=_.indexOf(_.keys(this.sections),a),b=-1<b?b:0;this.$("nav").tabs(this.$(".pane"),{initialIndex:b,onBeforeClick:function(){D.u.hide_tooltips()},onClick:_.bind(function(a,d){var b=_.keys(this.sections)[d];D.u.track_tab(a,"select account tab",
{tab:b});D.u.focus_on_first(this.sections[b].$el)},this)});_.defer(_.bind(function(){var a=_.keys(this.sections)[b];D.u.focus_on_first(this.sections[a].$el)},this))},render:function(a){if(this.model.get("readonly"))return this;this.create_tabs(a);D.u.modal({content:this.$el,onComplete:_.bind(function(){this.$el.find("input:text").first().focus()},this)});this.$("select").chosen({disable_search_threshold:12});this.$("input[placeholder], textarea[placeholder]").placeholder();return this},show_tab:function(a){if(_.include(_.keys(this.sections),
a)){a=_.indexOf(_.keys(this.sections),a);var b=this.$("nav").data("tabs");0===a?b.click(a):b.click(a-1)}},add_tab:function(a){if(!_.include(_.keys(this.sections),a)){var b=this.$("nav").data("tabs");b.getTabs();var e=new D.Backbone.account_tabs[a]({container:this,existing_tabs:!0});e.$el&&(this.sections[a]=e);this.$("nav").tabs(this.$(".pane"),{initialIndex:b.getIndex(),onBeforeClick:function(){D.u.hide_tooltips()}})}},_show_all_errors:function(a,b){this.show_response_errors(a,b)},company_updated:function(a){this.$(".field-company").val(this.model.get("company"))}}),
h=k.extend({tabs:["credentials","services","subscription","close"],render:function(a){this.create_tabs(a);D.u.blocked_modal({content:this.$el});this.$("select").chosen({disable_search_threshold:12});this.$("input[placeholder], textarea[placeholder]").placeholder();return this}}),f=k.extend({tabs:["credentials","services","billing","invoices","close"],render:function(a){this.create_tabs(a);D.u.blocked_modal({content:this.$el});this.$("select").chosen({disable_search_threshold:12});this.$("input[placeholder], textarea[placeholder]").placeholder();
return this}}),b=D.Backbone.View.extend({template:"trial_expired",render:function(a){this.setElement($.tmpl(this.template,{is_whitelabel:"whitelabel"===D.bb.account.get("subscriber_kind"),from_notification:a||!1}));D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc()},this)});return this}}),g=D.Backbone.View.extend({template:"subscription_expired",render:function(){this.setElement($.tmpl(this.template,{}));D.u.modal({content:this.$el,onComplete:_.bind(function(){D.u.on_esc()},this)});
return this}}),a=D.Backbone.View.extend({template:"api_key",render:function(){this.setElement($.tmpl(this.template,this.model.toJSON()));this.listenTo(this.model,"change:api_key",this.redisplay);return this},redisplay:function(){var a=this.model;this.$("p").animate({opacity:"toggle"},function(){$(this).text(a.get("api_key")).animate({opacity:"toggle"})})}}),e=new e;_.extend(Ducksboard.Backbone,{account:e,account_tabs:{}})})();
(function(){var e=D.bb.SettingsSection.extend({template:"account_creds",title:"Contact Information",events:{"click .save":"save"},params:{email:void 0,timezone:void 0,country:void 0,first_name:void 0,last_name:void 0,company:void 0,position:void 0,new_password:void 0,current_password:void 0},initialize:function(a){return"whitelabel"===a.container.model.get("subscriber_kind")?this:D.bb.SettingsSection.prototype.initialize.apply(this,arguments)},template_data:function(){return _.extend(this.container.model.toJSON(),
{timezones:D.config.timezones,most_used_timezones:D.config.most_used_timezones})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$(".field-timezone").val(this.model.get("timezone"));this.$(".field-country").val(this.model.get("country"));return this},set_from_fields:function(){_.each(_.keys(this.params),_.bind(function(a){var b=this.$(".field-"+a),e=b.is("select")?b.find("option:selected").first().val():b.val();b.attr("placeholder")===e&&(e="");this.params[a]=e},
this))},save:function(a){if(this.$(".error").length)return!1;a=$(a.currentTarget);a=D.u.sending(a,"saving settings");if(a.blocked)return!1;this.set_from_fields();this.model.save(this.params,{complete:a.complete,success:_.bind(function(a,b){this.model.get("has_trial_expired")||$.fancybox.close()},this),error:_.bind(function(a,b){this.show_response_errors(b)},this)});return!0}}),k=D.Backbone.SettingsSection.extend({template:"services_settings",title:"External accounts",events:{"click .cancel":"cancel",
"click .send":"send"},render:function(){this.setElement($.tmpl(this.template));this.$list=this.$(".account-list");this.$ul=this.$list.find("ul");this.$form=this.$(".form");D.Backbone.services.each(function(a){a.user_managed&&a.item_view.render().$el.appendTo(this.$ul);a.bind("relink",this.relink,this)},this);return this},relink:function(a){this.form_view=new D.bb.FormView({model:a});this.form_view.render().$el.appendTo(this.$form);this.$list.fadeOut(_.bind(function(){this.$form.fadeIn()},this))},
cancel:function(a){a&&a.preventDefault();a&&a.stopPropagation();this.$form.fadeOut(_.bind(function(){this.$list.fadeIn();this.form_view.$el.remove()},this))},send:function(a){if(this.form_view.model.requires_oauth_domain())return a=this.form_view.model.auth_url(!0)+"?"+$.param(this.form_view.field_values()),this.cancel(),window.open(a);var b=$(a.currentTarget);a=D.u.sending(b,function(){b.val("")});a.blocked||(this.form_view.set_from_fields(),this.form_view.model.save({},{complete:a.complete,success:_.bind(function(){this.$ul.empty();
D.Backbone.services.each(function(a){a.user_managed&&a.item_view.render().$el.appendTo(this.$ul)},this);this.cancel()},this),error:_.bind(function(a,b){this.form_view.show_response_errors(b);analytics.track("update service error",{service_kind:this.form_view.model.kind})},this)}))}}),h=D.Backbone.SubscriptionFormView.extend(D.Backbone.SectionMixin).extend({title:"Subscription",initialize:function(a){"whitelabel"!==a.container.model.get("subscriber_kind")&&a.container.model.get("can_subscribe")&&(this.container=
a.container,this.model=this.container.model.get_billing(),this.model.view=this,D.bb.SubscriptionFormView.prototype.initialize.apply(this,arguments),a.container.model.get("can_upgrade")&&(this.title="Upgrade"),this.append_tab(),this.enabled=!0)},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.render_fields();this.country_updated();D.bb.account.get("available_coupon")&&this.auto_apply_coupon();return this},auto_apply_coupon:function(){this.$(".coupon-info .show").hide();
this.$(".coupon-info .apply").show();this.render_child_template(this.$(".coupon-info"),{applying_coupon:!0});this.$(".field-coupon_code").val(D.bb.account.get("available_coupon").label);this.update_coupon_code(void 0)}}),f=D.Backbone.BillingInfoFormView.extend(D.Backbone.SectionMixin).extend({title:"Billing Information",events:{"click .failure a":"hide_fetch_error"},initialize:function(a){"whitelabel"!==a.container.model.get("subscriber_kind")&&a.container.model.get("has_recurly_account")&&(this.container=
a.container,this.model=this.container.model.get_billing(),D.bb.BillingInfoFormView.prototype.initialize.apply(this,arguments),_.extend(this.events,D.bb.BillingInfoFormView.prototype.events),this.append_tab(a.existing_tabs),this.enabled=!0)},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.fetch_content();return this},fetch_content:function(){this.set_loading();this.model.fetch({silent:!0,success:_.bind(function(a,b){this.render_content()},this),error:_.bind(function(){this.show_fetch_error(arguments)},
this)});return this},render_content:function(){this.render_fields();this.$(".field-number").attr("placeholder",_.sprintf("XXXX-XXXX-%s",this.model.get("last_four")));this.$("select").chosen({disable_search_threshold:12});this.$("input[placeholder]").placeholder();this.remove_loading();return this},show_fetch_error:function(a,b,e){this.remove_loading();this.$(".form").hide();this.$(".failure").show();this.$(".send").addClass("disabled")},hide_fetch_error:function(a){this.$(".failure").fadeOut(_.bind(function(){this.$(".form").fadeIn(_.bind(function(){this.$(".send").removeClass("disabled");
this.fetch_content()},this))},this))},set_loading:function(){this.$(".form").addClass("loading");this.$(".current").addClass("disabled");var a=this.$(".send");this.sending=D.u.sending(a,"getting your billing info")},remove_loading:function(){this.$(".form").removeClass("loading");this.$(".current").removeClass("disabled");this.sending.complete()}}),b=D.Backbone.SettingsSection.extend({template:"plan_invoices",title:"invoices",events:{"click .failure a":"hide_error"},initialize:function(a){"whitelabel"!==
a.container.model.get("subscriber_kind")&&a.container.model.get("subscriber_account_code")&&(this.container=a.container,this.model=this.container.model.billing,this.append_tab(a.existing_tabs),this.enabled=!0)},render:function(){this.setElement($.tmpl(this.template));this.fetch_list();return this},fetch_list:function(){this.set_loading();this.container.model.invoices.fetch({success:_.bind(function(){this.render_list()},this),error:_.bind(function(){this.show_error(arguments)},this)});return this},
render_list:function(){this.remove_loading();this.container.model.invoices.each(_.bind(function(a){a.item_view.render().$el.appendTo(this.$("ul"))},this));return this},show_error:function(a,b,e){this.remove_loading();this.$(".invoice-list").hide();this.$(".failure").show()},hide_error:function(a){this.$(".failure").fadeOut(_.bind(function(){this.$(".invoice-list").fadeIn(_.bind(function(){this.fetch_list()},this))},this))},set_loading:function(){this.$("ul").addClass("loading")},remove_loading:function(){this.$("ul").removeClass("loading")}}),
g=D.Backbone.SettingsSection.extend({template:"account_api_key",title:"API key",events:{"click .reset:not(.disabled)":"generate_new_key"},render:function(){this.setElement($.tmpl(this.template,this.container.model.toJSON()));this.$("section").append(D.Backbone.account.api_key_view.render().$el);return this},generate_new_key:function(a){this.confirm_view=this.$(".button-wrap").confirm({text:"Do you want to generate a new API key? The old key will be disabled.",continue_text:"Generate",discard_text:"Keep",
continue_action:_.bind(this._generate_new_key,this,a),continue_icon:!1}).data("confirm_view");return!1},_generate_new_key:function(a){a=$(a.currentTarget);var b=D.u.sending(a,"generating");b.blocked||$.ajax({url:D.bb.account.url+"/api_key",type:"POST",complete:_.bind(function(){b.complete();this.confirm_view.hide()},this),success:function(a){D.bb.account.set({api_key:a.api_key})},data:1})}}),a=D.Backbone.SettingsSection.extend({template:"account_close",title:"close account",events:{"click .submit-and-close":"close_account",
"change li input":"show_textarea","focus li textarea":"hide_error"},initialize:function(a){return"whitelabel"===a.container.model.get("subscriber_kind")?this:D.bb.SettingsSection.prototype.initialize.apply(this,arguments)},template_data:function(){return _.extend(this.container.model.toJSON(),{})},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},send_mail:function(){if(this.sending&&this.sending.blocked)return!1;var a=this.get_reason();if(!a.label||!a.reason)return this.show_error(),
!1;this.sending=D.u.sending(this.$(".close"),"sending");if(!this.sending.blocked)return $.post("/support/closing-ticket/",JSON.stringify(this.get_reason()),_.bind(function(){this.sending.complete();$.fancybox.close()},this)),!1},close_account:function(a){if(this.sending&&this.sending.blocked)return!1;a=this.get_reason();if(!a.label||!a.reason)return this.show_error(),!1;this.confirm_close(function(){this.sending=D.u.sending(this.$(".submit-and-close"),"closing your account");$.post("/accounts/close/",
this.get_reason(),function(){window.location.replace("/")})});return!1},get_reason:function(){var a=this.$("input:checked").closest("li"),b=a.find("label").text(),a=a.find("textarea").val();return{label:b||"",reason:a||""}},confirm_close:function(a){this.confirm_view=this.$(".button-wrap").confirm({confirmation_class:"important",text:"Really want to close your account?",continue_text:"Close",discard_text:"Stay",continue_action:_.bind(a,this),continue_icon:!1}).data("confirm_view")},show_error:function(){this.$(".error").fadeIn()},
hide_error:function(){this.$(".error").fadeOut()},show_textarea:function(){this.hide_error();this.$("textarea").closest("div").hide();this.$("input:checked").closest("li").find("div").show()}});_.extend(Ducksboard.Backbone.account_tabs,{credentials:e,services:k,subscription:h,billing:f,invoices:b,api_key:g,close:a})})();
(function(){var e=D.bb.SettingsSection.extend({append_services:function(a,b){b=b||"first";a.empty();D.Backbone.services.chain().select(function(a){return a.get("service_kind")===this.model.service.kind},this).each(function(d,e,f){e="first"===b?0===e:"last"===b?e+1===f.length:d.id===b;d.selectable.render(e).$el.appendTo(a);e&&this.set_selected_service(d)},this)},service_created:function(a){$("a",a).removeClass("selected");this.model.service.selectable.render(!0).$el.appendTo(a);this.set_selected_service(this.model.service);
this.model.service=new D.Backbone.service_kinds[this.model.service_kind]},set_selected_service:function(a){this.model.trigger("service:selected",a.id)}}),k=e.extend({template:"widget_create_account",events:{"click .send":"create_service","click .failure a":"show_service_form"},initialize:function(a){var b=a.container.model;b.isNew()&&b.service.user_managed&&(D.Backbone.services.any(function(a){return a.get("service_kind")===b.service.kind})||e.prototype.initialize.apply(this,arguments))},render:function(){this.setElement($.tmpl(this.template,
{create_tip:this.model.service.create_tip,uses_external_authentication:this.model.service.uses_external_authentication}));this.model.service.initial_form_view.render().$el.appendTo(this.$(".form"));return this},reload_services:function(){D.Backbone.services.any(function(a){return a.get("service_kind")===this.model.service.kind},this)?(this.append_services(this.container.$(".account ul")),this.hide_pane()):this.$(".loading").fadeOut(_.bind(function(){this.$(".failure").fadeIn()},this))},show_service_form:function(){this.$(".failure").fadeOut(_.bind(function(){this.$(".dialog").fadeIn()},
this))},create_service:function(a){if(this.model.service.uses_external_authentication){this.$(".dialog").fadeOut(_.bind(function(){this.$(".loading").fadeIn()},this));var b=_.bind(function(){this.reload_services()},this);$(window).one("focus",function(){D.Backbone.services.fetch({success:b,error:b})});a=this.model.service.auth_url()+"?"+$.param(this.model.service.initial_form_view.field_values());return window.open(a)}a=D.u.sending($(a.currentTarget),"creating account");a.blocked||(this.model.service.initial_form_view.set_from_fields(),
D.Backbone.services.add(this.model.service),this.model.service.save({},{complete:a.complete,success:_.bind(function(){var a=this.model.service.form_view;this.service_created(this.container.$(".account ul"));this.replace_service_form_view(a);this.hide_pane()},this),error:_.bind(function(a,b){D.Backbone.services.remove(this.model.service);this.show_response_errors(b);analytics.track("create service error",{service_kind:this.model.service.kind,first_service:1})},this)}))},show_errors:function(a,b){b!==
D.u.api_error_codes.unique_error&&this.model.service.initial_form_view.show_errors(a,b)},replace_service_form_view:function(a){this.container.$(".account .form").fadeOut(_.bind(function(){a.remove();this.model.service.form_view.render().$el.appendTo(this.container.$(".account .form"));this.$(".choices").fadeIn()},this))},hide_pane:function(){this.container.$("nav").data("tabs").next();this.$el.fadeOut()}}),h=e.extend({template:"widget_accounts",events:{"click li":"select_service","click .new":"show_service_form",
"click .send":"create_service","click .cancel":"close_service_form"},title:"Manage accounts",initialize:function(a){a.container.model.service.user_managed&&(this.enabled=!0,e.prototype.initialize.apply(this,arguments))},template_data:function(){return{is_new:this.model.isNew()}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.model.isNew()?(this.append_services(this.$("ul")),this.model.service.form_view.render().$el.appendTo(this.$(".form"))):this.model.service.selectable.render(!0).$el.appendTo(this.$("ul"));
return this},reload_services:function(a){this.$(".choices").stop(!0,!0);this.$(".loading").stop(!0,!0);var b=D.Backbone.services.select(function(a){return a.get("service_kind")===this.model.service.kind},this).length;this.$("ul").empty();this.append_services(this.$("ul"),a<b?"last":this.model.service.id);this.$(".loading").fadeOut(_.bind(function(){this.$(".choices").fadeIn()},this))},select_service:function(a){a=$(a.currentTarget);$("a",a.siblings()).removeClass("selected");$("a",a).addClass("selected");
this.set_selected_service($("a",a).tmplItem().model)},show_service_form:function(a){if(0>=D.bb.account.available_accounts_per_service(this.model.service.kind))return this.show_upgrade();if(this.model.service.uses_external_authentication&&!this.model.service.requires_oauth_domain())return this.$(".choices").fadeOut(_.bind(function(){this.$(".loading").fadeIn()},this)),this.bind_reload_services_on_window_focus(),window.open(this.model.service.auth_url());this.$(".choices").fadeOut(_.bind(function(){this.$(".form").fadeIn()},
this))},bind_reload_services_on_window_focus:function(){var a=this.$("ul").children().length,b=_.bind(function(){this.reload_services(a)},this);$(window).one("focus",function(){D.Backbone.services.fetch({success:b,error:b})})},show_upgrade:function(){Backbone.history.navigate("upgrade/accounts",!0)},close_service_form:function(a){this.$(".form").fadeOut(_.bind(function(){this.model.service.form_view.clear();this.$(".choices").fadeIn()},this));return!1},replace_service_form:function(a){this.$(".form").fadeOut(_.bind(function(){a.remove();
this.model.service.form_view.render().$el.appendTo(this.$(".form"));this.$(".choices").fadeIn()},this))},create_service:function(a){if(this.model.service.requires_oauth_domain())return this.bind_reload_services_on_window_focus(),this.close_service_form(),a=this.model.service.auth_url()+"?"+$.param(this.model.service.form_view.field_values()),window.open(a);var b=$(a.currentTarget);a=D.u.sending(b,function(){b.val("")});a.blocked||(this.model.service.form_view.set_from_fields(),D.Backbone.services.add(this.model.service),
this.model.service.save({},{complete:a.complete,success:_.bind(function(){var a=this.model.service.form_view;this.service_created(this.$("ul"));this.replace_service_form(a)},this),error:_.bind(function(a,b){D.Backbone.services.remove(this.model.service);this.show_response_errors(b);analytics.track("create service error",{service_kind:this.model.service.kind,first_service:0})},this)}))},show_errors:function(a,b){b===D.u.api_error_codes.unique_error?this.close_service_form():this.model.service.form_view.show_errors(a,
b)},cb_appended:function(){var a=this.$(".selected").tmplItem().model;this.model.isNew()&&a&&this.set_selected_service(a)},set_from_input:function(){var a=this.$(".selected").tmplItem().model;a&&this.model.data_source.set({service_id:a.id},{silent:!0})}}),f=D.bb.View.extend({template:"widget_timespans",initialize:function(a){this.slots=a.container.model.get_timespan_slots()},render:function(){if(this.slots.length){var a=this.slots[0],a={timespan:a.get("timespan"),allowed:a.allowed_timespans};this.setElement($.tmpl(this.template,
a,{includes:function(a,b){return _.include(a,b)}}));return this}},set_from_input:function(){var a=this.$("select").val();_.each(this.slots,function(b){b.set({timespan:a},{silent:!0})})}}),b=D.Backbone.View.extend({template:"widget_appearance_fieldset",default_slot_color:D.colors.pink,colors:[D.colors.darkblue,D.colors.darkpurple,D.colors.red,D.colors.yellowgreen,D.colors.darkgreen,D.colors.black,D.colors.lightblue,D.colors.purple,D.colors.darkorange,D.colors.yellow,D.colors.green,D.colors.gray,D.colors.blue,
D.colors.bluesteel,D.colors.orange,D.colors.lightyellow,D.colors.lightgreen,D.colors.white],initialize:function(a){this.model=a.model;this.editable=a.editable;this.slot_item=1},template_data:function(){var a=this.model.widget,b=this.model.get("layout"),d=_.isFunction(a.slot_defs)?a.slot_defs():a.slot_defs;return _.extend(this.model.toJSON(),{editable:this.editable,isNew:a.isNew(),default_color:d[b].defaults.color||this.default_slot_color,current_color:this.model.get("color")||this.default_slot_color,
colors:this.colors,layout:b,has_multiple_slot_appearances:1<a.slots.length||1<_.size(d)})},render:function(){this.setElement($.tmpl(this.template,this.template_data(),{model:this.model,slot_item:this.slot_item}));this.editable&&this.$(".color_picker").selectable();return this},set_from_input:function(){var a=this.$(".field-subtitle").val(),b=this.$(".ui-selected span").attr("data-color"),b=b||this.model.get("color");this.model.set({subtitle:a,color:b},{silent:!0})},show_errors:function(){D.Backbone.View.prototype.show_errors.apply(this,
arguments);var a=$(this.$el[0]);if(!a.hasClass("active"))a.addClass("error").one("click",function(){$(this).removeClass("error")})},remove:function(){this.editable&&this.$(".color_picker").selectable("destroy");D.Backbone.View.prototype.remove.apply(this)}}),g=b.extend({template:"widget_appearance_map_fieldset",render:function(){b.prototype.render.apply(this,arguments);this.$el.on("change",'[name="initial_data_type"]',_.bind(this.initial_data_type_changed,this));this.$el.on("change",'[name="autofit"]',
_.bind(this.autofit_changed,this));this.$el.find('.field-since option[value="'+this.model.get("since")+'"]').attr("selected","selected");return this},autofit_changed:function(a){"t"===$(a.currentTarget).val()?this.$(".field-max_zoom").removeClass("js-disabled").find("input").removeAttr("disabled"):this.$(".field-max_zoom").addClass("js-disabled").find("input").attr("disabled","disabled")},initial_data_type_changed:function(a){a=$(a.currentTarget).val();"last"===a?(this.$(".field-last").show(),this.$(".field-since").hide()):
"since"===a&&(this.$(".field-since").show(),this.$(".field-last").hide())},set_from_input:function(){var a={};_.each("map_tile marker_size center_lat center_lon zoom max_zoom initial_data_type last since".split(" "),function(b){var d=this.$('[name="'+b+'"]');a[b]=d.val()||this.model.get(b)},this);a.color=this.$(".color_picker .ui-selected span").attr("data-color")||this.model.get("color");a.autofit=this.$('[name="autofit"]').val();this.model.set(a,{silent:!0})}}),a=b.extend({initialize:function(a){this.model=
a.model;this.slot_item=a.slot_item;this.editable=a.editable;this.color_field=_.sprintf("color%d",this.slot_item);this.subtitle_field=_.sprintf("subtitle%d",this.slot_item)},template_data:function(){var a=this.model.widget,b=this.model.get("layout"),d=_.isFunction(a.slot_defs)?a.slot_defs():a.slot_defs;return{subtitle:this.model.get(this.subtitle_field)||d[b].defaults[this.subtitle_field],editable:this.editable,default_color:d[b].defaults[this.color_field]||this.default_slot_color,current_color:this.model.get(this.color_field)||
this.default_slot_color,colors:this.colors,has_multiple_slot_appearances:1<a.slots.length||1<_.size(d)||this.model.get("multiple_subtitles")}},set_from_input:function(){var a=this.$(".field-subtitle").val(),b=this.$(".ui-selected span").attr("data-color"),b=b||this.model.get(this.color_field);properties={};properties[this.subtitle_field]=a;properties[this.color_field]=b;this.model.set(properties,{silent:!0})},show_errors:function(){D.Backbone.View.prototype.show_errors.apply(this,arguments);var a=
$(this.$el[0]);if(!a.hasClass("active"))a.addClass("error").one("click",function(){$(this).removeClass("error")})}}),d=D.Backbone.View.extend({render:function(){var a=this.model.get("layout"),b="1"==a?"":a,a="pull_url"+b,b="pull_frequency"+b,d=this.model.widget.data_source.get(a),e=this.model.widget.data_source.get(b);this.pull_param=a;this.freq_param=b;this.setElement($("<div></div>"));this.$el.append($.tmpl("input_text",{name:"pull_url",value:d,placeholder:"optional pull URL"}));this.$el.append($.tmpl("select",
{name:"pull_frequency",value:e,options:[{value:"60",display_name:"pull every minute"},{value:"1800",display_name:"pull every thirty minutes"},{value:"3600",display_name:"pull every hour"},{value:"10800",display_name:"pull every three hours"},{value:"21600",display_name:"pull every six hours"}]}));return this},uses_param:function(a){return this.pull_param===a},set_from_input:function(){var a={};a[this.pull_param]=this.$el.find(".field-pull_url").val();a[this.freq_param]=this.$el.find(".field-pull_frequency").val();
this.model.widget.data_source.set(a)}}),l=D.Backbone.View.extend({template:"widget_data_api_fieldset",initialize:function(a){this.model=a.model},render:function(){var a=this.model.widget,b=_.isFunction(a.slot_defs)?a.slot_defs():a.slot_defs,a=1<a.slots.length||1<_.size(b);this.setElement($.tmpl(this.template,{has_multiple_slots:a},{model:this.model}));this.model.widget.isNew()||(this.url_view=new this.model.url_view_cls({model:this.model}),this.url_view.render().$el.appendTo(this.$el.filter("fieldset")),
this.pull_view=new d({model:this.model}),this.pull_view.render().$el.appendTo(this.$el.children(".pull-url")));return this},set_from_input:function(){this.url_view&&this.url_view.set_from_input();this.pull_view&&this.pull_view.set_from_input()},uses_param:function(a){return this.pull_view&&this.pull_view.uses_param(a)},show_errors:function(){D.Backbone.View.prototype.show_errors.apply(this,arguments);var a=$(this.$el[0]);if(!a.hasClass("active"))a.addClass("error").one("click",function(){$(this).removeClass("error")})},
remove:function(){this.url_view&&this.url_view.remove();this.pull_view&&this.pull_view.remove();D.Backbone.View.prototype.remove.apply(this)}}),q=D.bb.SettingsSection.extend({template:void 0,slot_appearance_view_cls:void 0,slot_map_appearance_view_cls:void 0,slot_multi_appearance_view_cls:void 0,events:{"click .edit":"select_slot","change .timespans-dropdown select":"check_timespan","click .timespans-dropdown .chzn-container":"cache_timespan"},template_data:function(){return{kind:this.model.kind}},
render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.render_fieldsets();this.render_extra();return this},render_fieldsets:function(){this.fieldset_views={};this.model.slots.each(_.bind(function(a){var b=!a.get("no_appearance"),b={model:a,editable:b},d=this.fieldset_views[a.id]=[],e;if(a.get("multiple_subtitles")&&this.slot_multi_appearance_view_cls)for(i=1;i<=a.get("total_subtitles");i++)b.slot_item=i,e=new this.slot_multi_appearance_view_cls(b),d.push(e),e.render().$el.appendTo(this.$(".editor"));
else e=a.get("map_tile")?new this.slot_map_appearance_view_cls(b):new this.slot_appearance_view_cls(b),d.push(e),e.render().$el.appendTo(this.$(".editor"))},this));this.show_fieldset(this.model.slots.first())},render_extra:function(){},select_slot:function(a){a=$(a.currentTarget).tmplItem();var b=this.$("fieldset:visible").tmplItem();a.model===b.model&&a.slot_item===b.slot_item||this.show_fieldset(a.model,!0,a.slot_item)},show_fieldset:function(a,b,d){d=d||1;a=this.fieldset_views[a.id];var e=$(a[d-
1].$el[0]),f=$(a[d-1].$el[1]);d=this.$("fieldset:visible");var g=d.find("fieldset");d=d.not(g);if(1==a.length&&1==_.size(this.fieldset_views))return a[0].$el.fadeIn("fast"),this;this.$(".edit").removeClass("active");e.addClass("active");b?d.fadeOut("fast",function(){f.fadeIn("fast")}):(d.hide(),f.css("display","block"))},show_errors:function(a){_.each(a,_.bind(function(a,b){_.each(this.fieldset_views[b],function(b){b.show_errors(a)})},this))},cache_timespan:function(a){this.old_valid_timespan=$(a.currentTarget).prev("select").first().val()},
check_timespan:function(a){a=$(a.currentTarget);var b=a.val();D.bb.account.accepted_timespan(b)||(a.val(this.old_valid_timespan).trigger("liszt:updated"),this.show_upgrade())},show_upgrade:function(){Backbone.history.navigate("upgrade/timespans",!0)},set_from_input:function(){var a=_.flatten(_.values(this.fieldset_views));_.each(a,function(a){a.set_from_input()})},remove:function(){_.each(_.flatten(_.values(this.fieldset_views)),function(a){a.remove()});this.fieldset_views={};D.Backbone.View.prototype.remove.apply(this)}}),
g=q.extend({template:"widget_appearance",slot_appearance_view_cls:b,slot_map_appearance_view_cls:g,slot_multi_appearance_view_cls:a,title:"Standard Settings",initialize:function(a){var b=a.container.model;b.can_edit_appearance()&&(this.has_timespans=b.get_timespan_slots().length,this.enabled=!0,q.prototype.initialize.apply(this,arguments))},template_data:function(){return _.extend(q.prototype.template_data.apply(this,arguments),{has_timespans:this.has_timespans})},render_extra:function(){if(this.has_timespans){this.timespan_view=
new f({container:this});var a=this.timespan_view.render().$el;this.$(".timespan").append(a)}},set_from_input:function(){q.prototype.set_from_input.apply(this);this.has_timespans&&this.timespan_view.set_from_input()},show_errors:function(a){_.each(a,_.bind(function(a,b){_.each(this.fieldset_views[b],function(b){b.show_errors(a)})},this))},remove:function(){this.timespan_view&&this.timespan_view.remove();q.prototype.remove.apply(this)}}),l=q.extend({template:"widget_data_api",slot_appearance_view_cls:l,
slot_map_appearance_view_cls:l,title:"Data & API",initialize:function(a){a.container.model.isNew()||"custom"!==a.container.model.service_kind||(this.enabled=!0,D.bb.SettingsSection.prototype.initialize.apply(this,arguments))},template_data:function(){return _.extend(q.prototype.template_data.apply(this,arguments),{api_key:D.bb.account.attributes.api_key,wiki_url:this.model.wiki_url})},cb_appended:function(){"custom"!==this.model.service_kind||this.model.isNew()||_.each(_.flatten(_.values(this.fieldset_views)),
function(a){a.url_view.resize()})},show_errors:function(a){_.each(a,function(b,d){_.each(_.flatten(_.values(this.fieldset_views)),function(b){b.uses_param&&b.uses_param(d)&&b.show_errors(a)},this)},this)}}),a=D.Backbone.View.extend({template:"widget_webhook",url_pattern:"https://webhooks.ducksboard.com/",enabled:!1,initialize:function(a){a.data_source.get("webhook_key")&&(this.enabled=!0);this.model=a},render:function(){this.setElement($.tmpl(this.template,_.extend(this.model.toDucksboardJSON(),{url_pattern:this.url_pattern,
webhook_doc_url:this.model.webhook_doc_url})));return this}}),v=D.Backbone.View.extend({template:"widget_embed",snippet_template:"widget_embed_snippet",enabled:!1,events:{"click .disable":"disable","click .enable":"enable"},initialize:function(a){this.model=a;this.model.isNew()||(this.enabled=!0)},snippet_data:function(){var a=this.model.view.$el,b=_.sprintf("%s %s %s",a.css("border-style"),a.css("background-color"),a.css("border-width"));return _.extend(this.model.toDucksboardJSON(),{url:_.sprintf("%s/w/%s",
D.config.public_host,this.model.embed_token.id),width:D.u.actual("innerWidth",a),height:D.u.actual("innerHeight",a),border:b,border_radius:a.css("border-radius"),has_flash:swfobject.hasFlashPlayerVersion("9.0.0")})},render:function(){this.setElement($.tmpl(this.template));this.$enabled_subview=this.$(".enabled");this.$disabled_subview=this.$(".disabled");this.model.embed_token?(this.$(".snippet").replaceWith(this.render_snippet()),this.$disabled_subview.hide()):this.$enabled_subview.hide();return this},
render_snippet:function(){var a=$.tmpl(this.snippet_template,this.snippet_data());this.init_clipboard(a);return a},init_clipboard:function(a){swfobject.hasFlashPlayerVersion("9.0.0")&&(this.clip=new ZeroClipboard.Client,this.clip.setHandCursor(!0),this.clip.setText($("input",a).val()),this.clip.glue($(".copy a",a).get(0),$(".zeroclipboard-container",a).get(0),{width:92,height:34,zIndex:2E3}))},enable:function(a){a.preventDefault();var b=$(a.currentTarget),d=D.u.sending(b,function(){b.text("")});if(d.blocked)return!1;
this.model.embed_token||(new D.bb.WidgetEmbedToken({},{widget:this.model})).save({},{success:_.bind(function(a,b){d.complete();this.model.embed_token=a;this.$(".snippet").replaceWith(this.render_snippet());this.$disabled_subview.fadeOut(_.bind(function(){this.$enabled_subview.fadeIn();if(this.parent_view.subsections.panic_embed){var a=this.parent_view.subsections.panic_embed.render().$el;a.appendTo(this.parent_view.$(".subsections"));a.fadeIn()}},this))},this),error:function(){d.complete()}})},disable:function(a){a.preventDefault();
this.confirm_view=this.$(".snippet").confirm({text:"Sure? It will disappear from any external site",continue_text:"Disable",discard_text:"Keep",continue_action:_.bind(this._disable,this,a),continue_icon:!1,show_callback:_.bind(function(){this.$(".copy").hide()},this),hide_callback:_.bind(function(){this.$(".copy").show()},this)}).data("confirm_view")},_disable:function(){this.model.embed_token.destroy({wait:!0,success:_.bind(function(){this.model.embed_token=void 0;this.$enabled_subview.fadeOut(_.bind(function(){this.$disabled_subview.fadeIn()},
this));this.confirm_view&&this.confirm_view.hide()},this),error:_.bind(function(){this.confirm_view&&this.confirm_view.hide()},this)});var a=this.parent_view.subsections.panic_embed;a&&a.$el.fadeOut(_.bind(function(){a.remove()},this))},remove:function(){this.confirm_view&&this.confirm_view.remove();var a=this.parent_view.subsections.panic_embed;a&&a.remove();this.clip&&this.clip.deregister();D.Backbone.View.prototype.remove.apply(this)}}),w=D.Backbone.View.extend({template:"widget_panicboard",enabled:!1,
valid_slots:"CounterTrend CounterSubtitle CounterPin Gauge AbsoluteChart Chart".split(" "),initialize:function(a){this.model=a;a=!this.model.has_multiple_slot_kinds()&&-1!==$.inArray(this.model.slot_kinds[0],this.valid_slots)&&1===this.model.get("height");!this.model.isNew()&&a&&D.bu.device.ipad&&(this.enabled=!0)},template_data:function(){var a=_.sprintf("%s/w/%s%s",D.config.public_host,this.model.embed_token.id,"?target=panic");return _.extend(this.model.toDucksboardJSON(),{url:a,url_encoded:encodeURIComponent(a),
has_flash:swfobject.hasFlashPlayerVersion("9.0.0")})},render:function(){if(!this.model.embed_token)return!1;this.setElement($.tmpl(this.template,this.template_data()));return this}}),a=D.bb.SettingsSection.extend({template:"widget_advanced",title:"Advanced settings",subviews:{webhook:a,embed:v,panic_embed:w},initialize:function(a){this.subsections={};_.each(this.subviews,function(b,d){var e=new b(a.container.model);e.enabled&&(e.parent_view=this,this.subsections[d]=e)},this);if(!_.isEmpty(this.subsections))return this.model=
a.container.model,this.enabled=!0,D.bb.SettingsSection.prototype.initialize.apply(this,arguments),this},render:function(){this.setElement($.tmpl(this.template));_.each(this.subsections,_.bind(function(a){(a=a.render())&&a.$el.appendTo(this.$(".subsections"))},this));return this},remove:function(){_.each(this.subsections,function(a){a.remove()});this.subsections={};D.Backbone.View.prototype.remove.apply(this)}}),v=D.bb.SettingsSection.extend({template:"widget_content",title:"Choose content",initialize:function(a){_.isEmpty(a.container.model.data_source.params)||
(this.enabled=!0,D.bb.SettingsSection.prototype.initialize.apply(this,arguments))},render:function(){this.setElement($.tmpl(this.template,{section:"content"}));this.form_view=new D.bb.FormView({model:this.model.data_source});this.form_view.parent_view=this;this.form_view.render();this.$(".scroller fieldset").replaceWith(this.form_view.$el);this.form_view.cb_appended&&this.form_view.cb_appended();this.listenTo(this.model,"service:selected",function(a){this.form_view.load_service_params(a)});return this},
set_from_input:function(){this.form_view.set_from_fields()},remove:function(){this.form_view&&this.form_view.remove();D.Backbone.View.prototype.remove.apply(this)}}),m=D.Backbone.Model.extend({idAttribute:null,defaults:{content:void 0},initialize:function(a,b){this.widget_id=b.widget_id},url:function(){return"/api/widgets/"+this.widget_id+"/feedback"}}),w=D.bb.SettingsSection.extend({template:"widget_feedback",events:{"click .send":"send_feedback"},title:"Feedback & suggestions",feedback_visible:!0,
initialize:function(a){a.container.model.isNew()||(this.enabled=!0,D.bb.SettingsSection.prototype.initialize.apply(this,arguments))},template_data:function(){return{name:D.Backbone.account.get("email"),subject:_.sprintf("%s widget",_.capitalize(this.container.model.service.kind_name))}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));return this},send_feedback:function(a){if(!this.feedback_visible)this.show_feedback_pane();else if(this.$("textarea").val()){var b=D.u.sending($(a.currentTarget),
"sending feedback");b.blocked||(new m({content:this.$("textarea").val()},{widget_id:this.container.model.get("widget_id")})).save({},{success:_.bind(function(){this.feedback_sent(b)},this),error:_.bind(function(a,d){b.complete();this.show_response_errors(d)},this)})}},feedback_sent:function(a){this.$("textarea").val("");this.$(".form").fadeOut(_.bind(function(){a.complete();this.feedback_visible=!1;this.$(".sent").fadeIn();this.$(".send").val("more feedback")},this))},show_feedback_pane:function(){this.$(".sent").fadeOut(_.bind(function(){this.feedback_visible=
!0;this.$(".form").fadeIn()},this));this.$(".send").val("send feedback")}}),t=D.bb.SettingsSection.extend({template:"widget_notifications",template_fake:"widget_notifications_fake",template_slider:"widget_notifications_slider",items_per_group:3,title:"Alerts",events:{"click .button-new":"new_notification","click .failure a":"hide_error"},initialize:function(a){var b=a.container.model;!b.isNew()&&b.supports_alerts()&&(this.collection=new D.bb.NotificationList([],{widget:a.container.model}),this.enabled=
!0,D.bb.SettingsSection.prototype.initialize.apply(this,arguments),"custom"===this.model.service_kind&&(this.items_per_group=5),this.listenTo(this.collection,"added",this.add_item),this.listenTo(this.collection,"updated",this.update_item),this.listenTo(this.collection,"removed",this.remove_item))},template_data:function(){return{has_recurly_account:D.bb.account.get("has_recurly_account")}},render:function(){this.setElement($.tmpl(this.template,this.template_data()));this.$main_view=this.$(".notifications-main-view");
this.fetch_list();return this},fetch_list:function(){this.fetch_xhr=this.collection.fetch({success:_.bind(this.render_list,this),error:_.bind(this.show_error,this),complete:_.bind(this.remove_loading,this)});return this},render_list:function(a){if(0===this.collection.size()&&!0!==a)this.$(".m-notifications-list").replaceWith($.tmpl(this.template_fake));else{this.$(".m-notifications-list").replaceWith($.tmpl(this.template_slider));this.$slider_content=this.$(".viewport > ul");var b=$([]);this.collection.each(_.bind(function(a,
d){b=b.add(a.item_view.render().$el);if(b.length===this.items_per_group||this.collection.size()===d+1)b.appendTo(this.$slider_content).wrapAll("<li />"),b=$([])},this));this.slider=new $.fn.Slidster(this.$(".slidster"),$.extend({},D.u.constants.slidster_conf,{pager_info_item:"notifications",start_at:1,items_per_slide:1}));return this}},add_item:function(a){this.slider||this.render_list(!0);this.slider.add_item(a.item_view.render().$el,this.items_per_group);this.slider.go(this.slider.$items.index(this.slider.$items.last())+
1)},update_item:function(a){a.item_view.$el.replaceWith(a.item_view.render().$el)},remove_item:function(a){a.item_view.$el.fadeOut(_.bind(function(){this.slider.remove_item(a.item_view.$el,this.items_per_group);this.slider.$items.children().length?this.reflow_items():(this.$(".m-notifications-list").replaceWith($.tmpl(this.template_fake)),this.slider.destroy());a.form_view.remove();a.item_view.remove()},this))},fill_holes_in:function(a){var b=this.slider.$items.index(a),d=a.children(),b=this.slider.$items.eq(b+
1).children();d.length<this.items_per_group&&b.slice(-(this.items_per_group-d.length)).appendTo(a)},reflow_items:function(){this.slider.$preppended_clone&&this.slider.$preppended_clone.remove();this.slider.$appended_clone&&this.slider.$appended_clone.remove();this.slider.$items.children();this.slider.$items.each(_.bind(function(a,b){this.fill_holes_in($(b))},this));this.slider.$items.filter(function(){return 0===$(this).children().length}).remove();this.slider.refresh()},new_notification:function(a){a.preventDefault();
if(0>=D.bb.account.available_alerts_count())return this.show_upgrade();var b=new D.bb.Notification({},{collection:this.collection}),d=b.form_view.render().$el.hide();d.data("related_view",this.$main_view);this.$main_view.fadeOut(_.bind(function(){d.appendTo(this.$el).fadeIn();b.form_view.cb_appended()},this))},show_error:function(a,b,d){this.$(".m-notifications-list").hide();this.$(".failure").show()},show_upgrade:function(){Backbone.history.navigate("upgrade/alerts",!0)},hide_error:function(a){return this.hide_section(".failure")},
hide_upgrade:function(a){return this.hide_section(".upgrade",!1)},hide_section:function(a,b){this.$(a).fadeOut(_.bind(function(){this.$(".m-notifications-list").fadeIn(_.bind(function(){b&&this.fetch_list()},this))},this))},remove_loading:function(){this.$el.removeClass("loading")},remove:function(){this.collection&&this.collection.each(function(a){a.form_view.remove();a.item_view.remove()});this.fetch_xhr&&this.fetch_xhr.abort();this.slider&&this.slider.destroy();D.bb.View.prototype.remove.apply(this)}});
_.extend(Ducksboard.Backbone.widget_tabs,{create_account:k,accounts:h,appearance:g,data_api:l,advanced:a,content:v,timespans:f,feedback:w,alerts:t})})();(function(){var e=D.Backbone.Model.extend({idAttribute:"token",url:function(){return"/api/widgets/"+this.widget.id+"/embed"},defaults:{token:void 0,date_created:void 0},initialize:function(e,h){this.widget=h.widget},isNew:function(){return!1}});_.extend(Ducksboard.Backbone,{WidgetEmbedToken:e})})();
(function(){var e=Backbone.Router.extend({routes:{"":"cleanup","dashboard/:slug":"change_dashboard","dashboard/id/:id":"change_dashboard_by_id","new/dashboard/:kind":"dashboard_new","new/widget/:kind_name":"widget_new","new/widget/:kind_name/:size":"widget_new",directory:"directory","directory/p:page":"directory","directory/service/:service_name":"directory_service","directory/service/:service_name/p:page":"directory_service","directory/:service/:group_name":"directory_group","service/:service":"service_directory",
"category/:category":"category_directory",custom:"custom_directory","custom/:category_name":"custom_directory_category","custom/:category_name/:group_name":"custom_directory_group","settings/dashboard":"dashboard_settings","settings/dashboard/:tab":"dashboard_settings","settings/account":"account_settings","settings/account/:tab":"account_settings","settings/widget/:id":"widget_settings","settings/widget/:id/:tab":"widget_settings","trial-expired":"trial_expired","subscription-expired":"subscription_expired",
support:"support",demo:"enterprise_demo",integration:"integration",tvmode:"tvmode","notice/:feature":"notice","upgrade/:feature":"upgrade","wizard/:kind(/:step)(/:service)":"wizard","Lower-prices-until-30-Sept":"oldies"},cleanup:function(){D.u.hide_tooltips();$.fancybox.close();D.Backbone.dashboards.current.widgets.purge();D.Backbone.services.purge();D.Backbone.directory.service_kinds.view.reset_search()},change_dashboard:function(e){$.fancybox.close();D.Backbone.dashboards.set_current(D.Backbone.dashboards.findWhere({slug:e}))},
change_dashboard_by_id:function(e){$.fancybox.close();D.Backbone.dashboards.set_current(D.Backbone.dashboards.get(e))},dashboard_new:function(e){if(!D.bb.account.get("readonly")&&D.d.interactive)if(!D.bb.account.get("has_trial_expired")||!1!==D.bb.account.get("is_beta")||_.contains(D.bb.account.get("serviceboards"),e)&&!D.bb.dashboards.serviceboard())if(!0!==D.bb.account.get("has_recurly_account_expired")||_.contains(D.bb.account.get("serviceboards"),e)&&!D.bb.dashboards.serviceboard())if(_.contains(D.bb.account.get("serviceboards"),
e)&&!D.bb.dashboards.serviceboard())this._show_dashboard_create_view(e);else if("developer"===D.bb.account.get("plan_label"))Backbone.history.navigate("upgrade/dashboard_count",!0);else{var h=D.bb.account.plan,f=Infinity,b=D.bb.dashboards.size();!D.bb.account.get("has_trial_account")&&"exempt"!==D.bb.account.get("status")&&h.get("features").create_dashboard&&(f=h.get("features").create_dashboard);(_.contains(D.bb.account.get("serviceboards"),e)||D.bb.dashboards.serviceboard())&&b--;"sinfonier"===
D.bb.account.get("plan_label")&&(f=h.get("features").create_dashboard);f<=b?Backbone.history.navigate("upgrade/dashboard_count",!0):this._show_dashboard_create_view(e)}else D.bb.account.subscription_expired_view.render();else D.bb.account.trial_expired_view.render(!0)},_show_dashboard_create_view:function(e){(new D.Backbone.dashboard_models[e]({background_label:"handcrafted wood",in_carousel:!1})).create_view.render()},widget_new:function(e,h){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&
D.d.interactive)if(!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard()&&!1===D.bb.account.get("is_beta"))D.bb.account.trial_expired_view.render(!0);else if(!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.subscription_expired_view.render();else{var f=D.Backbone.widget_kinds[e];if(f){var b=D.Backbone.service_kinds[f.prototype.service_kind];if(b){var g=D.bb.account.available_widgets_count(),a="custom"==
f.prototype.service_kind&&0>=g.custom;if(0>=g.total||a)a?Backbone.history.navigate("upgrade/custom_widget_count",!0):Backbone.history.navigate("upgrade/widget_count",!0);else if((g=D.Backbone.directory.service_kinds.get(b.prototype.kind))&&g.needs_upgrade())Backbone.history.navigate("upgrade/service",!0);else{width_height=h?h.split("x"):f.prototype.available_sizes[0];f=new f({width:width_height[0],height:width_height[1]},{dashboard:D.Backbone.dashboards.current,service:new b});D.Backbone.dashboards.current.widgets.add(f);
var d=new D.bb.WidgetSettingsView({model:f});D.u.super_modal(d.render(),{onComplete:function(){D.u.focus_on_first(d.$el)}})}}}}},directory:function(e){analytics.track("directory button");!0===D.bb.dashboards.current_kind_is_serviceboard()?Backbone.history.navigate("notice/directory_serviceboard",!0):D.bb.account.get("readonly")||D.bb.dashboards.current.kind.get("editable")&&D.d.interactive&&D.Backbone.directory.service_kinds.view.render(e)},directory_service:function(e,h){if(!D.bb.account.get("readonly")&&
D.bb.dashboards.current.kind.get("editable")&&D.d.interactive)if(!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard()&&!1===D.bb.account.get("is_beta"))D.bb.account.trial_expired_view.render(!0);else if(!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.subscription_expired_view.render();else{var f=D.Backbone.directory.service_kinds.get(e);f&&D.bb.directory.service_kinds.widgets_view.render(f,h)}},directory_group:function(e,
h){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive&&D.bb.directory.services.any(function(b){return b.get("service")===e}))if(0>=D.bb.account.available_widgets_count().total)Backbone.history.navigate("upgrade/widget_count",!0);else{var f=D.Backbone.directory.services.get(h);e=D.Backbone.directory.service_kinds.get(h);(f=f||e)&&(f.needs_upgrade()?Backbone.history.navigate("upgrade/service",!0):D.Backbone.directory.service_kinds.detail_view.render(f))}},
service_directory:function(e){D.bb.directory.services.any(function(h){return h.get("service")===e})?!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive&&(D.Backbone.directory.services.view.search_filters.service=e,D.Backbone.directory.services.view.reset_filter("category"),D.Backbone.directory.services.view.render(),D.Backbone.app.navigate("directory")):D.Backbone.app.navigate("directory",!0)},category_directory:function(e){D.bb.directory.services.any(function(h){return h.get("category")===
e})?!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive&&(D.Backbone.directory.services.view.search_filters.category=e,D.Backbone.directory.services.view.reset_filter("service"),D.Backbone.directory.services.view.render(),D.Backbone.app.navigate("directory")):D.Backbone.app.navigate("directory",!0)},custom_directory:function(){D.bb.account.get("readonly")||D.bb.dashboards.current.kind.get("editable")&&D.d.interactive&&D.Backbone.directory.custom_kinds.view.render()},
custom_directory_category:function(e){D.bb.account.get("readonly")||D.bb.dashboards.current.kind.get("editable")&&(!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard()&&!1===D.bb.account.get("is_beta")?D.bb.account.trial_expired_view.render(!0):!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard()?D.bb.account.subscription_expired_view.render():0>=D.bb.account.available_widgets_count().custom?Backbone.history.navigate("upgrade/custom_widget_count",
!0):D.Backbone.directory.custom.detail_view.render(e))},custom_directory_group:function(e,h){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive)if(!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard()&&!1===D.bb.account.get("is_beta"))D.bb.account.trial_expired_view.render(!0);else if(!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.subscription_expired_view.render();
else{var f=D.Backbone.directory.custom.get(h);f&&D.Backbone.directory.custom.detail_view.render(e,f)}},custom_directory_kind:function(e,h){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive)if(!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard()&&!1===D.bb.account.get("is_beta"))D.bb.account.trial_expired_view.render(!0);else if(!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.subscription_expired_view.render();
else{var f=D.Backbone.directory.custom.get(e);f&&D.Backbone.directory.custom.detail_view.render(category_name,f)}},dashboard_settings:function(e){analytics.track("dashboard settings button");D.bb.account.get("readonly")||D.d.interactive&&D.Backbone.dashboards.current.settings_view.render(e)},account_settings:function(e){analytics.track("account settings button");D.bb.account.get("readonly")||D.d.interactive&&("whitelabel"===D.bb.account.get("subscriber_kind")?(!1===D.bb.account.get("has_trial_expired")||
D.bb.account.get("is_beta"))&&D.Backbone.account.settings_view.render(e):!0===D.bb.account.get("has_trial_expired")?D.Backbone.account.disabled_settings_view.render("subscription"):!0===D.bb.account.get("has_recurly_account_expired")?D.Backbone.account.unpaid_settings_view.render("billing"):D.Backbone.account.settings_view.render(e))},widget_settings:function(e,h){if(!D.bb.account.get("readonly")&&D.bb.dashboards.current.kind.get("editable")&&D.d.interactive)if(!0===D.bb.account.get("has_trial_expired")&&
!1===D.bb.dashboards.current_is_chromeboard()&&!1===D.bb.account.get("is_beta"))D.bb.account.trial_expired_view.render(!0);else if(!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard())D.bb.account.subscription_expired_view.render();else{var f=D.Backbone.dashboards.current.widgets.get(e);f&&(f=new D.bb.WidgetSettingsView({model:f}),D.u.super_modal(f.render(h)))}},trial_expired:function(){D.bb.account.trial_expired_view.render()},subscription_expired:function(){D.bb.account.subscription_expired_view.render()},
support:function(){D.bb.account.get("readonly")||(new D.Backbone.SupportTicket).view.render()},enterprise_demo:function(){D.bb.account.get("readonly")||(new D.Backbone.SupportTicket({subject:"Enterprise Demo"})).view.render()},integration:function(){D.bb.account.get("readonly")||(!0===D.bb.account.get("has_trial_expired")&&!1===D.bb.dashboards.current_is_chromeboard()?D.bb.account.trial_expired_view.render(!0):!0===D.bb.account.get("has_recurly_account_expired")&&!1===D.bb.dashboards.current_is_chromeboard()?
D.bb.account.subscription_expired_view.render():(new D.Backbone.IntegrationTicket).view.render())},tvmode:function(){D.bb.account.has_tvmode()&&(D.bb.dashboards.current.view.switch_to_tvmode(),D.Backbone.app.navigate(""))},upgrade:function(e){e="sinfonier"===D.bb.account.get("plan_label")?"sinfonier":e;(e=Ducksboard.bb.upgrade[e])&&e.render()},notice:function(e){(e=Ducksboard.bb.notice[e])&&(new e).render()},wizard:function(e,h,f){h||(h="start");var b=D.bb.dashboards.current;b.has_widgets()&&"what_is_next"!==
h||(b.view.$welcome_widget&&b.view.hide_welcome(),(e=D.bb.wizard[e])&&(h=e[h])&&(new h).render({service:f}))}});_.extend(Ducksboard.Backbone,{app:new e})})();
//@ sourceMappingURL=/static/js/8b1bdcaae7ef.js.map