;(function(selectBoxIt){"use strict";selectBoxIt(window.jQuery,window,document);}(function($,window,document,undefined){"use strict";$.widget("selectBox.selectBoxIt",{VERSION:"3.3.0",options:{"showEffect":"none","showEffectOptions":{},"showEffectSpeed":"medium","hideEffect":"none","hideEffectOptions":{},"hideEffectSpeed":"medium","showFirstOption":true,"defaultText":"","defaultIcon":"","downArrowIcon":"","theme":"default","keydownOpen":true,"isMobile":function(){var ua=navigator.userAgent||navigator.vendor||window.opera;return(/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/).test(ua);},"native":false,"aggressiveChange":false,"selectWhenHidden":true,"viewport":$(window),"similarSearch":false,"copyAttributes":["title","rel"],"copyClasses":"button","nativeMousedown":false,"customShowHideEvent":false,"autoWidth":true,"html":true},"getThemes":function(){var self=this,theme=$(self.element).attr("data-theme")||"c";return{"bootstrap":{"focus":"active","hover":"","disabled":"disabled","arrow":"caret","button":"btn","list":"dropdown-menu","container":"bootstrap","open":"open"},"jqueryui":{"focus":"ui-state-focus","hover":"ui-state-hover","disabled":"ui-state-disabled","arrow":"ui-icon ui-icon-triangle-1-s","button":"ui-widget ui-state-default","list":"ui-widget ui-widget-content","container":"jqueryui","open":"selectboxit-open"},"jquerymobile":{"focus":"ui-btn-down-"+theme,"hover":"ui-btn-hover-"+theme,"disabled":"ui-disabled","arrow":"ui-icon ui-icon-arrow-d ui-icon-shadow","button":"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+theme,"list":"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+theme,"container":"jquerymobile","open":"selectboxit-open"},"default":{"focus":"selectboxit-focus","hover":"selectboxit-hover","disabled":"selectboxit-disabled","arrow":"selectboxit-default-arrow","button":"selectboxit-btn","list":"selectboxit-list","container":"selectboxit-container","open":"selectboxit-open"}};},_create:function(){var self=this;if(!self.element.is("select")){return;}self.element.hide();self.originalElem=self.element[0];self.selectBox=self.element;self.selectItems=self.element.find("option");self.firstSelectItem=self.selectItems.slice(0,1);self.documentHeight=$(document).height();self.theme=self.getThemes()[self.options["theme"]]||self.getThemes()["default"];self.currentFocus=0;self.blur=true;self.textArray=[];self.currentIndex=0;self.currentText="";self.flipped=false;self._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(self.theme)._eventHandlers();if(self.originalElem.disabled&&self.disable){self.disable();}if(self._ariaAccessibility){self._ariaAccessibility();}if(self._mobile){self._mobile();}if(self.options["native"]){this._applyNativeSelect();}self.triggerEvent("create");return self;},_createDropdownButton:function(){var self=this,originalElemId=self.originalElem.id||"",copyClasses=self.options["copyClasses"],selectboxClasses=self.selectBox.attr("class")||"";self.dropdownText=$("<span/>",{"id":originalElemId&&originalElemId+"SelectBoxItText","class":"selectboxit-text","unselectable":"on","text":self.firstSelectItem.text()}).attr("data-val",self.originalElem.value);self.dropdownImageContainer=$("<span/>",{"class":"selectboxit-option-icon-container"});self.dropdownImage=$("<i/>",{"id":originalElemId&&originalElemId+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon","unselectable":"on"});self.dropdown=$("<span/>",{"id":originalElemId&&originalElemId+"SelectBoxIt","class":"selectboxit "+(copyClasses==="button"?selectboxClasses:""),"name":self.originalElem.name,"tabindex":self.selectBox.attr("tabindex")||"0","unselectable":"on"}).append(self.dropdownImageContainer.append(self.dropdownImage)).append(self.dropdownText);self.dropdownContainer=$("<span/>",{"id":originalElemId&&originalElemId+"SelectBoxItContainer","class":"selectboxit-container "+(copyClasses==="container"?selectboxClasses:"")}).append(self.dropdown);return self;},_createUnorderedList:function(){var self=this,dataDisabled,optgroupClass,optgroupElement,iconClass,iconUrl,iconUrlClass,iconUrlStyle,currentItem="",originalElemId=self.originalElem.id||"",createdList=$("<ul/>",{"id":originalElemId&&originalElemId+"SelectBoxItOptions","class":"selectboxit-options","tabindex":-1}),currentDataText,currentText;if(!self.options["showFirstOption"]){self.selectItems=self.selectBox.find("option").slice(1);}self.selectItems.each(function(index){optgroupClass="";optgroupElement="";dataDisabled=$(this).prop("disabled");iconClass=$(this).data("icon")||"";iconUrl=$(this).data("iconurl")||"";iconUrlClass=iconUrl?"selectboxit-option-icon-url":"";iconUrlStyle=iconUrl?'style="background-image:url(\''+iconUrl+'\');"':"",currentDataText=$(this).attr("data-text"),currentText=currentDataText?currentDataText:$(this).text();if($(this).parent().is("optgroup")){optgroupClass="selectboxit-optgroup-option";if($(this).index()===0){optgroupElement='<span class="selectboxit-optgroup-header" data-disabled="true">'+$(this).parent().first().attr("label")+'</span>';}}currentItem+=optgroupElement+'<li id="'+index+'" data-val="'+this.value+'" data-disabled="'+dataDisabled+'" class="'+optgroupClass+" selectboxit-option "+($(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+iconClass+' '+(iconUrlClass||self.theme["container"])+'"'+iconUrlStyle+'></i></span>'+(self.options["html"]?currentText:self.htmlEscape(currentText))+'</a></li>';self.textArray[index]=dataDisabled?"":currentText;if(this.selected){self._setText(self.dropdownText,currentText);self.currentFocus=index;}});if((self.options["defaultText"]||self.selectBox.data("text"))&&!self.selectBox.find("option[selected]").length){var defaultedText=self.options["defaultText"]||self.selectBox.data("text");self._setText(self.dropdownText,defaultedText);self.options["defaultText"]=defaultedText;}createdList.append(currentItem);self.list=createdList;self.dropdownContainer.append(self.list);self.listItems=self.list.find("li");self.listItems.first().addClass("selectboxit-option-first");self.listItems.last().addClass("selectboxit-option-last");self.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(self.theme["disabled"]);self.dropdownImage.addClass(self.selectBox.data("icon")||self.options["defaultIcon"]||self.listItems.eq(self.currentFocus).find("i").attr("class"));self.dropdownImage.attr("style",self.listItems.eq(self.currentFocus).find("i").attr("style"));return self;},_replaceSelectBox:function(){var self=this,height,originalElemId=self.originalElem.id||"";self.selectBox.css("display","none").after(self.dropdownContainer);height=self.dropdown.height();self.downArrow=$("<i/>",{"id":originalElemId&&originalElemId+"SelectBoxItArrow","class":"selectboxit-arrow","unselectable":"on"});self.downArrowContainer=$("<span/>",{"id":originalElemId&&originalElemId+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container","unselectable":"on"}).append(self.downArrow);self.dropdown.append(self.downArrowContainer);self.listItems.removeClass("selectboxit-selected").eq(self.currentFocus).addClass("selectboxit-selected");if(!self.dropdownImageContainer.width()){self.dropdownImageContainer.remove();}if(self.options["autoWidth"]){self.dropdown.css({"width":"auto"}).css({"width":self.list.outerWidth(true)+self.downArrowContainer.outerWidth(true)+self.dropdownImage.outerWidth(true)});}self.dropdownText.css({"max-width":self.dropdownContainer.width()-(self.downArrowContainer.outerWidth(true)+self.dropdownImage.outerWidth(true))});return self;},_scrollToView:function(type){var self=this,currentOption=self.listItems.eq(self.currentFocus),listScrollTop=self.list.scrollTop(),currentItemHeight=currentOption.height(),currentTopPosition=currentOption.position().top,absCurrentTopPosition=Math.abs(currentTopPosition),listHeight=self.list.height(),currentText;if(type==="search"){if(listHeight-currentTopPosition<currentItemHeight){self.list.scrollTop(listScrollTop+(currentTopPosition-(listHeight-currentItemHeight)));}else if(currentTopPosition<-1){self.list.scrollTop(currentTopPosition-currentItemHeight);}}else if(type==="up"){if(currentTopPosition<-1){self.list.scrollTop(listScrollTop-absCurrentTopPosition);}}else if(type==="down"){if(listHeight-currentTopPosition<currentItemHeight){self.list.scrollTop((listScrollTop+(absCurrentTopPosition-listHeight+currentItemHeight)));}}return self;},_callbackSupport:function(callback){var self=this;if($.isFunction(callback)){callback.call(self,self.dropdown);}return self;},_setText:function(elem,currentText){var self=this;if(self.options["html"]){elem.html(currentText);}else{elem.text(currentText);}return self;},open:function(callback){var self=this,showEffect=self.options["showEffect"],showEffectSpeed=self.options["showEffectSpeed"],showEffectOptions=self.options["showEffectOptions"],isNative=self.options["native"],isMobile=self.options["isMobile"]();if(!self.listItems.length){return self;}if((!isNative&&!isMobile)&&!this.list.is(":visible")){self.triggerEvent("open");if(self._dynamicPositioning){self._dynamicPositioning();}if(showEffect==="none"){self.list.show();}else if(showEffect==="show"){self.list.show(showEffectSpeed);}else if(showEffect==="slideDown"){self.list.slideDown(showEffectSpeed);}else if(showEffect==="fadeIn"){self.list.fadeIn(showEffectSpeed);}else{self.list.show(showEffect,showEffectOptions,showEffectSpeed);}self.list.promise().done(function(){self._scrollToView("search");});}self._callbackSupport(callback);return self;},close:function(callback){var self=this,hideEffect=self.options["hideEffect"],hideEffectSpeed=self.options["hideEffectSpeed"],hideEffectOptions=self.options["hideEffectOptions"],isNative=self.options["native"],isMobile=self.options["isMobile"]();if((!isNative&&!isMobile)&&this.list.is(":visible")){self.triggerEvent("close");if(hideEffect==="none"){self.list.hide();}else if(hideEffect==="hide"){self.list.hide(hideEffectSpeed);}else if(hideEffect==="slideUp"){self.list.slideUp(hideEffectSpeed);}else if(hideEffect==="fadeOut"){self.list.fadeOut(hideEffectSpeed);}else{self.list.hide(hideEffect,hideEffectOptions,hideEffectSpeed);}}self._callbackSupport(callback);return self;},toggle:function(){var self=this,listIsVisible=self.list.is(":visible");if(listIsVisible){self.close();}else if(!listIsVisible){self.open();}},_keyMappings:{"38":"up","40":"down","13":"enter","8":"backspace","9":"tab","32":"space","27":"esc"},_keydownMethods:function(){var self=this,moveToOption=self.list.is(":visible")||!self.options["keydownOpen"];return{"down":function(){if(self.moveDown&&moveToOption){self.moveDown();}},"up":function(){if(self.moveUp&&moveToOption){self.moveUp();}},"enter":function(){var activeElem=self.list.find("li."+self.focusClass);if(!activeElem.length){activeElem=self.listItems.first();}self._update(activeElem);if(self.list.is(":visible")){self.close();}self.triggerEvent("enter");},"tab":function(){self.triggerEvent("tab-blur");self.close();},"backspace":function(){self.triggerEvent("backspace");},"esc":function(){self.close();}};},_eventHandlers:function(){var self=this,nativeMousedown=self.options["nativeMousedown"],customShowHideEvent=self.options["customShowHideEvent"],currentDataText,currentText;this.dropdown.bind({"click.selectBoxIt":function(){self.dropdown.trigger("focus",true);if(!self.originalElem.disabled){self.triggerEvent("click");if(!nativeMousedown&&!customShowHideEvent){self.toggle();}}},"mousedown.selectBoxIt":function(){$(this).data("mdown",true);self.triggerEvent("mousedown");if(nativeMousedown&&!customShowHideEvent){self.toggle();}},"mouseup.selectBoxIt":function(){self.triggerEvent("mouseup");},"blur.selectBoxIt":function(){if(self.blur){self.triggerEvent("blur");if(self.list.is(":visible")){self.close();}}},"focus.selectBoxIt":function(event,internal){var mdown=$(this).data("mdown");$(this).removeData("mdown");if(!mdown&&!internal){setTimeout(function(){self.triggerEvent("tab-focus");},0);}if(!internal){self.triggerEvent("focus");}},"keydown.selectBoxIt":function(e){var currentKey=self._keyMappings[e.keyCode],keydownMethod=self._keydownMethods()[currentKey];if(keydownMethod){keydownMethod();if(self.options["keydownOpen"]&&(currentKey==="up"||currentKey==="down")){self.open();}}if(keydownMethod&&currentKey!=="tab"){e.preventDefault();}},"keypress.selectBoxIt":function(e){var currentKey=e.charCode||e.keyCode,alphaNumericKey=String.fromCharCode(currentKey);if(self.search){self.search(alphaNumericKey,true,true);}if(currentKey===32){e.preventDefault();}},"mouseenter.selectBoxIt":function(){self.triggerEvent("mouseenter");},"mouseleave.selectBoxIt":function(){self.triggerEvent("mouseleave");}});self.list.bind({"mouseover.selectBoxIt":function(){self.blur=false;},"mouseout.selectBoxIt":function(){self.blur=true;},"focusin.selectBoxIt":function(){self.dropdown.trigger("focus",true);}}).delegate("li","click.selectBoxIt",function(){self._update($(this));self.triggerEvent("option-click");if($(this).attr("data-disabled")==="false"){self.close();}}).delegate("li","focusin.selectBoxIt",function(){self.listItems.not($(this)).removeAttr("data-active");$(this).attr("data-active","");var listIsHidden=self.list.is(":hidden");if((self.options["searchWhenHidden"]&&listIsHidden)||self.options["aggressiveChange"]||(listIsHidden&&self.options["selectWhenHidden"])){self._update($(this));}}).delegate("li","mouseup.selectBoxIt",function(){if(nativeMousedown&&!customShowHideEvent){self._update($(this));self.triggerEvent("option-mouseup");if($(this).attr("data-disabled")==="false"){self.close();}}});self.selectBox.bind({"change.selectBoxIt, internal-change.selectBoxIt":function(event,internal){var currentOption;if(!internal){currentOption=self.list.find('li[data-val="'+self.originalElem.value+'"]');if(currentOption.length){self.listItems.eq(self.currentFocus).removeClass(self.focusClass);self.currentFocus=+currentOption.attr("id");}}currentOption=self.listItems.eq(self.currentFocus);currentDataText=currentOption.attr("data-text");currentText=currentDataText?currentDataText:currentOption.find("a").text();self._setText(self.dropdownText,currentText);self.dropdownText.attr("data-val",self.originalElem.value);if(currentOption.find("i").attr("class")){self.dropdownImage.attr("class",currentOption.find("i").attr("class")).addClass("selectboxit-default-icon");self.dropdownImage.attr("style",currentOption.find("i").attr("style"));}self.triggerEvent("changed");},"disable.selectBoxIt":function(){self.dropdown.addClass(self.theme["disabled"]);},"enable.selectBoxIt":function(){self.dropdown.removeClass(self.theme["disabled"]);}});return self;},_update:function(elem){var self=this,currentDataText,currentText,defaultText=self.options["defaultText"]||self.selectBox.attr("data-text");if(elem.attr("data-disabled")==="false"){currentDataText=self.listItems.eq(self.currentFocus).attr("data-text");currentText=currentDataText?currentDataText:self.listItems.eq(self.currentFocus).text();if((defaultText&&self.options["html"]?self.dropdownText.html()===defaultText:self.dropdownText.text()===defaultText)&&self.selectBox.val()===elem.attr("data-val")){self._setText(self.dropdownText,currentText);self.dropdownText.trigger("internal-change");}else{self.selectBox.val(elem.attr("data-val"));self.currentFocus=+elem.attr("id");if(self.originalElem.value!==self.dropdownText.attr("data-val")){self.triggerEvent("change");}}}},_addClasses:function(obj){var self=this,focusClass=obj.focus,hoverClass=obj.hover,buttonClass=obj.button,listClass=obj.list,arrowClass=obj.arrow,containerClass=obj.container,openClass=obj.open;self.focusClass=focusClass;self.openClass=openClass;self.selectedClass="selectboxit-selected";self.downArrow.addClass(self.selectBox.data("downarrow")||self.options["downArrowIcon"]||arrowClass);self.dropdownContainer.addClass(containerClass);self.dropdown.addClass(buttonClass);self.list.addClass(listClass);self.listItems.bind({"focusin.selectBoxIt":function(){$(this).addClass(focusClass);},"blur.selectBoxIt":function(){$(this).removeClass(focusClass);}});self.selectBox.bind({"open.selectBoxIt":function(){var currentElem=self.list.find("li[data-val='"+self.dropdownText.attr("data-val")+"']"),activeElem;if(!currentElem.length){if(self.currentFocus===0&&!self.options["showFirstOption"]&&self.listItems.eq(0).hasClass(self.theme["disabled"])){currentElem=self.listItems.not("[data-disabled=true]").first();}else{currentElem=self.listItems.first();}}self.currentFocus=+currentElem.attr("id");activeElem=self.listItems.eq(self.currentFocus);self.dropdown.addClass(openClass);self.dropdown.removeClass(hoverClass).addClass(focusClass);self.listItems.removeClass(self.selectedClass);self.listItems.removeAttr("data-active").not(activeElem).removeClass(focusClass);activeElem.addClass(focusClass).addClass(self.selectedClass);},"close.selectBoxIt":function(){self.dropdown.removeClass(openClass);},"blur.selectBoxIt":function(){self.dropdown.removeClass(focusClass);},"mouseenter.selectBoxIt":function(){self.dropdown.addClass(hoverClass);},"mouseleave.selectBoxIt":function(){self.dropdown.removeClass(hoverClass);}});self.listItems.bind({"mouseenter.selectBoxIt":function(){if($(this).attr("data-disabled")==="false"){self.listItems.removeAttr("data-active");$(this).addClass(focusClass).attr("data-active","");self.listItems.not($(this)).removeClass(focusClass);$(this).addClass(focusClass);self.currentFocus=+$(this).attr("id");}},"mouseleave.selectBoxIt":function(){if($(this).attr("data-disabled")==="false"){self.listItems.not($(this)).removeClass(focusClass).removeAttr("data-active");$(this).addClass(focusClass);self.currentFocus=+$(this).attr("id");}}});return self;},refresh:function(callback){var self=this;if(self._destroySelectBoxIt){self._destroySelectBoxIt()._create(true)._callbackSupport(callback);self.triggerEvent("refresh");}return self;},htmlEscape:function(str){return String(str).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");},triggerEvent:function(eventName){var self=this,currentIndex=self.options["showFirstOption"]?self.currentFocus:((self.currentFocus-1)>=0?self.currentFocus:0);self.selectBox.trigger(eventName,{"elem":self.selectBox.eq(currentIndex),"dropdown-elem":self.listItems.eq(self.currentFocus)});return self;},_copyAttributes:function(){var self=this;if(self._addSelectBoxAttributes){self._addSelectBoxAttributes();}return self;}});var selectBoxIt=$.selectBox.selectBoxIt.prototype;selectBoxIt._ariaAccessibility=function(){var self=this;self.dropdown.attr({"role":"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":self.list.attr("id"),"aria-activedescendant":self.listItems.eq(self.currentFocus).attr("id"),"aria-label":$("label[for='"+self.originalElem.id+"']").text()||"","aria-live":"assertive"}).bind({"disable.selectBoxIt":function(){self.dropdown.attr("aria-disabled","true");},"enable.selectBoxIt":function(){self.dropdown.attr("aria-disabled","false");}});self.list.attr({"role":"listbox","aria-hidden":"true"});self.listItems.attr({"role":"option"});self.selectBox.bind({"change.selectBoxIt":function(){self.dropdownText.attr("aria-label",self.originalElem.value);},"open.selectBoxIt":function(){self.list.attr("aria-hidden","false");self.dropdown.attr("aria-expanded","true");},"close.selectBoxIt":function(){self.list.attr("aria-hidden","true");self.dropdown.attr("aria-expanded","false");}});return self;};selectBoxIt._addSelectBoxAttributes=function(){var self=this;self._addAttributes(self.selectBox.prop("attributes"),self.dropdown);self.selectItems.each(function(iterator){self._addAttributes($(this).prop("attributes"),self.listItems.eq(iterator));});return self;};$.selectBox.selectBoxIt.prototype._addAttributes=function(arr,elem){var self=this,whitelist=self.options["copyAttributes"];if(arr.length){$.each(arr,function(iterator,property){var propName=(property.name).toLowerCase(),propValue=property.value;if(propValue!=="null"&&($.inArray(propName,whitelist)!==-1||propName.indexOf("data")!==-1)){elem.attr(propName,propValue);}});}return self;};selectBoxIt.destroy=function(callback){var self=this;self._destroySelectBoxIt();$.Widget.prototype.destroy.call(self);self._callbackSupport(callback);return self;};selectBoxIt._destroySelectBoxIt=function(){var self=this;self.dropdown.unbind(".selectBoxIt").undelegate(".selectBoxIt");if($.contains(self.dropdownContainer[0],self.originalElem)){self.dropdownContainer.before(self.selectBox);}self.dropdownContainer.remove();self.selectBox.removeAttr("style").show();self.triggerEvent("destroy");return self;};selectBoxIt.disable=function(callback){var self=this;if(!self.options["disabled"]){self.close();self.selectBox.attr("disabled","disabled");self.dropdown.removeAttr("tabindex").addClass("selectboxit-disabled");$.Widget.prototype.disable.call(self);self.triggerEvent("disable");}self._callbackSupport(callback);return self;};selectBoxIt.disableOption=function(index,callback){var self=this,currentSelectBoxOption,hasNextEnabled,hasPreviousEnabled;if((typeof index).toLowerCase()==="number"){self.close();currentSelectBoxOption=self.selectBox.find("option").eq(index);self.triggerEvent("disable-option");currentSelectBoxOption.attr("disabled","disabled");self.listItems.eq(index).attr("data-disabled","true").addClass(self.theme["disabled"]);if(self.currentFocus===index){hasNextEnabled=self.listItems.eq(self.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;hasPreviousEnabled=self.listItems.eq(self.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(hasNextEnabled){self.moveDown();}else if(hasPreviousEnabled){self.moveUp();}else{self.disable();}}}self._callbackSupport(callback);return self;};selectBoxIt._isDisabled=function(callback){var self=this;if(self.originalElem.disabled){self.disable();}return self;};selectBoxIt._dynamicPositioning=function(){var self=this,listOffsetTop=self.dropdown.offset().top,listHeight=self.list.data("max-height")||self.list.outerHeight(),selectBoxHeight=self.dropdown.outerHeight(),viewport=self.options["viewport"],viewportHeight=viewport.height(),viewportScrollTop=$.isWindow(viewport.get(0))?viewport.scrollTop():viewport.offset().top,topToBottom=(listOffsetTop+selectBoxHeight+listHeight<=viewportHeight+viewportScrollTop),bottomReached=!topToBottom;if(!self.list.data("max-height")){self.list.data("max-height",self.list.outerHeight());}if(!bottomReached){self.list.css("max-height",listHeight);self.list.css("top","auto");}else if((self.dropdown.offset().top-viewportScrollTop)>=listHeight){self.list.css("max-height",listHeight);self.list.css("top",(self.dropdown.position().top-self.list.outerHeight()));}else{var outsideBottomViewport=Math.abs((listOffsetTop+selectBoxHeight+listHeight)-(viewportHeight+viewportScrollTop)),outsideTopViewport=Math.abs((self.dropdown.offset().top-viewportScrollTop)-listHeight);if(outsideBottomViewport<outsideTopViewport){self.list.css("max-height",listHeight-outsideBottomViewport-(selectBoxHeight/2));self.list.css("top","auto");}else{self.list.css("max-height",listHeight-outsideTopViewport-(selectBoxHeight/2));self.list.css("top",(self.dropdown.position().top-self.list.outerHeight()));}}return self;};selectBoxIt.enable=function(callback){var self=this;if(self.options["disabled"]){self.triggerEvent("enable");self.selectBox.removeAttr("disabled");self.dropdown.attr("tabindex",0).removeClass(self.disabledClasses);$.Widget.prototype.enable.call(self);self._callbackSupport(callback);}return self;};selectBoxIt.enableOption=function(index,callback){var self=this,currentSelectBoxOption,currentIndex=0,hasNextEnabled,hasPreviousEnabled;if((typeof index).toLowerCase()==="number"){currentSelectBoxOption=self.selectBox.find("option").eq(index);self.triggerEvent("enable-option");currentSelectBoxOption.removeAttr("disabled");self.listItems.eq(index).attr("data-disabled","false").removeClass(self.disabledClasses);}self._callbackSupport(callback);return self;};selectBoxIt.moveDown=function(callback){var self=this;self.currentFocus+=1;var disabled=self.listItems.eq(self.currentFocus).attr("data-disabled")==="true"?true:false,hasNextEnabled=self.listItems.eq(self.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(self.currentFocus===self.listItems.length){self.currentFocus-=1;}else if(disabled&&hasNextEnabled){self.listItems.eq(self.currentFocus-1).blur();self.moveDown();return;}else if(disabled&&!hasNextEnabled){self.currentFocus-=1;}else{self.listItems.eq(self.currentFocus-1).blur().end().eq(self.currentFocus).focusin();self._scrollToView("down");self.triggerEvent("moveDown");}self._callbackSupport(callback);return self;};selectBoxIt.moveUp=function(callback){var self=this;self.currentFocus-=1;var disabled=self.listItems.eq(self.currentFocus).attr("data-disabled")==="true"?true:false,hasPreviousEnabled=self.listItems.eq(self.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(self.currentFocus===-1){self.currentFocus+=1;}else if(disabled&&hasPreviousEnabled){self.listItems.eq(self.currentFocus+1).blur();self.moveUp();return;}else if(disabled&&!hasPreviousEnabled){self.currentFocus+=1;}else{self.listItems.eq(this.currentFocus+1).blur().end().eq(self.currentFocus).focusin();self._scrollToView("up");self.triggerEvent("moveUp");}self._callbackSupport(callback);return self;};selectBoxIt._setCurrentSearchOption=function(currentOption){var self=this;if((self.options["aggressiveChange"]||self.options["selectWhenHidden"]||self.listItems.eq(currentOption).is(":visible"))&&self.listItems.eq(currentOption).data("disabled")!==true){self.listItems.eq(self.currentFocus).blur();self.currentIndex=currentOption;self.currentFocus=currentOption;self.listItems.eq(self.currentFocus).focusin();self._scrollToView("search");self.triggerEvent("search");}return self;};selectBoxIt._searchAlgorithm=function(currentIndex,alphaNumeric){var self=this,matchExists=false,x,y,arrayLength,currentSearch,textArray=self.textArray,currentText=self.currentText;for(x=currentIndex,arrayLength=textArray.length;x<arrayLength;x+=1){currentSearch=textArray[x];for(y=0;y<arrayLength;y+=1){if(textArray[y].search(alphaNumeric)!==-1){matchExists=true;y=arrayLength;}}if(!matchExists){self.currentText=self.currentText.charAt(self.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0");currentText=self.currentText;}alphaNumeric=new RegExp(currentText,"gi");if(currentText.length<3){alphaNumeric=new RegExp(currentText.charAt(0),"gi");if((currentSearch.charAt(0).search(alphaNumeric)!==-1)){self._setCurrentSearchOption(x);if((currentSearch.substring(0,currentText.length).toLowerCase()!==currentText.toLowerCase())||self.options["similarSearch"]){self.currentIndex+=1;}return false;}}else{if((currentSearch.search(alphaNumeric)!==-1)){self._setCurrentSearchOption(x);return false;}}if(currentSearch.toLowerCase()===self.currentText.toLowerCase()){self._setCurrentSearchOption(x);self.currentText="";return false;}}return true;};selectBoxIt.search=function(alphaNumericKey,callback,rememberPreviousSearch){var self=this;if(rememberPreviousSearch){self.currentText+=alphaNumericKey.replace(/[|()\[{.+*?$\\]/g,"\\$0");}else{self.currentText=alphaNumericKey.replace(/[|()\[{.+*?$\\]/g,"\\$0");}var searchResults=self._searchAlgorithm(self.currentIndex,new RegExp(self.currentText,"gi"));if(searchResults){self._searchAlgorithm(0,self.currentText);}self._callbackSupport(callback);return self;};selectBoxIt._applyNativeSelect=function(){var self=this,currentOption,currentDataText,currentText;self.dropdownContainer.append(self.selectBox);self.selectBox.css({"display":"block","width":self.dropdown.outerWidth(),"height":self.dropdown.outerHeight(),"opacity":"0","position":"absolute","top":"0","left":"0","cursor":"pointer","z-index":"999999","margin":self.dropdown.css("margin"),"padding":"0","-webkit-appearance":"menulist-button"}).bind({"changed.selectBoxIt":function(){currentOption=self.selectBox.find("option").filter(":selected");currentDataText=currentOption.attr("data-text");currentText=currentDataText?currentDataText:currentOption.text();self._setText(self.dropdownText,currentText);if(self.list.find('li[data-val="'+currentOption.val()+'"]').find("i").attr("class")){self.dropdownImage.attr("class",self.list.find('li[data-val="'+currentOption.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon");}}});};selectBoxIt._mobile=function(callback){var self=this;if(self.options["isMobile"]()){self._applyNativeSelect();}return this;};selectBoxIt.selectOption=function(val,callback){var self=this;if((typeof val).toLowerCase()==="number"){self.selectBox.val(self.selectBox.find("option").eq(val).val()).change();}else if((typeof val).toLowerCase()==="string"){self.selectBox.val(val).change();}self._callbackSupport(callback);return self;};selectBoxIt.setOption=function(key,value,callback){var self=this,firstOption=self.listItems.eq(0);if(key==="showFirstOption"&&!value){firstOption.hide();}else if(key==="showFirstOption"&&value){firstOption.show();}else if(key==="defaultIcon"&&value){self.dropdownImage.attr("class",value+" selectboxit-arrow");}else if(key==="downArrowIcon"&&value){self.downArrow.attr("class",value+" selectboxit-arrow");}else if(key==="defaultText"){self._setText(self.dropdownText,value);}$.Widget.prototype._setOption.apply(self,arguments);self._callbackSupport(callback);return self;};selectBoxIt.setOptions=function(newOptions,callback){var self=this,firstOption=self.listItems.eq(0);$.Widget.prototype._setOptions.apply(self,arguments);if(self.options["showFirstOption"]){firstOption.show();}else{firstOption.hide();}if(self.options["defaultIcon"]){self.dropdownImage.attr("class",self.options["defaultIcon"]+" selectboxit-arrow");}if(self.options["downArrowIcon"]){self.downArrow.attr("class",self.options["downArrowIcon"]+" selectboxit-arrow");}if(self.options["defaultText"]){self._setText(self.dropdownText,self.options["defaultText"]);}self._callbackSupport(callback);return self;};selectBoxIt.wait=function(time,callback){var self=this,timeout=this.returnTimeout(time);timeout.then(function(){self._callbackSupport(callback);});return self;};selectBoxIt.returnTimeout=function(time){return $.Deferred(function(dfd){setTimeout(dfd.resolve,time);});};}));